var sq=Object.defineProperty,oq=Object.defineProperties,aq=Object.getOwnPropertyDescriptors,ST=Object.getOwnPropertySymbols,BF=Object.prototype.hasOwnProperty,jF=Object.prototype.propertyIsEnumerable,VF=(nt,Ie,P)=>Ie in nt?sq(nt,Ie,{enumerable:!0,configurable:!0,writable:!0,value:P}):nt[Ie]=P,xt=(nt,Ie)=>{for(var P in Ie||(Ie={}))BF.call(Ie,P)&&VF(nt,P,Ie[P]);if(ST)for(var P of ST(Ie))jF.call(Ie,P)&&VF(nt,P,Ie[P]);return nt},Jr=(nt,Ie)=>oq(nt,aq(Ie)),$F=nt=>"symbol"==typeof nt?nt:nt+"",IP=(nt,Ie)=>{var P={};for(var m in nt)BF.call(nt,m)&&Ie.indexOf(m)<0&&(P[m]=nt[m]);if(null!=nt&&ST)for(var m of ST(nt))Ie.indexOf(m)<0&&jF.call(nt,m)&&(P[m]=nt[m]);return P};(self.webpackChunkfamily_tree_akita=self.webpackChunkfamily_tree_akita||[]).push([[179],{2011:(nt,Ie,P)=>{"use strict";P.d(Ie,{hO:()=>Ve,xv:()=>_e,Dh:()=>de,GT:()=>Ee,cc:()=>Me,on:()=>j,pX:()=>ye});var m=P(5e3),F=P(127),N=P(4027);nt=P.hmd(nt);const oe=["ngOnDestroy"],ye=(se,Le,Ne,ce={})=>new Proxy(se,{get:(De,we)=>Ne.runOutsideAngular(()=>{var Xe;if(se[we])return(null===(Xe=null==ce?void 0:ce.spy)||void 0===Xe?void 0:Xe.get)&&ce.spy.get(we,se[we]),se[we];if(oe.indexOf(we)>-1)return()=>{};const X=Le.toPromise().then(ht=>{const Y=ht&&ht[we];return"function"==typeof Y?Y.bind(ht):Y&&Y.then?Y.then(me=>Ne.run(()=>me)):Ne.run(()=>Y)});return new Proxy(()=>{},{get:(ht,Y)=>X[Y],apply:(ht,Y,me)=>X.then(ue=>{var pe;const He=ue&&ue(...me);return(null===(pe=null==ce?void 0:ce.spy)||void 0===pe?void 0:pe.apply)&&ce.spy.apply(we,me,He),He})})})}),Ee=(se,Le)=>{Le.forEach(Ne=>{Object.getOwnPropertyNames(Ne.prototype||Ne).forEach(ce=>{Object.defineProperty(se.prototype,ce,Object.getOwnPropertyDescriptor(Ne.prototype||Ne,ce))})})};class ae{constructor(Le){return Le}}const de=new m.OlP("angularfire2.app.options"),_e=new m.OlP("angularfire2.app.name");function j(se,Le,Ne){const De="object"==typeof Ne&&Ne||{};De.name=De.name||"string"==typeof Ne&&Ne||"[DEFAULT]";const Xe=F.Z.apps.filter(X=>X&&X.name===De.name)[0]||Le.runOutsideAngular(()=>F.Z.initializeApp(se,De));try{JSON.stringify(se)!==JSON.stringify(Xe.options)&&V("error",`${Xe.name} Firebase App already initialized with different options${nt.hot?", you may need to reload as Firebase is not HMR aware.":"."}`)}catch(X){}return new ae(Xe)}const V=(se,...Le)=>{(0,m.X6Q)()&&"undefined"!=typeof console&&console[se](...Le)},Q={provide:ae,useFactory:j,deps:[de,m.R0b,[new m.FiY,_e]]};let Ve=(()=>{class se{constructor(Ne){F.Z.registerVersion("angularfire",N.q4.full,"core"),F.Z.registerVersion("angularfire",N.q4.full,"app-compat"),F.Z.registerVersion("angular",m.q4F.full,Ne.toString())}static initializeApp(Ne,ce){return{ngModule:se,providers:[{provide:de,useValue:Ne},{provide:_e,useValue:ce}]}}}return se.\u0275fac=function(Ne){return new(Ne||se)(m.LFG(m.Lbi))},se.\u0275mod=m.oAB({type:se}),se.\u0275inj=m.cJS({providers:[Q]}),se})();function Me(se,Le,Ne,ce,De){const[,we,Xe]=globalThis.\u0275AngularfireInstanceCache.find(X=>X[0]===se)||[];if(we)return function $e(se,Le){try{return se.toString()===Le.toString()}catch(Ne){return se===Le}}(De,Xe)||(q("error",`${Le} was already initialized on the ${Ne} Firebase App with different settings.${Ue?" You may need to reload as Firebase is not HMR aware.":""}`),q("warn",{is:De,was:Xe})),we;{const X=ce();return globalThis.\u0275AngularfireInstanceCache.push([se,X,De]),X}}const Ue=!!nt.hot,q=(se,...Le)=>{(0,m.X6Q)()&&"undefined"!=typeof console&&console[se](...Le)};globalThis.\u0275AngularfireInstanceCache||(globalThis.\u0275AngularfireInstanceCache=[])},4027:(nt,Ie,P)=>{"use strict";P.d(Ie,{q4:()=>q,iC:()=>In,HU:()=>Pt,vb:()=>ue,JM:()=>me,nk:()=>Y,n1:()=>X,_J:()=>ht,u3:()=>Ut});var m=P(5e3),F=P(5867),N=P(3226),oe=P(2375),ye=P(6148),Ee=P(4408),de=P(7565);const j=new class _e extends de.v{}(class ae extends Ee.o{constructor(_t,yt){super(_t,yt),this.scheduler=_t,this.work=yt}schedule(_t,yt=0){return yt>0?super.schedule(_t,yt):(this.delay=yt,this.state=_t,this.scheduler.flush(this),this)}execute(_t,yt){return yt>0||this.closed?super.execute(_t,yt):this._execute(_t,yt)}requestAsyncId(_t,yt,zt=0){return null!=zt&&zt>0||null==zt&&this.delay>0?super.requestAsyncId(_t,yt,zt):_t.flush(this)}});var Q=P(4986),Ve=P(8306),Me=P(8505),$e=P(9468),Ue=P(5363);const q=new m.GfV("7.2.1"),se="__angularfire_symbol__analyticsIsSupportedValue",Le="__angularfire_symbol__analyticsIsSupported",Ne="__angularfire_symbol__remoteConfigIsSupportedValue",ce="__angularfire_symbol__remoteConfigIsSupported",De="__angularfire_symbol__messagingIsSupportedValue",we="__angularfire_symbol__messagingIsSupported";globalThis[Le]||(globalThis[Le]=(0,ye.Gb)().then(Ge=>globalThis[se]=Ge).catch(()=>globalThis[se]=!1)),globalThis[we]||(globalThis[we]=(0,oe.Gb)().then(Ge=>globalThis[De]=Ge).catch(()=>globalThis[De]=!1)),globalThis[ce]||(globalThis[ce]=(0,N.Gb)().then(Ge=>globalThis[Ne]=Ge).catch(()=>globalThis[Ne]=!1));const Xe=Ge=>`The APP_INITIALIZER that is "making" isSupported() sync for the sake of convenient DI has not resolved in this\ncontext. Rather than injecting ${Ge} in the constructor, first ensure that ${Ge} is supported by calling\n\`await isSupported()\`, then retrieve the instance from the injector manually \`injector.get(${Ge})\`.`,X={async:()=>globalThis[we],sync:()=>{const Ge=globalThis[De];if(void 0===Ge)throw new Error(Xe("Messaging"));return Ge}},ht={async:()=>globalThis[ce],sync:()=>{const Ge=globalThis[Ne];if(void 0===Ge)throw new Error(Xe("RemoteConfig"));return Ge}},Y={async:()=>globalThis[Le],sync:()=>{const Ge=globalThis[se];if(void 0===Ge)throw new Error(Xe("Analytics"));return Ge}};function me(Ge,_t,yt){if(_t){if(1===_t.length)return _t[0];const en=_t.filter(Sn=>Sn.app===yt);if(1===en.length)return en[0]}return yt.container.getProvider(Ge).getImmediate({optional:!0})}const ue=(Ge,_t)=>{const yt=_t?[_t]:(0,F.C6)(),zt=[];return yt.forEach(nn=>{nn.container.getProvider(Ge).instances.forEach(Sn=>{zt.includes(Sn)||zt.push(Sn)})}),zt};function pe(){}class He{constructor(_t,yt=j){this.zone=_t,this.delegate=yt}now(){return this.delegate.now()}schedule(_t,yt,zt){const nn=this.zone;return this.delegate.schedule(function(Sn){nn.runGuarded(()=>{_t.apply(this,[Sn])})},yt,zt)}}class le{constructor(_t){this.zone=_t,this.task=null}call(_t,yt){const zt=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",pe,{},pe,pe)),yt.pipe((0,Me.b)({next:zt,complete:zt,error:zt})).subscribe(_t).add(zt)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}let Pt=(()=>{class Ge{constructor(yt){this.ngZone=yt,this.outsideAngular=yt.runOutsideAngular(()=>new He(Zone.current)),this.insideAngular=yt.run(()=>new He(Zone.current,Q.z)),globalThis.\u0275AngularFireScheduler||(globalThis.\u0275AngularFireScheduler=this)}}return Ge.\u0275fac=function(yt){return new(yt||Ge)(m.LFG(m.R0b))},Ge.\u0275prov=m.Yz7({token:Ge,factory:Ge.\u0275fac,providedIn:"root"}),Ge})();function Ht(){const Ge=globalThis.\u0275AngularFireScheduler;if(!Ge)throw new Error("Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using\nprovideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).");return Ge}function wn(Ge){return Ht().ngZone.runOutsideAngular(()=>Ge())}function ct(Ge){return Ht().ngZone.run(()=>Ge())}function In(Ge){return Ht(),function qn(Ge){return function(yt){return(yt=yt.lift(new le(Ge.ngZone))).pipe((0,$e.R)(Ge.outsideAngular),(0,Ue.Q)(Ge.insideAngular))}}(Ht())(Ge)}const Gt=(Ge,_t)=>function(){const zt=arguments;return _t&&setTimeout(()=>{"scheduled"===_t.state&&_t.invoke()},10),ct(()=>Ge.apply(void 0,zt))},Ut=(Ge,_t)=>function(){let yt;const zt=arguments;for(let en=0;en<arguments.length;en++)"function"==typeof zt[en]&&(_t&&(yt||(yt=ct(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",pe,{},pe,pe)))),zt[en]=Gt(zt[en],yt));const nn=wn(()=>Ge.apply(this,zt));if(!_t){if(nn instanceof Ve.y){const en=Ht();return nn.pipe((0,$e.R)(en.outsideAngular),(0,Ue.Q)(en.insideAngular))}return ct(()=>nn)}return nn instanceof Ve.y?nn.pipe(In):nn instanceof Promise?ct(()=>new Promise((en,Sn)=>nn.then(On=>ct(()=>en(On)),On=>ct(()=>Sn(On))))):"function"==typeof nn&&yt?function(){return setTimeout(()=>{yt&&"scheduled"===yt.state&&yt.invoke()},10),nn.apply(this,arguments)}:ct(()=>nn)}},4929:(nt,Ie,P)=>{"use strict";P.d(Ie,{$:()=>sg,A:()=>V,E:()=>U,G:()=>pn,I:()=>Ws,K:()=>ot,L:()=>ng,M:()=>F_,N:()=>Fu,P:()=>Al,Q:()=>ul,R:()=>B0,T:()=>is,U:()=>Ra,V:()=>U_,W:()=>k0,X:()=>Xr,Y:()=>fl,Z:()=>_i,_:()=>Gs,a:()=>kt,a0:()=>B_,a1:()=>j_,a2:()=>We,a3:()=>O0,a4:()=>_l,a5:()=>ss,a6:()=>yh,a7:()=>F0,a8:()=>og,a9:()=>qs,aA:()=>Ro,aB:()=>Ml,aC:()=>Ye,aG:()=>cr,aJ:()=>Lu,aa:()=>Ma,ab:()=>$_,ae:()=>Eh,af:()=>W_,ag:()=>wh,aj:()=>ig,ak:()=>K_,am:()=>bh,an:()=>Il,ao:()=>ar,ap:()=>Y,aq:()=>sn,ar:()=>vt,as:()=>Ne,at:()=>Bh,au:()=>Fl,av:()=>ce,aw:()=>X,ax:()=>ue,ay:()=>tt,az:()=>ls,b:()=>ur,c:()=>rc,d:()=>Rs,e:()=>j0,f:()=>X_,g:()=>oc,h:()=>kl,i:()=>Ds,j:()=>$0,k:()=>Ps,l:()=>_r,m:()=>ry,n:()=>Ag,o:()=>de,r:()=>tc,s:()=>As,t:()=>tr,u:()=>as,z:()=>Me});var m=P(5861),F=P(2090),N=P(9681),oe=P(655),ye=P(1877),Ee=P(4859);const de={FACEBOOK:"facebook.com",GITHUB:"github.com",GOOGLE:"google.com",PASSWORD:"password",PHONE:"phone",TWITTER:"twitter.com"},V={EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"};const Me=function Q(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance."}},$e=function Ve(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},Ue=new F.LL("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),se=new ye.Yd("@firebase/auth");function Le(E,...p){se.logLevel<=ye.in.ERROR&&se.error(`Auth (${N.SDK_VERSION}): ${E}`,...p)}function Ne(E,...p){throw Xe(E,...p)}function ce(E,...p){return Xe(E,...p)}function De(E,p,_){const I=Object.assign(Object.assign({},$e()),{[p]:_});return new F.LL("auth","Firebase",I).create(p,{appName:E.name})}function we(E,p,_){if(!(p instanceof _))throw _.name!==p.constructor.name&&Ne(E,"argument-error"),De(E,"argument-error",`Type of ${p.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function Xe(E,...p){if("string"!=typeof E){const _=p[0],I=[...p.slice(1)];return I[0]&&(I[0].appName=E.name),E._errorFactory.create(_,...I)}return Ue.create(E,...p)}function X(E,p,..._){if(!E)throw Xe(p,..._)}function ht(E){const p="INTERNAL ASSERTION FAILED: "+E;throw Le(p),new Error(p)}function Y(E,p){E||ht(p)}const me=new Map;function ue(E){Y(E instanceof Function,"Expected a class definition");let p=me.get(E);return p?(Y(p instanceof E,"Instance stored in cache mismatched with class"),p):(p=new E,me.set(E,p),p)}function le(){var E;return"undefined"!=typeof self&&(null===(E=self.location)||void 0===E?void 0:E.href)||""}function Pt(){return"http:"===Ht()||"https:"===Ht()}function Ht(){var E;return"undefined"!=typeof self&&(null===(E=self.location)||void 0===E?void 0:E.protocol)||null}class mt{constructor(p,_){this.shortDelay=p,this.longDelay=_,Y(_>p,"Short delay should be less than long delay!"),this.isMobile=(0,F.uI)()||(0,F.b$)()}get(){return function wn(){return!("undefined"!=typeof navigator&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(Pt()||(0,F.ru)()||"connection"in navigator))||navigator.onLine}()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function Xt(E,p){Y(E.emulator,"Emulator should always be set here");const{url:_}=E.emulator;return p?`${_}${p.startsWith("/")?p.slice(1):p}`:_}class In{static initialize(p,_,I){this.fetchImpl=p,_&&(this.headersImpl=_),I&&(this.responseImpl=I)}static fetch(){return this.fetchImpl?this.fetchImpl:"undefined"!=typeof self&&"fetch"in self?self.fetch:void ht("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:"undefined"!=typeof self&&"Headers"in self?self.Headers:void ht("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:"undefined"!=typeof self&&"Response"in self?self.Response:void ht("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const qn={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"internal-error",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error"},Gt=new mt(3e4,6e4);function Ut(E,p){return E.tenantId&&!p.tenantId?Object.assign(Object.assign({},p),{tenantId:E.tenantId}):p}function Ge(E,p,_,I){return _t.apply(this,arguments)}function _t(){return(_t=(0,m.Z)(function*(E,p,_,I,A={}){return yt(E,A,(0,m.Z)(function*(){let M={},ne={};I&&("GET"===p?ne=I:M={body:JSON.stringify(I)});const ze=(0,F.xO)(Object.assign({key:E.config.apiKey},ne)).slice(1),St=yield E._getAdditionalHeaders();return St["Content-Type"]="application/json",E.languageCode&&(St["X-Firebase-Locale"]=E.languageCode),In.fetch()(Sn(E,E.config.apiHost,_,ze),Object.assign({method:p,headers:St,referrerPolicy:"no-referrer"},M))}))})).apply(this,arguments)}function yt(E,p,_){return zt.apply(this,arguments)}function zt(){return(zt=(0,m.Z)(function*(E,p,_){E._canInitEmulator=!1;const I=Object.assign(Object.assign({},qn),p);try{const A=new On(E),M=yield Promise.race([_(),A.promise]);A.clearNetworkTimeout();const ne=yield M.json();if("needConfirmation"in ne)throw An(E,"account-exists-with-different-credential",ne);if(M.ok&&!("errorMessage"in ne))return ne;{const ze=M.ok?ne.errorMessage:ne.error.message,[St,Lt]=ze.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===St)throw An(E,"credential-already-in-use",ne);if("EMAIL_EXISTS"===St)throw An(E,"email-already-in-use",ne);const Qt=I[St]||St.toLowerCase().replace(/[_\s]+/g,"-");if(Lt)throw De(E,Qt,Lt);Ne(E,Qt)}}catch(A){if(A instanceof F.ZR)throw A;Ne(E,"network-request-failed")}})).apply(this,arguments)}function nn(E,p,_,I){return en.apply(this,arguments)}function en(){return(en=(0,m.Z)(function*(E,p,_,I,A={}){const M=yield Ge(E,p,_,I,A);return"mfaPendingCredential"in M&&Ne(E,"multi-factor-auth-required",{_serverResponse:M}),M})).apply(this,arguments)}function Sn(E,p,_,I){const A=`${p}${_}?${I}`;return E.config.emulator?Xt(E.config,A):`${E.config.apiScheme}://${A}`}class On{constructor(p){this.auth=p,this.timer=null,this.promise=new Promise((_,I)=>{this.timer=setTimeout(()=>I(ce(this.auth,"network-request-failed")),Gt.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function An(E,p,_){const I={appName:E.name};_.email&&(I.email=_.email),_.phoneNumber&&(I.phoneNumber=_.phoneNumber);const A=ce(E,p,I);return A.customData._tokenResponse=_,A}function Pe(){return(Pe=(0,m.Z)(function*(E,p){return Ge(E,"POST","/v1/accounts:delete",p)})).apply(this,arguments)}function fe(E,p){return ke.apply(this,arguments)}function ke(){return(ke=(0,m.Z)(function*(E,p){return Ge(E,"POST","/v1/accounts:update",p)})).apply(this,arguments)}function Ze(E,p){return Dt.apply(this,arguments)}function Dt(){return(Dt=(0,m.Z)(function*(E,p){return Ge(E,"POST","/v1/accounts:lookup",p)})).apply(this,arguments)}function et(E){if(E)try{const p=new Date(Number(E));if(!isNaN(p.getTime()))return p.toUTCString()}catch(p){}}function Bt(){return(Bt=(0,m.Z)(function*(E,p=!1){const _=(0,F.m9)(E),I=yield _.getIdToken(p),A=Et(I);X(A&&A.exp&&A.auth_time&&A.iat,_.auth,"internal-error");const M="object"==typeof A.firebase?A.firebase:void 0,ne=null==M?void 0:M.sign_in_provider;return{claims:A,token:I,authTime:et(Yt(A.auth_time)),issuedAtTime:et(Yt(A.iat)),expirationTime:et(Yt(A.exp)),signInProvider:ne||null,signInSecondFactor:(null==M?void 0:M.sign_in_second_factor)||null}})).apply(this,arguments)}function Yt(E){return 1e3*Number(E)}function Et(E){const[p,_,I]=E.split(".");if(void 0===p||void 0===_||void 0===I)return Le("JWT malformed, contained fewer than 3 sections"),null;try{const A=(0,F.tV)(_);return A?JSON.parse(A):(Le("Failed to decode base64 JWT payload"),null)}catch(A){return Le("Caught error parsing JWT payload as JSON",A),null}}function st(E,p){return Hn.apply(this,arguments)}function Hn(){return(Hn=(0,m.Z)(function*(E,p,_=!1){if(_)return p;try{return yield p}catch(I){throw I instanceof F.ZR&&Ur(I)&&E.auth.currentUser===E&&(yield E.auth.signOut()),I}})).apply(this,arguments)}function Ur({code:E}){return"auth/user-disabled"===E||"auth/user-token-expired"===E}class qt{constructor(p){this.user=p,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){!this.isRunning||(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(p){var _;if(p){const I=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),I}{this.errorBackoff=3e4;const A=(null!==(_=this.user.stsTokenManager.expirationTime)&&void 0!==_?_:0)-Date.now()-3e5;return Math.max(0,A)}}schedule(p=!1){var _=this;if(!this.isRunning)return;const I=this.getInterval(p);this.timerId=setTimeout((0,m.Z)(function*(){yield _.iteration()}),I)}iteration(){var p=this;return(0,m.Z)(function*(){try{yield p.user.getIdToken(!0)}catch(_){return void("auth/network-request-failed"===_.code&&p.schedule(!0))}p.schedule()})()}}class Xn{constructor(p,_){this.createdAt=p,this.lastLoginAt=_,this._initializeTime()}_initializeTime(){this.lastSignInTime=et(this.lastLoginAt),this.creationTime=et(this.createdAt)}_copy(p){this.createdAt=p.createdAt,this.lastLoginAt=p.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}function Tn(E){return rn.apply(this,arguments)}function rn(){return(rn=(0,m.Z)(function*(E){var p;const _=E.auth,I=yield E.getIdToken(),A=yield st(E,Ze(_,{idToken:I}));X(null==A?void 0:A.users.length,_,"internal-error");const M=A.users[0];E._notifyReloadListener(M);const ne=(null===(p=M.providerUserInfo)||void 0===p?void 0:p.length)?Te(M.providerUserInfo):[],ze=G(E.providerData,ne),Qt=!!E.isAnonymous&&!(E.email&&M.passwordHash||(null==ze?void 0:ze.length)),nr={uid:M.localId,displayName:M.displayName||null,photoURL:M.photoUrl||null,email:M.email||null,emailVerified:M.emailVerified||!1,phoneNumber:M.phoneNumber||null,tenantId:M.tenantId||null,providerData:ze,metadata:new Xn(M.createdAt,M.lastLoginAt),isAnonymous:Qt};Object.assign(E,nr)})).apply(this,arguments)}function z(){return(z=(0,m.Z)(function*(E){const p=(0,F.m9)(E);yield Tn(p),yield p.auth._persistUserIfCurrent(p),p.auth._notifyListenersIfCurrent(p)})).apply(this,arguments)}function G(E,p){return[...E.filter(I=>!p.some(A=>A.providerId===I.providerId)),...p]}function Te(E){return E.map(p=>{var{providerId:_}=p,I=(0,oe._T)(p,["providerId"]);return{providerId:_,uid:I.rawId||"",displayName:I.displayName||null,email:I.email||null,phoneNumber:I.phoneNumber||null,photoURL:I.photoUrl||null}})}function at(){return(at=(0,m.Z)(function*(E,p){const _=yield yt(E,{},(0,m.Z)(function*(){const I=(0,F.xO)({grant_type:"refresh_token",refresh_token:p}).slice(1),{tokenApiHost:A,apiKey:M}=E.config,ne=Sn(E,A,"/v1/token",`key=${M}`),ze=yield E._getAdditionalHeaders();return ze["Content-Type"]="application/x-www-form-urlencoded",In.fetch()(ne,{method:"POST",headers:ze,body:I})}));return{accessToken:_.access_token,expiresIn:_.expires_in,refreshToken:_.refresh_token}})).apply(this,arguments)}class ee{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(p){X(p.idToken,"internal-error"),X(void 0!==p.idToken,"internal-error"),X(void 0!==p.refreshToken,"internal-error");const _="expiresIn"in p&&void 0!==p.expiresIn?Number(p.expiresIn):function ft(E){const p=Et(E);return X(p,"internal-error"),X(void 0!==p.exp,"internal-error"),X(void 0!==p.iat,"internal-error"),Number(p.exp)-Number(p.iat)}(p.idToken);this.updateTokensAndExpiration(p.idToken,p.refreshToken,_)}getToken(p,_=!1){var I=this;return(0,m.Z)(function*(){return X(!I.accessToken||I.refreshToken,p,"user-token-expired"),_||!I.accessToken||I.isExpired?I.refreshToken?(yield I.refresh(p,I.refreshToken),I.accessToken):null:I.accessToken})()}clearRefreshToken(){this.refreshToken=null}refresh(p,_){var I=this;return(0,m.Z)(function*(){const{accessToken:A,refreshToken:M,expiresIn:ne}=yield function re(E,p){return at.apply(this,arguments)}(p,_);I.updateTokensAndExpiration(A,M,Number(ne))})()}updateTokensAndExpiration(p,_,I){this.refreshToken=_||null,this.accessToken=p||null,this.expirationTime=Date.now()+1e3*I}static fromJSON(p,_){const{refreshToken:I,accessToken:A,expirationTime:M}=_,ne=new ee;return I&&(X("string"==typeof I,"internal-error",{appName:p}),ne.refreshToken=I),A&&(X("string"==typeof A,"internal-error",{appName:p}),ne.accessToken=A),M&&(X("number"==typeof M,"internal-error",{appName:p}),ne.expirationTime=M),ne}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(p){this.accessToken=p.accessToken,this.refreshToken=p.refreshToken,this.expirationTime=p.expirationTime}_clone(){return Object.assign(new ee,this.toJSON())}_performRefresh(){return ht("not implemented")}}function be(E,p){X("string"==typeof E||void 0===E,"internal-error",{appName:p})}class Be{constructor(p){var{uid:_,auth:I,stsTokenManager:A}=p,M=(0,oe._T)(p,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new qt(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=_,this.auth=I,this.stsTokenManager=A,this.accessToken=A.accessToken,this.displayName=M.displayName||null,this.email=M.email||null,this.emailVerified=M.emailVerified||!1,this.phoneNumber=M.phoneNumber||null,this.photoURL=M.photoURL||null,this.isAnonymous=M.isAnonymous||!1,this.tenantId=M.tenantId||null,this.providerData=M.providerData?[...M.providerData]:[],this.metadata=new Xn(M.createdAt||void 0,M.lastLoginAt||void 0)}getIdToken(p){var _=this;return(0,m.Z)(function*(){const I=yield st(_,_.stsTokenManager.getToken(_.auth,p));return X(I,_.auth,"internal-error"),_.accessToken!==I&&(_.accessToken=I,yield _.auth._persistUserIfCurrent(_),_.auth._notifyListenersIfCurrent(_)),I})()}getIdTokenResult(p){return function Nt(E){return Bt.apply(this,arguments)}(this,p)}reload(){return function L(E){return z.apply(this,arguments)}(this)}_assign(p){this!==p&&(X(this.uid===p.uid,this.auth,"internal-error"),this.displayName=p.displayName,this.photoURL=p.photoURL,this.email=p.email,this.emailVerified=p.emailVerified,this.phoneNumber=p.phoneNumber,this.isAnonymous=p.isAnonymous,this.tenantId=p.tenantId,this.providerData=p.providerData.map(_=>Object.assign({},_)),this.metadata._copy(p.metadata),this.stsTokenManager._assign(p.stsTokenManager))}_clone(p){return new Be(Object.assign(Object.assign({},this),{auth:p,stsTokenManager:this.stsTokenManager._clone()}))}_onReload(p){X(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=p,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(p){this.reloadListener?this.reloadListener(p):this.reloadUserInfo=p}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(p,_=!1){var I=this;return(0,m.Z)(function*(){let A=!1;p.idToken&&p.idToken!==I.stsTokenManager.accessToken&&(I.stsTokenManager.updateFromServerResponse(p),A=!0),_&&(yield Tn(I)),yield I.auth._persistUserIfCurrent(I),A&&I.auth._notifyListenersIfCurrent(I)})()}delete(){var p=this;return(0,m.Z)(function*(){const _=yield p.getIdToken();return yield st(p,function Jn(E,p){return Pe.apply(this,arguments)}(p.auth,{idToken:_})),p.stsTokenManager.clearRefreshToken(),p.auth.signOut()})()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(p=>Object.assign({},p)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(p,_){var I,A,M,ne,ze,St,Lt,Qt;const nr=null!==(I=_.displayName)&&void 0!==I?I:void 0,ui=null!==(A=_.email)&&void 0!==A?A:void 0,sa=null!==(M=_.phoneNumber)&&void 0!==M?M:void 0,Ya=null!==(ne=_.photoURL)&&void 0!==ne?ne:void 0,Wl=null!==(ze=_.tenantId)&&void 0!==ze?ze:void 0,hc=null!==(St=_._redirectEventId)&&void 0!==St?St:void 0,fc=null!==(Lt=_.createdAt)&&void 0!==Lt?Lt:void 0,pc=null!==(Qt=_.lastLoginAt)&&void 0!==Qt?Qt:void 0,{uid:zl,emailVerified:Qa,isAnonymous:Gl,providerData:zh,stsTokenManager:ql}=_;X(zl&&ql,p,"internal-error");const Gh=ee.fromJSON(this.name,ql);X("string"==typeof zl,p,"internal-error"),be(nr,p.name),be(ui,p.name),X("boolean"==typeof Qa,p,"internal-error"),X("boolean"==typeof Gl,p,"internal-error"),be(sa,p.name),be(Ya,p.name),be(Wl,p.name),be(hc,p.name),be(fc,p.name),be(pc,p.name);const Ja=new Be({uid:zl,auth:p,email:ui,emailVerified:Qa,displayName:nr,isAnonymous:Gl,photoURL:Ya,phoneNumber:sa,tenantId:Wl,stsTokenManager:Gh,createdAt:fc,lastLoginAt:pc});return zh&&Array.isArray(zh)&&(Ja.providerData=zh.map(oy=>Object.assign({},oy))),hc&&(Ja._redirectEventId=hc),Ja}static _fromIdTokenResponse(p,_,I=!1){return(0,m.Z)(function*(){const A=new ee;A.updateFromServerResponse(_);const M=new Be({uid:_.localId,auth:p,stsTokenManager:A,isAnonymous:I});return yield Tn(M),M})()}}const ot=(()=>{class E{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return(0,m.Z)(function*(){return!0})()}_set(_,I){var A=this;return(0,m.Z)(function*(){A.storage[_]=I})()}_get(_){var I=this;return(0,m.Z)(function*(){const A=I.storage[_];return void 0===A?null:A})()}_remove(_){var I=this;return(0,m.Z)(function*(){delete I.storage[_]})()}_addListener(_,I){}_removeListener(_,I){}}return E.type="NONE",E})();function tt(E,p,_){return`firebase:${E}:${p}:${_}`}class At{constructor(p,_,I){this.persistence=p,this.auth=_,this.userKey=I;const{config:A,name:M}=this.auth;this.fullUserKey=tt(this.userKey,A.apiKey,M),this.fullPersistenceKey=tt("persistence",A.apiKey,M),this.boundEventHandler=_._onStorageEvent.bind(_),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(p){return this.persistence._set(this.fullUserKey,p.toJSON())}getCurrentUser(){var p=this;return(0,m.Z)(function*(){const _=yield p.persistence._get(p.fullUserKey);return _?Be._fromJSON(p.auth,_):null})()}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(p){var _=this;return(0,m.Z)(function*(){if(_.persistence===p)return;const I=yield _.getCurrentUser();return yield _.removeCurrentUser(),_.persistence=p,I?_.setCurrentUser(I):void 0})()}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(p,_,I="authUser"){return(0,m.Z)(function*(){if(!_.length)return new At(ue(ot),p,I);const A=(yield Promise.all(_.map(function(){var Lt=(0,m.Z)(function*(Qt){if(yield Qt._isAvailable())return Qt});return function(Qt){return Lt.apply(this,arguments)}}()))).filter(Lt=>Lt);let M=A[0]||ue(ot);const ne=tt(I,p.config.apiKey,p.name);let ze=null;for(const Lt of _)try{const Qt=yield Lt._get(ne);if(Qt){const nr=Be._fromJSON(p,Qt);Lt!==M&&(ze=nr),M=Lt;break}}catch(Qt){}const St=A.filter(Lt=>Lt._shouldAllowMigration);return M._shouldAllowMigration&&St.length?(M=St[0],ze&&(yield M._set(ne,ze.toJSON())),yield Promise.all(_.map(function(){var Lt=(0,m.Z)(function*(Qt){if(Qt!==M)try{yield Qt._remove(ne)}catch(nr){}});return function(Qt){return Lt.apply(this,arguments)}}())),new At(M,p,I)):new At(M,p,I)})()}}function J(E){const p=E.toLowerCase();if(p.includes("opera/")||p.includes("opr/")||p.includes("opios/"))return"Opera";if(it(p))return"IEMobile";if(p.includes("msie")||p.includes("trident/"))return"IE";if(p.includes("edge/"))return"Edge";if($(p))return"Firefox";if(p.includes("silk/"))return"Silk";if(Ot(p))return"Blackberry";if(cn(p))return"Webos";if(H(p))return"Safari";if((p.includes("chrome/")||Re(p))&&!p.includes("edge/"))return"Chrome";if(vt(p))return"Android";{const I=E.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if(2===(null==I?void 0:I.length))return I[1]}return"Other"}function $(E=(0,F.z$)()){return/firefox\//i.test(E)}function H(E=(0,F.z$)()){const p=E.toLowerCase();return p.includes("safari/")&&!p.includes("chrome/")&&!p.includes("crios/")&&!p.includes("android")}function Re(E=(0,F.z$)()){return/crios\//i.test(E)}function it(E=(0,F.z$)()){return/iemobile/i.test(E)}function vt(E=(0,F.z$)()){return/android/i.test(E)}function Ot(E=(0,F.z$)()){return/blackberry/i.test(E)}function cn(E=(0,F.z$)()){return/webos/i.test(E)}function sn(E=(0,F.z$)()){return/iphone|ipad|ipod/i.test(E)}function ar(E=(0,F.z$)()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(E)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(E)}function mr(E=(0,F.z$)()){return sn(E)||vt(E)||cn(E)||Ot(E)||/windows phone/i.test(E)||it(E)}function he(E,p=[]){let _;switch(E){case"Browser":_=J((0,F.z$)());break;case"Worker":_=`${J((0,F.z$)())}-${E}`;break;default:_=E}const I=p.length?p.join(","):"FirebaseCore-web";return`${_}/JsCore/${N.SDK_VERSION}/${I}`}class gt{constructor(p,_){this.app=p,this.config=_,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Oe(this),this.idTokenSubscription=new Oe(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=Ue,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=p.name,this.clientVersion=_.sdkClientVersion}_initializeWithPersistence(p,_){var I=this;return _&&(this._popupRedirectResolver=ue(_)),this._initializationPromise=this.queue((0,m.Z)(function*(){var A,M;if(!I._deleted&&(I.persistenceManager=yield At.create(I,p),!I._deleted)){if(null===(A=I._popupRedirectResolver)||void 0===A?void 0:A._shouldInitProactively)try{yield I._popupRedirectResolver._initialize(I)}catch(ne){}yield I.initializeCurrentUser(_),I.lastNotifiedUid=(null===(M=I.currentUser)||void 0===M?void 0:M.uid)||null,!I._deleted&&(I._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){var p=this;return(0,m.Z)(function*(){if(p._deleted)return;const _=yield p.assertedPersistence.getCurrentUser();if(p.currentUser||_){if(p.currentUser&&_&&p.currentUser.uid===_.uid)return p._currentUser._assign(_),void(yield p.currentUser.getIdToken());yield p._updateCurrentUser(_)}})()}initializeCurrentUser(p){var _=this;return(0,m.Z)(function*(){var I;let A=yield _.assertedPersistence.getCurrentUser();if(p&&_.config.authDomain){yield _.getOrInitRedirectPersistenceManager();const M=null===(I=_.redirectUser)||void 0===I?void 0:I._redirectEventId,ne=null==A?void 0:A._redirectEventId,ze=yield _.tryRedirectSignIn(p);(!M||M===ne)&&(null==ze?void 0:ze.user)&&(A=ze.user)}return A?A._redirectEventId?(X(_._popupRedirectResolver,_,"argument-error"),yield _.getOrInitRedirectPersistenceManager(),_.redirectUser&&_.redirectUser._redirectEventId===A._redirectEventId?_.directlySetCurrentUser(A):_.reloadAndSetCurrentUserOrClear(A)):_.reloadAndSetCurrentUserOrClear(A):_.directlySetCurrentUser(null)})()}tryRedirectSignIn(p){var _=this;return(0,m.Z)(function*(){let I=null;try{I=yield _._popupRedirectResolver._completeRedirectFn(_,p,!0)}catch(A){yield _._setRedirectUser(null)}return I})()}reloadAndSetCurrentUserOrClear(p){var _=this;return(0,m.Z)(function*(){try{yield Tn(p)}catch(I){if("auth/network-request-failed"!==I.code)return _.directlySetCurrentUser(null)}return _.directlySetCurrentUser(p)})()}useDeviceLanguage(){this.languageCode=function ct(){if("undefined"==typeof navigator)return null;const E=navigator;return E.languages&&E.languages[0]||E.language||null}()}_delete(){var p=this;return(0,m.Z)(function*(){p._deleted=!0})()}updateCurrentUser(p){var _=this;return(0,m.Z)(function*(){const I=p?(0,F.m9)(p):null;return I&&X(I.auth.config.apiKey===_.config.apiKey,_,"invalid-user-token"),_._updateCurrentUser(I&&I._clone(_))})()}_updateCurrentUser(p){var _=this;return(0,m.Z)(function*(){if(!_._deleted)return p&&X(_.tenantId===p.tenantId,_,"tenant-id-mismatch"),_.queue((0,m.Z)(function*(){yield _.directlySetCurrentUser(p),_.notifyAuthListeners()}))})()}signOut(){var p=this;return(0,m.Z)(function*(){return(p.redirectPersistenceManager||p._popupRedirectResolver)&&(yield p._setRedirectUser(null)),p._updateCurrentUser(null)})()}setPersistence(p){var _=this;return this.queue((0,m.Z)(function*(){yield _.assertedPersistence.setPersistence(ue(p))}))}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(p){this._errorFactory=new F.LL("auth","Firebase",p())}onAuthStateChanged(p,_,I){return this.registerStateListener(this.authStateSubscription,p,_,I)}onIdTokenChanged(p,_,I){return this.registerStateListener(this.idTokenSubscription,p,_,I)}toJSON(){var p;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(p=this._currentUser)||void 0===p?void 0:p.toJSON()}}_setRedirectUser(p,_){var I=this;return(0,m.Z)(function*(){const A=yield I.getOrInitRedirectPersistenceManager(_);return null===p?A.removeCurrentUser():A.setCurrentUser(p)})()}getOrInitRedirectPersistenceManager(p){var _=this;return(0,m.Z)(function*(){if(!_.redirectPersistenceManager){const I=p&&ue(p)||_._popupRedirectResolver;X(I,_,"argument-error"),_.redirectPersistenceManager=yield At.create(_,[ue(I._redirectPersistence)],"redirectUser"),_.redirectUser=yield _.redirectPersistenceManager.getCurrentUser()}return _.redirectPersistenceManager})()}_redirectUserForId(p){var _=this;return(0,m.Z)(function*(){var I,A;return _._isInitialized&&(yield _.queue((0,m.Z)(function*(){}))),(null===(I=_._currentUser)||void 0===I?void 0:I._redirectEventId)===p?_._currentUser:(null===(A=_.redirectUser)||void 0===A?void 0:A._redirectEventId)===p?_.redirectUser:null})()}_persistUserIfCurrent(p){var _=this;return(0,m.Z)(function*(){if(p===_.currentUser)return _.queue((0,m.Z)(function*(){return _.directlySetCurrentUser(p)}))})()}_notifyListenersIfCurrent(p){p===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var p,_;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const I=null!==(_=null===(p=this.currentUser)||void 0===p?void 0:p.uid)&&void 0!==_?_:null;this.lastNotifiedUid!==I&&(this.lastNotifiedUid=I,this.authStateSubscription.next(this.currentUser))}registerStateListener(p,_,I,A){if(this._deleted)return()=>{};const M="function"==typeof _?_:_.next.bind(_),ne=this._isInitialized?Promise.resolve():this._initializationPromise;return X(ne,this,"internal-error"),ne.then(()=>M(this.currentUser)),"function"==typeof _?p.addObserver(_,I,A):p.addObserver(_)}directlySetCurrentUser(p){var _=this;return(0,m.Z)(function*(){_.currentUser&&_.currentUser!==p&&(_._currentUser._stopProactiveRefresh(),p&&_.isProactiveRefreshEnabled&&p._startProactiveRefresh()),_.currentUser=p,p?yield _.assertedPersistence.setCurrentUser(p):yield _.assertedPersistence.removeCurrentUser()})()}queue(p){return this.operations=this.operations.then(p,p),this.operations}get assertedPersistence(){return X(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(p){!p||this.frameworks.includes(p)||(this.frameworks.push(p),this.frameworks.sort(),this.clientVersion=he(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){var p=this;return(0,m.Z)(function*(){const _={"X-Client-Version":p.clientVersion};return p.app.options.appId&&(_["X-Firebase-gmpid"]=p.app.options.appId),_})()}}function Ye(E){return(0,F.m9)(E)}class Oe{constructor(p){this.auth=p,this.observer=null,this.addObserver=(0,F.ne)(_=>this.observer=_)}get next(){return X(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}function U(E,p,_){const I=Ye(E);X(I._canInitEmulator,I,"emulator-config-failed"),X(/^https?:\/\//.test(p),I,"invalid-emulator-scheme");const A=!!(null==_?void 0:_.disableWarnings),M=ie(p),{host:ne,port:ze}=function je(E){const p=ie(E),_=/(\/\/)?([^?#/]+)/.exec(E.substr(p.length));if(!_)return{host:"",port:null};const I=_[2].split("@").pop()||"",A=/^(\[[^\]]+\])(:|$)/.exec(I);if(A){const M=A[1];return{host:M,port:Qe(I.substr(M.length+1))}}{const[M,ne]=I.split(":");return{host:M,port:Qe(ne)}}}(p);I.config.emulator={url:`${M}//${ne}${null===ze?"":`:${ze}`}/`},I.settings.appVerificationDisabledForTesting=!0,I.emulatorConfig=Object.freeze({host:ne,port:ze,protocol:M.replace(":",""),options:Object.freeze({disableWarnings:A})}),A||function dn(){function E(){const p=document.createElement("p"),_=p.style;p.innerText="Running in emulator mode. Do not use with production credentials.",_.position="fixed",_.width="100%",_.backgroundColor="#ffffff",_.border=".1em solid #000000",_.color="#b50000",_.bottom="0px",_.left="0px",_.margin="0px",_.zIndex="10000",_.textAlign="center",p.classList.add("firebase-emulator-warning"),document.body.appendChild(p)}"undefined"!=typeof console&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),"undefined"!=typeof window&&"undefined"!=typeof document&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",E):E())}()}function ie(E){const p=E.indexOf(":");return p<0?"":E.substr(0,p+1)}function Qe(E){if(!E)return null;const p=Number(E);return isNaN(p)?null:p}class pn{constructor(p,_){this.providerId=p,this.signInMethod=_}toJSON(){return ht("not implemented")}_getIdTokenResponse(p){return ht("not implemented")}_linkToIdToken(p,_){return ht("not implemented")}_getReauthenticationResolver(p){return ht("not implemented")}}function an(E,p){return Kn.apply(this,arguments)}function Kn(){return(Kn=(0,m.Z)(function*(E,p){return Ge(E,"POST","/v1/accounts:resetPassword",Ut(E,p))})).apply(this,arguments)}function ji(E,p){return tn.apply(this,arguments)}function tn(){return(tn=(0,m.Z)(function*(E,p){return Ge(E,"POST","/v1/accounts:update",p)})).apply(this,arguments)}function Nu(E,p){return _o.apply(this,arguments)}function _o(){return(_o=(0,m.Z)(function*(E,p){return Ge(E,"POST","/v1/accounts:update",Ut(E,p))})).apply(this,arguments)}function yo(){return(yo=(0,m.Z)(function*(E,p){return nn(E,"POST","/v1/accounts:signInWithPassword",Ut(E,p))})).apply(this,arguments)}function Pr(E,p){return vo.apply(this,arguments)}function vo(){return(vo=(0,m.Z)(function*(E,p){return Ge(E,"POST","/v1/accounts:sendOobCode",Ut(E,p))})).apply(this,arguments)}function Mu(E,p){return oi.apply(this,arguments)}function oi(){return(oi=(0,m.Z)(function*(E,p){return Pr(E,p)})).apply(this,arguments)}function Bn(E,p){return ol.apply(this,arguments)}function ol(){return(ol=(0,m.Z)(function*(E,p){return Pr(E,p)})).apply(this,arguments)}function lh(E,p){return mi.apply(this,arguments)}function mi(){return(mi=(0,m.Z)(function*(E,p){return Pr(E,p)})).apply(this,arguments)}function ns(E,p){return ku.apply(this,arguments)}function ku(){return(ku=(0,m.Z)(function*(E,p){return Pr(E,p)})).apply(this,arguments)}function Ko(){return(Ko=(0,m.Z)(function*(E,p){return nn(E,"POST","/v1/accounts:signInWithEmailLink",Ut(E,p))})).apply(this,arguments)}function hh(){return(hh=(0,m.Z)(function*(E,p){return nn(E,"POST","/v1/accounts:signInWithEmailLink",Ut(E,p))})).apply(this,arguments)}class al extends pn{constructor(p,_,I,A=null){super("password",I),this._email=p,this._password=_,this._tenantId=A}static _fromEmailAndPassword(p,_){return new al(p,_,"password")}static _fromEmailAndCode(p,_,I=null){return new al(p,_,"emailLink",I)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(p){const _="string"==typeof p?JSON.parse(p):p;if((null==_?void 0:_.email)&&(null==_?void 0:_.password)){if("password"===_.signInMethod)return this._fromEmailAndPassword(_.email,_.password);if("emailLink"===_.signInMethod)return this._fromEmailAndCode(_.email,_.password,_.tenantId)}return null}_getIdTokenResponse(p){var _=this;return(0,m.Z)(function*(){switch(_.signInMethod){case"password":return function ch(E,p){return yo.apply(this,arguments)}(p,{returnSecureToken:!0,email:_._email,password:_._password});case"emailLink":return function dh(E,p){return Ko.apply(this,arguments)}(p,{email:_._email,oobCode:_._password});default:Ne(p,"internal-error")}})()}_linkToIdToken(p,_){var I=this;return(0,m.Z)(function*(){switch(I.signInMethod){case"password":return ji(p,{idToken:_,returnSecureToken:!0,email:I._email,password:I._password});case"emailLink":return function rs(E,p){return hh.apply(this,arguments)}(p,{idToken:_,email:I._email,oobCode:I._password});default:Ne(p,"internal-error")}})()}_getReauthenticationResolver(p){return this._getIdTokenResponse(p)}}function Eo(E,p){return Mi.apply(this,arguments)}function Mi(){return(Mi=(0,m.Z)(function*(E,p){return nn(E,"POST","/v1/accounts:signInWithIdp",Ut(E,p))})).apply(this,arguments)}class Ws extends pn{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(p){const _=new Ws(p.providerId,p.signInMethod);return p.idToken||p.accessToken?(p.idToken&&(_.idToken=p.idToken),p.accessToken&&(_.accessToken=p.accessToken),p.nonce&&!p.pendingToken&&(_.nonce=p.nonce),p.pendingToken&&(_.pendingToken=p.pendingToken)):p.oauthToken&&p.oauthTokenSecret?(_.accessToken=p.oauthToken,_.secret=p.oauthTokenSecret):Ne("argument-error"),_}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(p){const _="string"==typeof p?JSON.parse(p):p,{providerId:I,signInMethod:A}=_,M=(0,oe._T)(_,["providerId","signInMethod"]);if(!I||!A)return null;const ne=new Ws(I,A);return ne.idToken=M.idToken||void 0,ne.accessToken=M.accessToken||void 0,ne.secret=M.secret,ne.nonce=M.nonce,ne.pendingToken=M.pendingToken||null,ne}_getIdTokenResponse(p){return Eo(p,this.buildRequest())}_linkToIdToken(p,_){const I=this.buildRequest();return I.idToken=_,Eo(p,I)}_getReauthenticationResolver(p){const _=this.buildRequest();return _.autoCreate=!1,Eo(p,_)}buildRequest(){const p={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)p.pendingToken=this.pendingToken;else{const _={};this.idToken&&(_.id_token=this.idToken),this.accessToken&&(_.access_token=this.accessToken),this.secret&&(_.oauth_token_secret=this.secret),_.providerId=this.providerId,this.nonce&&!this.pendingToken&&(_.nonce=this.nonce),p.postBody=(0,F.xO)(_)}return p}}function A0(E,p){return Yp.apply(this,arguments)}function Yp(){return(Yp=(0,m.Z)(function*(E,p){return Ge(E,"POST","/v1/accounts:sendVerificationCode",Ut(E,p))})).apply(this,arguments)}function Jp(){return(Jp=(0,m.Z)(function*(E,p){return nn(E,"POST","/v1/accounts:signInWithPhoneNumber",Ut(E,p))})).apply(this,arguments)}function Xp(){return(Xp=(0,m.Z)(function*(E,p){const _=yield nn(E,"POST","/v1/accounts:signInWithPhoneNumber",Ut(E,p));if(_.temporaryProof)throw An(E,"account-exists-with-different-credential",_);return _})).apply(this,arguments)}const x0={USER_NOT_FOUND:"user-not-found"};function eg(){return(eg=(0,m.Z)(function*(E,p){return nn(E,"POST","/v1/accounts:signInWithPhoneNumber",Ut(E,Object.assign(Object.assign({},p),{operation:"REAUTH"})),x0)})).apply(this,arguments)}class Aa extends pn{constructor(p){super("phone","phone"),this.params=p}static _fromVerification(p,_){return new Aa({verificationId:p,verificationCode:_})}static _fromTokenResponse(p,_){return new Aa({phoneNumber:p,temporaryProof:_})}_getIdTokenResponse(p){return function Qp(E,p){return Jp.apply(this,arguments)}(p,this._makeVerificationRequest())}_linkToIdToken(p,_){return function R0(E,p){return Xp.apply(this,arguments)}(p,Object.assign({idToken:_},this._makeVerificationRequest()))}_getReauthenticationResolver(p){return function P0(E,p){return eg.apply(this,arguments)}(p,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:p,phoneNumber:_,verificationId:I,verificationCode:A}=this.params;return p&&_?{temporaryProof:p,phoneNumber:_}:{sessionInfo:I,code:A}}toJSON(){const p={providerId:this.providerId};return this.params.phoneNumber&&(p.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(p.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(p.verificationCode=this.params.verificationCode),this.params.verificationId&&(p.verificationId=this.params.verificationId),p}static fromJSON(p){"string"==typeof p&&(p=JSON.parse(p));const{verificationId:_,verificationCode:I,phoneNumber:A,temporaryProof:M}=p;return I||_||A||M?new Aa({verificationId:_,verificationCode:I,phoneNumber:A,temporaryProof:M}):null}}class Zo{constructor(p){var _,I,A,M,ne,ze;const St=(0,F.zd)((0,F.pd)(p)),Lt=null!==(_=St.apiKey)&&void 0!==_?_:null,Qt=null!==(I=St.oobCode)&&void 0!==I?I:null,nr=function N0(E){switch(E){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(A=St.mode)&&void 0!==A?A:null);X(Lt&&Qt&&nr,"argument-error"),this.apiKey=Lt,this.operation=nr,this.code=Qt,this.continueUrl=null!==(M=St.continueUrl)&&void 0!==M?M:null,this.languageCode=null!==(ne=St.languageCode)&&void 0!==ne?ne:null,this.tenantId=null!==(ze=St.tenantId)&&void 0!==ze?ze:null}static parseLink(p){const _=function M0(E){const p=(0,F.zd)((0,F.pd)(E)).link,_=p?(0,F.zd)((0,F.pd)(p)).deep_link_id:null,I=(0,F.zd)((0,F.pd)(E)).deep_link_id;return(I?(0,F.zd)((0,F.pd)(I)).link:null)||I||_||p||E}(p);try{return new Zo(_)}catch(I){return null}}}let ng=(()=>{class E{constructor(){this.providerId=E.PROVIDER_ID}static credential(_,I){return al._fromEmailAndPassword(_,I)}static credentialWithLink(_,I){const A=Zo.parseLink(I);return X(A,"argument-error"),al._fromEmailAndCode(_,A.code,A.tenantId)}}return E.PROVIDER_ID="password",E.EMAIL_PASSWORD_SIGN_IN_METHOD="password",E.EMAIL_LINK_SIGN_IN_METHOD="emailLink",E})();class zs{constructor(p){this.providerId=p,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(p){this.defaultLanguageCode=p}setCustomParameters(p){return this.customParameters=p,this}getCustomParameters(){return this.customParameters}}class Ou extends zs{constructor(){super(...arguments),this.scopes=[]}addScope(p){return this.scopes.includes(p)||this.scopes.push(p),this}getScopes(){return[...this.scopes]}}class is extends Ou{static credentialFromJSON(p){const _="string"==typeof p?JSON.parse(p):p;return X("providerId"in _&&"signInMethod"in _,"argument-error"),Ws._fromParams(_)}credential(p){return this._credential(Object.assign(Object.assign({},p),{nonce:p.rawNonce}))}_credential(p){return X(p.idToken||p.accessToken,"argument-error"),Ws._fromParams(Object.assign(Object.assign({},p),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(p){return is.oauthCredentialFromTaggedObject(p)}static credentialFromError(p){return is.oauthCredentialFromTaggedObject(p.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:p}){if(!p)return null;const{oauthIdToken:_,oauthAccessToken:I,oauthTokenSecret:A,pendingToken:M,nonce:ne,providerId:ze}=p;if(!I&&!A&&!_&&!M||!ze)return null;try{return new is(ze)._credential({idToken:_,accessToken:I,nonce:ne,pendingToken:M})}catch(St){return null}}}let F_=(()=>{class E extends Ou{constructor(){super("facebook.com")}static credential(_){return Ws._fromParams({providerId:E.PROVIDER_ID,signInMethod:E.FACEBOOK_SIGN_IN_METHOD,accessToken:_})}static credentialFromResult(_){return E.credentialFromTaggedObject(_)}static credentialFromError(_){return E.credentialFromTaggedObject(_.customData||{})}static credentialFromTaggedObject({_tokenResponse:_}){if(!_||!("oauthAccessToken"in _)||!_.oauthAccessToken)return null;try{return E.credential(_.oauthAccessToken)}catch(I){return null}}}return E.FACEBOOK_SIGN_IN_METHOD="facebook.com",E.PROVIDER_ID="facebook.com",E})(),Fu=(()=>{class E extends Ou{constructor(){super("google.com"),this.addScope("profile")}static credential(_,I){return Ws._fromParams({providerId:E.PROVIDER_ID,signInMethod:E.GOOGLE_SIGN_IN_METHOD,idToken:_,accessToken:I})}static credentialFromResult(_){return E.credentialFromTaggedObject(_)}static credentialFromError(_){return E.credentialFromTaggedObject(_.customData||{})}static credentialFromTaggedObject({_tokenResponse:_}){if(!_)return null;const{oauthIdToken:I,oauthAccessToken:A}=_;if(!I&&!A)return null;try{return E.credential(I,A)}catch(M){return null}}}return E.GOOGLE_SIGN_IN_METHOD="google.com",E.PROVIDER_ID="google.com",E})(),ul=(()=>{class E extends Ou{constructor(){super("github.com")}static credential(_){return Ws._fromParams({providerId:E.PROVIDER_ID,signInMethod:E.GITHUB_SIGN_IN_METHOD,accessToken:_})}static credentialFromResult(_){return E.credentialFromTaggedObject(_)}static credentialFromError(_){return E.credentialFromTaggedObject(_.customData||{})}static credentialFromTaggedObject({_tokenResponse:_}){if(!_||!("oauthAccessToken"in _)||!_.oauthAccessToken)return null;try{return E.credential(_.oauthAccessToken)}catch(I){return null}}}return E.GITHUB_SIGN_IN_METHOD="github.com",E.PROVIDER_ID="github.com",E})();class Lu extends pn{constructor(p,_){super(p,p),this.pendingToken=_}_getIdTokenResponse(p){return Eo(p,this.buildRequest())}_linkToIdToken(p,_){const I=this.buildRequest();return I.idToken=_,Eo(p,I)}_getReauthenticationResolver(p){const _=this.buildRequest();return _.autoCreate=!1,Eo(p,_)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(p){const _="string"==typeof p?JSON.parse(p):p,{providerId:I,signInMethod:A,pendingToken:M}=_;return I&&A&&M&&I===A?new Lu(I,M):null}static _create(p,_){return new Lu(p,_)}buildRequest(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}class Ra extends zs{constructor(p){X(p.startsWith("saml."),"argument-error"),super(p)}static credentialFromResult(p){return Ra.samlCredentialFromTaggedObject(p)}static credentialFromError(p){return Ra.samlCredentialFromTaggedObject(p.customData||{})}static credentialFromJSON(p){const _=Lu.fromJSON(p);return X(_,"argument-error"),_}static samlCredentialFromTaggedObject({_tokenResponse:p}){if(!p)return null;const{pendingToken:_,providerId:I}=p;if(!_||!I)return null;try{return Lu._create(I,_)}catch(A){return null}}}let U_=(()=>{class E extends Ou{constructor(){super("twitter.com")}static credential(_,I){return Ws._fromParams({providerId:E.PROVIDER_ID,signInMethod:E.TWITTER_SIGN_IN_METHOD,oauthToken:_,oauthTokenSecret:I})}static credentialFromResult(_){return E.credentialFromTaggedObject(_)}static credentialFromError(_){return E.credentialFromTaggedObject(_.customData||{})}static credentialFromTaggedObject({_tokenResponse:_}){if(!_)return null;const{oauthAccessToken:I,oauthTokenSecret:A}=_;if(!I||!A)return null;try{return E.credential(I,A)}catch(M){return null}}}return E.TWITTER_SIGN_IN_METHOD="twitter.com",E.PROVIDER_ID="twitter.com",E})();function cl(E,p){return fh.apply(this,arguments)}function fh(){return(fh=(0,m.Z)(function*(E,p){return nn(E,"POST","/v1/accounts:signUp",Ut(E,p))})).apply(this,arguments)}class Zn{constructor(p){this.user=p.user,this.providerId=p.providerId,this._tokenResponse=p._tokenResponse,this.operationType=p.operationType}static _fromIdTokenResponse(p,_,I,A=!1){return(0,m.Z)(function*(){const M=yield Be._fromIdTokenResponse(p,I,A),ne=Vu(I);return new Zn({user:M,providerId:ne,_tokenResponse:I,operationType:_})})()}static _forOperation(p,_,I){return(0,m.Z)(function*(){yield p._updateTokensIfNecessary(I,!0);const A=Vu(I);return new Zn({user:p,providerId:A,_tokenResponse:I,operationType:_})})()}}function Vu(E){return E.providerId?E.providerId:"phoneNumber"in E?"phone":null}function k0(E){return ll.apply(this,arguments)}function ll(){return(ll=(0,m.Z)(function*(E){var p;const _=Ye(E);if(yield _._initializationPromise,null===(p=_.currentUser)||void 0===p?void 0:p.isAnonymous)return new Zn({user:_.currentUser,providerId:null,operationType:"signIn"});const I=yield cl(_,{returnSecureToken:!0}),A=yield Zn._fromIdTokenResponse(_,"signIn",I,!0);return yield _._updateCurrentUser(A.user),A})).apply(this,arguments)}class ph extends F.ZR{constructor(p,_,I,A){var M;super(_.code,_.message),this.operationType=I,this.user=A,Object.setPrototypeOf(this,ph.prototype),this.customData={appName:p.name,tenantId:null!==(M=p.tenantId)&&void 0!==M?M:void 0,_serverResponse:_.customData._serverResponse,operationType:I}}static _fromErrorAndOperation(p,_,I,A){return new ph(p,_,I,A)}}function rg(E,p,_,I){return("reauthenticate"===p?_._getReauthenticationResolver(E):_._getIdTokenResponse(E)).catch(M=>{throw"auth/multi-factor-auth-required"===M.code?ph._fromErrorAndOperation(E,M,p,I):M})}function dl(E){return new Set(E.map(({providerId:p})=>p).filter(p=>!!p))}function ig(E,p){return Bu.apply(this,arguments)}function Bu(){return(Bu=(0,m.Z)(function*(E,p){const _=(0,F.m9)(E);yield ju(!0,_,p);const{providerUserInfo:I}=yield fe(_.auth,{idToken:yield _.getIdToken(),deleteProvider:[p]}),A=dl(I||[]);return _.providerData=_.providerData.filter(M=>A.has(M.providerId)),A.has("phone")||(_.phoneNumber=null),yield _.auth._persistUserIfCurrent(_),_})).apply(this,arguments)}function V_(E,p){return Yn.apply(this,arguments)}function Yn(){return(Yn=(0,m.Z)(function*(E,p,_=!1){const I=yield st(E,p._linkToIdToken(E.auth,yield E.getIdToken()),_);return Zn._forOperation(E,"link",I)})).apply(this,arguments)}function ju(E,p,_){return $u.apply(this,arguments)}function $u(){return($u=(0,m.Z)(function*(E,p,_){yield Tn(p);const A=!1===E?"provider-already-linked":"no-such-provider";X(dl(p.providerData).has(_)===E,p.auth,A)})).apply(this,arguments)}function Wn(E,p){return gh.apply(this,arguments)}function gh(){return(gh=(0,m.Z)(function*(E,p,_=!1){const{auth:I}=E,A="reauthenticate";try{const M=yield st(E,rg(I,A,p,E),_);X(M.idToken,I,"internal-error");const ne=Et(M.idToken);X(ne,I,"internal-error");const{sub:ze}=ne;return X(E.uid===ze,I,"user-mismatch"),Zn._forOperation(E,A,M)}catch(M){throw"auth/user-not-found"===(null==M?void 0:M.code)&&Ne(I,"user-mismatch"),M}})).apply(this,arguments)}function hl(E,p){return xa.apply(this,arguments)}function xa(){return(xa=(0,m.Z)(function*(E,p,_=!1){const I="signIn",A=yield rg(E,I,p),M=yield Zn._fromIdTokenResponse(E,I,A);return _||(yield E._updateCurrentUser(M.user)),M})).apply(this,arguments)}function Xr(E,p){return mh.apply(this,arguments)}function mh(){return(mh=(0,m.Z)(function*(E,p){return hl(Ye(E),p)})).apply(this,arguments)}function fl(E,p){return Ts.apply(this,arguments)}function Ts(){return(Ts=(0,m.Z)(function*(E,p){const _=(0,F.m9)(E);return yield ju(!1,_,p.providerId),V_(_,p)})).apply(this,arguments)}function _i(E,p){return Yo.apply(this,arguments)}function Yo(){return(Yo=(0,m.Z)(function*(E,p){return Wn((0,F.m9)(E),p)})).apply(this,arguments)}function Pa(E,p){return pl.apply(this,arguments)}function pl(){return(pl=(0,m.Z)(function*(E,p){return nn(E,"POST","/v1/accounts:signInWithCustomToken",Ut(E,p))})).apply(this,arguments)}function Gs(E,p){return wo.apply(this,arguments)}function wo(){return(wo=(0,m.Z)(function*(E,p){const _=Ye(E),I=yield Pa(_,{token:p,returnSecureToken:!0}),A=yield Zn._fromIdTokenResponse(_,"signIn",I);return yield _._updateCurrentUser(A.user),A})).apply(this,arguments)}class Qo{constructor(p,_){this.factorId=p,this.uid=_.mfaEnrollmentId,this.enrollmentTime=new Date(_.enrolledAt).toUTCString(),this.displayName=_.displayName}static _fromServerResponse(p,_){return"phoneInfo"in _?jt._fromServerResponse(p,_):Ne(p,"internal-error")}}class jt extends Qo{constructor(p){super("phone",p),this.phoneNumber=p.phoneInfo}static _fromServerResponse(p,_){return new jt(_)}}function Hu(E,p,_){var I;X((null===(I=_.url)||void 0===I?void 0:I.length)>0,E,"invalid-continue-uri"),X(void 0===_.dynamicLinkDomain||_.dynamicLinkDomain.length>0,E,"invalid-dynamic-link-domain"),p.continueUrl=_.url,p.dynamicLinkDomain=_.dynamicLinkDomain,p.canHandleCodeInApp=_.handleCodeInApp,_.iOS&&(X(_.iOS.bundleId.length>0,E,"missing-ios-bundle-id"),p.iOSBundleId=_.iOS.bundleId),_.android&&(X(_.android.packageName.length>0,E,"missing-android-pkg-name"),p.androidInstallApp=_.android.installApp,p.androidMinimumVersionCode=_.android.minimumVersion,p.androidPackageName=_.android.packageName)}function sg(E,p,_){return gl.apply(this,arguments)}function gl(){return(gl=(0,m.Z)(function*(E,p,_){const I=(0,F.m9)(E),A={requestType:"PASSWORD_RESET",email:p};_&&Hu(I,A,_),yield Bn(I,A)})).apply(this,arguments)}function B_(E,p,_){return ml.apply(this,arguments)}function ml(){return(ml=(0,m.Z)(function*(E,p,_){yield an((0,F.m9)(E),{oobCode:p,newPassword:_})})).apply(this,arguments)}function j_(E,p){return _h.apply(this,arguments)}function _h(){return(_h=(0,m.Z)(function*(E,p){yield Nu((0,F.m9)(E),{oobCode:p})})).apply(this,arguments)}function We(E,p){return gn.apply(this,arguments)}function gn(){return(gn=(0,m.Z)(function*(E,p){const _=(0,F.m9)(E),I=yield an(_,{oobCode:p}),A=I.requestType;switch(X(A,_,"internal-error"),A){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":X(I.newEmail,_,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":X(I.mfaInfo,_,"internal-error");default:X(I.email,_,"internal-error")}let M=null;return I.mfaInfo&&(M=Qo._fromServerResponse(Ye(_),I.mfaInfo)),{data:{email:("VERIFY_AND_CHANGE_EMAIL"===I.requestType?I.newEmail:I.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===I.requestType?I.email:I.newEmail)||null,multiFactorInfo:M},operation:A}})).apply(this,arguments)}function O0(E,p){return er.apply(this,arguments)}function er(){return(er=(0,m.Z)(function*(E,p){const{data:_}=yield We((0,F.m9)(E),p);return _.email})).apply(this,arguments)}function _l(E,p,_){return Jo.apply(this,arguments)}function Jo(){return(Jo=(0,m.Z)(function*(E,p,_){const I=Ye(E),A=yield cl(I,{returnSecureToken:!0,email:p,password:_}),M=yield Zn._fromIdTokenResponse(I,"signIn",A);return yield I._updateCurrentUser(M.user),M})).apply(this,arguments)}function ss(E,p,_){return Xr((0,F.m9)(E),ng.credential(p,_))}function yh(E,p,_){return Wu.apply(this,arguments)}function Wu(){return(Wu=(0,m.Z)(function*(E,p,_){const I=(0,F.m9)(E),A={requestType:"EMAIL_SIGNIN",email:p};X(_.handleCodeInApp,I,"argument-error"),_&&Hu(I,A,_),yield lh(I,A)})).apply(this,arguments)}function F0(E,p){const _=Zo.parseLink(p);return"EMAIL_SIGNIN"===(null==_?void 0:_.operation)}function og(E,p,_){return Na.apply(this,arguments)}function Na(){return(Na=(0,m.Z)(function*(E,p,_){const I=(0,F.m9)(E),A=ng.credentialWithLink(p,_||le());return X(A._tenantId===(I.tenantId||null),I,"tenant-id-mismatch"),Xr(I,A)})).apply(this,arguments)}function yl(E,p){return Vr.apply(this,arguments)}function Vr(){return(Vr=(0,m.Z)(function*(E,p){return Ge(E,"POST","/v1/accounts:createAuthUri",Ut(E,p))})).apply(this,arguments)}function qs(E,p){return vl.apply(this,arguments)}function vl(){return(vl=(0,m.Z)(function*(E,p){const I={identifier:p,continueUri:Pt()?le():"http://localhost"},{signinMethods:A}=yield yl((0,F.m9)(E),I);return A||[]})).apply(this,arguments)}function Ma(E,p){return os.apply(this,arguments)}function os(){return(os=(0,m.Z)(function*(E,p){const _=(0,F.m9)(E),A={requestType:"VERIFY_EMAIL",idToken:yield E.getIdToken()};p&&Hu(_.auth,A,p);const{email:M}=yield Mu(_.auth,A);M!==E.email&&(yield E.reload())})).apply(this,arguments)}function $_(E,p,_){return El.apply(this,arguments)}function El(){return(El=(0,m.Z)(function*(E,p,_){const I=(0,F.m9)(E),M={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:yield E.getIdToken(),newEmail:p};_&&Hu(I.auth,M,_);const{email:ne}=yield ns(I.auth,M);ne!==E.email&&(yield E.reload())})).apply(this,arguments)}function H_(E,p){return vh.apply(this,arguments)}function vh(){return(vh=(0,m.Z)(function*(E,p){return Ge(E,"POST","/v1/accounts:update",p)})).apply(this,arguments)}function Eh(E,p){return zu.apply(this,arguments)}function zu(){return(zu=(0,m.Z)(function*(E,{displayName:p,photoURL:_}){if(void 0===p&&void 0===_)return;const I=(0,F.m9)(E),M={idToken:yield I.getIdToken(),displayName:p,photoUrl:_,returnSecureToken:!0},ne=yield st(I,H_(I.auth,M));I.displayName=ne.displayName||null,I.photoURL=ne.photoUrl||null;const ze=I.providerData.find(({providerId:St})=>"password"===St);ze&&(ze.displayName=I.displayName,ze.photoURL=I.photoURL),yield I._updateTokensIfNecessary(ne)})).apply(this,arguments)}function W_(E,p){return z_((0,F.m9)(E),p,null)}function wh(E,p){return z_((0,F.m9)(E),null,p)}function z_(E,p,_){return wl.apply(this,arguments)}function wl(){return(wl=(0,m.Z)(function*(E,p,_){const{auth:I}=E,M={idToken:yield E.getIdToken(),returnSecureToken:!0};p&&(M.email=p),_&&(M.password=_);const ne=yield st(E,ji(I,M));yield E._updateTokensIfNecessary(ne,!0)})).apply(this,arguments)}class Xo{constructor(p,_,I={}){this.isNewUser=p,this.providerId=_,this.profile=I}}class Ih extends Xo{constructor(p,_,I,A){super(p,_,I),this.username=A}}class G_ extends Xo{constructor(p,_){super(p,"facebook.com",_)}}class q_ extends Ih{constructor(p,_){super(p,"github.com",_,"string"==typeof(null==_?void 0:_.login)?null==_?void 0:_.login:null)}}class qu extends Xo{constructor(p,_){super(p,"google.com",_)}}class Io extends Ih{constructor(p,_,I){super(p,"twitter.com",_,I)}}function K_(E){const{user:p,_tokenResponse:_}=E;return p.isAnonymous&&!_?{providerId:null,isNewUser:!1,profile:null}:function Gu(E){var p,_;if(!E)return null;const{providerId:I}=E,A=E.rawUserInfo?JSON.parse(E.rawUserInfo):{},M=E.isNewUser||"identitytoolkit#SignupNewUserResponse"===E.kind;if(!I&&(null==E?void 0:E.idToken)){const ne=null===(_=null===(p=Et(E.idToken))||void 0===p?void 0:p.firebase)||void 0===_?void 0:_.sign_in_provider;if(ne)return new Xo(M,"anonymous"!==ne&&"custom"!==ne?ne:null)}if(!I)return null;switch(I){case"facebook.com":return new G_(M,A);case"github.com":return new q_(M,A);case"google.com":return new qu(M,A);case"twitter.com":return new Io(M,A,E.screenName||null);case"custom":case"anonymous":return new Xo(M,null);default:return new Xo(M,I,A)}}(_)}function tr(E,p,_,I){return(0,F.m9)(E).onAuthStateChanged(p,_,I)}class ea{constructor(p,_){this.type=p,this.credential=_}static _fromIdtoken(p){return new ea("enroll",p)}static _fromMfaPendingCredential(p){return new ea("signin",p)}toJSON(){return{multiFactorSession:{["enroll"===this.type?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(p){var _,I;if(null==p?void 0:p.multiFactorSession){if(null===(_=p.multiFactorSession)||void 0===_?void 0:_.pendingCredential)return ea._fromMfaPendingCredential(p.multiFactorSession.pendingCredential);if(null===(I=p.multiFactorSession)||void 0===I?void 0:I.idToken)return ea._fromIdtoken(p.multiFactorSession.idToken)}return null}}class Ku{constructor(p,_,I){this.session=p,this.hints=_,this.signInResolver=I}static _fromError(p,_){const I=Ye(p),A=_.customData._serverResponse,M=(A.mfaInfo||[]).map(ze=>Qo._fromServerResponse(I,ze));X(A.mfaPendingCredential,I,"internal-error");const ne=ea._fromMfaPendingCredential(A.mfaPendingCredential);return new Ku(ne,M,function(){var ze=(0,m.Z)(function*(St){const Lt=yield St._process(I,ne);delete A.mfaInfo,delete A.mfaPendingCredential;const Qt=Object.assign(Object.assign({},A),{idToken:Lt.idToken,refreshToken:Lt.refreshToken});switch(_.operationType){case"signIn":const nr=yield Zn._fromIdTokenResponse(I,_.operationType,Qt);return yield I._updateCurrentUser(nr.user),nr;case"reauthenticate":return X(_.user,I,"internal-error"),Zn._forOperation(_.user,_.operationType,Qt);default:Ne(I,"internal-error")}});return function(St){return ze.apply(this,arguments)}}())}resolveSignIn(p){var _=this;return(0,m.Z)(function*(){return _.signInResolver(p)})()}}function bh(E,p){var _;const I=(0,F.m9)(E),A=p;return X(p.customData.operationType,I,"argument-error"),X(null===(_=A.customData._serverResponse)||void 0===_?void 0:_.mfaPendingCredential,I,"argument-error"),Ku._fromError(I,A)}function Ch(E,p){return Ge(E,"POST","/v2/accounts/mfaEnrollment:start",Ut(E,p))}class ug{constructor(p){this.user=p,this.enrolledFactors=[],p._onReload(_=>{_.mfaInfo&&(this.enrolledFactors=_.mfaInfo.map(I=>Qo._fromServerResponse(p.auth,I)))})}static _fromUser(p){return new ug(p)}getSession(){var p=this;return(0,m.Z)(function*(){return ea._fromIdtoken(yield p.user.getIdToken())})()}enroll(p,_){var I=this;return(0,m.Z)(function*(){const A=p,M=yield I.getSession(),ne=yield st(I.user,A._process(I.user.auth,M,_));return yield I.user._updateTokensIfNecessary(ne),I.user.reload()})()}unenroll(p){var _=this;return(0,m.Z)(function*(){const I="string"==typeof p?p:p.uid,A=yield _.user.getIdToken(),M=yield st(_.user,function Z_(E,p){return Ge(E,"POST","/v2/accounts/mfaEnrollment:withdraw",Ut(E,p))}(_.user.auth,{idToken:A,mfaEnrollmentId:I}));_.enrolledFactors=_.enrolledFactors.filter(({uid:ne})=>ne!==I),yield _.user._updateTokensIfNecessary(M);try{yield _.user.reload()}catch(ne){if("auth/user-token-expired"!==ne.code)throw ne}})()}}const Zs=new WeakMap;function Il(E){const p=(0,F.m9)(E);return Zs.has(p)||Zs.set(p,ug._fromUser(p)),Zs.get(p)}const Dh="__sak";class Y_{constructor(p,_){this.storageRetriever=p,this.type=_}_isAvailable(){try{return this.storage?(this.storage.setItem(Dh,"1"),this.storage.removeItem(Dh),Promise.resolve(!0)):Promise.resolve(!1)}catch(p){return Promise.resolve(!1)}}_set(p,_){return this.storage.setItem(p,JSON.stringify(_)),Promise.resolve()}_get(p){const _=this.storage.getItem(p);return Promise.resolve(_?JSON.parse(_):null)}_remove(p){return this.storage.removeItem(p),Promise.resolve()}get storage(){return this.storageRetriever()}}const ur=(()=>{class E extends Y_{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(_,I)=>this.onStorageEvent(_,I),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function bl(){const E=(0,F.z$)();return H(E)||sn(E)}()&&function K(){try{return!(!window||window===window.top)}catch(E){return!1}}(),this.fallbackToPolling=mr(),this._shouldAllowMigration=!0}forAllChangedKeys(_){for(const I of Object.keys(this.listeners)){const A=this.storage.getItem(I),M=this.localCache[I];A!==M&&_(I,M,A)}}onStorageEvent(_,I=!1){if(!_.key)return void this.forAllChangedKeys((ze,St,Lt)=>{this.notifyListeners(ze,Lt)});const A=_.key;if(I?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const ze=this.storage.getItem(A);if(_.newValue!==ze)null!==_.newValue?this.storage.setItem(A,_.newValue):this.storage.removeItem(A);else if(this.localCache[A]===_.newValue&&!I)return}const M=()=>{const ze=this.storage.getItem(A);!I&&this.localCache[A]===ze||this.notifyListeners(A,ze)},ne=this.storage.getItem(A);!function ln(){return(0,F.w1)()&&10===document.documentMode}()||ne===_.newValue||_.newValue===_.oldValue?M():setTimeout(M,10)}notifyListeners(_,I){this.localCache[_]=I;const A=this.listeners[_];if(A)for(const M of Array.from(A))M(I&&JSON.parse(I))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((_,I,A)=>{this.onStorageEvent(new StorageEvent("storage",{key:_,oldValue:I,newValue:A}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(_,I){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[_]||(this.listeners[_]=new Set,this.localCache[_]=this.storage.getItem(_)),this.listeners[_].add(I)}_removeListener(_,I){this.listeners[_]&&(this.listeners[_].delete(I),0===this.listeners[_].size&&delete this.listeners[_]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}_set(_,I){var A=()=>super._set,M=this;return(0,m.Z)(function*(){yield A().call(M,_,I),M.localCache[_]=JSON.stringify(I)})()}_get(_){var I=()=>super._get,A=this;return(0,m.Z)(function*(){const M=yield I().call(A,_);return A.localCache[_]=JSON.stringify(M),M})()}_remove(_){var I=()=>super._remove,A=this;return(0,m.Z)(function*(){yield I().call(A,_),delete A.localCache[_]})()}}return E.type="LOCAL",E})(),kt=(()=>{class E extends Y_{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(_,I){}_removeListener(_,I){}}return E.type="SESSION",E})();let Wr=(()=>{class E{constructor(_){this.eventTarget=_,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(_){const I=this.receivers.find(M=>M.isListeningto(_));if(I)return I;const A=new E(_);return this.receivers.push(A),A}isListeningto(_){return this.eventTarget===_}handleEvent(_){var I=this;return(0,m.Z)(function*(){const A=_,{eventId:M,eventType:ne,data:ze}=A.data,St=I.handlersMap[ne];if(!(null==St?void 0:St.size))return;A.ports[0].postMessage({status:"ack",eventId:M,eventType:ne});const Lt=Array.from(St).map(function(){var nr=(0,m.Z)(function*(ui){return ui(A.origin,ze)});return function(ui){return nr.apply(this,arguments)}}()),Qt=yield function Ir(E){return Promise.all(E.map(function(){var p=(0,m.Z)(function*(_){try{return{fulfilled:!0,value:yield _}}catch(I){return{fulfilled:!1,reason:I}}});return function(_){return p.apply(this,arguments)}}()))}(Lt);A.ports[0].postMessage({status:"done",eventId:M,eventType:ne,response:Qt})})()}_subscribe(_,I){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[_]||(this.handlersMap[_]=new Set),this.handlersMap[_].add(I)}_unsubscribe(_,I){this.handlersMap[_]&&I&&this.handlersMap[_].delete(I),(!I||0===this.handlersMap[_].size)&&delete this.handlersMap[_],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}return E.receivers=[],E})();function cr(E="",p=10){let _="";for(let I=0;I<p;I++)_+=Math.floor(10*Math.random());return E+_}class lg{constructor(p){this.target=p,this.handlers=new Set}removeMessageHandler(p){p.messageChannel&&(p.messageChannel.port1.removeEventListener("message",p.onMessage),p.messageChannel.port1.close()),this.handlers.delete(p)}_send(p,_,I=50){var A=this;return(0,m.Z)(function*(){const M="undefined"!=typeof MessageChannel?new MessageChannel:null;if(!M)throw new Error("connection_unavailable");let ne,ze;return new Promise((St,Lt)=>{const Qt=cr("",20);M.port1.start();const nr=setTimeout(()=>{Lt(new Error("unsupported_event"))},I);ze={messageChannel:M,onMessage(ui){const sa=ui;if(sa.data.eventId===Qt)switch(sa.data.status){case"ack":clearTimeout(nr),ne=setTimeout(()=>{Lt(new Error("timeout"))},3e3);break;case"done":clearTimeout(ne),St(sa.data.response);break;default:clearTimeout(nr),clearTimeout(ne),Lt(new Error("invalid_response"))}}},A.handlers.add(ze),M.port1.addEventListener("message",ze.onMessage),A.target.postMessage({eventType:p,eventId:Qt,data:_},[M.port2])}).finally(()=>{ze&&A.removeMessageHandler(ze)})})()}}function br(){return window}function Ah(){return void 0!==br().WorkerGlobalScope&&"function"==typeof br().importScripts}function Zu(){return(Zu=(0,m.Z)(function*(){if(!(null==navigator?void 0:navigator.serviceWorker))return null;try{return(yield navigator.serviceWorker.ready).active}catch(E){return null}})).apply(this,arguments)}const Rh="firebaseLocalStorageDb",Cl="firebaseLocalStorage",hg="fbase_key";class zn{constructor(p){this.request=p}toPromise(){return new Promise((p,_)=>{this.request.addEventListener("success",()=>{p(this.request.result)}),this.request.addEventListener("error",()=>{_(this.request.error)})})}}function Fa(E,p){return E.transaction([Cl],p?"readwrite":"readonly").objectStore(Cl)}function La(){const E=indexedDB.open(Rh,1);return new Promise((p,_)=>{E.addEventListener("error",()=>{_(E.error)}),E.addEventListener("upgradeneeded",()=>{const I=E.result;try{I.createObjectStore(Cl,{keyPath:hg})}catch(A){_(A)}}),E.addEventListener("success",(0,m.Z)(function*(){const I=E.result;I.objectStoreNames.contains(Cl)?p(I):(I.close(),yield function Yu(){const E=indexedDB.deleteDatabase(Rh);return new zn(E).toPromise()}(),p(yield La()))}))})}function Ua(E,p,_){return xh.apply(this,arguments)}function xh(){return(xh=(0,m.Z)(function*(E,p,_){const I=Fa(E,!0).put({[hg]:p,value:_});return new zn(I).toPromise()})).apply(this,arguments)}function ta(){return(ta=(0,m.Z)(function*(E,p){const _=Fa(E,!1).get(p),I=yield new zn(_).toPromise();return void 0===I?null:I.value})).apply(this,arguments)}function Ph(E,p){const _=Fa(E,!0).delete(p);return new zn(_).toPromise()}const Ds=(()=>{class E{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){var _=this;return(0,m.Z)(function*(){return _.db||(_.db=yield La()),_.db})()}_withRetries(_){var I=this;return(0,m.Z)(function*(){let A=0;for(;;)try{const M=yield I._openDb();return yield _(M)}catch(M){if(A++>3)throw M;I.db&&(I.db.close(),I.db=void 0)}})()}initializeServiceWorkerMessaging(){var _=this;return(0,m.Z)(function*(){return Ah()?_.initializeReceiver():_.initializeSender()})()}initializeReceiver(){var _=this;return(0,m.Z)(function*(){_.receiver=Wr._getInstance(function Vt(){return Ah()?self:null}()),_.receiver._subscribe("keyChanged",function(){var I=(0,m.Z)(function*(A,M){return{keyProcessed:(yield _._poll()).includes(M.key)}});return function(A,M){return I.apply(this,arguments)}}()),_.receiver._subscribe("ping",function(){var I=(0,m.Z)(function*(A,M){return["keyChanged"]});return function(A,M){return I.apply(this,arguments)}}())})()}initializeSender(){var _=this;return(0,m.Z)(function*(){var I,A;if(_.activeServiceWorker=yield function Oa(){return Zu.apply(this,arguments)}(),!_.activeServiceWorker)return;_.sender=new lg(_.activeServiceWorker);const M=yield _.sender._send("ping",{},800);!M||(null===(I=M[0])||void 0===I?void 0:I.fulfilled)&&(null===(A=M[0])||void 0===A?void 0:A.value.includes("keyChanged"))&&(_.serviceWorkerReceiverAvailable=!0)})()}notifyServiceWorker(_){var I=this;return(0,m.Z)(function*(){if(I.sender&&I.activeServiceWorker&&function bo(){var E;return(null===(E=null==navigator?void 0:navigator.serviceWorker)||void 0===E?void 0:E.controller)||null}()===I.activeServiceWorker)try{yield I.sender._send("keyChanged",{key:_},I.serviceWorkerReceiverAvailable?800:50)}catch(A){}})()}_isAvailable(){return(0,m.Z)(function*(){try{if(!indexedDB)return!1;const _=yield La();return yield Ua(_,Dh,"1"),yield Ph(_,Dh),!0}catch(_){}return!1})()}_withPendingWrite(_){var I=this;return(0,m.Z)(function*(){I.pendingWrites++;try{yield _()}finally{I.pendingWrites--}})()}_set(_,I){var A=this;return(0,m.Z)(function*(){return A._withPendingWrite((0,m.Z)(function*(){return yield A._withRetries(M=>Ua(M,_,I)),A.localCache[_]=I,A.notifyServiceWorker(_)}))})()}_get(_){var I=this;return(0,m.Z)(function*(){const A=yield I._withRetries(M=>function Qu(E,p){return ta.apply(this,arguments)}(M,_));return I.localCache[_]=A,A})()}_remove(_){var I=this;return(0,m.Z)(function*(){return I._withPendingWrite((0,m.Z)(function*(){return yield I._withRetries(A=>Ph(A,_)),delete I.localCache[_],I.notifyServiceWorker(_)}))})()}_poll(){var _=this;return(0,m.Z)(function*(){const I=yield _._withRetries(ne=>{const ze=Fa(ne,!1).getAll();return new zn(ze).toPromise()});if(!I)return[];if(0!==_.pendingWrites)return[];const A=[],M=new Set;for(const{fbase_key:ne,value:ze}of I)M.add(ne),JSON.stringify(_.localCache[ne])!==JSON.stringify(ze)&&(_.notifyListeners(ne,ze),A.push(ne));for(const ne of Object.keys(_.localCache))_.localCache[ne]&&!M.has(ne)&&(_.notifyListeners(ne,null),A.push(ne));return A})()}notifyListeners(_,I){this.localCache[_]=I;const A=this.listeners[_];if(A)for(const M of Array.from(A))M(I)}startPolling(){var _=this;this.stopPolling(),this.pollTimer=setInterval((0,m.Z)(function*(){return _._poll()}),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(_,I){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[_]||(this.listeners[_]=new Set,this._get(_)),this.listeners[_].add(I)}_removeListener(_,I){this.listeners[_]&&(this.listeners[_].delete(I),0===this.listeners[_].size&&delete this.listeners[_]),0===Object.keys(this.listeners).length&&this.stopPolling()}}return E.type="LOCAL",E})();function Va(E,p){return Ge(E,"POST","/v2/accounts/mfaSignIn:start",Ut(E,p))}function Tl(){return(Tl=(0,m.Z)(function*(E){return(yield Ge(E,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""})).apply(this,arguments)}function Ys(E){return new Promise((p,_)=>{const I=document.createElement("script");I.setAttribute("src",E),I.onload=p,I.onerror=A=>{const M=ce("internal-error");M.customData=A,_(M)},I.type="text/javascript",I.charset="UTF-8",function jn(){var E,p;return null!==(p=null===(E=document.getElementsByTagName("head"))||void 0===E?void 0:E[0])&&void 0!==p?p:document}().appendChild(I)})}function Co(E){return`__${E}${Math.floor(1e6*Math.random())}`}const lr=1e12;class ki{constructor(p){this.auth=p,this.counter=lr,this._widgets=new Map}render(p,_){const I=this.counter;return this._widgets.set(I,new Nr(p,this.auth.name,_||{})),this.counter++,I}reset(p){var _;const I=p||lr;null===(_=this._widgets.get(I))||void 0===_||_.delete(),this._widgets.delete(I)}getResponse(p){var _;return(null===(_=this._widgets.get(p||lr))||void 0===_?void 0:_.getResponse())||""}execute(p){var _=this;return(0,m.Z)(function*(){var I;return null===(I=_._widgets.get(p||lr))||void 0===I||I.execute(),""})()}}class Nr{constructor(p,_,I){this.params=I,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const A="string"==typeof p?document.getElementById(p):p;X(A,"argument-error",{appName:_}),this.container=A,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=function Ba(E){const p=[],_="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let I=0;I<E;I++)p.push(_.charAt(Math.floor(Math.random()*_.length)));return p.join("")}(50);const{callback:p,"expired-callback":_}=this.params;if(p)try{p(this.responseToken)}catch(I){}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,_)try{_()}catch(I){}this.isVisible&&this.execute()},6e4)},500))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}const $i=Co("rcb"),fg=new mt(3e4,6e4);class dr{constructor(){this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!!br().grecaptcha}load(p,_=""){return X(function gg(E){return E.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(E)}(_),p,"argument-error"),this.shouldResolveImmediately(_)?Promise.resolve(br().grecaptcha):new Promise((I,A)=>{const M=br().setTimeout(()=>{A(ce(p,"network-request-failed"))},fg.get());br()[$i]=()=>{br().clearTimeout(M),delete br()[$i];const ze=br().grecaptcha;if(!ze)return void A(ce(p,"internal-error"));const St=ze.render;ze.render=(Lt,Qt)=>{const nr=St(Lt,Qt);return this.counter++,nr},this.hostLanguage=_,I(ze)},Ys(`https://www.google.com/recaptcha/api.js??${(0,F.xO)({onload:$i,render:"explicit",hl:_})}`).catch(()=>{clearTimeout(M),A(ce(p,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(p){return!!br().grecaptcha&&(p===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}class V0{load(p){return(0,m.Z)(function*(){return new ki(p)})()}clearedOneInstance(){}}const na="recaptcha",Hi={theme:"light",type:"image"};class B0{constructor(p,_=Object.assign({},Hi),I){this.parameters=_,this.type=na,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=Ye(I),this.isInvisible="invisible"===this.parameters.size,X("undefined"!=typeof document,this.auth,"operation-not-supported-in-this-environment");const A="string"==typeof p?document.getElementById(p):p;X(A,this.auth,"argument-error"),this.container=A,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new V0:new dr,this.validateStartingState()}verify(){var p=this;return(0,m.Z)(function*(){p.assertNotDestroyed();const _=yield p.render(),I=p.getAssertedRecaptcha();return I.getResponse(_)||new Promise(M=>{const ne=ze=>{!ze||(p.tokenChangeListeners.delete(ne),M(ze))};p.tokenChangeListeners.add(ne),p.isInvisible&&I.execute(_)})})()}render(){try{this.assertNotDestroyed()}catch(p){return Promise.reject(p)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch(p=>{throw this.renderPromise=null,p})),this.renderPromise}_reset(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(p=>{this.container.removeChild(p)})}validateStartingState(){X(!this.parameters.sitekey,this.auth,"argument-error"),X(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),X("undefined"!=typeof document,this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(p){return _=>{if(this.tokenChangeListeners.forEach(I=>I(_)),"function"==typeof p)p(_);else if("string"==typeof p){const I=br()[p];"function"==typeof I&&I(_)}}}assertNotDestroyed(){X(!this.destroyed,this.auth,"internal-error")}makeRenderPromise(){var p=this;return(0,m.Z)(function*(){if(yield p.init(),!p.widgetId){let _=p.container;if(!p.isInvisible){const I=document.createElement("div");_.appendChild(I),_=I}p.widgetId=p.getAssertedRecaptcha().render(_,p.parameters)}return p.widgetId})()}init(){var p=this;return(0,m.Z)(function*(){X(Pt()&&!Ah(),p.auth,"internal-error"),yield function To(){let E=null;return new Promise(p=>{"complete"!==document.readyState?(E=()=>p(),window.addEventListener("load",E)):p()}).catch(p=>{throw E&&window.removeEventListener("load",E),p})}(),p.recaptcha=yield p._recaptchaLoader.load(p.auth,p.auth.languageCode||void 0);const _=yield function Nh(E){return Tl.apply(this,arguments)}(p.auth);X(_,p.auth,"internal-error"),p.parameters.sitekey=_})()}getAssertedRecaptcha(){return X(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}class Dl{constructor(p,_){this.verificationId=p,this.onConfirmation=_}confirm(p){const _=Aa._fromVerification(this.verificationId,p);return this.onConfirmation(_)}}function As(E,p,_){return ec.apply(this,arguments)}function ec(){return(ec=(0,m.Z)(function*(E,p,_){const I=Ye(E),A=yield Sl(I,p,(0,F.m9)(_));return new Dl(A,M=>Xr(I,M))})).apply(this,arguments)}function _r(E,p,_){return ja.apply(this,arguments)}function ja(){return(ja=(0,m.Z)(function*(E,p,_){const I=(0,F.m9)(E);yield ju(!1,I,"phone");const A=yield Sl(I.auth,p,(0,F.m9)(_));return new Dl(A,M=>fl(I,M))})).apply(this,arguments)}function tc(E,p,_){return kh.apply(this,arguments)}function kh(){return(kh=(0,m.Z)(function*(E,p,_){const I=(0,F.m9)(E),A=yield Sl(I.auth,p,(0,F.m9)(_));return new Dl(A,M=>_i(I,M))})).apply(this,arguments)}function Sl(E,p,_){return ai.apply(this,arguments)}function ai(){return(ai=(0,m.Z)(function*(E,p,_){var I;const A=yield _.verify();try{let M;if(X("string"==typeof A,E,"argument-error"),X(_.type===na,E,"argument-error"),M="string"==typeof p?{phoneNumber:p}:p,"session"in M){const ne=M.session;if("phoneNumber"in M)return X("enroll"===ne.type,E,"internal-error"),(yield Ch(E,{idToken:ne.credential,phoneEnrollmentInfo:{phoneNumber:M.phoneNumber,recaptchaToken:A}})).phoneSessionInfo.sessionInfo;{X("signin"===ne.type,E,"internal-error");const ze=(null===(I=M.multiFactorHint)||void 0===I?void 0:I.uid)||M.multiFactorUid;return X(ze,E,"missing-multi-factor-info"),(yield Va(E,{mfaPendingCredential:ne.credential,mfaEnrollmentId:ze,phoneSignInInfo:{recaptchaToken:A}})).phoneResponseInfo.sessionInfo}}{const{sessionInfo:ne}=yield A0(E,{phoneNumber:M.phoneNumber,recaptchaToken:A});return ne}}finally{_._reset()}})).apply(this,arguments)}function as(E,p){return nc.apply(this,arguments)}function nc(){return(nc=(0,m.Z)(function*(E,p){yield V_((0,F.m9)(E),p)})).apply(this,arguments)}let Al=(()=>{class E{constructor(_){this.providerId=E.PROVIDER_ID,this.auth=Ye(_)}verifyPhoneNumber(_,I){return Sl(this.auth,_,(0,F.m9)(I))}static credential(_,I){return Aa._fromVerification(_,I)}static credentialFromResult(_){return E.credentialFromTaggedObject(_)}static credentialFromError(_){return E.credentialFromTaggedObject(_.customData||{})}static credentialFromTaggedObject({_tokenResponse:_}){if(!_)return null;const{phoneNumber:I,temporaryProof:A}=_;return I&&A?Aa._fromTokenResponse(I,A):null}}return E.PROVIDER_ID="phone",E.PHONE_SIGN_IN_METHOD="phone",E})();function us(E,p){return p?ue(p):(X(E._popupRedirectResolver,E,"argument-error"),E._popupRedirectResolver)}class Rl extends pn{constructor(p){super("custom","custom"),this.params=p}_getIdTokenResponse(p){return Eo(p,this._buildIdpRequest())}_linkToIdToken(p,_){return Eo(p,this._buildIdpRequest(_))}_getReauthenticationResolver(p){return Eo(p,this._buildIdpRequest())}_buildIdpRequest(p){const _={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return p&&(_.idToken=p),_}}function mg(E){return hl(E.auth,new Rl(E),E.bypassAuthState)}function _g(E){const{auth:p,user:_}=E;return X(_,p,"internal-error"),Wn(_,new Rl(E),E.bypassAuthState)}function mn(E){return yg.apply(this,arguments)}function yg(){return(yg=(0,m.Z)(function*(E){const{auth:p,user:_}=E;return X(_,p,"internal-error"),V_(_,new Rl(E),E.bypassAuthState)})).apply(this,arguments)}class Do{constructor(p,_,I,A,M=!1){this.auth=p,this.resolver=I,this.user=A,this.bypassAuthState=M,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(_)?_:[_]}execute(){var p=this;return new Promise(function(){var _=(0,m.Z)(function*(I,A){p.pendingPromise={resolve:I,reject:A};try{p.eventManager=yield p.resolver._initialize(p.auth),yield p.onExecution(),p.eventManager.registerConsumer(p)}catch(M){p.reject(M)}});return function(I,A){return _.apply(this,arguments)}}())}onAuthEvent(p){var _=this;return(0,m.Z)(function*(){const{urlResponse:I,sessionId:A,postBody:M,tenantId:ne,error:ze,type:St}=p;if(ze)return void _.reject(ze);const Lt={auth:_.auth,requestUri:I,sessionId:A,tenantId:ne||void 0,postBody:M||void 0,user:_.user,bypassAuthState:_.bypassAuthState};try{_.resolve(yield _.getIdpTask(St)(Lt))}catch(Qt){_.reject(Qt)}})()}onError(p){this.reject(p)}getIdpTask(p){switch(p){case"signInViaPopup":case"signInViaRedirect":return mg;case"linkViaPopup":case"linkViaRedirect":return mn;case"reauthViaPopup":case"reauthViaRedirect":return _g;default:Ne(this.auth,"internal-error")}}resolve(p){Y(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(p),this.unregisterAndCleanUp()}reject(p){Y(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(p),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const vi=new mt(2e3,1e4);function rc(E,p,_){return So.apply(this,arguments)}function So(){return(So=(0,m.Z)(function*(E,p,_){const I=Ye(E);we(E,p,zs);const A=us(I,_);return new Nl(I,"signInViaPopup",p,A).executeNotNull()})).apply(this,arguments)}function j0(E,p,_){return xl.apply(this,arguments)}function xl(){return(xl=(0,m.Z)(function*(E,p,_){const I=(0,F.m9)(E);we(I.auth,p,zs);const A=us(I.auth,_);return new Nl(I.auth,"reauthViaPopup",p,A,I).executeNotNull()})).apply(this,arguments)}function Rs(E,p,_){return Pl.apply(this,arguments)}function Pl(){return(Pl=(0,m.Z)(function*(E,p,_){const I=(0,F.m9)(E);we(I.auth,p,zs);const A=us(I.auth,_);return new Nl(I.auth,"linkViaPopup",p,A,I).executeNotNull()})).apply(this,arguments)}let Nl=(()=>{class E extends Do{constructor(_,I,A,M,ne){super(_,I,M,ne),this.provider=A,this.authWindow=null,this.pollId=null,E.currentPopupAction&&E.currentPopupAction.cancel(),E.currentPopupAction=this}executeNotNull(){var _=this;return(0,m.Z)(function*(){const I=yield _.execute();return X(I,_.auth,"internal-error"),I})()}onExecution(){var _=this;return(0,m.Z)(function*(){Y(1===_.filter.length,"Popup operations only handle one event");const I=cr();_.authWindow=yield _.resolver._openPopup(_.auth,_.provider,_.filter[0],I),_.authWindow.associatedEvent=I,_.resolver._originValidation(_.auth).catch(A=>{_.reject(A)}),_.resolver._isIframeWebStorageSupported(_.auth,A=>{A||_.reject(ce(_.auth,"web-storage-unsupported"))}),_.pollUserCancellation()})()}get eventId(){var _;return(null===(_=this.authWindow)||void 0===_?void 0:_.associatedEvent)||null}cancel(){this.reject(ce(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,E.currentPopupAction=null}pollUserCancellation(){const _=()=>{var I,A;this.pollId=(null===(A=null===(I=this.authWindow)||void 0===I?void 0:I.window)||void 0===A?void 0:A.closed)?window.setTimeout(()=>{this.pollId=null,this.reject(ce(this.auth,"popup-closed-by-user"))},2e3):window.setTimeout(_,vi.get())};_()}}return E.currentPopupAction=null,E})();const Oh=new Map;class Br extends Do{constructor(p,_,I=!1){super(p,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],_,void 0,I),this.eventId=null}execute(){var p=()=>super.execute,_=this;return(0,m.Z)(function*(){let I=Oh.get(_.auth._key());if(!I){try{const M=(yield function Wi(E,p){return $a.apply(this,arguments)}(_.resolver,_.auth))?yield p().call(_):null;I=()=>Promise.resolve(M)}catch(A){I=()=>Promise.reject(A)}Oh.set(_.auth._key(),I)}return _.bypassAuthState||Oh.set(_.auth._key(),()=>Promise.resolve(null)),I()})()}onAuthEvent(p){var _=()=>super.onAuthEvent,I=this;return(0,m.Z)(function*(){if("signInViaRedirect"===p.type)return _().call(I,p);if("unknown"!==p.type){if(p.eventId){const A=yield I.auth._redirectUserForId(p.eventId);if(A)return I.user=A,_().call(I,p);I.resolve(null)}}else I.resolve(null)})()}onExecution(){return(0,m.Z)(function*(){})()}cleanUp(){}}function $a(){return($a=(0,m.Z)(function*(E,p){const _=Fh(p),I=ic(E);if(!(yield I._isAvailable()))return!1;const A="true"===(yield I._get(_));return yield I._remove(_),A})).apply(this,arguments)}function Eg(E,p){return Ao.apply(this,arguments)}function Ao(){return(Ao=(0,m.Z)(function*(E,p){return ic(E)._set(Fh(p),"true")})).apply(this,arguments)}function Ml(){Oh.clear()}function ic(E){return ue(E._redirectPersistence)}function Fh(E){return tt("pendingRedirect",E.config.apiKey,E.name)}function X_(E,p,_){return function wg(E,p,_){return sc.apply(this,arguments)}(E,p,_)}function sc(){return(sc=(0,m.Z)(function*(E,p,_){const I=Ye(E);we(E,p,zs);const A=us(I,_);return yield Eg(A,I),A._openRedirect(I,p,"signInViaRedirect")})).apply(this,arguments)}function kl(E,p,_){return function cs(E,p,_){return hn.apply(this,arguments)}(E,p,_)}function hn(){return(hn=(0,m.Z)(function*(E,p,_){const I=(0,F.m9)(E);we(I.auth,p,zs);const A=us(I.auth,_);yield Eg(A,I.auth);const M=yield ac(I);return A._openRedirect(I.auth,p,"reauthViaRedirect",M)})).apply(this,arguments)}function oc(E,p,_){return function zr(E,p,_){return xs.apply(this,arguments)}(E,p,_)}function xs(){return(xs=(0,m.Z)(function*(E,p,_){const I=(0,F.m9)(E);we(I.auth,p,zs);const A=us(I.auth,_);yield ju(!1,I,p.providerId),yield Eg(A,I.auth);const M=yield ac(I);return A._openRedirect(I.auth,p,"linkViaRedirect",M)})).apply(this,arguments)}function $0(E,p){return Ha.apply(this,arguments)}function Ha(){return(Ha=(0,m.Z)(function*(E,p){return yield Ye(E)._initializationPromise,Ro(E,p,!1)})).apply(this,arguments)}function Ro(E,p){return Lh.apply(this,arguments)}function Lh(){return(Lh=(0,m.Z)(function*(E,p,_=!1){const I=Ye(E),A=us(I,p),ne=yield new Br(I,A,_).execute();return ne&&!_&&(delete ne.user._redirectEventId,yield I._persistUserIfCurrent(ne.user),yield I._setRedirectUser(null,p)),ne})).apply(this,arguments)}function ac(E){return ra.apply(this,arguments)}function ra(){return(ra=(0,m.Z)(function*(E){const p=cr(`${E.uid}:::`);return E._redirectEventId=p,yield E.auth._setRedirectUser(E),yield E.auth._persistUserIfCurrent(E),p})).apply(this,arguments)}class ls{constructor(p){this.auth=p,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(p){this.consumers.add(p),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,p)&&(this.sendToConsumer(this.queuedRedirectEvent,p),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(p){this.consumers.delete(p)}onEvent(p){if(this.hasEventBeenHandled(p))return!1;let _=!1;return this.consumers.forEach(I=>{this.isEventForConsumer(p,I)&&(_=!0,this.sendToConsumer(p,I),this.saveEventToCache(p))}),this.hasHandledPotentialRedirect||!function Ol(E){switch(E.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Qs(E);default:return!1}}(p)||(this.hasHandledPotentialRedirect=!0,_||(this.queuedRedirectEvent=p,_=!0)),_}sendToConsumer(p,_){var I;if(p.error&&!Qs(p)){const A=(null===(I=p.error.code)||void 0===I?void 0:I.split("auth/")[1])||"internal-error";_.onError(ce(this.auth,A))}else _.onAuthEvent(p)}isEventForConsumer(p,_){const I=null===_.eventId||!!p.eventId&&p.eventId===_.eventId;return _.filter.includes(p.type)&&I}hasEventBeenHandled(p){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(Uh(p))}saveEventToCache(p){this.cachedEventUids.add(Uh(p)),this.lastProcessedEventTime=Date.now()}}function Uh(E){return[E.type,E.eventId,E.sessionId,E.tenantId].filter(p=>p).join("-")}function Qs({type:E,error:p}){return"unknown"===E&&"auth/no-auth-event"===(null==p?void 0:p.code)}function Fl(E){return za.apply(this,arguments)}function za(){return(za=(0,m.Z)(function*(E,p={}){return Ge(E,"GET","/v1/projects",p)})).apply(this,arguments)}const Ll=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,Ig=/^https?/;function Ga(){return(Ga=(0,m.Z)(function*(E){if(E.config.emulator)return;const{authorizedDomains:p}=yield Fl(E);for(const _ of p)try{if(qa(_))return}catch(I){}Ne(E,"unauthorized-domain")})).apply(this,arguments)}function qa(E){const p=le(),{protocol:_,hostname:I}=new URL(p);if(E.startsWith("chrome-extension://")){const ne=new URL(E);return""===ne.hostname&&""===I?"chrome-extension:"===_&&E.replace("chrome-extension://","")===p.replace("chrome-extension://",""):"chrome-extension:"===_&&ne.hostname===I}if(!Ig.test(_))return!1;if(Ll.test(E))return I===E;const A=E.replace(/\./g,"\\.");return new RegExp("^(.+\\."+A+"|"+A+")$","i").test(I)}const uc=new mt(3e4,6e4);function bg(){const E=br().___jsl;if(null==E?void 0:E.H)for(const p of Object.keys(E.H))if(E.H[p].r=E.H[p].r||[],E.H[p].L=E.H[p].L||[],E.H[p].r=[...E.H[p].L],E.CP)for(let _=0;_<E.CP.length;_++)E.CP[_]=null}let cc=null;function Cg(E){return cc=cc||function H0(E){return new Promise((p,_)=>{var I,A,M;function ne(){bg(),gapi.load("gapi.iframes",{callback:()=>{p(gapi.iframes.getContext())},ontimeout:()=>{bg(),_(ce(E,"network-request-failed"))},timeout:uc.get()})}if(null===(A=null===(I=br().gapi)||void 0===I?void 0:I.iframes)||void 0===A?void 0:A.Iframe)p(gapi.iframes.getContext());else{if(!(null===(M=br().gapi)||void 0===M?void 0:M.load)){const ze=Co("iframefcb");return br()[ze]=()=>{gapi.load?ne():_(ce(E,"network-request-failed"))},Ys(`https://apis.google.com/js/api.js?onload=${ze}`).catch(St=>_(St))}ne()}}).catch(p=>{throw cc=null,p})}(E),cc}const Tg=new mt(5e3,15e3),Ka={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},lc=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function Ul(E){const p=E.config;X(p.authDomain,E,"auth-domain-config-required");const _=p.emulator?Xt(p,"emulator/auth/iframe"):`https://${E.config.authDomain}/__/auth/iframe`,I={apiKey:p.apiKey,appName:E.name,v:N.SDK_VERSION},A=lc.get(E.config.apiHost);A&&(I.eid=A);const M=E._getFrameworks();return M.length&&(I.fw=M.join(",")),`${_}?${(0,F.xO)(I).slice(1)}`}function xo(){return xo=(0,m.Z)(function*(E){const p=yield Cg(E),_=br().gapi;return X(_,E,"internal-error"),p.open({where:document.body,url:Ul(E),messageHandlersFilter:_.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:Ka,dontclear:!0},I=>new Promise(function(){var A=(0,m.Z)(function*(M,ne){yield I.restyle({setHideOnLeave:!1});const ze=ce(E,"network-request-failed"),St=br().setTimeout(()=>{ne(ze)},Tg.get());function Lt(){br().clearTimeout(St),M(I)}I.ping(Lt).then(Lt,()=>{ne(ze)})});return function(M,ne){return A.apply(this,arguments)}}()))}),xo.apply(this,arguments)}const Dg={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class jl{constructor(p){this.window=p,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch(p){}}}function Bh(E,p,_,I,A,M){X(E.config.authDomain,E,"auth-domain-config-required"),X(E.config.apiKey,E,"invalid-api-key");const ne={apiKey:E.config.apiKey,appName:E.name,authType:_,redirectUrl:I,v:N.SDK_VERSION,eventId:A};if(p instanceof zs){p.setDefaultLanguage(E.languageCode),ne.providerId=p.providerId||"",(0,F.xb)(p.getCustomParameters())||(ne.customParameters=JSON.stringify(p.getCustomParameters()));for(const[St,Lt]of Object.entries(M||{}))ne[St]=Lt}if(p instanceof Ou){const St=p.getScopes().filter(Lt=>""!==Lt);St.length>0&&(ne.scopes=St.join(","))}E.tenantId&&(ne.tid=E.tenantId);const ze=ne;for(const St of Object.keys(ze))void 0===ze[St]&&delete ze[St];return`${function ny({config:E}){return E.emulator?Xt(E,"emulator/auth/handler"):`https://${E.authDomain}/__/auth/handler`}(E)}?${(0,F.xO)(ze).slice(1)}`}const jh="webStorageSupport",Ps=class ds{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=kt,this._completeRedirectFn=Ro}_openPopup(p,_,I,A){var M=this;return(0,m.Z)(function*(){var ne;Y(null===(ne=M.eventManagers[p._key()])||void 0===ne?void 0:ne.manager,"_initialize() not called before _openPopup()");const ze=Bh(p,_,I,le(),A);return function $l(E,p,_,I=500,A=600){const M=Math.max((window.screen.availHeight-A)/2,0).toString(),ne=Math.max((window.screen.availWidth-I)/2,0).toString();let ze="";const St=Object.assign(Object.assign({},Dg),{width:I.toString(),height:A.toString(),top:M,left:ne}),Lt=(0,F.z$)().toLowerCase();_&&(ze=Re(Lt)?"_blank":_),$(Lt)&&(p=p||"http://localhost",St.scrollbars="yes");const Qt=Object.entries(St).reduce((ui,[sa,Ya])=>`${ui}${sa}=${Ya},`,"");if(function xr(E=(0,F.z$)()){var p;return sn(E)&&!!(null===(p=window.navigator)||void 0===p?void 0:p.standalone)}(Lt)&&"_self"!==ze)return function Hl(E,p){const _=document.createElement("a");_.href=E,_.target=p;const I=document.createEvent("MouseEvent");I.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),_.dispatchEvent(I)}(p||"",ze),new jl(null);const nr=window.open(p||"",ze,Qt);X(nr,E,"popup-blocked");try{nr.focus()}catch(ui){}return new jl(nr)}(p,ze,cr())})()}_openRedirect(p,_,I,A){var M=this;return(0,m.Z)(function*(){return yield M._originValidation(p),function ka(E){br().location.href=E}(Bh(p,_,I,le(),A)),new Promise(()=>{})})()}_initialize(p){const _=p._key();if(this.eventManagers[_]){const{manager:A,promise:M}=this.eventManagers[_];return A?Promise.resolve(A):(Y(M,"If manager is not set, promise should be"),M)}const I=this.initAndGetManager(p);return this.eventManagers[_]={promise:I},I.catch(()=>{delete this.eventManagers[_]}),I}initAndGetManager(p){var _=this;return(0,m.Z)(function*(){const I=yield function Za(E){return xo.apply(this,arguments)}(p),A=new ls(p);return I.register("authEvent",M=>(X(null==M?void 0:M.authEvent,p,"invalid-auth-event"),{status:A.onEvent(M.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),_.eventManagers[p._key()]={manager:A},_.iframes[p._key()]=I,A})()}_isIframeWebStorageSupported(p,_){this.iframes[p._key()].send(jh,{type:jh},A=>{var M;const ne=null===(M=null==A?void 0:A[0])||void 0===M?void 0:M[jh];void 0!==ne&&_(!!ne),Ne(p,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(p){const _=p._key();return this.originValidationPromises[_]||(this.originValidationPromises[_]=function ey(E){return Ga.apply(this,arguments)}(p)),this.originValidationPromises[_]}get _shouldInitProactively(){return mr()||H()||sn()}};class Hh extends class $h{constructor(p){this.factorId=p}_process(p,_,I){switch(_.type){case"enroll":return this._finalizeEnroll(p,_.credential,I);case"signin":return this._finalizeSignIn(p,_.credential);default:return ht("unexpected MultiFactorSessionType")}}}{constructor(p){super("phone"),this.credential=p}static _fromCredential(p){return new Hh(p)}_finalizeEnroll(p,_,I){return function Th(E,p){return Ge(E,"POST","/v2/accounts/mfaEnrollment:finalize",Ut(E,p))}(p,{idToken:_,displayName:I,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(p,_){return function ei(E,p){return Ge(E,"POST","/v2/accounts/mfaSignIn:finalize",Ut(E,p))}(p,{mfaPendingCredential:_,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}let ry=(()=>{class E{constructor(){}static assertion(_){return Hh._fromCredential(_)}}return E.FACTOR_ID="phone",E})();var iy="@firebase/auth";class z0{constructor(p){this.auth=p,this.internalListeners=new Map}getUid(){var p;return this.assertAuthConfigured(),(null===(p=this.auth.currentUser)||void 0===p?void 0:p.uid)||null}getToken(p){var _=this;return(0,m.Z)(function*(){return _.assertAuthConfigured(),yield _.auth._initializationPromise,_.auth.currentUser?{accessToken:yield _.auth.currentUser.getIdToken(p)}:null})()}addAuthTokenListener(p){if(this.assertAuthConfigured(),this.internalListeners.has(p))return;const _=this.auth.onIdTokenChanged(I=>{var A;p((null===(A=I)||void 0===A?void 0:A.stsTokenManager.accessToken)||null)});this.internalListeners.set(p,_),this.updateProactiveRefresh()}removeAuthTokenListener(p){this.assertAuthConfigured();const _=this.internalListeners.get(p);!_||(this.internalListeners.delete(p),_(),this.updateProactiveRefresh())}assertAuthConfigured(){X(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function Ag(E=(0,N.getApp)()){const p=(0,N._getProvider)(E,"auth");return p.isInitialized()?p.getImmediate():function pe(E,p){const _=(0,N._getProvider)(E,"auth");if(_.isInitialized()){const A=_.getImmediate(),M=_.getOptions();if((0,F.vZ)(M,null!=p?p:{}))return A;Ne(A,"already-initialized")}return _.initialize({options:p})}(E,{popupRedirectResolver:Ps,persistence:[Ds,ur,kt]})}!function sy(E){(0,N._registerComponent)(new Ee.wA("auth",(p,{options:_})=>{const I=p.getProvider("app").getImmediate(),{apiKey:A,authDomain:M}=I.options;return(ne=>{X(A&&!A.includes(":"),"invalid-api-key",{appName:ne.name}),X(!(null==M?void 0:M.includes(":")),"argument-error",{appName:ne.name});const ze={apiKey:A,authDomain:M,clientPlatform:E,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:he(E)},St=new gt(ne,ze);return function He(E,p){const _=(null==p?void 0:p.persistence)||[],I=(Array.isArray(_)?_:[_]).map(ue);(null==p?void 0:p.errorMap)&&E._updateErrorMap(p.errorMap),E._initializeWithPersistence(I,null==p?void 0:p.popupRedirectResolver)}(St,_),St})(I)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((p,_,I)=>{p.getProvider("auth-internal").initialize()})),(0,N._registerComponent)(new Ee.wA("auth-internal",p=>{const _=Ye(p.getProvider("auth").getImmediate());return new z0(_)},"PRIVATE").setInstantiationMode("EXPLICIT")),(0,N.registerVersion)(iy,"0.19.9",function Sg(E){switch(E){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}(E)),(0,N.registerVersion)(iy,"0.19.9","esm2017")}("Browser")},2090:(nt,Ie,P)=>{"use strict";P.d(Ie,{BH:()=>Ve,LL:()=>le,ZR:()=>He,gQ:()=>An,zI:()=>me,hu:()=>F,g5:()=>N,US:()=>Ee,tV:()=>_e,h$:()=>ae,$s:()=>qt,r3:()=>Ut,Sg:()=>Me,ne:()=>Jn,p$:()=>j,vZ:()=>zt,ZB:()=>V,gK:()=>et,pd:()=>On,m9:()=>rn,z$:()=>$e,GJ:()=>Gt,jU:()=>se,ru:()=>Le,d:()=>ce,xb:()=>_t,w1:()=>De,hl:()=>ht,uI:()=>Ue,UG:()=>q,Yr:()=>Xe,b$:()=>Ne,G6:()=>X,Mn:()=>we,w9:()=>qn,cI:()=>wn,UI:()=>yt,xO:()=>en,zd:()=>Sn,DV:()=>Ge,ug:()=>Et,dS:()=>Yt,Pz:()=>ct,eu:()=>Y});const F=function(L,z){if(!L)throw N(z)},N=function(L){return new Error("Firebase Database (${JSCORE_VERSION}) INTERNAL ASSERT FAILED: "+L)},oe=function(L){const z=[];let G=0;for(let Te=0;Te<L.length;Te++){let re=L.charCodeAt(Te);re<128?z[G++]=re:re<2048?(z[G++]=re>>6|192,z[G++]=63&re|128):55296==(64512&re)&&Te+1<L.length&&56320==(64512&L.charCodeAt(Te+1))?(re=65536+((1023&re)<<10)+(1023&L.charCodeAt(++Te)),z[G++]=re>>18|240,z[G++]=re>>12&63|128,z[G++]=re>>6&63|128,z[G++]=63&re|128):(z[G++]=re>>12|224,z[G++]=re>>6&63|128,z[G++]=63&re|128)}return z},Ee={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(L,z){if(!Array.isArray(L))throw Error("encodeByteArray takes an array as a parameter");this.init_();const G=z?this.byteToCharMapWebSafe_:this.byteToCharMap_,Te=[];for(let re=0;re<L.length;re+=3){const at=L[re],ee=re+1<L.length,be=ee?L[re+1]:0,Be=re+2<L.length,ut=Be?L[re+2]:0;let At=(15&be)<<2|ut>>6,J=63&ut;Be||(J=64,ee||(At=64)),Te.push(G[at>>2],G[(3&at)<<4|be>>4],G[At],G[J])}return Te.join("")},encodeString(L,z){return this.HAS_NATIVE_SUPPORT&&!z?btoa(L):this.encodeByteArray(oe(L),z)},decodeString(L,z){return this.HAS_NATIVE_SUPPORT&&!z?atob(L):function(L){const z=[];let G=0,Te=0;for(;G<L.length;){const re=L[G++];if(re<128)z[Te++]=String.fromCharCode(re);else if(re>191&&re<224){const at=L[G++];z[Te++]=String.fromCharCode((31&re)<<6|63&at)}else if(re>239&&re<365){const Be=((7&re)<<18|(63&L[G++])<<12|(63&L[G++])<<6|63&L[G++])-65536;z[Te++]=String.fromCharCode(55296+(Be>>10)),z[Te++]=String.fromCharCode(56320+(1023&Be))}else{const at=L[G++],ee=L[G++];z[Te++]=String.fromCharCode((15&re)<<12|(63&at)<<6|63&ee)}}return z.join("")}(this.decodeStringToByteArray(L,z))},decodeStringToByteArray(L,z){this.init_();const G=z?this.charToByteMapWebSafe_:this.charToByteMap_,Te=[];for(let re=0;re<L.length;){const at=G[L.charAt(re++)],be=re<L.length?G[L.charAt(re)]:0;++re;const ut=re<L.length?G[L.charAt(re)]:64;++re;const tt=re<L.length?G[L.charAt(re)]:64;if(++re,null==at||null==be||null==ut||null==tt)throw Error();Te.push(at<<2|be>>4),64!==ut&&(Te.push(be<<4&240|ut>>2),64!==tt&&Te.push(ut<<6&192|tt))}return Te},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let L=0;L<this.ENCODED_VALS.length;L++)this.byteToCharMap_[L]=this.ENCODED_VALS.charAt(L),this.charToByteMap_[this.byteToCharMap_[L]]=L,this.byteToCharMapWebSafe_[L]=this.ENCODED_VALS_WEBSAFE.charAt(L),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[L]]=L,L>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(L)]=L,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(L)]=L)}}},ae=function(L){const z=oe(L);return Ee.encodeByteArray(z,!0)},de=function(L){return ae(L).replace(/\./g,"")},_e=function(L){try{return Ee.decodeString(L,!0)}catch(z){console.error("base64Decode failed: ",z)}return null};function j(L){return V(void 0,L)}function V(L,z){if(!(z instanceof Object))return z;switch(z.constructor){case Date:return new Date(z.getTime());case Object:void 0===L&&(L={});break;case Array:L=[];break;default:return z}for(const G in z)!z.hasOwnProperty(G)||!Q(G)||(L[G]=V(L[G],z[G]));return L}function Q(L){return"__proto__"!==L}class Ve{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((z,G)=>{this.resolve=z,this.reject=G})}wrapCallback(z){return(G,Te)=>{G?this.reject(G):this.resolve(Te),"function"==typeof z&&(this.promise.catch(()=>{}),1===z.length?z(G):z(G,Te))}}}function Me(L,z){if(L.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const Te=z||"demo-project",re=L.iat||0,at=L.sub||L.user_id;if(!at)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const ee=Object.assign({iss:`https://securetoken.google.com/${Te}`,aud:Te,iat:re,exp:re+3600,auth_time:re,sub:at,user_id:at,firebase:{sign_in_provider:"custom",identities:{}}},L);return[de(JSON.stringify({alg:"none",type:"JWT"})),de(JSON.stringify(ee)),""].join(".")}function $e(){return"undefined"!=typeof navigator&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function Ue(){return"undefined"!=typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test($e())}function q(){try{return"[object process]"===Object.prototype.toString.call(global.process)}catch(L){return!1}}function se(){return"object"==typeof self&&self.self===self}function Le(){const L="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof L&&void 0!==L.id}function Ne(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function ce(){return $e().indexOf("Electron/")>=0}function De(){const L=$e();return L.indexOf("MSIE ")>=0||L.indexOf("Trident/")>=0}function we(){return $e().indexOf("MSAppHost/")>=0}function Xe(){return!1}function X(){return!q()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function ht(){return"object"==typeof indexedDB}function Y(){return new Promise((L,z)=>{try{let G=!0;const Te="validate-browser-context-for-indexeddb-analytics-module",re=self.indexedDB.open(Te);re.onsuccess=()=>{re.result.close(),G||self.indexedDB.deleteDatabase(Te),L(!0)},re.onupgradeneeded=()=>{G=!1},re.onerror=()=>{var at;z((null===(at=re.error)||void 0===at?void 0:at.message)||"")}}catch(G){z(G)}})}function me(){return!("undefined"==typeof navigator||!navigator.cookieEnabled)}class He extends Error{constructor(z,G,Te){super(G),this.code=z,this.customData=Te,this.name="FirebaseError",Object.setPrototypeOf(this,He.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,le.prototype.create)}}class le{constructor(z,G,Te){this.service=z,this.serviceName=G,this.errors=Te}create(z,...G){const Te=G[0]||{},re=`${this.service}/${z}`,at=this.errors[z],ee=at?function Pt(L,z){return L.replace(Ht,(G,Te)=>{const re=z[Te];return null!=re?String(re):`<${Te}?>`})}(at,Te):"Error";return new He(re,`${this.serviceName}: ${ee} (${re}).`,Te)}}const Ht=/\{\$([^}]+)}/g;function wn(L){return JSON.parse(L)}function ct(L){return JSON.stringify(L)}const mt=function(L){let z={},G={},Te={},re="";try{const at=L.split(".");z=wn(_e(at[0])||""),G=wn(_e(at[1])||""),re=at[2],Te=G.d||{},delete G.d}catch(at){}return{header:z,claims:G,data:Te,signature:re}},qn=function(L){const G=mt(L).claims;return!!G&&"object"==typeof G&&G.hasOwnProperty("iat")},Gt=function(L){const z=mt(L).claims;return"object"==typeof z&&!0===z.admin};function Ut(L,z){return Object.prototype.hasOwnProperty.call(L,z)}function Ge(L,z){if(Object.prototype.hasOwnProperty.call(L,z))return L[z]}function _t(L){for(const z in L)if(Object.prototype.hasOwnProperty.call(L,z))return!1;return!0}function yt(L,z,G){const Te={};for(const re in L)Object.prototype.hasOwnProperty.call(L,re)&&(Te[re]=z.call(G,L[re],re,L));return Te}function zt(L,z){if(L===z)return!0;const G=Object.keys(L),Te=Object.keys(z);for(const re of G){if(!Te.includes(re))return!1;const at=L[re],ee=z[re];if(nn(at)&&nn(ee)){if(!zt(at,ee))return!1}else if(at!==ee)return!1}for(const re of Te)if(!G.includes(re))return!1;return!0}function nn(L){return null!==L&&"object"==typeof L}function en(L){const z=[];for(const[G,Te]of Object.entries(L))Array.isArray(Te)?Te.forEach(re=>{z.push(encodeURIComponent(G)+"="+encodeURIComponent(re))}):z.push(encodeURIComponent(G)+"="+encodeURIComponent(Te));return z.length?"&"+z.join("&"):""}function Sn(L){const z={};return L.replace(/^\?/,"").split("&").forEach(Te=>{if(Te){const[re,at]=Te.split("=");z[decodeURIComponent(re)]=decodeURIComponent(at)}}),z}function On(L){const z=L.indexOf("?");if(!z)return"";const G=L.indexOf("#",z);return L.substring(z,G>0?G:void 0)}class An{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=64,this.pad_[0]=128;for(let z=1;z<this.blockSize;++z)this.pad_[z]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(z,G){G||(G=0);const Te=this.W_;if("string"==typeof z)for(let tt=0;tt<16;tt++)Te[tt]=z.charCodeAt(G)<<24|z.charCodeAt(G+1)<<16|z.charCodeAt(G+2)<<8|z.charCodeAt(G+3),G+=4;else for(let tt=0;tt<16;tt++)Te[tt]=z[G]<<24|z[G+1]<<16|z[G+2]<<8|z[G+3],G+=4;for(let tt=16;tt<80;tt++){const At=Te[tt-3]^Te[tt-8]^Te[tt-14]^Te[tt-16];Te[tt]=4294967295&(At<<1|At>>>31)}let ut,ot,re=this.chain_[0],at=this.chain_[1],ee=this.chain_[2],be=this.chain_[3],Be=this.chain_[4];for(let tt=0;tt<80;tt++){tt<40?tt<20?(ut=be^at&(ee^be),ot=1518500249):(ut=at^ee^be,ot=1859775393):tt<60?(ut=at&ee|be&(at|ee),ot=2400959708):(ut=at^ee^be,ot=3395469782);const At=(re<<5|re>>>27)+ut+Be+ot+Te[tt]&4294967295;Be=be,be=ee,ee=4294967295&(at<<30|at>>>2),at=re,re=At}this.chain_[0]=this.chain_[0]+re&4294967295,this.chain_[1]=this.chain_[1]+at&4294967295,this.chain_[2]=this.chain_[2]+ee&4294967295,this.chain_[3]=this.chain_[3]+be&4294967295,this.chain_[4]=this.chain_[4]+Be&4294967295}update(z,G){if(null==z)return;void 0===G&&(G=z.length);const Te=G-this.blockSize;let re=0;const at=this.buf_;let ee=this.inbuf_;for(;re<G;){if(0===ee)for(;re<=Te;)this.compress_(z,re),re+=this.blockSize;if("string"==typeof z){for(;re<G;)if(at[ee]=z.charCodeAt(re),++ee,++re,ee===this.blockSize){this.compress_(at),ee=0;break}}else for(;re<G;)if(at[ee]=z[re],++ee,++re,ee===this.blockSize){this.compress_(at),ee=0;break}}this.inbuf_=ee,this.total_+=G}digest(){const z=[];let G=8*this.total_;this.update(this.pad_,this.inbuf_<56?56-this.inbuf_:this.blockSize-(this.inbuf_-56));for(let re=this.blockSize-1;re>=56;re--)this.buf_[re]=255&G,G/=256;this.compress_(this.buf_);let Te=0;for(let re=0;re<5;re++)for(let at=24;at>=0;at-=8)z[Te]=this.chain_[re]>>at&255,++Te;return z}}function Jn(L,z){const G=new Pe(L,z);return G.subscribe.bind(G)}class Pe{constructor(z,G){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=G,this.task.then(()=>{z(this)}).catch(Te=>{this.error(Te)})}next(z){this.forEachObserver(G=>{G.next(z)})}error(z){this.forEachObserver(G=>{G.error(z)}),this.close(z)}complete(){this.forEachObserver(z=>{z.complete()}),this.close()}subscribe(z,G,Te){let re;if(void 0===z&&void 0===G&&void 0===Te)throw new Error("Missing Observer.");re=function ke(L,z){if("object"!=typeof L||null===L)return!1;for(const G of z)if(G in L&&"function"==typeof L[G])return!0;return!1}(z,["next","error","complete"])?z:{next:z,error:G,complete:Te},void 0===re.next&&(re.next=Ze),void 0===re.error&&(re.error=Ze),void 0===re.complete&&(re.complete=Ze);const at=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?re.error(this.finalError):re.complete()}catch(ee){}}),this.observers.push(re),at}unsubscribeOne(z){void 0===this.observers||void 0===this.observers[z]||(delete this.observers[z],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(z){if(!this.finalized)for(let G=0;G<this.observers.length;G++)this.sendOne(G,z)}sendOne(z,G){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[z])try{G(this.observers[z])}catch(Te){"undefined"!=typeof console&&console.error&&console.error(Te)}})}close(z){this.finalized||(this.finalized=!0,void 0!==z&&(this.finalError=z),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function Ze(){}function et(L,z){return`${L} failed: ${z} argument `}const Yt=function(L){const z=[];let G=0;for(let Te=0;Te<L.length;Te++){let re=L.charCodeAt(Te);if(re>=55296&&re<=56319){const at=re-55296;Te++,F(Te<L.length,"Surrogate pair missing trail surrogate."),re=65536+(at<<10)+(L.charCodeAt(Te)-56320)}re<128?z[G++]=re:re<2048?(z[G++]=re>>6|192,z[G++]=63&re|128):re<65536?(z[G++]=re>>12|224,z[G++]=re>>6&63|128,z[G++]=63&re|128):(z[G++]=re>>18|240,z[G++]=re>>12&63|128,z[G++]=re>>6&63|128,z[G++]=63&re|128)}return z},Et=function(L){let z=0;for(let G=0;G<L.length;G++){const Te=L.charCodeAt(G);Te<128?z++:Te<2048?z+=2:Te>=55296&&Te<=56319?(z+=4,G++):z+=3}return z};function qt(L,z=1e3,G=2){const Te=z*Math.pow(G,L),re=Math.round(.5*Te*(Math.random()-.5)*2);return Math.min(144e5,Te+re)}function rn(L){return L&&L._delegate?L._delegate:L}},53:(nt,Ie,P)=>{"use strict";var m=P(5e3);let F=null;function N(){return F}const ae=new m.OlP("DocumentToken");let de=(()=>{class n{historyGo(t){throw new Error("Not implemented")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=m.Yz7({token:n,factory:function(){return function _e(){return(0,m.LFG)(V)}()},providedIn:"platform"}),n})();const j=new m.OlP("Location Initialized");let V=(()=>{class n extends de{constructor(t){super(),this._doc=t,this._init()}_init(){this.location=window.location,this._history=window.history}getBaseHrefFromDOM(){return N().getBaseHref(this._doc)}onPopState(t){const r=N().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",t,!1),()=>r.removeEventListener("popstate",t)}onHashChange(t){const r=N().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",t,!1),()=>r.removeEventListener("hashchange",t)}get href(){return this.location.href}get protocol(){return this.location.protocol}get hostname(){return this.location.hostname}get port(){return this.location.port}get pathname(){return this.location.pathname}get search(){return this.location.search}get hash(){return this.location.hash}set pathname(t){this.location.pathname=t}pushState(t,r,i){Q()?this._history.pushState(t,r,i):this.location.hash=i}replaceState(t,r,i){Q()?this._history.replaceState(t,r,i):this.location.hash=i}forward(){this._history.forward()}back(){this._history.back()}historyGo(t=0){this._history.go(t)}getState(){return this._history.state}}return n.\u0275fac=function(t){return new(t||n)(m.LFG(ae))},n.\u0275prov=m.Yz7({token:n,factory:function(){return function Ve(){return new V((0,m.LFG)(ae))}()},providedIn:"platform"}),n})();function Q(){return!!window.history.pushState}function Me(n,e){if(0==n.length)return e;if(0==e.length)return n;let t=0;return n.endsWith("/")&&t++,e.startsWith("/")&&t++,2==t?n+e.substring(1):1==t?n+e:n+"/"+e}function $e(n){const e=n.match(/#|\?|$/),t=e&&e.index||n.length;return n.slice(0,t-("/"===n[t-1]?1:0))+n.slice(t)}function Ue(n){return n&&"?"!==n[0]?"?"+n:n}let q=(()=>{class n{historyGo(t){throw new Error("Not implemented")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=m.Yz7({token:n,factory:function(){return function se(n){const e=(0,m.LFG)(ae).location;return new Ne((0,m.LFG)(de),e&&e.origin||"")}()},providedIn:"root"}),n})();const Le=new m.OlP("appBaseHref");let Ne=(()=>{class n extends q{constructor(t,r){if(super(),this._platformLocation=t,this._removeListenerFns=[],null==r&&(r=this._platformLocation.getBaseHrefFromDOM()),null==r)throw new Error("No base href set. Please provide a value for the APP_BASE_HREF token or add a base element to the document.");this._baseHref=r}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return Me(this._baseHref,t)}path(t=!1){const r=this._platformLocation.pathname+Ue(this._platformLocation.search),i=this._platformLocation.hash;return i&&t?`${r}${i}`:r}pushState(t,r,i,a){const c=this.prepareExternalUrl(i+Ue(a));this._platformLocation.pushState(t,r,c)}replaceState(t,r,i,a){const c=this.prepareExternalUrl(i+Ue(a));this._platformLocation.replaceState(t,r,c)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}historyGo(t=0){var r,i;null===(i=(r=this._platformLocation).historyGo)||void 0===i||i.call(r,t)}}return n.\u0275fac=function(t){return new(t||n)(m.LFG(de),m.LFG(Le,8))},n.\u0275prov=m.Yz7({token:n,factory:n.\u0275fac}),n})(),ce=(()=>{class n extends q{constructor(t,r){super(),this._platformLocation=t,this._baseHref="",this._removeListenerFns=[],null!=r&&(this._baseHref=r)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}path(t=!1){let r=this._platformLocation.hash;return null==r&&(r="#"),r.length>0?r.substring(1):r}prepareExternalUrl(t){const r=Me(this._baseHref,t);return r.length>0?"#"+r:r}pushState(t,r,i,a){let c=this.prepareExternalUrl(i+Ue(a));0==c.length&&(c=this._platformLocation.pathname),this._platformLocation.pushState(t,r,c)}replaceState(t,r,i,a){let c=this.prepareExternalUrl(i+Ue(a));0==c.length&&(c=this._platformLocation.pathname),this._platformLocation.replaceState(t,r,c)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}historyGo(t=0){var r,i;null===(i=(r=this._platformLocation).historyGo)||void 0===i||i.call(r,t)}}return n.\u0275fac=function(t){return new(t||n)(m.LFG(de),m.LFG(Le,8))},n.\u0275prov=m.Yz7({token:n,factory:n.\u0275fac}),n})(),De=(()=>{class n{constructor(t,r){this._subject=new m.vpe,this._urlChangeListeners=[],this._platformStrategy=t;const i=this._platformStrategy.getBaseHref();this._platformLocation=r,this._baseHref=$e(X(i)),this._platformStrategy.onPopState(a=>{this._subject.emit({url:this.path(!0),pop:!0,state:a.state,type:a.type})})}path(t=!1){return this.normalize(this._platformStrategy.path(t))}getState(){return this._platformLocation.getState()}isCurrentPathEqualTo(t,r=""){return this.path()==this.normalize(t+Ue(r))}normalize(t){return n.stripTrailingSlash(function Xe(n,e){return n&&e.startsWith(n)?e.substring(n.length):e}(this._baseHref,X(t)))}prepareExternalUrl(t){return t&&"/"!==t[0]&&(t="/"+t),this._platformStrategy.prepareExternalUrl(t)}go(t,r="",i=null){this._platformStrategy.pushState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+Ue(r)),i)}replaceState(t,r="",i=null){this._platformStrategy.replaceState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+Ue(r)),i)}forward(){this._platformStrategy.forward()}back(){this._platformStrategy.back()}historyGo(t=0){var r,i;null===(i=(r=this._platformStrategy).historyGo)||void 0===i||i.call(r,t)}onUrlChange(t){this._urlChangeListeners.push(t),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)}))}_notifyUrlChangeListeners(t="",r){this._urlChangeListeners.forEach(i=>i(t,r))}subscribe(t,r,i){return this._subject.subscribe({next:t,error:r,complete:i})}}return n.normalizeQueryParams=Ue,n.joinWithSlash=Me,n.stripTrailingSlash=$e,n.\u0275fac=function(t){return new(t||n)(m.LFG(q),m.LFG(de))},n.\u0275prov=m.Yz7({token:n,factory:function(){return function we(){return new De((0,m.LFG)(q),(0,m.LFG)(de))}()},providedIn:"root"}),n})();function X(n){return n.replace(/\/index.html$/,"")}var me=(()=>((me=me||{})[me.Zero=0]="Zero",me[me.One=1]="One",me[me.Two=2]="Two",me[me.Few=3]="Few",me[me.Many=4]="Many",me[me.Other=5]="Other",me))();const On=m.kL8;class an{}let ji=(()=>{class n extends an{constructor(t){super(),this.locale=t}getPluralCategory(t,r){switch(On(r||this.locale)(t)){case me.Zero:return"zero";case me.One:return"one";case me.Two:return"two";case me.Few:return"few";case me.Many:return"many";default:return"other"}}}return n.\u0275fac=function(t){return new(t||n)(m.LFG(m.soG))},n.\u0275prov=m.Yz7({token:n,factory:n.\u0275fac}),n})();class yo{constructor(e,t,r,i){this.$implicit=e,this.ngForOf=t,this.index=r,this.count=i}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let Pr=(()=>{class n{constructor(t,r,i){this._viewContainer=t,this._template=r,this._differs=i,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForOf(t){this._ngForOf=t,this._ngForOfDirty=!0}set ngForTrackBy(t){this._trackByFn=t}get ngForTrackBy(){return this._trackByFn}set ngForTemplate(t){t&&(this._template=t)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const t=this._ngForOf;!this._differ&&t&&(this._differ=this._differs.find(t).create(this.ngForTrackBy))}if(this._differ){const t=this._differ.diff(this._ngForOf);t&&this._applyChanges(t)}}_applyChanges(t){const r=this._viewContainer;t.forEachOperation((i,a,c)=>{if(null==i.previousIndex)r.createEmbeddedView(this._template,new yo(i.item,this._ngForOf,-1,-1),null===c?void 0:c);else if(null==c)r.remove(null===a?void 0:a);else if(null!==a){const h=r.get(a);r.move(h,c),vo(h,i)}});for(let i=0,a=r.length;i<a;i++){const h=r.get(i).context;h.index=i,h.count=a,h.ngForOf=this._ngForOf}t.forEachIdentityChange(i=>{vo(r.get(i.currentIndex),i)})}static ngTemplateContextGuard(t,r){return!0}}return n.\u0275fac=function(t){return new(t||n)(m.Y36(m.s_b),m.Y36(m.Rgc),m.Y36(m.ZZ4))},n.\u0275dir=m.lG2({type:n,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"}}),n})();function vo(n,e){n.context.$implicit=e.item}let oi=(()=>{class n{constructor(t,r){this._viewContainer=t,this._context=new Bn,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=r}set ngIf(t){this._context.$implicit=this._context.ngIf=t,this._updateView()}set ngIfThen(t){ol("ngIfThen",t),this._thenTemplateRef=t,this._thenViewRef=null,this._updateView()}set ngIfElse(t){ol("ngIfElse",t),this._elseTemplateRef=t,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(t,r){return!0}}return n.\u0275fac=function(t){return new(t||n)(m.Y36(m.s_b),m.Y36(m.Rgc))},n.\u0275dir=m.lG2({type:n,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"}}),n})();class Bn{constructor(){this.$implicit=null,this.ngIf=null}}function ol(n,e){if(e&&!e.createEmbeddedView)throw new Error(`${n} must be a TemplateRef, but received '${(0,m.AaK)(e)}'.`)}class S0{createSubscription(e,t){return e.subscribe({next:t,error:r=>{throw r}})}dispose(e){e.unsubscribe()}onDestroy(e){e.unsubscribe()}}class Ws{createSubscription(e,t){return e.then(t,r=>{throw r})}dispose(e){}onDestroy(e){}}const A0=new Ws,Yp=new S0;let Qp=(()=>{class n{constructor(t){this._ref=t,this._latestValue=null,this._subscription=null,this._obj=null,this._strategy=null}ngOnDestroy(){this._subscription&&this._dispose()}transform(t){return this._obj?t!==this._obj?(this._dispose(),this.transform(t)):this._latestValue:(t&&this._subscribe(t),this._latestValue)}_subscribe(t){this._obj=t,this._strategy=this._selectStrategy(t),this._subscription=this._strategy.createSubscription(t,r=>this._updateLatestValue(t,r))}_selectStrategy(t){if((0,m.QGY)(t))return A0;if((0,m.F4k)(t))return Yp;throw function Mi(n,e){return new m.vHH(2100,"")}()}_dispose(){this._strategy.dispose(this._subscription),this._latestValue=null,this._subscription=null,this._obj=null}_updateLatestValue(t,r){t===this._obj&&(this._latestValue=r,this._ref.markForCheck())}}return n.\u0275fac=function(t){return new(t||n)(m.Y36(m.sBO,16))},n.\u0275pipe=m.Yjl({name:"async",type:n,pure:!1}),n})(),Zo=(()=>{class n{transform(t){return JSON.stringify(t,null,2)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275pipe=m.Yjl({name:"json",type:n,pure:!1}),n})(),Uu=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=m.oAB({type:n}),n.\u0275inj=m.cJS({providers:[{provide:an,useClass:ji}]}),n})();const Ra="browser";function Zn(n){return n===Ra}function Vu(n){return"server"===n}let rg=(()=>{class n{}return n.\u0275prov=(0,m.Yz7)({token:n,providedIn:"root",factory:()=>new dl((0,m.LFG)(ae),window)}),n})();class dl{constructor(e,t){this.document=e,this.window=t,this.offset=()=>[0,0]}setOffset(e){this.offset=Array.isArray(e)?()=>e:e}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(e){this.supportsScrolling()&&this.window.scrollTo(e[0],e[1])}scrollToAnchor(e){if(!this.supportsScrolling())return;const t=function Bu(n,e){const t=n.getElementById(e)||n.getElementsByName(e)[0];if(t)return t;if("function"==typeof n.createTreeWalker&&n.body&&(n.body.createShadowRoot||n.body.attachShadow)){const r=n.createTreeWalker(n.body,NodeFilter.SHOW_ELEMENT);let i=r.currentNode;for(;i;){const a=i.shadowRoot;if(a){const c=a.getElementById(e)||a.querySelector(`[name="${e}"]`);if(c)return c}i=r.nextNode()}}return null}(this.document,e);t&&(this.scrollToElement(t),t.focus())}setHistoryScrollRestoration(e){if(this.supportScrollRestoration()){const t=this.window.history;t&&t.scrollRestoration&&(t.scrollRestoration=e)}}scrollToElement(e){const t=e.getBoundingClientRect(),r=t.left+this.window.pageXOffset,i=t.top+this.window.pageYOffset,a=this.offset();this.window.scrollTo(r-a[0],i-a[1])}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const e=ig(this.window.history)||ig(Object.getPrototypeOf(this.window.history));return!(!e||!e.writable&&!e.set)}catch(e){return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch(e){return!1}}}function ig(n){return Object.getOwnPropertyDescriptor(n,"scrollRestoration")}class $u extends class ju extends class Ee{}{constructor(){super(...arguments),this.supportsDOMEvents=!0}}{static makeCurrent(){!function ye(n){F||(F=n)}(new $u)}onAndCancel(e,t,r){return e.addEventListener(t,r,!1),()=>{e.removeEventListener(t,r,!1)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.parentNode&&e.parentNode.removeChild(e)}createElement(e,t){return(t=t||this.getDefaultDocument()).createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return"window"===t?window:"document"===t?e:"body"===t?e.body:null}getBaseHref(e){const t=function gh(){return Wn=Wn||document.querySelector("base"),Wn?Wn.getAttribute("href"):null}();return null==t?null:function xa(n){hl=hl||document.createElement("a"),hl.setAttribute("href",n);const e=hl.pathname;return"/"===e.charAt(0)?e:`/${e}`}(t)}resetBaseElement(){Wn=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return function Nu(n,e){e=encodeURIComponent(e);for(const t of n.split(";")){const r=t.indexOf("="),[i,a]=-1==r?[t,""]:[t.slice(0,r),t.slice(r+1)];if(i.trim()===e)return decodeURIComponent(a)}return null}(document.cookie,e)}}let hl,Wn=null;const Xr=new m.OlP("TRANSITION_ID"),fl=[{provide:m.ip1,useFactory:function mh(n,e,t){return()=>{t.get(m.CZH).donePromise.then(()=>{const r=N(),i=e.querySelectorAll(`style[ng-transition="${n}"]`);for(let a=0;a<i.length;a++)r.remove(i[a])})}},deps:[Xr,ae,m.zs3],multi:!0}];class Ts{static init(){(0,m.VLi)(new Ts)}addToWindow(e){m.dqk.getAngularTestability=(r,i=!0)=>{const a=e.findTestabilityInTree(r,i);if(null==a)throw new Error("Could not find testability for element.");return a},m.dqk.getAllAngularTestabilities=()=>e.getAllTestabilities(),m.dqk.getAllAngularRootElements=()=>e.getAllRootElements(),m.dqk.frameworkStabilizers||(m.dqk.frameworkStabilizers=[]),m.dqk.frameworkStabilizers.push(r=>{const i=m.dqk.getAllAngularTestabilities();let a=i.length,c=!1;const h=function(g){c=c||g,a--,0==a&&r(c)};i.forEach(function(g){g.whenStable(h)})})}findTestabilityInTree(e,t,r){if(null==t)return null;const i=e.getTestability(t);return null!=i?i:r?N().isShadowRoot(t)?this.findTestabilityInTree(e,t.host,!0):this.findTestabilityInTree(e,t.parentElement,!0):null}}let _i=(()=>{class n{build(){return new XMLHttpRequest}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=m.Yz7({token:n,factory:n.\u0275fac}),n})();const Yo=new m.OlP("EventManagerPlugins");let Pa=(()=>{class n{constructor(t,r){this._zone=r,this._eventNameToPlugin=new Map,t.forEach(i=>i.manager=this),this._plugins=t.slice().reverse()}addEventListener(t,r,i){return this._findPluginFor(r).addEventListener(t,r,i)}addGlobalEventListener(t,r,i){return this._findPluginFor(r).addGlobalEventListener(t,r,i)}getZone(){return this._zone}_findPluginFor(t){const r=this._eventNameToPlugin.get(t);if(r)return r;const i=this._plugins;for(let a=0;a<i.length;a++){const c=i[a];if(c.supports(t))return this._eventNameToPlugin.set(t,c),c}throw new Error(`No event manager plugin found for event ${t}`)}}return n.\u0275fac=function(t){return new(t||n)(m.LFG(Yo),m.LFG(m.R0b))},n.\u0275prov=m.Yz7({token:n,factory:n.\u0275fac}),n})();class pl{constructor(e){this._doc=e}addGlobalEventListener(e,t,r){const i=N().getGlobalEventTarget(this._doc,e);if(!i)throw new Error(`Unsupported event target ${i} for event ${t}`);return this.addEventListener(i,t,r)}}let Gs=(()=>{class n{constructor(){this._stylesSet=new Set}addStyles(t){const r=new Set;t.forEach(i=>{this._stylesSet.has(i)||(this._stylesSet.add(i),r.add(i))}),this.onStylesAdded(r)}onStylesAdded(t){}getAllStyles(){return Array.from(this._stylesSet)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=m.Yz7({token:n,factory:n.\u0275fac}),n})(),wo=(()=>{class n extends Gs{constructor(t){super(),this._doc=t,this._hostNodes=new Map,this._hostNodes.set(t.head,[])}_addStylesToHost(t,r,i){t.forEach(a=>{const c=this._doc.createElement("style");c.textContent=a,i.push(r.appendChild(c))})}addHost(t){const r=[];this._addStylesToHost(this._stylesSet,t,r),this._hostNodes.set(t,r)}removeHost(t){const r=this._hostNodes.get(t);r&&r.forEach(Qo),this._hostNodes.delete(t)}onStylesAdded(t){this._hostNodes.forEach((r,i)=>{this._addStylesToHost(t,i,r)})}ngOnDestroy(){this._hostNodes.forEach(t=>t.forEach(Qo))}}return n.\u0275fac=function(t){return new(t||n)(m.LFG(ae))},n.\u0275prov=m.Yz7({token:n,factory:n.\u0275fac}),n})();function Qo(n){N().remove(n)}const jt={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},Hu=/%COMP%/g;function We(n,e,t){for(let r=0;r<e.length;r++){let i=e[r];Array.isArray(i)?We(n,i,t):(i=i.replace(Hu,n),t.push(i))}return t}function gn(n){return e=>{if("__ngUnwrap__"===e)return n;!1===n(e)&&(e.preventDefault(),e.returnValue=!1)}}let er=(()=>{class n{constructor(t,r,i){this.eventManager=t,this.sharedStylesHost=r,this.appId=i,this.rendererByCompId=new Map,this.defaultRenderer=new _l(t)}createRenderer(t,r){if(!t||!r)return this.defaultRenderer;switch(r.encapsulation){case m.ifc.Emulated:{let i=this.rendererByCompId.get(r.id);return i||(i=new yh(this.eventManager,this.sharedStylesHost,r,this.appId),this.rendererByCompId.set(r.id,i)),i.applyToHost(t),i}case 1:case m.ifc.ShadowDom:return new Wu(this.eventManager,this.sharedStylesHost,t,r);default:if(!this.rendererByCompId.has(r.id)){const i=We(r.id,r.styles,[]);this.sharedStylesHost.addStyles(i),this.rendererByCompId.set(r.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}return n.\u0275fac=function(t){return new(t||n)(m.LFG(Pa),m.LFG(wo),m.LFG(m.AFp))},n.\u0275prov=m.Yz7({token:n,factory:n.\u0275fac}),n})();class _l{constructor(e){this.eventManager=e,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(e,t){return t?document.createElementNS(jt[t]||t,e):document.createElement(e)}createComment(e){return document.createComment(e)}createText(e){return document.createTextNode(e)}appendChild(e,t){e.appendChild(t)}insertBefore(e,t,r){e&&e.insertBefore(t,r)}removeChild(e,t){e&&e.removeChild(t)}selectRootElement(e,t){let r="string"==typeof e?document.querySelector(e):e;if(!r)throw new Error(`The selector "${e}" did not match any elements`);return t||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,r,i){if(i){t=i+":"+t;const a=jt[i];a?e.setAttributeNS(a,t,r):e.setAttribute(t,r)}else e.setAttribute(t,r)}removeAttribute(e,t,r){if(r){const i=jt[r];i?e.removeAttributeNS(i,t):e.removeAttribute(`${r}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,r,i){i&(m.JOm.DashCase|m.JOm.Important)?e.style.setProperty(t,r,i&m.JOm.Important?"important":""):e.style[t]=r}removeStyle(e,t,r){r&m.JOm.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,r){e[t]=r}setValue(e,t){e.nodeValue=t}listen(e,t,r){return"string"==typeof e?this.eventManager.addGlobalEventListener(e,t,gn(r)):this.eventManager.addEventListener(e,t,gn(r))}}class yh extends _l{constructor(e,t,r,i){super(e),this.component=r;const a=We(i+"-"+r.id,r.styles,[]);t.addStyles(a),this.contentAttr=function j_(n){return"_ngcontent-%COMP%".replace(Hu,n)}(i+"-"+r.id),this.hostAttr=function _h(n){return"_nghost-%COMP%".replace(Hu,n)}(i+"-"+r.id)}applyToHost(e){super.setAttribute(e,this.hostAttr,"")}createElement(e,t){const r=super.createElement(e,t);return super.setAttribute(r,this.contentAttr,""),r}}class Wu extends _l{constructor(e,t,r,i){super(e),this.sharedStylesHost=t,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const a=We(i.id,i.styles,[]);for(let c=0;c<a.length;c++){const h=document.createElement("style");h.textContent=a[c],this.shadowRoot.appendChild(h)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,r){return super.insertBefore(this.nodeOrShadowRoot(e),t,r)}removeChild(e,t){return super.removeChild(this.nodeOrShadowRoot(e),t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}}let F0=(()=>{class n extends pl{constructor(t){super(t)}supports(t){return!0}addEventListener(t,r,i){return t.addEventListener(r,i,!1),()=>this.removeEventListener(t,r,i)}removeEventListener(t,r,i){return t.removeEventListener(r,i)}}return n.\u0275fac=function(t){return new(t||n)(m.LFG(ae))},n.\u0275prov=m.Yz7({token:n,factory:n.\u0275fac}),n})();const og=["alt","control","meta","shift"],yl={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},Vr={A:"1",B:"2",C:"3",D:"4",E:"5",F:"6",G:"7",H:"8",I:"9",J:"*",K:"+",M:"-",N:".",O:"/","`":"0","\x90":"NumLock"},qs={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey};let vl=(()=>{class n extends pl{constructor(t){super(t)}supports(t){return null!=n.parseEventName(t)}addEventListener(t,r,i){const a=n.parseEventName(r),c=n.eventCallback(a.fullKey,i,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>N().onAndCancel(t,a.domEventName,c))}static parseEventName(t){const r=t.toLowerCase().split("."),i=r.shift();if(0===r.length||"keydown"!==i&&"keyup"!==i)return null;const a=n._normalizeKey(r.pop());let c="";if(og.forEach(g=>{const v=r.indexOf(g);v>-1&&(r.splice(v,1),c+=g+".")}),c+=a,0!=r.length||0===a.length)return null;const h={};return h.domEventName=i,h.fullKey=c,h}static getEventFullKey(t){let r="",i=function Ma(n){let e=n.key;if(null==e){if(e=n.keyIdentifier,null==e)return"Unidentified";e.startsWith("U+")&&(e=String.fromCharCode(parseInt(e.substring(2),16)),3===n.location&&Vr.hasOwnProperty(e)&&(e=Vr[e]))}return yl[e]||e}(t);return i=i.toLowerCase()," "===i?i="space":"."===i&&(i="dot"),og.forEach(a=>{a!=i&&qs[a](t)&&(r+=a+".")}),r+=i,r}static eventCallback(t,r,i){return a=>{n.getEventFullKey(a)===t&&i.runGuarded(()=>r(a))}}static _normalizeKey(t){return"esc"===t?"escape":t}}return n.\u0275fac=function(t){return new(t||n)(m.LFG(ae))},n.\u0275prov=m.Yz7({token:n,factory:n.\u0275fac}),n})();const vh=(0,m.eFA)(m._c5,"browser",[{provide:m.Lbi,useValue:Ra},{provide:m.g9A,useValue:function os(){$u.makeCurrent(),Ts.init()},multi:!0},{provide:ae,useFactory:function El(){return(0,m.RDi)(document),document},deps:[]}]),Eh=[{provide:m.zSh,useValue:"root"},{provide:m.qLn,useFactory:function $_(){return new m.qLn},deps:[]},{provide:Yo,useClass:F0,multi:!0,deps:[ae,m.R0b,m.Lbi]},{provide:Yo,useClass:vl,multi:!0,deps:[ae]},{provide:er,useClass:er,deps:[Pa,wo,m.AFp]},{provide:m.FYo,useExisting:er},{provide:Gs,useExisting:wo},{provide:wo,useClass:wo,deps:[ae]},{provide:m.dDg,useClass:m.dDg,deps:[m.R0b]},{provide:Pa,useClass:Pa,deps:[Yo,m.R0b]},{provide:class Yn{},useClass:_i,deps:[]}];let zu=(()=>{class n{constructor(t){if(t)throw new Error("BrowserModule has already been loaded. If you need access to common directives such as NgIf and NgFor from a lazy loaded module, import CommonModule instead.")}static withServerTransition(t){return{ngModule:n,providers:[{provide:m.AFp,useValue:t.appId},{provide:Xr,useExisting:m.AFp},fl]}}}return n.\u0275fac=function(t){return new(t||n)(m.LFG(n,12))},n.\u0275mod=m.oAB({type:n}),n.\u0275inj=m.cJS({providers:Eh,imports:[Uu,m.hGG]}),n})();"undefined"!=typeof window&&window;var ur=P(8996),Sh=P(3269);function kt(...n){const e=(0,Sh.yG)(n);return(0,ur.D)(n,e)}var Ir=P(7579);class Wr extends Ir.x{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){const t=super._subscribe(e);return!t.closed&&e.next(this._value),t}getValue(){const{hasError:e,thrownError:t,_value:r}=this;if(e)throw t;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}}var cr=P(8306);const{isArray:lg}=Array,{getPrototypeOf:br,prototype:ka,keys:Ah}=Object;var bo=P(4671),Vt=P(4004);const{isArray:Rh}=Array;var zn=P(5403),Fa=P(9672);function Yu(...n){const e=(0,Sh.yG)(n),t=(0,Sh.jO)(n),{args:r,keys:i}=function Oa(n){if(1===n.length){const e=n[0];if(lg(e))return{args:e,keys:null};if(function Zu(n){return n&&"object"==typeof n&&br(n)===ka}(e)){const t=Ah(e);return{args:t.map(r=>e[r]),keys:t}}}return{args:n,keys:null}}(n);if(0===r.length)return(0,ur.D)([],e);const a=new cr.y(function La(n,e,t=bo.y){return r=>{Ua(e,()=>{const{length:i}=n,a=new Array(i);let c=i,h=i;for(let g=0;g<i;g++)Ua(e,()=>{const v=(0,ur.D)(n[g],e);let C=!1;v.subscribe((0,zn.x)(r,D=>{a[g]=D,C||(C=!0,h--),h||r.next(t(a.slice()))},()=>{--c||r.complete()}))},r)},r)}}(r,e,i?c=>function hg(n,e){return n.reduce((t,r,i)=>(t[r]=e[i],t),{})}(i,c):bo.y));return t?a.pipe(function Cl(n){return(0,Vt.U)(e=>function dg(n,e){return Rh(e)?n(...e):n(e)}(n,e))}(t)):a}function Ua(n,e,t){n?(0,Fa.f)(t,n,e):e()}const Qu=(0,P(3888).d)(n=>function(){n(this),this.name="EmptyError",this.message="no elements in sequence"});var ta=P(8189);function Ju(...n){return function Ph(){return(0,ta.J)(1)}()((0,ur.D)(n,(0,Sh.yG)(n)))}var Xu=P(8421);function J_(n){return new cr.y(e=>{(0,Xu.Xf)(n()).subscribe(e)})}var Ds=P(515),Va=P(727),ei=P(4482);function Nh(){return(0,ei.e)((n,e)=>{let t=null;n._refCount++;const r=(0,zn.x)(e,void 0,void 0,void 0,()=>{if(!n||n._refCount<=0||0<--n._refCount)return void(t=null);const i=n._connection,a=t;t=null,i&&(!a||i===a)&&i.unsubscribe(),e.unsubscribe()});n.subscribe(r),r.closed||(t=n.connect())})}class Tl extends cr.y{constructor(e,t){super(),this.source=e,this.subjectFactory=t,this._subject=null,this._refCount=0,this._connection=null,(0,ei.A)(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){const e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:e}=this;this._subject=this._connection=null,null==e||e.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new Va.w0;const t=this.getSubject();e.add(this.source.subscribe((0,zn.x)(t,void 0,()=>{this._teardown(),t.complete()},r=>{this._teardown(),t.error(r)},()=>this._teardown()))),e.closed&&(this._connection=null,e=Va.w0.EMPTY)}return e}refCount(){return Nh()(this)}}function jn(n,e){return(0,ei.e)((t,r)=>{let i=null,a=0,c=!1;const h=()=>c&&!i&&r.complete();t.subscribe((0,zn.x)(r,g=>{null==i||i.unsubscribe();let v=0;const C=a++;(0,Xu.Xf)(n(g,C)).subscribe(i=(0,zn.x)(r,D=>r.next(e?e(g,D,C,v++):D),()=>{i=null,h()}))},()=>{c=!0,h()}))})}var Ys=P(5698);function Co(...n){const e=(0,Sh.yG)(n);return(0,ei.e)((t,r)=>{(e?Ju(n,t,e):Ju(n,t)).subscribe(r)})}function Mh(n,e,t,r,i){return(a,c)=>{let h=t,g=e,v=0;a.subscribe((0,zn.x)(c,C=>{const D=v++;g=h?n(g,C,D):(h=!0,C),r&&c.next(g)},i&&(()=>{h&&c.next(g),c.complete()})))}}function Ss(n,e){return(0,ei.e)(Mh(n,e,arguments.length>=2,!0))}function lr(n,e){return(0,ei.e)((t,r)=>{let i=0;t.subscribe((0,zn.x)(r,a=>n.call(e,a,i++)&&r.next(a)))})}function ki(n){return(0,ei.e)((e,t)=>{let a,r=null,i=!1;r=e.subscribe((0,zn.x)(t,void 0,void 0,c=>{a=(0,Xu.Xf)(n(c,ki(n)(e))),r?(r.unsubscribe(),r=null,a.subscribe(t)):i=!0})),i&&(r.unsubscribe(),r=null,a.subscribe(t))})}var Nr=P(5577),Ba=P(576);function $i(n,e){return(0,Ba.m)(e)?(0,Nr.z)(n,e,1):(0,Nr.z)(n,1)}function fg(n){return n<=0?()=>Ds.E:(0,ei.e)((e,t)=>{let r=[];e.subscribe((0,zn.x)(t,i=>{r.push(i),n<r.length&&r.shift()},()=>{for(const i of r)t.next(i);t.complete()},void 0,()=>{r=null}))})}function pg(n=dr){return(0,ei.e)((e,t)=>{let r=!1;e.subscribe((0,zn.x)(t,i=>{r=!0,t.next(i)},()=>r?t.complete():t.error(n())))})}function dr(){return new Qu}function gg(n){return(0,ei.e)((e,t)=>{let r=!1;e.subscribe((0,zn.x)(t,i=>{r=!0,t.next(i)},()=>{r||t.next(n),t.complete()}))})}function na(n,e){const t=arguments.length>=2;return r=>r.pipe(n?lr((i,a)=>n(i,a,r)):bo.y,(0,Ys.q)(1),t?gg(e):pg(()=>new Qu))}var Hi=P(8505);class To{constructor(e,t){this.id=e,this.url=t}}class Dl extends To{constructor(e,t,r="imperative",i=null){super(e,t),this.navigationTrigger=r,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class As extends To{constructor(e,t,r){super(e,t),this.urlAfterRedirects=r}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class ec extends To{constructor(e,t,r){super(e,t),this.reason=r}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class _r extends To{constructor(e,t,r){super(e,t),this.error=r}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class ja extends To{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class tc extends To{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class kh extends To{constructor(e,t,r,i,a){super(e,t),this.urlAfterRedirects=r,this.state=i,this.shouldActivate=a}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class Sl extends To{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class ai extends To{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class as{constructor(e){this.route=e}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class nc{constructor(e){this.route=e}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class Al{constructor(e){this.snapshot=e}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class us{constructor(e){this.snapshot=e}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Rl{constructor(e){this.snapshot=e}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class mg{constructor(e){this.snapshot=e}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class _g{constructor(e,t,r){this.routerEvent=e,this.position=t,this.anchor=r}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}const mn="primary";class yg{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t[0]:t}return null}getAll(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}}function Do(n){return new yg(n)}const vi="ngNavigationCancelingError";function rc(n){const e=Error("NavigationCancelingError: "+n);return e[vi]=!0,e}function j0(n,e,t){const r=t.path.split("/");if(r.length>n.length||"full"===t.pathMatch&&(e.hasChildren()||r.length<n.length))return null;const i={};for(let a=0;a<r.length;a++){const c=r[a],h=n[a];if(c.startsWith(":"))i[c.substring(1)]=h;else if(c!==h.path)return null}return{consumed:n.slice(0,r.length),posParams:i}}function Rs(n,e){const t=n?Object.keys(n):void 0,r=e?Object.keys(e):void 0;if(!t||!r||t.length!=r.length)return!1;let i;for(let a=0;a<t.length;a++)if(i=t[a],!Pl(n[i],e[i]))return!1;return!0}function Pl(n,e){if(Array.isArray(n)&&Array.isArray(e)){if(n.length!==e.length)return!1;const t=[...n].sort(),r=[...e].sort();return t.every((i,a)=>r[a]===i)}return n===e}function Nl(n){return Array.prototype.concat.apply([],n)}function vg(n){return n.length>0?n[n.length-1]:null}function Br(n,e){for(const t in n)n.hasOwnProperty(t)&&e(n[t],t)}function Wi(n){return(0,m.CqO)(n)?n:(0,m.QGY)(n)?(0,ur.D)(Promise.resolve(n)):kt(n)}const Eg={exact:function Fh(n,e,t){if(!xs(n.segments,e.segments)||!kl(n.segments,e.segments,t)||n.numberOfChildren!==e.numberOfChildren)return!1;for(const r in e.children)if(!n.children[r]||!Fh(n.children[r],e.children[r],t))return!1;return!0},subset:wg},Ao={exact:function ic(n,e){return Rs(n,e)},subset:function X_(n,e){return Object.keys(e).length<=Object.keys(n).length&&Object.keys(e).every(t=>Pl(n[t],e[t]))},ignored:()=>!0};function Ml(n,e,t){return Eg[t.paths](n.root,e.root,t.matrixParams)&&Ao[t.queryParams](n.queryParams,e.queryParams)&&!("exact"===t.fragment&&n.fragment!==e.fragment)}function wg(n,e,t){return sc(n,e,e.segments,t)}function sc(n,e,t,r){if(n.segments.length>t.length){const i=n.segments.slice(0,t.length);return!(!xs(i,t)||e.hasChildren()||!kl(i,t,r))}if(n.segments.length===t.length){if(!xs(n.segments,t)||!kl(n.segments,t,r))return!1;for(const i in e.children)if(!n.children[i]||!wg(n.children[i],e.children[i],r))return!1;return!0}{const i=t.slice(0,n.segments.length),a=t.slice(n.segments.length);return!!(xs(n.segments,i)&&kl(n.segments,i,r)&&n.children[mn])&&sc(n.children[mn],e,a,r)}}function kl(n,e,t){return e.every((r,i)=>Ao[t](n[i].parameters,r.parameters))}class cs{constructor(e,t,r){this.root=e,this.queryParams=t,this.fragment=r}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Do(this.queryParams)),this._queryParamMap}toString(){return Lh.serialize(this)}}class hn{constructor(e,t){this.segments=e,this.children=t,this.parent=null,Br(t,(r,i)=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return ac(this)}}class oc{constructor(e,t){this.path=e,this.parameters=t}get parameterMap(){return this._parameterMap||(this._parameterMap=Do(this.parameters)),this._parameterMap}toString(){return za(this)}}function xs(n,e){return n.length===e.length&&n.every((t,r)=>t.path===e[r].path)}class Ha{}class Ro{parse(e){const t=new cc(e);return new cs(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(e){const t=`/${ra(e.root,!0)}`,r=function Ig(n){const e=Object.keys(n).map(t=>{const r=n[t];return Array.isArray(r)?r.map(i=>`${ls(t)}=${ls(i)}`).join("&"):`${ls(t)}=${ls(r)}`}).filter(t=>!!t);return e.length?`?${e.join("&")}`:""}(e.queryParams);return`${t}${r}${"string"==typeof e.fragment?`#${function Uh(n){return encodeURI(n)}(e.fragment)}`:""}`}}const Lh=new Ro;function ac(n){return n.segments.map(e=>za(e)).join("/")}function ra(n,e){if(!n.hasChildren())return ac(n);if(e){const t=n.children[mn]?ra(n.children[mn],!1):"",r=[];return Br(n.children,(i,a)=>{a!==mn&&r.push(`${a}:${ra(i,!1)}`)}),r.length>0?`${t}(${r.join("//")})`:t}{const t=function $0(n,e){let t=[];return Br(n.children,(r,i)=>{i===mn&&(t=t.concat(e(r,i)))}),Br(n.children,(r,i)=>{i!==mn&&(t=t.concat(e(r,i)))}),t}(n,(r,i)=>i===mn?[ra(n.children[mn],!1)]:[`${i}:${ra(r,!1)}`]);return 1===Object.keys(n.children).length&&null!=n.children[mn]?`${ac(n)}/${t[0]}`:`${ac(n)}/(${t.join("//")})`}}function Wa(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function ls(n){return Wa(n).replace(/%3B/gi,";")}function Qs(n){return Wa(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function Ol(n){return decodeURIComponent(n)}function Fl(n){return Ol(n.replace(/\+/g,"%20"))}function za(n){return`${Qs(n.path)}${function Ll(n){return Object.keys(n).map(e=>`;${Qs(e)}=${Qs(n[e])}`).join("")}(n.parameters)}`}const ey=/^[^\/()?;=#]+/;function Ga(n){const e=n.match(ey);return e?e[0]:""}const qa=/^[^=?&#]+/,bg=/^[^&#]+/;class cc{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new hn([],{}):new hn([],this.parseChildren())}parseQueryParams(){const e={};if(this.consumeOptional("?"))do{this.parseQueryParam(e)}while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(r[mn]=new hn(e,t)),r}parseSegment(){const e=Ga(this.remaining);if(""===e&&this.peekStartsWith(";"))throw new Error(`Empty path url segment cannot have parameters: '${this.remaining}'.`);return this.capture(e),new oc(Ol(e),this.parseMatrixParams())}parseMatrixParams(){const e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){const t=Ga(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const i=Ga(this.remaining);i&&(r=i,this.capture(r))}e[Ol(t)]=Ol(r)}parseQueryParam(e){const t=function uc(n){const e=n.match(qa);return e?e[0]:""}(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const c=function H0(n){const e=n.match(bg);return e?e[0]:""}(this.remaining);c&&(r=c,this.capture(r))}const i=Fl(t),a=Fl(r);if(e.hasOwnProperty(i)){let c=e[i];Array.isArray(c)||(c=[c],e[i]=c),c.push(a)}else e[i]=a}parseParens(e){const t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const r=Ga(this.remaining),i=this.remaining[r.length];if("/"!==i&&")"!==i&&";"!==i)throw new Error(`Cannot parse url '${this.url}'`);let a;r.indexOf(":")>-1?(a=r.substr(0,r.indexOf(":")),this.capture(a),this.capture(":")):e&&(a=mn);const c=this.parseChildren();t[a]=1===Object.keys(c).length?c[mn]:new hn([],c),this.consumeOptional("//")}return t}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return!!this.peekStartsWith(e)&&(this.remaining=this.remaining.substring(e.length),!0)}capture(e){if(!this.consumeOptional(e))throw new Error(`Expected "${e}".`)}}class Cg{constructor(e){this._root=e}get root(){return this._root.value}parent(e){const t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}children(e){const t=Tg(e,this._root);return t?t.children.map(r=>r.value):[]}firstChild(e){const t=Tg(e,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(e){const t=Vh(e,this._root);return t.length<2?[]:t[t.length-2].children.map(i=>i.value).filter(i=>i!==e)}pathFromRoot(e){return Vh(e,this._root).map(t=>t.value)}}function Tg(n,e){if(n===e.value)return e;for(const t of e.children){const r=Tg(n,t);if(r)return r}return null}function Vh(n,e){if(n===e.value)return[e];for(const t of e.children){const r=Vh(n,t);if(r.length)return r.unshift(e),r}return[]}class Js{constructor(e,t){this.value=e,this.children=t}toString(){return`TreeNode(${this.value})`}}function Ka(n){const e={};return n&&n.children.forEach(t=>e[t.value.outlet]=t),e}class lc extends Cg{constructor(e,t){super(e),this.snapshot=t,Bl(this,e)}toString(){return this.snapshot.toString()}}function Ul(n,e){const t=function Za(n,e){const c=new ia([],{},{},"",{},mn,e,null,n.root,-1,{});return new Vl("",new Js(c,[]))}(n,e),r=new Wr([new oc("",{})]),i=new Wr({}),a=new Wr({}),c=new Wr({}),h=new Wr(""),g=new xo(r,i,c,h,a,mn,e,t.root);return g.snapshot=t.root,new lc(new Js(g,[]),t)}class xo{constructor(e,t,r,i,a,c,h,g){this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=a,this.outlet=c,this.component=h,this._futureSnapshot=g}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe((0,Vt.U)(e=>Do(e)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe((0,Vt.U)(e=>Do(e)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function Dg(n,e="emptyOnly"){const t=n.pathFromRoot;let r=0;if("always"!==e)for(r=t.length-1;r>=1;){const i=t[r],a=t[r-1];if(i.routeConfig&&""===i.routeConfig.path)r--;else{if(a.component)break;r--}}return function W0(n){return n.reduce((e,t)=>({params:Object.assign(Object.assign({},e.params),t.params),data:Object.assign(Object.assign({},e.data),t.data),resolve:Object.assign(Object.assign({},e.resolve),t._resolvedData)}),{params:{},data:{},resolve:{}})}(t.slice(r))}class ia{constructor(e,t,r,i,a,c,h,g,v,C,D){this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=a,this.outlet=c,this.component=h,this.routeConfig=g,this._urlSegment=v,this._lastPathIndex=C,this._resolve=D}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=Do(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Do(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(r=>r.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class Vl extends Cg{constructor(e,t){super(t),this.url=e,Bl(this,t)}toString(){return jl(this._root)}}function Bl(n,e){e.value._routerState=n,e.children.forEach(t=>Bl(n,t))}function jl(n){const e=n.children.length>0?` { ${n.children.map(jl).join(", ")} } `:"";return`${n.value}${e}`}function $l(n){if(n.snapshot){const e=n.snapshot,t=n._futureSnapshot;n.snapshot=t,Rs(e.queryParams,t.queryParams)||n.queryParams.next(t.queryParams),e.fragment!==t.fragment&&n.fragment.next(t.fragment),Rs(e.params,t.params)||n.params.next(t.params),function xl(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;++t)if(!Rs(n[t],e[t]))return!1;return!0}(e.url,t.url)||n.url.next(t.url),Rs(e.data,t.data)||n.data.next(t.data)}else n.snapshot=n._futureSnapshot,n.data.next(n._futureSnapshot.data)}function Hl(n,e){const t=Rs(n.params,e.params)&&function zr(n,e){return xs(n,e)&&n.every((t,r)=>Rs(t.parameters,e[r].parameters))}(n.url,e.url);return t&&!(!n.parent!=!e.parent)&&(!n.parent||Hl(n.parent,e.parent))}function dc(n,e,t){if(t&&n.shouldReuseRoute(e.value,t.value.snapshot)){const r=t.value;r._futureSnapshot=e.value;const i=function Bh(n,e,t){return e.children.map(r=>{for(const i of t.children)if(n.shouldReuseRoute(r.value,i.value.snapshot))return dc(n,r,i);return dc(n,r)})}(n,e,t);return new Js(r,i)}{if(n.shouldAttach(e.value)){const a=n.retrieve(e.value);if(null!==a){const c=a.route;return c.value._futureSnapshot=e.value,c.children=e.children.map(h=>dc(n,h)),c}}const r=function ny(n){return new xo(new Wr(n.url),new Wr(n.params),new Wr(n.queryParams),new Wr(n.fragment),new Wr(n.data),n.outlet,n.component,n)}(e.value),i=e.children.map(a=>dc(n,a));return new Js(r,i)}}function ds(n){return"object"==typeof n&&null!=n&&!n.outlets&&!n.segmentPath}function Ps(n){return"object"==typeof n&&null!=n&&n.outlets}function $h(n,e,t,r,i){let a={};return r&&Br(r,(c,h)=>{a[h]=Array.isArray(c)?c.map(g=>`${g}`):`${c}`}),new cs(t.root===n?e:Hh(t.root,n,e),a,i)}function Hh(n,e,t){const r={};return Br(n.children,(i,a)=>{r[a]=i===e?t:Hh(i,e,t)}),new hn(n.segments,r)}class ry{constructor(e,t,r){if(this.isAbsolute=e,this.numberOfDoubleDots=t,this.commands=r,e&&r.length>0&&ds(r[0]))throw new Error("Root segment cannot have matrix parameters");const i=r.find(Ps);if(i&&i!==vg(r))throw new Error("{outlets:{}} has to be the last command")}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class Wh{constructor(e,t,r){this.segmentGroup=e,this.processChildren=t,this.index=r}}function Ag(n,e,t){if(n||(n=new hn([],{})),0===n.segments.length&&n.hasChildren())return E(n,e,t);const r=function p(n,e,t){let r=0,i=e;const a={match:!1,pathIndex:0,commandIndex:0};for(;i<n.segments.length;){if(r>=t.length)return a;const c=n.segments[i],h=t[r];if(Ps(h))break;const g=`${h}`,v=r<t.length-1?t[r+1]:null;if(i>0&&void 0===g)break;if(g&&v&&"object"==typeof v&&void 0===v.outlets){if(!M(g,v,c))return a;r+=2}else{if(!M(g,{},c))return a;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}(n,e,t),i=t.slice(r.commandIndex);if(r.match&&r.pathIndex<n.segments.length){const a=new hn(n.segments.slice(0,r.pathIndex),{});return a.children[mn]=new hn(n.segments.slice(r.pathIndex),n.children),E(a,0,i)}return r.match&&0===i.length?new hn(n.segments,{}):r.match&&!n.hasChildren()?_(n,e,t):r.match?E(n,0,i):_(n,e,t)}function E(n,e,t){if(0===t.length)return new hn(n.segments,{});{const r=function sy(n){return Ps(n[0])?n[0].outlets:{[mn]:n}}(t),i={};return Br(r,(a,c)=>{"string"==typeof a&&(a=[a]),null!==a&&(i[c]=Ag(n.children[c],e,a))}),Br(n.children,(a,c)=>{void 0===r[c]&&(i[c]=a)}),new hn(n.segments,i)}}function _(n,e,t){const r=n.segments.slice(0,e);let i=0;for(;i<t.length;){const a=t[i];if(Ps(a)){const g=I(a.outlets);return new hn(r,g)}if(0===i&&ds(t[0])){r.push(new oc(n.segments[e].path,A(t[0]))),i++;continue}const c=Ps(a)?a.outlets[mn]:`${a}`,h=i<t.length-1?t[i+1]:null;c&&h&&ds(h)?(r.push(new oc(c,A(h))),i+=2):(r.push(new oc(c,{})),i++)}return new hn(r,{})}function I(n){const e={};return Br(n,(t,r)=>{"string"==typeof t&&(t=[t]),null!==t&&(e[r]=_(new hn([],{}),0,t))}),e}function A(n){const e={};return Br(n,(t,r)=>e[r]=`${t}`),e}function M(n,e,t){return n==t.path&&Rs(e,t.parameters)}class ze{constructor(e,t,r,i){this.routeReuseStrategy=e,this.futureState=t,this.currState=r,this.forwardEvent=i}activate(e){const t=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,r,e),$l(this.futureState.root),this.activateChildRoutes(t,r,e)}deactivateChildRoutes(e,t,r){const i=Ka(t);e.children.forEach(a=>{const c=a.value.outlet;this.deactivateRoutes(a,i[c],r),delete i[c]}),Br(i,(a,c)=>{this.deactivateRouteAndItsChildren(a,r)})}deactivateRoutes(e,t,r){const i=e.value,a=t?t.value:null;if(i===a)if(i.component){const c=r.getContext(i.outlet);c&&this.deactivateChildRoutes(e,t,c.children)}else this.deactivateChildRoutes(e,t,r);else a&&this.deactivateRouteAndItsChildren(t,r)}deactivateRouteAndItsChildren(e,t){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}detachAndStoreRouteSubtree(e,t){const r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,a=Ka(e);for(const c of Object.keys(a))this.deactivateRouteAndItsChildren(a[c],i);if(r&&r.outlet){const c=r.outlet.detach(),h=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:c,route:e,contexts:h})}}deactivateRouteAndOutlet(e,t){const r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,a=Ka(e);for(const c of Object.keys(a))this.deactivateRouteAndItsChildren(a[c],i);r&&r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated(),r.attachRef=null,r.resolver=null,r.route=null)}activateChildRoutes(e,t,r){const i=Ka(t);e.children.forEach(a=>{this.activateRoutes(a,i[a.value.outlet],r),this.forwardEvent(new mg(a.value.snapshot))}),e.children.length&&this.forwardEvent(new us(e.value.snapshot))}activateRoutes(e,t,r){const i=e.value,a=t?t.value:null;if($l(i),i===a)if(i.component){const c=r.getOrCreateContext(i.outlet);this.activateChildRoutes(e,t,c.children)}else this.activateChildRoutes(e,t,r);else if(i.component){const c=r.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){const h=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),c.children.onOutletReAttached(h.contexts),c.attachRef=h.componentRef,c.route=h.route.value,c.outlet&&c.outlet.attach(h.componentRef,h.route.value),$l(h.route.value),this.activateChildRoutes(e,null,c.children)}else{const h=function St(n){for(let e=n.parent;e;e=e.parent){const t=e.routeConfig;if(t&&t._loadedConfig)return t._loadedConfig;if(t&&t.component)return null}return null}(i.snapshot),g=h?h.module.componentFactoryResolver:null;c.attachRef=null,c.route=i,c.resolver=g,c.outlet&&c.outlet.activateWith(i,g),this.activateChildRoutes(e,null,c.children)}}else this.activateChildRoutes(e,null,r)}}class Lt{constructor(e,t){this.routes=e,this.module=t}}function Qt(n){return"function"==typeof n}function ui(n){return n instanceof cs}const fc=Symbol("INITIAL_VALUE");function pc(){return jn(n=>Yu(n.map(e=>e.pipe((0,Ys.q)(1),Co(fc)))).pipe(Ss((e,t)=>{let r=!1;return t.reduce((i,a,c)=>i!==fc?i:(a===fc&&(r=!0),r||!1!==a&&c!==t.length-1&&!ui(a)?i:a),e)},fc),lr(e=>e!==fc),(0,Vt.U)(e=>ui(e)?e:!0===e),(0,Ys.q)(1)))}class zl{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.children=new Qa,this.attachRef=null}}class Qa{constructor(){this.contexts=new Map}onChildOutletCreated(e,t){const r=this.getOrCreateContext(e);r.outlet=t,this.contexts.set(e,r)}onChildOutletDestroyed(e){const t=this.getContext(e);t&&(t.outlet=null,t.attachRef=null)}onOutletDeactivated(){const e=this.contexts;return this.contexts=new Map,e}onOutletReAttached(e){this.contexts=e}getOrCreateContext(e){let t=this.getContext(e);return t||(t=new zl,this.contexts.set(e,t)),t}getContext(e){return this.contexts.get(e)||null}}let Gl=(()=>{class n{constructor(t,r,i,a,c){this.parentContexts=t,this.location=r,this.resolver=i,this.changeDetector=c,this.activated=null,this._activatedRoute=null,this.activateEvents=new m.vpe,this.deactivateEvents=new m.vpe,this.attachEvents=new m.vpe,this.detachEvents=new m.vpe,this.name=a||mn,t.onChildOutletCreated(this.name,this)}ngOnDestroy(){this.parentContexts.onChildOutletDestroyed(this.name)}ngOnInit(){if(!this.activated){const t=this.parentContexts.getContext(this.name);t&&t.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.resolver||null))}}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new Error("Outlet is not activated");return this.activated.instance}get activatedRoute(){if(!this.activated)throw new Error("Outlet is not activated");return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new Error("Outlet is not activated");this.location.detach();const t=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(t.instance),t}attach(t,r){this.activated=t,this._activatedRoute=r,this.location.insert(t.hostView),this.attachEvents.emit(t.instance)}deactivate(){if(this.activated){const t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,r){if(this.isActivated)throw new Error("Cannot activate an already activated outlet");this._activatedRoute=t;const c=(r=r||this.resolver).resolveComponentFactory(t._futureSnapshot.routeConfig.component),h=this.parentContexts.getOrCreateContext(this.name).children,g=new zh(t,h,this.location.injector);this.activated=this.location.createComponent(c,this.location.length,g),this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return n.\u0275fac=function(t){return new(t||n)(m.Y36(Qa),m.Y36(m.s_b),m.Y36(m._Vd),m.$8M("name"),m.Y36(m.sBO))},n.\u0275dir=m.lG2({type:n,selectors:[["router-outlet"]],outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"]}),n})();class zh{constructor(e,t,r){this.route=e,this.childContexts=t,this.parent=r}get(e,t){return e===xo?this.route:e===Qa?this.childContexts:this.parent.get(e,t)}}let ql=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=m.Xpm({type:n,selectors:[["ng-component"]],decls:1,vars:0,template:function(t,r){1&t&&m._UZ(0,"router-outlet")},directives:[Gl],encapsulation:2}),n})();function Gh(n,e=""){for(let t=0;t<n.length;t++){const r=n[t];Ja(r,oy(e,r))}}function Ja(n,e){n.children&&Gh(n.children,e)}function oy(n,e){return e?n||e.path?n&&!e.path?`${n}/`:!n&&e.path?e.path:`${n}/${e.path}`:"":n}function qh(n){const e=n.children&&n.children.map(qh),t=e?Object.assign(Object.assign({},n),{children:e}):Object.assign({},n);return!t.component&&(e||t.loadChildren)&&t.outlet&&t.outlet!==mn&&(t.component=ql),t}function Ns(n){return n.outlet||mn}function Mr(n,e){const t=n.filter(r=>Ns(r)===e);return t.push(...n.filter(r=>Ns(r)!==e)),t}const G0={matched:!1,consumedSegments:[],lastChild:0,parameters:{},positionalParamSegments:{}};function Rg(n,e,t){var r;if(""===e.path)return"full"===e.pathMatch&&(n.hasChildren()||t.length>0)?Object.assign({},G0):{matched:!0,consumedSegments:[],lastChild:0,parameters:{},positionalParamSegments:{}};const a=(e.matcher||j0)(t,n,e);if(!a)return Object.assign({},G0);const c={};Br(a.posParams,(g,v)=>{c[v]=g.path});const h=a.consumed.length>0?Object.assign(Object.assign({},c),a.consumed[a.consumed.length-1].parameters):c;return{matched:!0,consumedSegments:a.consumed,lastChild:a.consumed.length,parameters:h,positionalParamSegments:null!==(r=a.posParams)&&void 0!==r?r:{}}}function Kl(n,e,t,r,i="corrected"){if(t.length>0&&function NT(n,e,t){return t.some(r=>xg(n,e,r)&&Ns(r)!==mn)}(n,t,r)){const c=new hn(e,function PT(n,e,t,r){const i={};i[mn]=r,r._sourceSegment=n,r._segmentIndexShift=e.length;for(const a of t)if(""===a.path&&Ns(a)!==mn){const c=new hn([],{});c._sourceSegment=n,c._segmentIndexShift=e.length,i[Ns(a)]=c}return i}(n,e,r,new hn(t,n.children)));return c._sourceSegment=n,c._segmentIndexShift=e.length,{segmentGroup:c,slicedSegments:[]}}if(0===t.length&&function MT(n,e,t){return t.some(r=>xg(n,e,r))}(n,t,r)){const c=new hn(n.segments,function q0(n,e,t,r,i,a){const c={};for(const h of r)if(xg(n,t,h)&&!i[Ns(h)]){const g=new hn([],{});g._sourceSegment=n,g._segmentIndexShift="legacy"===a?n.segments.length:e.length,c[Ns(h)]=g}return Object.assign(Object.assign({},i),c)}(n,e,t,r,n.children,i));return c._sourceSegment=n,c._segmentIndexShift=e.length,{segmentGroup:c,slicedSegments:t}}const a=new hn(n.segments,n.children);return a._sourceSegment=n,a._segmentIndexShift=e.length,{segmentGroup:a,slicedSegments:t}}function xg(n,e,t){return(!(n.hasChildren()||e.length>0)||"full"!==t.pathMatch)&&""===t.path}function K0(n,e,t,r){return!!(Ns(n)===r||r!==mn&&xg(e,t,n))&&("**"===n.path||Rg(e,n,t).matched)}function kT(n,e,t){return 0===e.length&&!n.children[t]}class Pg{constructor(e){this.segmentGroup=e||null}}class Zl{constructor(e){this.urlTree=e}}function ti(n){return new cr.y(e=>e.error(new Pg(n)))}function Ng(n){return new cr.y(e=>e.error(new Zl(n)))}function Z0(n){return new cr.y(e=>e.error(new Error(`Only absolute redirects can have named outlets. redirectTo: '${n}'`)))}class Kh{constructor(e,t,r,i,a){this.configLoader=t,this.urlSerializer=r,this.urlTree=i,this.config=a,this.allowRedirects=!0,this.ngModule=e.get(m.h0i)}apply(){const e=Kl(this.urlTree.root,[],[],this.config).segmentGroup,t=new hn(e.segments,e.children);return this.expandSegmentGroup(this.ngModule,this.config,t,mn).pipe((0,Vt.U)(a=>this.createUrlTree(uy(a),this.urlTree.queryParams,this.urlTree.fragment))).pipe(ki(a=>{if(a instanceof Zl)return this.allowRedirects=!1,this.match(a.urlTree);throw a instanceof Pg?this.noMatchError(a):a}))}match(e){return this.expandSegmentGroup(this.ngModule,this.config,e.root,mn).pipe((0,Vt.U)(i=>this.createUrlTree(uy(i),e.queryParams,e.fragment))).pipe(ki(i=>{throw i instanceof Pg?this.noMatchError(i):i}))}noMatchError(e){return new Error(`Cannot match any routes. URL Segment: '${e.segmentGroup}'`)}createUrlTree(e,t,r){const i=e.segments.length>0?new hn([],{[mn]:e}):e;return new cs(i,t,r)}expandSegmentGroup(e,t,r,i){return 0===r.segments.length&&r.hasChildren()?this.expandChildren(e,t,r).pipe((0,Vt.U)(a=>new hn([],a))):this.expandSegment(e,r,t,r.segments,i,!0)}expandChildren(e,t,r){const i=[];for(const a of Object.keys(r.children))"primary"===a?i.unshift(a):i.push(a);return(0,ur.D)(i).pipe($i(a=>{const c=r.children[a],h=Mr(t,a);return this.expandSegmentGroup(e,h,c,a).pipe((0,Vt.U)(g=>({segment:g,outlet:a})))}),Ss((a,c)=>(a[c.outlet]=c.segment,a),{}),function V0(n,e){const t=arguments.length>=2;return r=>r.pipe(n?lr((i,a)=>n(i,a,r)):bo.y,fg(1),t?gg(e):pg(()=>new Qu))}())}expandSegment(e,t,r,i,a,c){return(0,ur.D)(r).pipe($i(h=>this.expandSegmentAgainstRoute(e,t,r,h,i,a,c).pipe(ki(v=>{if(v instanceof Pg)return kt(null);throw v}))),na(h=>!!h),ki((h,g)=>{if(h instanceof Qu||"EmptyError"===h.name){if(kT(t,i,a))return kt(new hn([],{}));throw new Pg(t)}throw h}))}expandSegmentAgainstRoute(e,t,r,i,a,c,h){return K0(i,t,a,c)?void 0===i.redirectTo?this.matchSegmentAgainstRoute(e,t,i,a,c):h&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(e,t,r,i,a,c):ti(t):ti(t)}expandSegmentAgainstRouteUsingRedirect(e,t,r,i,a,c){return"**"===i.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(e,r,i,c):this.expandRegularSegmentAgainstRouteUsingRedirect(e,t,r,i,a,c)}expandWildCardWithParamsAgainstRouteUsingRedirect(e,t,r,i){const a=this.applyRedirectCommands([],r.redirectTo,{});return r.redirectTo.startsWith("/")?Ng(a):this.lineralizeSegments(r,a).pipe((0,Nr.z)(c=>{const h=new hn(c,{});return this.expandSegment(e,h,t,c,i,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(e,t,r,i,a,c){const{matched:h,consumedSegments:g,lastChild:v,positionalParamSegments:C}=Rg(t,i,a);if(!h)return ti(t);const D=this.applyRedirectCommands(g,i.redirectTo,C);return i.redirectTo.startsWith("/")?Ng(D):this.lineralizeSegments(i,D).pipe((0,Nr.z)(x=>this.expandSegment(e,t,r,x.concat(a.slice(v)),c,!1)))}matchSegmentAgainstRoute(e,t,r,i,a){if("**"===r.path)return r.loadChildren?(r._loadedConfig?kt(r._loadedConfig):this.configLoader.load(e.injector,r)).pipe((0,Vt.U)(x=>(r._loadedConfig=x,new hn(i,{})))):kt(new hn(i,{}));const{matched:c,consumedSegments:h,lastChild:g}=Rg(t,r,i);if(!c)return ti(t);const v=i.slice(g);return this.getChildConfig(e,r,i).pipe((0,Nr.z)(D=>{const x=D.module,k=D.routes,{segmentGroup:B,slicedSegments:ge}=Kl(t,h,v,k),xe=new hn(B.segments,B.children);if(0===ge.length&&xe.hasChildren())return this.expandChildren(x,k,xe).pipe((0,Vt.U)(Rt=>new hn(h,Rt)));if(0===k.length&&0===ge.length)return kt(new hn(h,{}));const bt=Ns(r)===a;return this.expandSegment(x,xe,k,ge,bt?mn:a,!0).pipe((0,Vt.U)(Wt=>new hn(h.concat(Wt.segments),Wt.children)))}))}getChildConfig(e,t,r){return t.children?kt(new Lt(t.children,e)):t.loadChildren?void 0!==t._loadedConfig?kt(t._loadedConfig):this.runCanLoadGuards(e.injector,t,r).pipe((0,Nr.z)(i=>i?this.configLoader.load(e.injector,t).pipe((0,Vt.U)(a=>(t._loadedConfig=a,a))):function Y0(n){return new cr.y(e=>e.error(rc(`Cannot load children because the guard of the route "path: '${n.path}'" returned false`)))}(t))):kt(new Lt([],e))}runCanLoadGuards(e,t,r){const i=t.canLoad;return i&&0!==i.length?kt(i.map(c=>{const h=e.get(c);let g;if(function sa(n){return n&&Qt(n.canLoad)}(h))g=h.canLoad(t,r);else{if(!Qt(h))throw new Error("Invalid CanLoad guard");g=h(t,r)}return Wi(g)})).pipe(pc(),(0,Hi.b)(c=>{if(!ui(c))return;const h=rc(`Redirecting to "${this.urlSerializer.serialize(c)}"`);throw h.url=c,h}),(0,Vt.U)(c=>!0===c)):kt(!0)}lineralizeSegments(e,t){let r=[],i=t.root;for(;;){if(r=r.concat(i.segments),0===i.numberOfChildren)return kt(r);if(i.numberOfChildren>1||!i.children[mn])return Z0(e.redirectTo);i=i.children[mn]}}applyRedirectCommands(e,t,r){return this.applyRedirectCreatreUrlTree(t,this.urlSerializer.parse(t),e,r)}applyRedirectCreatreUrlTree(e,t,r,i){const a=this.createSegmentGroup(e,t.root,r,i);return new cs(a,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(e,t){const r={};return Br(e,(i,a)=>{if("string"==typeof i&&i.startsWith(":")){const h=i.substring(1);r[a]=t[h]}else r[a]=i}),r}createSegmentGroup(e,t,r,i){const a=this.createSegments(e,t.segments,r,i);let c={};return Br(t.children,(h,g)=>{c[g]=this.createSegmentGroup(e,h,r,i)}),new hn(a,c)}createSegments(e,t,r,i){return t.map(a=>a.path.startsWith(":")?this.findPosParam(e,a,i):this.findOrReturn(a,r))}findPosParam(e,t,r){const i=r[t.path.substring(1)];if(!i)throw new Error(`Cannot redirect to '${e}'. Cannot find '${t.path}'.`);return i}findOrReturn(e,t){let r=0;for(const i of t){if(i.path===e.path)return t.splice(r),i;r++}return e}}function uy(n){const e={};for(const r of Object.keys(n.children)){const a=uy(n.children[r]);(a.segments.length>0||a.hasChildren())&&(e[r]=a)}return function ay(n){if(1===n.numberOfChildren&&n.children[mn]){const e=n.children[mn];return new hn(n.segments.concat(e.segments),e.children)}return n}(new hn(n.segments,e))}class cy{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}}class Mg{constructor(e,t){this.component=e,this.route=t}}function Q0(n,e,t){const r=n._root;return Yh(r,e?e._root:null,t,[r.value])}function Zh(n,e,t){const r=function LT(n){if(!n)return null;for(let e=n.parent;e;e=e.parent){const t=e.routeConfig;if(t&&t._loadedConfig)return t._loadedConfig}return null}(e);return(r?r.module.injector:t).get(n)}function Yh(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const a=Ka(e);return n.children.forEach(c=>{(function ly(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const a=n.value,c=e?e.value:null,h=t?t.getContext(n.value.outlet):null;if(c&&a.routeConfig===c.routeConfig){const g=function UT(n,e,t){if("function"==typeof t)return t(n,e);switch(t){case"pathParamsChange":return!xs(n.url,e.url);case"pathParamsOrQueryParamsChange":return!xs(n.url,e.url)||!Rs(n.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!Hl(n,e)||!Rs(n.queryParams,e.queryParams);default:return!Hl(n,e)}}(c,a,a.routeConfig.runGuardsAndResolvers);g?i.canActivateChecks.push(new cy(r)):(a.data=c.data,a._resolvedData=c._resolvedData),Yh(n,e,a.component?h?h.children:null:t,r,i),g&&h&&h.outlet&&h.outlet.isActivated&&i.canDeactivateChecks.push(new Mg(h.outlet.component,c))}else c&&Qh(e,h,i),i.canActivateChecks.push(new cy(r)),Yh(n,null,a.component?h?h.children:null:t,r,i)})(c,a[c.value.outlet],t,r.concat([c.value]),i),delete a[c.value.outlet]}),Br(a,(c,h)=>Qh(c,t.getContext(h),i)),i}function Qh(n,e,t){const r=Ka(n),i=n.value;Br(r,(a,c)=>{Qh(a,i.component?e?e.children.getContext(c):null:e,t)}),t.canDeactivateChecks.push(new Mg(i.component&&e&&e.outlet&&e.outlet.isActivated?e.outlet.component:null,i))}class zT{}function hy(n){return new cr.y(e=>e.error(n))}class qT{constructor(e,t,r,i,a,c){this.rootComponentType=e,this.config=t,this.urlTree=r,this.url=i,this.paramsInheritanceStrategy=a,this.relativeLinkResolution=c}recognize(){const e=Kl(this.urlTree.root,[],[],this.config.filter(c=>void 0===c.redirectTo),this.relativeLinkResolution).segmentGroup,t=this.processSegmentGroup(this.config,e,mn);if(null===t)return null;const r=new ia([],Object.freeze({}),Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,{},mn,this.rootComponentType,null,this.urlTree.root,-1,{}),i=new Js(r,t),a=new Vl(this.url,i);return this.inheritParamsAndData(a._root),a}inheritParamsAndData(e){const t=e.value,r=Dg(t,this.paramsInheritanceStrategy);t.params=Object.freeze(r.params),t.data=Object.freeze(r.data),e.children.forEach(i=>this.inheritParamsAndData(i))}processSegmentGroup(e,t,r){return 0===t.segments.length&&t.hasChildren()?this.processChildren(e,t):this.processSegment(e,t,t.segments,r)}processChildren(e,t){const r=[];for(const a of Object.keys(t.children)){const c=t.children[a],h=Mr(e,a),g=this.processSegmentGroup(h,c,a);if(null===g)return null;r.push(...g)}const i=X0(r);return function KT(n){n.sort((e,t)=>e.value.outlet===mn?-1:t.value.outlet===mn?1:e.value.outlet.localeCompare(t.value.outlet))}(i),i}processSegment(e,t,r,i){for(const a of e){const c=this.processSegmentAgainstRoute(a,t,r,i);if(null!==c)return c}return kT(t,r,i)?[]:null}processSegmentAgainstRoute(e,t,r,i){if(e.redirectTo||!K0(e,t,r,i))return null;let a,c=[],h=[];if("**"===e.path){const k=r.length>0?vg(r).parameters:{};a=new ia(r,k,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,Xs(e),Ns(e),e.component,e,ew(t),gc(t)+r.length,YT(e))}else{const k=Rg(t,e,r);if(!k.matched)return null;c=k.consumedSegments,h=r.slice(k.lastChild),a=new ia(c,k.parameters,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,Xs(e),Ns(e),e.component,e,ew(t),gc(t)+c.length,YT(e))}const g=function ZT(n){return n.children?n.children:n.loadChildren?n._loadedConfig.routes:[]}(e),{segmentGroup:v,slicedSegments:C}=Kl(t,c,h,g.filter(k=>void 0===k.redirectTo),this.relativeLinkResolution);if(0===C.length&&v.hasChildren()){const k=this.processChildren(g,v);return null===k?null:[new Js(a,k)]}if(0===g.length&&0===C.length)return[new Js(a,[])];const D=Ns(e)===i,x=this.processSegment(g,v,C,D?mn:i);return null===x?null:[new Js(a,x)]}}function J0(n){const e=n.value.routeConfig;return e&&""===e.path&&void 0===e.redirectTo}function X0(n){const e=[],t=new Set;for(const r of n){if(!J0(r)){e.push(r);continue}const i=e.find(a=>r.value.routeConfig===a.value.routeConfig);void 0!==i?(i.children.push(...r.children),t.add(i)):e.push(r)}for(const r of t){const i=X0(r.children);e.push(new Js(r.value,i))}return e.filter(r=>!t.has(r))}function ew(n){let e=n;for(;e._sourceSegment;)e=e._sourceSegment;return e}function gc(n){let e=n,t=e._segmentIndexShift?e._segmentIndexShift:0;for(;e._sourceSegment;)e=e._sourceSegment,t+=e._segmentIndexShift?e._segmentIndexShift:0;return t-1}function Xs(n){return n.data||{}}function YT(n){return n.resolve||{}}function kg(n){return[...Object.keys(n),...Object.getOwnPropertySymbols(n)]}function py(n){return jn(e=>{const t=n(e);return t?(0,ur.D)(t).pipe((0,Vt.U)(()=>e)):kt(e)})}class rw extends class Xh{shouldDetach(e){return!1}store(e,t){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,t){return e.routeConfig===t.routeConfig}}{}const Og=new m.OlP("ROUTES");class Fg{constructor(e,t,r,i){this.injector=e,this.compiler=t,this.onLoadStartListener=r,this.onLoadEndListener=i}load(e,t){if(t._loader$)return t._loader$;this.onLoadStartListener&&this.onLoadStartListener(t);const i=this.loadModuleFactory(t.loadChildren).pipe((0,Vt.U)(a=>{this.onLoadEndListener&&this.onLoadEndListener(t);const c=a.create(e);return new Lt(Nl(c.injector.get(Og,void 0,m.XFs.Self|m.XFs.Optional)).map(qh),c)}),ki(a=>{throw t._loader$=void 0,a}));return t._loader$=new Tl(i,()=>new Ir.x).pipe(Nh()),t._loader$}loadModuleFactory(e){return Wi(e()).pipe((0,Nr.z)(t=>t instanceof m.YKP?kt(t):(0,ur.D)(this.compiler.compileModuleAsync(t))))}}class iw{shouldProcessUrl(e){return!0}extract(e){return e}merge(e,t){return e}}function DP(n){throw n}function Yl(n,e,t){return e.parse("/")}function Lg(n,e){return kt(null)}const sw={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},QT={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let ci=(()=>{class n{constructor(t,r,i,a,c,h,g){this.rootComponentType=t,this.urlSerializer=r,this.rootContexts=i,this.location=a,this.config=g,this.lastSuccessfulNavigation=null,this.currentNavigation=null,this.disposed=!1,this.navigationId=0,this.currentPageId=0,this.isNgZoneEnabled=!1,this.events=new Ir.x,this.errorHandler=DP,this.malformedUriErrorHandler=Yl,this.navigated=!1,this.lastSuccessfulId=-1,this.hooks={beforePreactivation:Lg,afterPreactivation:Lg},this.urlHandlingStrategy=new iw,this.routeReuseStrategy=new rw,this.onSameUrlNavigation="ignore",this.paramsInheritanceStrategy="emptyOnly",this.urlUpdateStrategy="deferred",this.relativeLinkResolution="corrected",this.canceledNavigationResolution="replace",this.ngModule=c.get(m.h0i),this.console=c.get(m.c2e);const D=c.get(m.R0b);this.isNgZoneEnabled=D instanceof m.R0b&&m.R0b.isInAngularZone(),this.resetConfig(g),this.currentUrlTree=function $a(){return new cs(new hn([],{}),{},null)}(),this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.configLoader=new Fg(c,h,x=>this.triggerEvent(new as(x)),x=>this.triggerEvent(new nc(x))),this.routerState=Ul(this.currentUrlTree,this.rootComponentType),this.transitions=new Wr({id:0,targetPageId:0,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,extractedUrl:this.urlHandlingStrategy.extract(this.currentUrlTree),urlAfterRedirects:this.urlHandlingStrategy.extract(this.currentUrlTree),rawUrl:this.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:"imperative",restoredState:null,currentSnapshot:this.routerState.snapshot,targetSnapshot:null,currentRouterState:this.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.navigations=this.setupNavigations(this.transitions),this.processNavigations()}get browserPageId(){var t;return null===(t=this.location.getState())||void 0===t?void 0:t.\u0275routerPageId}setupNavigations(t){const r=this.events;return t.pipe(lr(i=>0!==i.id),(0,Vt.U)(i=>Object.assign(Object.assign({},i),{extractedUrl:this.urlHandlingStrategy.extract(i.rawUrl)})),jn(i=>{let a=!1,c=!1;return kt(i).pipe((0,Hi.b)(h=>{this.currentNavigation={id:h.id,initialUrl:h.currentRawUrl,extractedUrl:h.extractedUrl,trigger:h.source,extras:h.extras,previousNavigation:this.lastSuccessfulNavigation?Object.assign(Object.assign({},this.lastSuccessfulNavigation),{previousNavigation:null}):null}}),jn(h=>{const g=this.browserUrlTree.toString(),v=!this.navigated||h.extractedUrl.toString()!==g||g!==this.currentUrlTree.toString();if(("reload"===this.onSameUrlNavigation||v)&&this.urlHandlingStrategy.shouldProcessUrl(h.rawUrl))return Ug(h.source)&&(this.browserUrlTree=h.extractedUrl),kt(h).pipe(jn(D=>{const x=this.transitions.getValue();return r.next(new Dl(D.id,this.serializeUrl(D.extractedUrl),D.source,D.restoredState)),x!==this.transitions.getValue()?Ds.E:Promise.resolve(D)}),function OT(n,e,t,r){return jn(i=>function Ei(n,e,t,r,i){return new Kh(n,e,t,r,i).apply()}(n,e,t,i.extractedUrl,r).pipe((0,Vt.U)(a=>Object.assign(Object.assign({},i),{urlAfterRedirects:a}))))}(this.ngModule.injector,this.configLoader,this.urlSerializer,this.config),(0,Hi.b)(D=>{this.currentNavigation=Object.assign(Object.assign({},this.currentNavigation),{finalUrl:D.urlAfterRedirects})}),function CP(n,e,t,r,i){return(0,Nr.z)(a=>function GT(n,e,t,r,i="emptyOnly",a="legacy"){try{const c=new qT(n,e,t,r,i,a).recognize();return null===c?hy(new zT):kt(c)}catch(c){return hy(c)}}(n,e,a.urlAfterRedirects,t(a.urlAfterRedirects),r,i).pipe((0,Vt.U)(c=>Object.assign(Object.assign({},a),{targetSnapshot:c}))))}(this.rootComponentType,this.config,D=>this.serializeUrl(D),this.paramsInheritanceStrategy,this.relativeLinkResolution),(0,Hi.b)(D=>{if("eager"===this.urlUpdateStrategy){if(!D.extras.skipLocationChange){const k=this.urlHandlingStrategy.merge(D.urlAfterRedirects,D.rawUrl);this.setBrowserUrl(k,D)}this.browserUrlTree=D.urlAfterRedirects}const x=new ja(D.id,this.serializeUrl(D.extractedUrl),this.serializeUrl(D.urlAfterRedirects),D.targetSnapshot);r.next(x)}));if(v&&this.rawUrlTree&&this.urlHandlingStrategy.shouldProcessUrl(this.rawUrlTree)){const{id:x,extractedUrl:k,source:B,restoredState:ge,extras:xe}=h,bt=new Dl(x,this.serializeUrl(k),B,ge);r.next(bt);const Tt=Ul(k,this.rootComponentType).snapshot;return kt(Object.assign(Object.assign({},h),{targetSnapshot:Tt,urlAfterRedirects:k,extras:Object.assign(Object.assign({},xe),{skipLocationChange:!1,replaceUrl:!1})}))}return this.rawUrlTree=h.rawUrl,h.resolve(null),Ds.E}),py(h=>{const{targetSnapshot:g,id:v,extractedUrl:C,rawUrl:D,extras:{skipLocationChange:x,replaceUrl:k}}=h;return this.hooks.beforePreactivation(g,{navigationId:v,appliedUrlTree:C,rawUrlTree:D,skipLocationChange:!!x,replaceUrl:!!k})}),(0,Hi.b)(h=>{const g=new tc(h.id,this.serializeUrl(h.extractedUrl),this.serializeUrl(h.urlAfterRedirects),h.targetSnapshot);this.triggerEvent(g)}),(0,Vt.U)(h=>Object.assign(Object.assign({},h),{guards:Q0(h.targetSnapshot,h.currentSnapshot,this.rootContexts)})),function dy(n,e){return(0,Nr.z)(t=>{const{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:a,canDeactivateChecks:c}}=t;return 0===c.length&&0===a.length?kt(Object.assign(Object.assign({},t),{guardsResult:!0})):function VT(n,e,t,r){return(0,ur.D)(n).pipe((0,Nr.z)(i=>function WT(n,e,t,r,i){const a=e&&e.routeConfig?e.routeConfig.canDeactivate:null;return a&&0!==a.length?kt(a.map(h=>{const g=Zh(h,e,i);let v;if(function hc(n){return n&&Qt(n.canDeactivate)}(g))v=Wi(g.canDeactivate(n,e,t,r));else{if(!Qt(g))throw new Error("Invalid CanDeactivate guard");v=Wi(g(n,e,t,r))}return v.pipe(na())})).pipe(pc()):kt(!0)}(i.component,i.route,t,e,r)),na(i=>!0!==i,!0))}(c,r,i,n).pipe((0,Nr.z)(h=>h&&function nr(n){return"boolean"==typeof n}(h)?function BT(n,e,t,r){return(0,ur.D)(e).pipe($i(i=>Ju(function jT(n,e){return null!==n&&e&&e(new Al(n)),kt(!0)}(i.route.parent,r),function Jh(n,e){return null!==n&&e&&e(new Rl(n)),kt(!0)}(i.route,r),function HT(n,e,t){const r=e[e.length-1],a=e.slice(0,e.length-1).reverse().map(c=>function FT(n){const e=n.routeConfig?n.routeConfig.canActivateChild:null;return e&&0!==e.length?{node:n,guards:e}:null}(c)).filter(c=>null!==c).map(c=>J_(()=>kt(c.guards.map(g=>{const v=Zh(g,c.node,t);let C;if(function Wl(n){return n&&Qt(n.canActivateChild)}(v))C=Wi(v.canActivateChild(r,n));else{if(!Qt(v))throw new Error("Invalid CanActivateChild guard");C=Wi(v(r,n))}return C.pipe(na())})).pipe(pc())));return kt(a).pipe(pc())}(n,i.path,t),function $T(n,e,t){const r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||0===r.length)return kt(!0);const i=r.map(a=>J_(()=>{const c=Zh(a,e,t);let h;if(function Ya(n){return n&&Qt(n.canActivate)}(c))h=Wi(c.canActivate(e,n));else{if(!Qt(c))throw new Error("Invalid CanActivate guard");h=Wi(c(e,n))}return h.pipe(na())}));return kt(i).pipe(pc())}(n,i.route,t))),na(i=>!0!==i,!0))}(r,a,n,e):kt(h)),(0,Vt.U)(h=>Object.assign(Object.assign({},t),{guardsResult:h})))})}(this.ngModule.injector,h=>this.triggerEvent(h)),(0,Hi.b)(h=>{if(ui(h.guardsResult)){const v=rc(`Redirecting to "${this.serializeUrl(h.guardsResult)}"`);throw v.url=h.guardsResult,v}const g=new kh(h.id,this.serializeUrl(h.extractedUrl),this.serializeUrl(h.urlAfterRedirects),h.targetSnapshot,!!h.guardsResult);this.triggerEvent(g)}),lr(h=>!!h.guardsResult||(this.restoreHistory(h),this.cancelNavigationTransition(h,""),!1)),py(h=>{if(h.guards.canActivateChecks.length)return kt(h).pipe((0,Hi.b)(g=>{const v=new Sl(g.id,this.serializeUrl(g.extractedUrl),this.serializeUrl(g.urlAfterRedirects),g.targetSnapshot);this.triggerEvent(v)}),jn(g=>{let v=!1;return kt(g).pipe(function tw(n,e){return(0,Nr.z)(t=>{const{targetSnapshot:r,guards:{canActivateChecks:i}}=t;if(!i.length)return kt(t);let a=0;return(0,ur.D)(i).pipe($i(c=>function TP(n,e,t,r){return function Po(n,e,t,r){const i=kg(n);if(0===i.length)return kt({});const a={};return(0,ur.D)(i).pipe((0,Nr.z)(c=>function fy(n,e,t,r){const i=Zh(n,e,r);return Wi(i.resolve?i.resolve(e,t):i(e,t))}(n[c],e,t,r).pipe((0,Hi.b)(h=>{a[c]=h}))),fg(1),(0,Nr.z)(()=>kg(a).length===i.length?kt(a):Ds.E))}(n._resolve,n,e,r).pipe((0,Vt.U)(a=>(n._resolvedData=a,n.data=Object.assign(Object.assign({},n.data),Dg(n,t).resolve),null)))}(c.route,r,n,e)),(0,Hi.b)(()=>a++),fg(1),(0,Nr.z)(c=>a===i.length?kt(t):Ds.E))})}(this.paramsInheritanceStrategy,this.ngModule.injector),(0,Hi.b)({next:()=>v=!0,complete:()=>{v||(this.restoreHistory(g),this.cancelNavigationTransition(g,"At least one route resolver didn't emit any value."))}}))}),(0,Hi.b)(g=>{const v=new ai(g.id,this.serializeUrl(g.extractedUrl),this.serializeUrl(g.urlAfterRedirects),g.targetSnapshot);this.triggerEvent(v)}))}),py(h=>{const{targetSnapshot:g,id:v,extractedUrl:C,rawUrl:D,extras:{skipLocationChange:x,replaceUrl:k}}=h;return this.hooks.afterPreactivation(g,{navigationId:v,appliedUrlTree:C,rawUrlTree:D,skipLocationChange:!!x,replaceUrl:!!k})}),(0,Vt.U)(h=>{const g=function ty(n,e,t){const r=dc(n,e._root,t?t._root:void 0);return new lc(r,e)}(this.routeReuseStrategy,h.targetSnapshot,h.currentRouterState);return Object.assign(Object.assign({},h),{targetRouterState:g})}),(0,Hi.b)(h=>{this.currentUrlTree=h.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(h.urlAfterRedirects,h.rawUrl),this.routerState=h.targetRouterState,"deferred"===this.urlUpdateStrategy&&(h.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,h),this.browserUrlTree=h.urlAfterRedirects)}),((n,e,t)=>(0,Vt.U)(r=>(new ze(e,r.targetRouterState,r.currentRouterState,t).activate(n),r)))(this.rootContexts,this.routeReuseStrategy,h=>this.triggerEvent(h)),(0,Hi.b)({next(){a=!0},complete(){a=!0}}),function B0(n){return(0,ei.e)((e,t)=>{try{e.subscribe(t)}finally{t.add(n)}})}(()=>{var h;a||c||this.cancelNavigationTransition(i,`Navigation ID ${i.id} is not equal to the current navigation id ${this.navigationId}`),(null===(h=this.currentNavigation)||void 0===h?void 0:h.id)===i.id&&(this.currentNavigation=null)}),ki(h=>{if(c=!0,function So(n){return n&&n[vi]}(h)){const g=ui(h.url);g||(this.navigated=!0,this.restoreHistory(i,!0));const v=new ec(i.id,this.serializeUrl(i.extractedUrl),h.message);r.next(v),g?setTimeout(()=>{const C=this.urlHandlingStrategy.merge(h.url,this.rawUrlTree),D={skipLocationChange:i.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy||Ug(i.source)};this.scheduleNavigation(C,"imperative",null,D,{resolve:i.resolve,reject:i.reject,promise:i.promise})},0):i.resolve(!1)}else{this.restoreHistory(i,!0);const g=new _r(i.id,this.serializeUrl(i.extractedUrl),h);r.next(g);try{i.resolve(this.errorHandler(h))}catch(v){i.reject(v)}}return Ds.E}))}))}resetRootComponentType(t){this.rootComponentType=t,this.routerState.root.component=this.rootComponentType}setTransition(t){this.transitions.next(Object.assign(Object.assign({},this.transitions.value),t))}initialNavigation(){this.setUpLocationChangeListener(),0===this.navigationId&&this.navigateByUrl(this.location.path(!0),{replaceUrl:!0})}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(t=>{const r="popstate"===t.type?"popstate":"hashchange";"popstate"===r&&setTimeout(()=>{var i;const a={replaceUrl:!0},c=(null===(i=t.state)||void 0===i?void 0:i.navigationId)?t.state:null;if(c){const g=Object.assign({},c);delete g.navigationId,delete g.\u0275routerPageId,0!==Object.keys(g).length&&(a.state=g)}const h=this.parseUrl(t.url);this.scheduleNavigation(h,r,c,a)},0)}))}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.currentNavigation}triggerEvent(t){this.events.next(t)}resetConfig(t){Gh(t),this.config=t.map(qh),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.transitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(t,r={}){const{relativeTo:i,queryParams:a,fragment:c,queryParamsHandling:h,preserveFragment:g}=r,v=i||this.routerState.root,C=g?this.currentUrlTree.fragment:c;let D=null;switch(h){case"merge":D=Object.assign(Object.assign({},this.currentUrlTree.queryParams),a);break;case"preserve":D=this.currentUrlTree.queryParams;break;default:D=a||null}return null!==D&&(D=this.removeEmptyProps(D)),function jh(n,e,t,r,i){if(0===t.length)return $h(e.root,e.root,e,r,i);const a=function iy(n){if("string"==typeof n[0]&&1===n.length&&"/"===n[0])return new ry(!0,0,n);let e=0,t=!1;const r=n.reduce((i,a,c)=>{if("object"==typeof a&&null!=a){if(a.outlets){const h={};return Br(a.outlets,(g,v)=>{h[v]="string"==typeof g?g.split("/"):g}),[...i,{outlets:h}]}if(a.segmentPath)return[...i,a.segmentPath]}return"string"!=typeof a?[...i,a]:0===c?(a.split("/").forEach((h,g)=>{0==g&&"."===h||(0==g&&""===h?t=!0:".."===h?e++:""!=h&&i.push(h))}),i):[...i,a]},[]);return new ry(t,e,r)}(t);if(a.toRoot())return $h(e.root,new hn([],{}),e,r,i);const c=function z0(n,e,t){if(n.isAbsolute)return new Wh(e.root,!0,0);if(-1===t.snapshot._lastPathIndex){const a=t.snapshot._urlSegment;return new Wh(a,a===e.root,0)}const r=ds(n.commands[0])?0:1;return function Sg(n,e,t){let r=n,i=e,a=t;for(;a>i;){if(a-=i,r=r.parent,!r)throw new Error("Invalid number of '../'");i=r.segments.length}return new Wh(r,!1,i-a)}(t.snapshot._urlSegment,t.snapshot._lastPathIndex+r,n.numberOfDoubleDots)}(a,e,n),h=c.processChildren?E(c.segmentGroup,c.index,a.commands):Ag(c.segmentGroup,c.index,a.commands);return $h(c.segmentGroup,h,e,r,i)}(v,this.currentUrlTree,t,D,null!=C?C:null)}navigateByUrl(t,r={skipLocationChange:!1}){const i=ui(t)?t:this.parseUrl(t),a=this.urlHandlingStrategy.merge(i,this.rawUrlTree);return this.scheduleNavigation(a,"imperative",null,r)}navigate(t,r={skipLocationChange:!1}){return function JT(n){for(let e=0;e<n.length;e++){const t=n[e];if(null==t)throw new Error(`The requested path contains ${t} segment at index ${e}`)}}(t),this.navigateByUrl(this.createUrlTree(t,r),r)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){let r;try{r=this.urlSerializer.parse(t)}catch(i){r=this.malformedUriErrorHandler(i,this.urlSerializer,t)}return r}isActive(t,r){let i;if(i=!0===r?Object.assign({},sw):!1===r?Object.assign({},QT):r,ui(t))return Ml(this.currentUrlTree,t,i);const a=this.parseUrl(t);return Ml(this.currentUrlTree,a,i)}removeEmptyProps(t){return Object.keys(t).reduce((r,i)=>{const a=t[i];return null!=a&&(r[i]=a),r},{})}processNavigations(){this.navigations.subscribe(t=>{this.navigated=!0,this.lastSuccessfulId=t.id,this.currentPageId=t.targetPageId,this.events.next(new As(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(this.currentUrlTree))),this.lastSuccessfulNavigation=this.currentNavigation,t.resolve(!0)},t=>{this.console.warn(`Unhandled Navigation Error: ${t}`)})}scheduleNavigation(t,r,i,a,c){var h,g,v;if(this.disposed)return Promise.resolve(!1);const C=this.transitions.value,D=Ug(r)&&C&&!Ug(C.source),x=C.rawUrl.toString()===t.toString(),k=C.id===(null===(h=this.currentNavigation)||void 0===h?void 0:h.id);if(D&&x&&k)return Promise.resolve(!0);let ge,xe,bt;c?(ge=c.resolve,xe=c.reject,bt=c.promise):bt=new Promise((Rt,En)=>{ge=Rt,xe=En});const Tt=++this.navigationId;let Wt;return"computed"===this.canceledNavigationResolution?(0===this.currentPageId&&(i=this.location.getState()),Wt=i&&i.\u0275routerPageId?i.\u0275routerPageId:a.replaceUrl||a.skipLocationChange?null!==(g=this.browserPageId)&&void 0!==g?g:0:(null!==(v=this.browserPageId)&&void 0!==v?v:0)+1):Wt=0,this.setTransition({id:Tt,targetPageId:Wt,source:r,restoredState:i,currentUrlTree:this.currentUrlTree,currentRawUrl:this.rawUrlTree,rawUrl:t,extras:a,resolve:ge,reject:xe,promise:bt,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),bt.catch(Rt=>Promise.reject(Rt))}setBrowserUrl(t,r){const i=this.urlSerializer.serialize(t),a=Object.assign(Object.assign({},r.extras.state),this.generateNgRouterState(r.id,r.targetPageId));this.location.isCurrentPathEqualTo(i)||r.extras.replaceUrl?this.location.replaceState(i,"",a):this.location.go(i,"",a)}restoreHistory(t,r=!1){var i,a;if("computed"===this.canceledNavigationResolution){const c=this.currentPageId-t.targetPageId;"popstate"!==t.source&&"eager"!==this.urlUpdateStrategy&&this.currentUrlTree!==(null===(i=this.currentNavigation)||void 0===i?void 0:i.finalUrl)||0===c?this.currentUrlTree===(null===(a=this.currentNavigation)||void 0===a?void 0:a.finalUrl)&&0===c&&(this.resetState(t),this.browserUrlTree=t.currentUrlTree,this.resetUrlToCurrentUrlTree()):this.location.historyGo(c)}else"replace"===this.canceledNavigationResolution&&(r&&this.resetState(t),this.resetUrlToCurrentUrlTree())}resetState(t){this.routerState=t.currentRouterState,this.currentUrlTree=t.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}cancelNavigationTransition(t,r){const i=new ec(t.id,this.serializeUrl(t.extractedUrl),r);this.triggerEvent(i),t.resolve(!1)}generateNgRouterState(t,r){return"computed"===this.canceledNavigationResolution?{navigationId:t,\u0275routerPageId:r}:{navigationId:t}}}return n.\u0275fac=function(t){m.$Z()},n.\u0275prov=m.Yz7({token:n,factory:n.\u0275fac}),n})();function Ug(n){return"imperative"!==n}let my=(()=>{class n{constructor(t,r,i,a,c){this.router=t,this.route=r,this.tabIndexAttribute=i,this.renderer=a,this.el=c,this.commands=null,this.onChanges=new Ir.x,this.setTabIndexIfNotOnNativeEl("0")}setTabIndexIfNotOnNativeEl(t){if(null!=this.tabIndexAttribute)return;const r=this.renderer,i=this.el.nativeElement;null!==t?r.setAttribute(i,"tabindex",t):r.removeAttribute(i,"tabindex")}ngOnChanges(t){this.onChanges.next(this)}set routerLink(t){null!=t?(this.commands=Array.isArray(t)?t:[t],this.setTabIndexIfNotOnNativeEl("0")):(this.commands=null,this.setTabIndexIfNotOnNativeEl(null))}onClick(){if(null===this.urlTree)return!0;const t={skipLocationChange:Ql(this.skipLocationChange),replaceUrl:Ql(this.replaceUrl),state:this.state};return this.router.navigateByUrl(this.urlTree,t),!0}get urlTree(){return null===this.commands?null:this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:Ql(this.preserveFragment)})}}return n.\u0275fac=function(t){return new(t||n)(m.Y36(ci),m.Y36(xo),m.$8M("tabindex"),m.Y36(m.Qsj),m.Y36(m.SBq))},n.\u0275dir=m.lG2({type:n,selectors:[["","routerLink","",5,"a",5,"area"]],hostBindings:function(t,r){1&t&&m.NdJ("click",function(){return r.onClick()})},inputs:{queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",state:"state",relativeTo:"relativeTo",routerLink:"routerLink"},features:[m.TTD]}),n})(),Vg=(()=>{class n{constructor(t,r,i){this.router=t,this.route=r,this.locationStrategy=i,this.commands=null,this.href=null,this.onChanges=new Ir.x,this.subscription=t.events.subscribe(a=>{a instanceof As&&this.updateTargetUrlAndHref()})}set routerLink(t){this.commands=null!=t?Array.isArray(t)?t:[t]:null}ngOnChanges(t){this.updateTargetUrlAndHref(),this.onChanges.next(this)}ngOnDestroy(){this.subscription.unsubscribe()}onClick(t,r,i,a,c){if(0!==t||r||i||a||c||"string"==typeof this.target&&"_self"!=this.target||null===this.urlTree)return!0;const h={skipLocationChange:Ql(this.skipLocationChange),replaceUrl:Ql(this.replaceUrl),state:this.state};return this.router.navigateByUrl(this.urlTree,h),!1}updateTargetUrlAndHref(){this.href=null!==this.urlTree?this.locationStrategy.prepareExternalUrl(this.router.serializeUrl(this.urlTree)):null}get urlTree(){return null===this.commands?null:this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:Ql(this.preserveFragment)})}}return n.\u0275fac=function(t){return new(t||n)(m.Y36(ci),m.Y36(xo),m.Y36(q))},n.\u0275dir=m.lG2({type:n,selectors:[["a","routerLink",""],["area","routerLink",""]],hostVars:2,hostBindings:function(t,r){1&t&&m.NdJ("click",function(a){return r.onClick(a.button,a.ctrlKey,a.shiftKey,a.altKey,a.metaKey)}),2&t&&m.uIk("target",r.target)("href",r.href,m.LSH)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",state:"state",relativeTo:"relativeTo",routerLink:"routerLink"},features:[m.TTD]}),n})();function Ql(n){return""===n||!!n}let ow=(()=>{class n{constructor(t,r,i,a,c,h){this.router=t,this.element=r,this.renderer=i,this.cdr=a,this.link=c,this.linkWithHref=h,this.classes=[],this.isActive=!1,this.routerLinkActiveOptions={exact:!1},this.isActiveChange=new m.vpe,this.routerEventsSubscription=t.events.subscribe(g=>{g instanceof As&&this.update()})}ngAfterContentInit(){kt(this.links.changes,this.linksWithHrefs.changes,kt(null)).pipe((0,ta.J)()).subscribe(t=>{this.update(),this.subscribeToEachLinkOnChanges()})}subscribeToEachLinkOnChanges(){var t;null===(t=this.linkInputChangesSubscription)||void 0===t||t.unsubscribe();const r=[...this.links.toArray(),...this.linksWithHrefs.toArray(),this.link,this.linkWithHref].filter(i=>!!i).map(i=>i.onChanges);this.linkInputChangesSubscription=(0,ur.D)(r).pipe((0,ta.J)()).subscribe(i=>{this.isActive!==this.isLinkActive(this.router)(i)&&this.update()})}set routerLinkActive(t){const r=Array.isArray(t)?t:t.split(" ");this.classes=r.filter(i=>!!i)}ngOnChanges(t){this.update()}ngOnDestroy(){var t;this.routerEventsSubscription.unsubscribe(),null===(t=this.linkInputChangesSubscription)||void 0===t||t.unsubscribe()}update(){!this.links||!this.linksWithHrefs||!this.router.navigated||Promise.resolve().then(()=>{const t=this.hasActiveLinks();this.isActive!==t&&(this.isActive=t,this.cdr.markForCheck(),this.classes.forEach(r=>{t?this.renderer.addClass(this.element.nativeElement,r):this.renderer.removeClass(this.element.nativeElement,r)}),this.isActiveChange.emit(t))})}isLinkActive(t){const r=function aw(n){return!!n.paths}(this.routerLinkActiveOptions)?this.routerLinkActiveOptions:this.routerLinkActiveOptions.exact||!1;return i=>!!i.urlTree&&t.isActive(i.urlTree,r)}hasActiveLinks(){const t=this.isLinkActive(this.router);return this.link&&t(this.link)||this.linkWithHref&&t(this.linkWithHref)||this.links.some(t)||this.linksWithHrefs.some(t)}}return n.\u0275fac=function(t){return new(t||n)(m.Y36(ci),m.Y36(m.SBq),m.Y36(m.Qsj),m.Y36(m.sBO),m.Y36(my,8),m.Y36(Vg,8))},n.\u0275dir=m.lG2({type:n,selectors:[["","routerLinkActive",""]],contentQueries:function(t,r,i){if(1&t&&(m.Suo(i,my,5),m.Suo(i,Vg,5)),2&t){let a;m.iGM(a=m.CRH())&&(r.links=a),m.iGM(a=m.CRH())&&(r.linksWithHrefs=a)}},inputs:{routerLinkActiveOptions:"routerLinkActiveOptions",routerLinkActive:"routerLinkActive"},outputs:{isActiveChange:"isActiveChange"},exportAs:["routerLinkActive"],features:[m.TTD]}),n})();class Bg{}class jg{preload(e,t){return kt(null)}}let cw=(()=>{class n{constructor(t,r,i,a){this.router=t,this.injector=i,this.preloadingStrategy=a,this.loader=new Fg(i,r,g=>t.triggerEvent(new as(g)),g=>t.triggerEvent(new nc(g)))}setUpPreloading(){this.subscription=this.router.events.pipe(lr(t=>t instanceof As),$i(()=>this.preload())).subscribe(()=>{})}preload(){const t=this.injector.get(m.h0i);return this.processRoutes(t,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(t,r){const i=[];for(const a of r)if(a.loadChildren&&!a.canLoad&&a._loadedConfig){const c=a._loadedConfig;i.push(this.processRoutes(c.module,c.routes))}else a.loadChildren&&!a.canLoad?i.push(this.preloadConfig(t,a)):a.children&&i.push(this.processRoutes(t,a.children));return(0,ur.D)(i).pipe((0,ta.J)(),(0,Vt.U)(a=>{}))}preloadConfig(t,r){return this.preloadingStrategy.preload(r,()=>(r._loadedConfig?kt(r._loadedConfig):this.loader.load(t.injector,r)).pipe((0,Nr.z)(a=>(r._loadedConfig=a,this.processRoutes(a.module,a.routes)))))}}return n.\u0275fac=function(t){return new(t||n)(m.LFG(ci),m.LFG(m.Sil),m.LFG(m.zs3),m.LFG(Bg))},n.\u0275prov=m.Yz7({token:n,factory:n.\u0275fac}),n})(),_y=(()=>{class n{constructor(t,r,i={}){this.router=t,this.viewportScroller=r,this.options=i,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},i.scrollPositionRestoration=i.scrollPositionRestoration||"disabled",i.anchorScrolling=i.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.router.events.subscribe(t=>{t instanceof Dl?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=t.navigationTrigger,this.restoredId=t.restoredState?t.restoredState.navigationId:0):t instanceof As&&(this.lastId=t.id,this.scheduleScrollEvent(t,this.router.parseUrl(t.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.router.events.subscribe(t=>{t instanceof _g&&(t.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(t.position):t.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(t.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(t,r){this.router.triggerEvent(new _g(t,"popstate"===this.lastSource?this.store[this.restoredId]:null,r))}ngOnDestroy(){this.routerEventsSubscription&&this.routerEventsSubscription.unsubscribe(),this.scrollEventsSubscription&&this.scrollEventsSubscription.unsubscribe()}}return n.\u0275fac=function(t){m.$Z()},n.\u0275prov=m.Yz7({token:n,factory:n.\u0275fac}),n})();const Xa=new m.OlP("ROUTER_CONFIGURATION"),eu=new m.OlP("ROUTER_FORROOT_GUARD"),lw=[De,{provide:Ha,useClass:Ro},{provide:ci,useFactory:function fw(n,e,t,r,i,a,c={},h,g){const v=new ci(null,n,e,t,r,i,Nl(a));return h&&(v.urlHandlingStrategy=h),g&&(v.routeReuseStrategy=g),function Ey(n,e){n.errorHandler&&(e.errorHandler=n.errorHandler),n.malformedUriErrorHandler&&(e.malformedUriErrorHandler=n.malformedUriErrorHandler),n.onSameUrlNavigation&&(e.onSameUrlNavigation=n.onSameUrlNavigation),n.paramsInheritanceStrategy&&(e.paramsInheritanceStrategy=n.paramsInheritanceStrategy),n.relativeLinkResolution&&(e.relativeLinkResolution=n.relativeLinkResolution),n.urlUpdateStrategy&&(e.urlUpdateStrategy=n.urlUpdateStrategy),n.canceledNavigationResolution&&(e.canceledNavigationResolution=n.canceledNavigationResolution)}(c,v),c.enableTracing&&v.events.subscribe(C=>{var D,x;null===(D=console.group)||void 0===D||D.call(console,`Router Event: ${C.constructor.name}`),console.log(C.toString()),console.log(C),null===(x=console.groupEnd)||void 0===x||x.call(console)}),v},deps:[Ha,Qa,De,m.zs3,m.Sil,Og,Xa,[class gy{},new m.FiY],[class nw{},new m.FiY]]},Qa,{provide:xo,useFactory:function pw(n){return n.routerState.root},deps:[ci]},cw,jg,class uw{preload(e,t){return t().pipe(ki(()=>kt(null)))}},{provide:Xa,useValue:{enableTracing:!1}}];function dw(){return new m.PXZ("Router",ci)}let yy=(()=>{class n{constructor(t,r){}static forRoot(t,r){return{ngModule:n,providers:[lw,vy(t),{provide:eu,useFactory:hw,deps:[[ci,new m.FiY,new m.tp0]]},{provide:Xa,useValue:r||{}},{provide:q,useFactory:eD,deps:[de,[new m.tBr(Le),new m.FiY],Xa]},{provide:_y,useFactory:$g,deps:[ci,rg,Xa]},{provide:Bg,useExisting:r&&r.preloadingStrategy?r.preloadingStrategy:jg},{provide:m.PXZ,multi:!0,useFactory:dw},[Jl,{provide:m.ip1,multi:!0,useFactory:Hg,deps:[Jl]},{provide:Wg,useFactory:gw,deps:[Jl]},{provide:m.tb,multi:!0,useExisting:Wg}]]}}static forChild(t){return{ngModule:n,providers:[vy(t)]}}}return n.\u0275fac=function(t){return new(t||n)(m.LFG(eu,8),m.LFG(ci,8))},n.\u0275mod=m.oAB({type:n}),n.\u0275inj=m.cJS({}),n})();function $g(n,e,t){return t.scrollOffset&&e.setOffset(t.scrollOffset),new _y(n,e,t)}function eD(n,e,t={}){return t.useHash?new ce(n,e):new Ne(n,e)}function hw(n){return"guarded"}function vy(n){return[{provide:m.deG,multi:!0,useValue:n},{provide:Og,multi:!0,useValue:n}]}let Jl=(()=>{class n{constructor(t){this.injector=t,this.initNavigation=!1,this.destroyed=!1,this.resultOfPreactivationDone=new Ir.x}appInitializer(){return this.injector.get(j,Promise.resolve(null)).then(()=>{if(this.destroyed)return Promise.resolve(!0);let r=null;const i=new Promise(h=>r=h),a=this.injector.get(ci),c=this.injector.get(Xa);return"disabled"===c.initialNavigation?(a.setUpLocationChangeListener(),r(!0)):"enabled"===c.initialNavigation||"enabledBlocking"===c.initialNavigation?(a.hooks.afterPreactivation=()=>this.initNavigation?kt(null):(this.initNavigation=!0,r(!0),this.resultOfPreactivationDone),a.initialNavigation()):r(!0),i})}bootstrapListener(t){const r=this.injector.get(Xa),i=this.injector.get(cw),a=this.injector.get(_y),c=this.injector.get(ci),h=this.injector.get(m.z2F);t===h.components[0]&&(("enabledNonBlocking"===r.initialNavigation||void 0===r.initialNavigation)&&c.initialNavigation(),i.setUpPreloading(),a.init(),c.resetRootComponentType(h.componentTypes[0]),this.resultOfPreactivationDone.next(null),this.resultOfPreactivationDone.complete())}ngOnDestroy(){this.destroyed=!0}}return n.\u0275fac=function(t){return new(t||n)(m.LFG(m.zs3))},n.\u0275prov=m.Yz7({token:n,factory:n.\u0275fac}),n})();function Hg(n){return n.appInitializer.bind(n)}function gw(n){return n.bootstrapListener.bind(n)}const Wg=new m.OlP("Router Initializer");var Xl=P(5032);function yw(n){return(0,ei.e)((e,t)=>{(0,Xu.Xf)(n).subscribe((0,zn.x)(t,()=>t.complete(),Xl.Z)),!t.closed&&e.subscribe(t)})}var Fn=P(655);const ef={type:null,entityIds:null,skip:!1,payload:null};let wy=!1;function tu(n,e,t){wi(n,e,t),wy=!0}function wi(n,e,t){!1===wy&&(ef.type=n,ef.entityIds=e,ef.payload=t)}function tD(n=!0){ef.skip=n}function tf(n,e){return function(t,r,i){const a=i.value;return i.value=function(...c){return tu(n,e),a.apply(this,c)},i}}let zg={resettable:!1,ttl:null,producerFn:void 0};function Iy(){return zg}function jr(n){return null==n}function nf(n){return!1===jr(n)}var Ew=P(6063);class by extends Ir.x{constructor(e=1/0,t=1/0,r=Ew.l){super(),this._bufferSize=e,this._windowTime=t,this._timestampProvider=r,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=t===1/0,this._bufferSize=Math.max(1,e),this._windowTime=Math.max(1,t)}next(e){const{isStopped:t,_buffer:r,_infiniteTimeWindow:i,_timestampProvider:a,_windowTime:c}=this;t||(r.push(e),!i&&r.push(a.now()+c)),this._trimBuffer(),super.next(e)}_subscribe(e){this._throwIfClosed(),this._trimBuffer();const t=this._innerSubscribe(e),{_infiniteTimeWindow:r,_buffer:i}=this,a=i.slice();for(let c=0;c<a.length&&!e.closed;c+=r?1:2)e.next(a[c]);return this._checkFinalizedStatuses(e),t}_trimBuffer(){const{_bufferSize:e,_timestampProvider:t,_buffer:r,_infiniteTimeWindow:i}=this,a=(i?1:2)*e;if(e<1/0&&a<r.length&&r.splice(0,r.length-a),!i){const c=t.now();let h=0;for(let g=1;g<r.length&&r[g]<=c;g+=2)h=g;h&&r.splice(0,h+1)}}}const ww=new Ir.x,Cy=new by(50,5e3),Iw=new Ir.x,Ty="undefined"!=typeof window,zi={},rf={};Ty&&(window.$$stores=zi,window.$$queries=rf);function _c(n,e){return n.hasOwnProperty(e)}function Oi(n){return jr(n)?[]:Array.isArray(n)?n:[n]}var eo=(()=>{return(n=eo||(eo={})).Set="Set",n.Add="Add",n.Update="Update",n.Remove="Remove",eo;var n})();function sf(n){const e=typeof n;return null!=n&&("object"==e||"function"==e)}function hs(n){return Array.isArray(n)}function to(n){return!!hs(n)&&0===n.length}function li(n){return"function"==typeof n}function ed(n){return void 0===n}function Dw(n){return n.hasOwnProperty("active")}function Sw(n){return hs(n)}function Aw({active:n,ids:e,entities:t}){return Sw(n)?function Rw(n,e){const t=n.filter(r=>e.indexOf(r)>-1);return t.length===n.length?n:t}(n,e):!1===_c(t,n)?null:n}function Ay(n,e){let t={};for(const r of Object.keys(n))t[r]=e(n[r]);return t}function qr(n,e=bo.y){return n=null!=n?n:RP,(0,ei.e)((t,r)=>{let i,a=!0;t.subscribe((0,zn.x)(r,c=>{const h=e(c);(a||!n(i,h))&&(a=!1,i=h,r.next(c))}))})}function RP(n,e){return n===e}function hD(n){Object.freeze(n);const e="function"==typeof n,t=Object.prototype.hasOwnProperty;return Object.getOwnPropertyNames(n).forEach(function(r){t.call(n,r)&&(!e||"caller"!==r&&"callee"!==r&&"arguments"!==r)&&null!==n[r]&&("object"==typeof n[r]||"function"==typeof n[r])&&!Object.isFrozen(n[r])&&hD(n[r])}),n}function Pw(n){return null!=n&&"false"!=`${n}`}function Nw(n){return Pw(n)&&"Object"===n.constructor.name}Error;const Ry="akitaConfig";function Mw(n){return function(e){e[Ry]={idKey:"id"};for(let t=0,r=Object.keys(n);t<r.length;t++){const i=r[t];"name"===i?e[Ry].storeName=n[i]:e[Ry][i]=n[i]}}}const PP=new Ir.x,fD=new Wr(!1),Fi={activeTransactions:0,batchTransaction:null};function Py(){return Fi.activeTransactions>0}function Gg(n,e){!function xy(){Py()||(Fi.batchTransaction=new Ir.x),Fi.activeTransactions++,fD.next(!0)}();try{return n.apply(e)}finally{tu("@Transaction"),function pD(){0==--Fi.activeTransactions&&(Fi.batchTransaction.next(!0),Fi.batchTransaction.complete(),fD.next(!1),PP.next(!0))}()}}function qg(){return function(n,e,t){const r=t.value;return t.value=function(...i){return Gg(()=>r.apply(this,i),this)},t}}class No{constructor(e,t={}){this.options=t,this.inTransaction=!1,this.cache={active:new Wr(!1),ttl:null},this.onInit(e)}setLoading(e=!1){e!==this._value().loading&&(wi("Set Loading"),this._setState(t=>Jr(xt({},t),{loading:e})))}setHasCache(e,t={restartTTL:!1}){if(e!==this.cache.active.value&&this.cache.active.next(e),t.restartTTL){const r=this.getCacheTTL();r&&(null!==this.cache.ttl&&clearTimeout(this.cache.ttl),this.cache.ttl=setTimeout(()=>this.setHasCache(!1),r))}}getValue(){return this.storeValue}setError(e){e!==this._value().error&&(wi("Set Error"),this._setState(t=>Jr(xt({},t),{error:e})))}_select(e){return this.store.asObservable().pipe((0,Vt.U)(t=>e(t.state)),qr())}_value(){return this.storeValue}_cache(){return this.cache.active}get config(){return this.constructor[Ry]||{}}get storeName(){return this.config.storeName||this.options.storeName||this.options.name}get deepFreeze(){return this.config.deepFreezeFn||this.options.deepFreezeFn||hD}get cacheConfig(){return this.config.cache||this.options.cache}get _producerFn(){return this.config.producerFn||this.options.producerFn||function rD(){return zg.producerFn}()}get resettable(){return nf(this.config.resettable)?this.config.resettable:this.options.resettable}_setState(e,t=!0){if(li(e)){const r=e(this._value());this.storeValue=this.deepFreeze(r)}else this.storeValue=e;if(!this.store)return this.store=new Wr({state:this.storeValue}),void this.store.subscribe(({action:r})=>{r&&function sD(n,e){Iw.next({storeName:n,action:e})}(this.storeName,r)});Py()?this.handleTransaction():this.dispatch(this.storeValue,t)}reset(){this.isResettable()&&(wi("Reset"),this._setState(()=>Object.assign({},this._initialState)),this.setHasCache(!1))}update(e){let t;wi("Update");const r=this._value();t=li(e)?li(this._producerFn)?this._producerFn(r,e):e(r):e;const i=this.akitaPreUpdate(r,xt(xt({},r),t)),a=Nw(r)?i:new r.constructor(i);this._setState(a)}updateStoreConfig(e){this.options=xt(xt({},this.options),e)}akitaPreUpdate(e,t){return t}destroy(){(!Ty||!window.hmrEnabled)&&this===zi[this.storeName]&&(delete zi[this.storeName],function bw(n){ww.next(n)}(this.storeName),this.setHasCache(!1),this.cache.active.complete(),this.store.complete())}onInit(e){zi[this.storeName]=this,this._setState(()=>e),function iD(n){Cy.next(n)}(this.storeName),this.isResettable()&&(this._initialState=e),function xP(n,e){n||console.error(`@StoreConfig({ name }) is missing in ${e}`)}(this.storeName,this.constructor.name)}dispatch(e,t=!0){let r;t&&(r=ef,function vw(){wy=!1}()),this.store.next({state:e,action:r})}watchTransaction(){(function Ny(){return Fi.batchTransaction?Fi.batchTransaction.asObservable():kt(!0)})().subscribe(()=>{this.inTransaction=!1,this.dispatch(this._value())})}isResettable(){return!1!==this.resettable&&(this.resettable||Iy().resettable)}handleTransaction(){this.inTransaction||(this.watchTransaction(),this.inTransaction=!0)}getCacheTTL(){return this.cacheConfig&&this.cacheConfig.ttl||Iy().ttl}}var Kg;class yc extends No{constructor(e={},t={}){super(xt(xt({},{entities:{},ids:[],loading:!0,error:null}),e),t),this.options=t,this.entityActions=new Ir.x,this.entityIdChanges=new Ir.x}get selectEntityAction$(){return this.entityActions.asObservable()}get selectEntityIdChanges$(){return this.entityIdChanges.asObservable()}get idKey(){return this.config.idKey||this.options.idKey||"id"}set(e,t={}){if(jr(e))return;wi("Set Entity");const r=this.akitaPreAddEntity===yc.prototype.akitaPreAddEntity;this.setHasCache(!0,{restartTTL:!0}),this._setState(i=>{const a=function dD({state:n,entities:e,idKey:t,preAddEntity:r,isNativePreAdd:i}){let a,c;if(hs(e)){const g=function AP(n,e,t){const r={entities:{},ids:[]};for(const i of n){const a=t(i);r.entities[a[e]]=a,r.ids.push(a[e])}return r}(e,t,r);a=g.entities,c=g.ids}else!function xw(n){return n.entities&&n.ids}(e)?(a=i?e:Ay(e,r),c=Object.keys(a).map(g=>isNaN(g)?g:Number(g))):(a=i?e.entities:Ay(e.entities,r),c=e.ids);const h=Jr(xt({},n),{entities:a,ids:c,loading:!1});return Dw(n)&&(h.active=Aw(h)),h}({state:i,entities:e,idKey:this.idKey,preAddEntity:this.akitaPreAddEntity.bind(this),isNativePreAdd:r});return!1===ed(t.activeId)&&(a.active=t.activeId),a}),this.hasInitialUIState()&&this.handleUICreation(),this.entityActions.next({type:eo.Set,ids:this.ids})}add(e,t={loading:!1}){const r=Oi(e);if(to(r))return;const i=function oa({state:n,entities:e,idKey:t,options:r={},preAddEntity:i}){let a={},c=[],h=!1;for(const g of e)if(!1===_c(n.entities,g[t])){const v=i(g),C=v[t];a[C]=v,r.prepend?c.unshift(C):c.push(C),h=!0}return h?{newState:Jr(xt({},n),{entities:xt(xt({},n.entities),a),ids:r.prepend?[...c,...n.ids]:[...n.ids,...c]}),newIds:c}:null}({state:this._value(),preAddEntity:this.akitaPreAddEntity.bind(this),entities:r,idKey:this.idKey,options:t});i&&(wi("Add Entity"),i.newState.loading=t.loading,this._setState(()=>i.newState),this.hasInitialUIState()&&this.handleUICreation(!0),this.entityActions.next({type:eo.Add,ids:i.newIds}))}update(e,t){if(ed(t))return void super.update(e);let i,r=[];r=li(e)?this.ids.filter(a=>e(this.entities[a])):jr(e)?this.ids:Oi(e),to(r)||(wi("Update Entity",r),this._setState(a=>function kw({state:n,ids:e,idKey:t,newStateOrFn:r,preUpdateEntity:i,producerFn:a,onEntityIdChanges:c}){const h={};let v,g=!1;for(const k of e){if(!1===_c(n.entities,k))continue;const B=n.entities[k];let ge;ge=li(r)?li(a)?a(B,r):r(B):r;const xe=ge.hasOwnProperty(t)&&ge[t]!==B[t];let bt;v=k,xe&&(g=!0,v=ge[t]);const Tt=xt(xt({},B),ge);bt=Nw(B)?Tt:Nw(ge)?new B.constructor(Tt):new ge.constructor(Tt),h[v]=i(B,bt)}let C=n.ids,D=n.entities;if(g){const[k]=e,x=n.entities,{[k]:B}=x;D=IP(x,[$F(k)]),C=n.ids.map(xe=>xe===k?v:xe),c(k,v)}return Jr(xt({},n),{entities:xt(xt({},D),h),ids:C})}({idKey:this.idKey,ids:r,preUpdateEntity:this.akitaPreUpdateEntity.bind(this),state:a,newStateOrFn:t,producerFn:this._producerFn,onEntityIdChanges:(c,h)=>{i={oldId:c,newId:h},this.entityIdChanges.next(Jr(xt({},i),{pending:!0}))}})),i&&this.entityIdChanges.next(Jr(xt({},i),{pending:!1})),this.entityActions.next({type:eo.Update,ids:r}))}upsert(e,t,r,i={}){const a=Oi(e),c=D=>x=>_c(this.entities,x)===D,h=li(r)?i.baseClass:r?r.baseClass:void 0,g=li(h),v=a.filter(c(!0)),C=a.filter(c(!1)).map(D=>{const x="function"==typeof t?t({}):t,k=li(r)?r(D,x):x,B=Jr(xt({},k),{[this.idKey]:D});return g?new h(B):B});this.update(v,t),this.add(C),tu("Upsert Entity")}upsertMany(e,t={}){const r=[],i=[],a={};for(const c of e){const h=this.akitaPreCheckEntity(c),g=h[this.idKey];if(_c(this.entities,g)){const v=this._value().entities[g],C=xt(xt({},this._value().entities[g]),h),D=t.baseClass?new t.baseClass(C):C,x=this.akitaPreUpdateEntity(v,D),k=x[this.idKey];a[k]=x,i.push(k)}else{const v=t.baseClass?new t.baseClass(h):h,C=this.akitaPreAddEntity(v),D=C[this.idKey];r.push(D),a[D]=C}}tu("Upsert Many"),this._setState(c=>Jr(xt({},c),{ids:r.length?[...c.ids,...r]:c.ids,entities:xt(xt({},c.entities),a),loading:!!t.loading})),i.length&&this.entityActions.next({type:eo.Update,ids:i}),r.length&&this.entityActions.next({type:eo.Add,ids:r}),r.length&&this.hasUIStore()&&this.handleUICreation(!0)}replace(e,t){const r=Oi(e);if(to(r))return;const i={};for(const a of r)i[a]=Jr(xt({},t),{[this.idKey]:a});wi("Replace Entity",e),this._setState(a=>Jr(xt({},a),{entities:xt(xt({},a.entities),i)}))}move(e,t){const r=this.ids.slice();r.splice(t<0?r.length+t:t,0,r.splice(e,1)[0]),wi("Move Entity"),this._setState(i=>Jr(xt({},i),{entities:xt({},i.entities),ids:r}))}remove(e){if(to(this.ids))return;const t=nf(e);let r=[];r=li(e)?this.ids.filter(i=>e(this.entities[i])):t?Oi(e):this.ids,!to(r)&&(wi("Remove Entity",r),this._setState(i=>function SP({state:n,ids:e}){if(jr(e))return function lD(n){return Jr(xt({},n),{entities:{},ids:[],active:Sw(n.active)?[]:null})}(n);const t=n.entities;let r={};for(const a of n.ids)!1===e.includes(a)&&(r[a]=t[a]);const i=Jr(xt({},n),{entities:r,ids:n.ids.filter(a=>!1===e.includes(a))});return Dw(n)&&(i.active=Aw(i)),i}({state:i,ids:r})),t||this.setHasCache(!1),this.handleUIRemove(r),this.entityActions.next({type:eo.Remove,ids:r}))}updateActive(e){const t=Oi(this.active);wi("Update Active",t),this.update(t,e)}setActive(e){const t=function Dy(n,e,t){let r;if(hs(n))r=n;else if(sf(n)){if(jr(t))return;n=Object.assign({wrap:!0},n);const i=e.indexOf(t);if(n.prev){const a=0===i;if(a&&!n.wrap)return;r=a?e[e.length-1]:e[i-1]}else if(n.next){const a=e.length===i+1;if(a&&!n.wrap)return;r=a?e[0]:e[i+1]}}else{if(n===t)return;r=n}return r}(e,this.ids,this.active);void 0!==t&&(wi("Set Active",t),this._setActive(t))}addActive(e){const t=Oi(e);to(t)||t.every(i=>this.active.indexOf(i)>-1)||(wi("Add Active",e),this._setState(i=>{const a=Array.from(new Set([...i.active,...t]));return Jr(xt({},i),{active:a})}))}removeActive(e){const t=Oi(e);to(t)||!t.some(i=>this.active.indexOf(i)>-1)||(wi("Remove Active",e),this._setState(i=>Jr(xt({},i),{active:Array.isArray(i.active)?i.active.filter(a=>-1===t.indexOf(a)):null})))}toggleActive(e){const t=Oi(e),r=c=>h=>this.active.includes(h)===c,i=t.filter(r(!0)),a=t.filter(r(!1));this.removeActive(i),this.addActive(a),tu("Toggle Active")}createUIStore(e={},t={}){return this.ui=new My(e,xt(xt({},{name:`UI/${this.storeName}`,idKey:this.idKey}),t)),this.ui}destroy(){super.destroy(),this.ui instanceof yc&&this.ui.destroy(),this.entityActions.complete()}akitaPreUpdateEntity(e,t){return t}akitaPreAddEntity(e){return e}akitaPreCheckEntity(e){return e}get ids(){return this._value().ids}get entities(){return this._value().entities}get active(){return this._value().active}_setActive(e){this._setState(t=>Jr(xt({},t),{active:e}))}handleUICreation(e=!1){const t=this.ids,r=li(this.ui._akitaCreateEntityFn);let i;const a=c=>{const h=this.entities[c],g=r?this.ui._akitaCreateEntityFn(h):this.ui._akitaCreateEntityFn;return xt({[this.idKey]:h[this.idKey]},g)};i=e?this.ids.filter(c=>ed(this.ui.entities[c])).map(a):t.map(a),e?this.ui.add(i):this.ui.set(i)}hasInitialUIState(){return this.hasUIStore()&&!1===ed(this.ui._akitaCreateEntityFn)}handleUIRemove(e){this.hasUIStore()&&this.ui.remove(e)}hasUIStore(){return this.ui instanceof My}}(0,Fn.gn)([qg(),(0,Fn.w6)("design:type",Function),(0,Fn.w6)("design:paramtypes",[Object,Object,Object,Object]),(0,Fn.w6)("design:returntype",void 0)],yc.prototype,"upsert",null),(0,Fn.gn)([qg(),(0,Fn.w6)("design:type",Function),(0,Fn.w6)("design:paramtypes",["function"==typeof(Kg="undefined"!=typeof T&&T)?Kg:Object]),(0,Fn.w6)("design:returntype",void 0)],yc.prototype,"toggleActive",null);class My extends yc{constructor(e={},t={}){super(e,t)}setInitialEntityState(e){this._akitaCreateEntityFn=e}}function Ow(){return lr(n=>null!=n)}function uf(n){return"string"==typeof n}class Ec{constructor(e){this.store=e,this.__store__=e,rf[e.storeName]=this}select(e){let t;if(li(e))t=e;else if(uf(e))t=r=>r[e];else{if(Array.isArray(e))return this.store._select(r=>r).pipe(qr(function td(n){return function(e,t){const r=li(n[0]);return!1===n.some(i=>r?i(e)!==i(t):e[i]!==t[i])}}(e)),(0,Vt.U)(r=>li(e[0])?e.map(i=>i(r)):e.reduce((i,a)=>(i[a]=r[a],i),{})));t=r=>r}return this.store._select(t)}selectLoading(){return this.select(e=>e.loading)}selectError(){return this.select(e=>e.error)}getValue(){return this.store._value()}selectHasCache(){return this.store._cache().asObservable()}getHasCache(){return this.store._cache().value}get config(){return this.constructor.akitaQueryConfig}}var rd=(()=>{return(n=rd||(rd={})).ASC="asc",n.DESC="desc",rd;var n})();function Uw(n,e){return function(t){const r=t[n];if(!ed(r))return e?uf(e)?r[e]:e(r):r}}class Fy extends Ec{constructor(e,t={}){super(e),this.options=t,this.__store__=e}selectAll(e={asObject:!1}){return this.select(t=>t.entities).pipe((0,Vt.U)(()=>this.getAll(e)))}getAll(e={asObject:!1,filterBy:void 0,limitTo:void 0}){return e.asObject?function Lw(n,e){const t={},{filterBy:r,limitTo:i}=e,{ids:a,entities:c}=n;if(!r&&!i)return c;const h=!1===jr(i);if(r&&h){let g=0;for(let v=0,C=a.length;v<C&&g!==i;v++){const D=a[v],x=c[D];Oi(r).every(B=>B(x,v))&&(t[D]=x,g++)}}else{const g=Math.min(i||a.length,a.length);for(let v=0;v<g;v++){const C=a[v],D=c[C];r?Oi(r).every(k=>k(D,v))&&(t[C]=D):t[C]=D}}return t}(this.getValue(),e):(function OP(n,e){n.sortBy=n.sortBy||e&&e.sortBy,n.sortByOrder=n.sortByOrder||e&&e.sortByOrder}(e,this.config||this.options),function Oy(n,e){let t=[];const{ids:r,entities:i}=n,{filterBy:a,limitTo:c,sortBy:h,sortByOrder:g}=e;for(let C=0;C<r.length;C++){const D=i[r[C]];a?Oi(a).every(B=>B(D,C))&&t.push(D):t.push(D)}if(h){let C=li(h)?h:function ky(n,e=rd.ASC){return function(t,r){if(!t.hasOwnProperty(n)||!r.hasOwnProperty(n))return 0;const i="string"==typeof t[n]?t[n].toUpperCase():t[n],a="string"==typeof r[n]?r[n].toUpperCase():r[n];let c=0;return i>a?c=1:i<a&&(c=-1),e==rd.DESC?-1*c:c}}(h,g);t=t.sort((D,x)=>C(D,x,n))}const v=Math.min(c||t.length,t.length);return v===t.length?t:t.slice(0,v)}(this.getValue(),e))}selectMany(e,t){return e&&e.length?this.select(r=>r.entities).pipe((0,Vt.U)(r=>function Vw(n,e){return n.reduce((t,r,i,a)=>{const c=e(r,i,a);return void 0!==c&&t.push(c),t},[])}(e,i=>Uw(i,t)(r))),function Fw(){return qr((n,e)=>n===e||!(!hs(n)||!hs(e))&&(!(!to(n)||!to(e))||n.length===e.length&&!1===e.some((r,i)=>n[i]!==r)))}()):kt([])}selectEntity(e,t){let r=e;return li(e)&&(r=function Zg(n,e){for(const t of Object.keys(e))if(!0===n(e[t]))return t}(e,this.getValue().entities)),this.select(i=>i.entities).pipe((0,Vt.U)(Uw(r,t)),qr())}getEntity(e){return this.getValue().entities[e]}selectActiveId(){return this.select(e=>e.active)}getActiveId(){return this.getValue().active}selectActive(e){return hs(this.getActive())?this.selectActiveId().pipe(jn(t=>this.selectMany(t,e))):this.selectActiveId().pipe(jn(t=>this.selectEntity(t,e)))}getActive(){const e=this.getActiveId();return hs(e)?e.map(t=>this.getValue().entities[t]):Pw(e)?this.getEntity(e):void 0}selectCount(e){return this.select(t=>t.entities).pipe((0,Vt.U)(()=>this.getCount(e)))}getCount(e){return li(e)?this.getAll().filter(e).length:this.getValue().ids.length}selectLast(e){return this.selectAt(t=>t[t.length-1],e)}selectFirst(e){return this.selectAt(t=>t[0],e)}selectEntityAction(e){if(jr(e))return this.store.selectEntityAction$;const t=hs(e)?i=>i:({ids:i})=>i,r=Oi(e);return this.store.selectEntityAction$.pipe(lr(({type:i})=>r.includes(i)),(0,Vt.U)(i=>t(i)))}hasEntity(e){return jr(e)?this.getValue().ids.length>0:li(e)?this.getAll().some(e):hs(e)?e.every(t=>t in this.getValue().entities):e in this.getValue().entities}hasActive(e){const t=this.getValue().active,r=nf(e);return Array.isArray(t)?r?t.includes(e):t.length>0:r?t===e:nf(t)}createUIQuery(){this.ui=new Bw(this.__store__.ui)}selectAt(e,t){return this.select(r=>r.ids).pipe((0,Vt.U)(e),qr(),jn(r=>this.selectEntity(r,t)))}}class Bw extends Fy{constructor(e){super(e)}}let Gi=!1;function _D(n){Gi=n}function Qg(n,e){return 1===e.split(".").length?n:e.split(".").slice(1).join(".").split(".").reduce((r,i)=>r&&r[i],n)}new by(1);var Ly=P(4986);function Uy(n,e){return e?t=>Ju(e.pipe((0,Ys.q)(1),function wD(){return(0,ei.e)((n,e)=>{n.subscribe((0,zn.x)(e,Xl.Z))})}()),t.pipe(Uy(n))):(0,Nr.z)((t,r)=>n(t,r).pipe((0,Ys.q)(1),function Gw(n){return(0,Vt.U)(()=>n)}(t)))}var ID=P(3532);const CD={pagesControls:!1,range:!1,startWith:1,cacheTimeout:void 0,clearStoreWithCache:!0};(0,Fn.gn)([tf("@Pagination - New Page"),(0,Fn.w6)("design:type",Function),(0,Fn.w6)("design:paramtypes",[Object]),(0,Fn.w6)("design:returntype",void 0)],class HP extends class yD{constructor(e,t){this.query=e,t&&t.resetFn&&Iy().resettable&&this.onReset(t.resetFn)}getQuery(){return this.query}getStore(){return this.getQuery().__store__}isEntityBased(e){return Pw(e)}selectSource(e,t){return this.isEntityBased(e)?this.getQuery().selectEntity(e).pipe(Ow()):t?this.getQuery().select(r=>Qg(r,this.withStoreName(t))):this.getQuery().select()}getSource(e,t){if(this.isEntityBased(e))return this.getQuery().getEntity(e);const r=this.getQuery().getValue();return t?Qg(r,this.withStoreName(t)):r}withStoreName(e){return`${this.storeName}.${e}`}get storeName(){return this.getStore().storeName}updateStore(e,t,r,i=!1){if(this.isEntityBased(t)){const a=this.getStore();i?a.replace(t,e):a.update(t,e)}else{if(r)return void this.getStore()._setState(c=>function Hw(n,e,t,r=!1){const i=e.split(".");if(1===i.length)return xt(xt({},n),t);n=xt({},n);const a=i.length-2;return e.split(".").slice(1).reduce((h,g,v)=>v!==a?(h[g]=xt({},h[g]),h&&h[g]):(h[g]=r||Array.isArray(h[g])||!sf(h[g])?t:xt(xt({},h[g]),t),h&&h[g]),n),n}(c,this.withStoreName(r),e,!0));const a=i?e:c=>xt(xt({},c),e);this.getStore()._setState(a)}}onReset(e){const t=this.getStore().reset;this.getStore().reset=(...r)=>{setTimeout(()=>{t.apply(this.getStore(),r),e()})}}}{constructor(e,t={}){super(e,{resetFn:()=>{this.initial=!1,this.destroy({clearCache:!0,currentPage:1})}}),this.query=e,this.config=t,this.metadata=new Map,this.pages=new Map,this.pagination={currentPage:1,perPage:0,total:0,lastPage:0,data:[]},this.initial=!0,this.isLoading$=this.query.selectLoading().pipe(function bD(n,e=Ly.z){const t=function Vy(n=0,e,t=Ly.P){let r=-1;return null!=e&&((0,ID.K)(e)?t=e:r=e),new cr.y(i=>{let a=function Mo(n){return n instanceof Date&&!isNaN(n)}(n)?+n-t.now():n;a<0&&(a=0);let c=0;return t.schedule(function(){i.closed||(i.next(c++),0<=r?this.schedule(void 0,r):i.complete())},a)})}(n,e);return Uy(()=>t)}(0)),this.config=xt(xt({},CD),t);const{startWith:r,cacheTimeout:i}=this.config;this.page=new Wr(r),function zw(n){return!!n&&(n instanceof cr.y||(0,Ba.m)(n.lift)&&(0,Ba.m)(n.subscribe))}(i)&&(this.clearCacheSubscription=i.subscribe(()=>this.clearCache()))}get pageChanges(){return this.page.asObservable()}get currentPage(){return this.pagination.currentPage}get isFirst(){return 1===this.currentPage}get isLast(){return this.currentPage===this.pagination.lastPage}withControls(){return this.config.pagesControls=!0,this}withRange(){return this.config.range=!0,this}setLoading(e=!0){this.getStore().setLoading(e)}update(e){this.pagination=e,this.addPage(e.data)}addPage(e){this.pages.set(this.currentPage,{ids:e.map(t=>t[this.getStore().idKey])}),this.getStore().upsertMany(e)}clearCache(e={}){this.initial||(tu("@Pagination - Clear Cache"),!1!==e.clearStore&&(this.config.clearStoreWithCache||e.clearStore)&&this.getStore().remove(),this.pages=new Map,this.metadata=new Map),this.initial=!1}clearPage(e){this.pages.delete(e)}destroy({clearCache:e,currentPage:t}={}){this.clearCacheSubscription&&this.clearCacheSubscription.unsubscribe(),e&&this.clearCache(),ed(t)||this.setPage(t),this.initial=!0}isPageActive(e){return this.currentPage===e}setPage(e){(e!==this.currentPage||!this.hasPage(e))&&this.page.next(this.pagination.currentPage=e)}nextPage(){this.currentPage!==this.pagination.lastPage&&this.setPage(this.pagination.currentPage+1)}prevPage(){this.pagination.currentPage>1&&this.setPage(this.pagination.currentPage-1)}setLastPage(){this.setPage(this.pagination.lastPage)}setFirstPage(){this.setPage(1)}hasPage(e){return this.pages.has(e)}getPage(e){let t=this.pagination.currentPage;return this.hasPage(t)?this.selectPage(t):(this.setLoading(!0),(0,ur.D)(e()).pipe(jn(r=>(t=r.currentPage,Gg(()=>{this.setLoading(!1),this.update(r)}),this.selectPage(t)))))}getQuery(){return this.query}refreshCurrentPage(){!1===jr(this.currentPage)&&(this.clearPage(this.currentPage),this.setPage(this.currentPage))}getFrom(){return this.isFirst?1:(this.currentPage-1)*this.pagination.perPage+1}getTo(){return this.isLast?this.pagination.total:this.currentPage*this.pagination.perPage}selectPage(e){return this.query.selectAll({asObject:!0}).pipe((0,Ys.q)(1),(0,Vt.U)(t=>{const r=Jr(xt({},this.pagination),{data:this.pages.get(e).ids.map(c=>t[c])}),{range:i,pagesControls:a}=this.config;return isNaN(this.pagination.total)&&(r.total=1===r.lastPage?r.data?r.data.length:0:r.perPage*r.lastPage,this.pagination.total=r.total),i&&(r.from=this.getFrom(),r.to=this.getTo()),a&&(r.pageControls=function qw(n,e){const t=Math.ceil(n/e),r=[];for(let i=0;i<t;i++)r.push(i+1);return r}(this.pagination.total,this.pagination.perPage)),r}))}}.prototype,"update",null),new class ZP{getStoresSnapshot(e=[]){let t={};const i=e.length>0?e:Object.keys(zi);for(let a=0;a<i.length;a++){let c=i[a];"router"!==c&&(t[c]=zi[c]._value())}return t}setStoresSnapshot(e,t){const r=xt({skipStorageUpdate:!1,lazy:!1},t);r.skipStorageUpdate&&_D(!0);let i=e;uf(e)&&(i=JSON.parse(i));const a=Object.keys(i).length;if(r.lazy)Cy.pipe(lr(c=>i.hasOwnProperty(c)),(0,Ys.q)(a)).subscribe(c=>zi[c]._setState(()=>i[c]));else for(let c=0,h=Object.keys(i);c<h.length;c++){const g=h[c];zi[g]&&zi[g]._setState(()=>i[g])}r.skipStorageUpdate&&_D(!1)}};let ko=class extends yc{constructor(){super()}};ko.\u0275fac=function(e){return new(e||ko)},ko.\u0275prov=m.Yz7({token:ko,factory:ko.\u0275fac,providedIn:"root"}),ko=(0,Fn.gn)([Mw({name:"persons"})],ko);var lt=P(4027);function lf(){return(0,ei.e)((n,e)=>{let t,r=!1;n.subscribe((0,zn.x)(e,i=>{const a=t;t=i,r&&e.next([a,i]),r=!0}))})}var It,Os=P(2011),aa=(P(5881),P(3942)),Ce=P(5861),Nn=P(9681),nu=P(4859),no=P(1877),Z=P(2090),Qw="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},ro={},By=By||{},Jt=Qw||self;function df(){}function tm(n){var e=typeof n;return"array"==(e="object"!=e?e:n?Array.isArray(n)?"array":e:"null")||"object"==e&&"number"==typeof n.length}function id(n){var e=typeof n;return"object"==e&&null!=n||"function"==e}var hf="closure_uid_"+(1e9*Math.random()>>>0),RD=0;function xD(n,e,t){return n.call.apply(n.bind,arguments)}function Jw(n,e,t){if(!n)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var i=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(i,r),n.apply(e,i)}}return function(){return n.apply(e,arguments)}}function Cr(n,e,t){return(Cr=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?xD:Jw).apply(null,arguments)}function ff(n,e){var t=Array.prototype.slice.call(arguments,1);return function(){var r=t.slice();return r.push.apply(r,arguments),n.apply(this,r)}}function di(n,e){function t(){}t.prototype=e.prototype,n.Z=e.prototype,n.prototype=new t,n.prototype.constructor=n,n.Vb=function(r,i,a){for(var c=Array(arguments.length-2),h=2;h<arguments.length;h++)c[h-2]=arguments[h];return e.prototype[i].apply(r,c)}}function ru(){this.s=this.s,this.o=this.o}var PD={};ru.prototype.s=!1,ru.prototype.na=function(){if(!this.s&&(this.s=!0,this.M(),0)){var n=function AD(n){return Object.prototype.hasOwnProperty.call(n,hf)&&n[hf]||(n[hf]=++RD)}(this);delete PD[n]}},ru.prototype.M=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const Xw=Array.prototype.indexOf?function(n,e){return Array.prototype.indexOf.call(n,e,void 0)}:function(n,e){if("string"==typeof n)return"string"!=typeof e||1!=e.length?-1:n.indexOf(e,0);for(let t=0;t<n.length;t++)if(t in n&&n[t]===e)return t;return-1},eI=Array.prototype.forEach?function(n,e,t){Array.prototype.forEach.call(n,e,t)}:function(n,e,t){const r=n.length,i="string"==typeof n?n.split(""):n;for(let a=0;a<r;a++)a in i&&e.call(t,i[a],a,n)};function fs(n){return Array.prototype.concat.apply([],arguments)}function pf(n){const e=n.length;if(0<e){const t=Array(e);for(let r=0;r<e;r++)t[r]=n[r];return t}return[]}function gf(n){return/^[\s\xa0]*$/.test(n)}var Li,jy=String.prototype.trim?function(n){return n.trim()}:function(n){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(n)[1]};function Ii(n,e){return-1!=n.indexOf(e)}function nm(n,e){return n<e?-1:n>e?1:0}e:{var tI=Jt.navigator;if(tI){var nI=tI.userAgent;if(nI){Li=nI;break e}}Li=""}function $y(n,e,t){for(const r in n)e.call(t,n[r],r,n)}function Hy(n){const e={};for(const t in n)e[t]=n[t];return e}var MD="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Wy(n,e){let t,r;for(let i=1;i<arguments.length;i++){for(t in r=arguments[i],r)n[t]=r[t];for(let a=0;a<MD.length;a++)t=MD[a],Object.prototype.hasOwnProperty.call(r,t)&&(n[t]=r[t])}}function zy(n){return zy[" "](n),n}zy[" "]=df;var qi,n,QP=Ii(Li,"Opera"),mf=Ii(Li,"Trident")||Ii(Li,"MSIE"),rm=Ii(Li,"Edge"),Gy=rm||mf,qy=Ii(Li,"Gecko")&&!(Ii(Li.toLowerCase(),"webkit")&&!Ii(Li,"Edge"))&&!(Ii(Li,"Trident")||Ii(Li,"MSIE"))&&!Ii(Li,"Edge"),rI=Ii(Li.toLowerCase(),"webkit")&&!Ii(Li,"Edge");function OD(){var n=Jt.document;return n?n.documentMode:void 0}e:{var iI="",sI=(n=Li,qy?/rv:([^\);]+)(\)|;)/.exec(n):rm?/Edge\/([\d\.]+)/.exec(n):mf?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(n):rI?/WebKit\/(\S+)/.exec(n):QP?/(?:Version)[ \/]?(\S+)/.exec(n):void 0);if(sI&&(iI=sI?sI[1]:""),mf){var im=OD();if(null!=im&&im>parseFloat(iI)){qi=String(im);break e}}qi=iI}var oI={};var uI=Jt.document&&mf&&(OD()||parseInt(qi,10))||void 0,cI=function(){if(!Jt.addEventListener||!Object.defineProperty)return!1;var n=!1,e=Object.defineProperty({},"passive",{get:function(){n=!0}});try{Jt.addEventListener("test",df,e),Jt.removeEventListener("test",df,e)}catch(t){}return n}();function bi(n,e){this.type=n,this.g=this.target=e,this.defaultPrevented=!1}function wc(n,e){if(bi.call(this,n?n.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,n){var t=this.type=n.type,r=n.changedTouches&&n.changedTouches.length?n.changedTouches[0]:null;if(this.target=n.target||n.srcElement,this.g=e,e=n.relatedTarget){if(qy){e:{try{zy(e.nodeName);var i=!0;break e}catch(a){}i=!1}i||(e=null)}}else"mouseover"==t?e=n.fromElement:"mouseout"==t&&(e=n.toElement);this.relatedTarget=e,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==n.clientX?n.clientX:n.pageX,this.clientY=void 0!==n.clientY?n.clientY:n.pageY,this.screenX=n.screenX||0,this.screenY=n.screenY||0),this.button=n.button,this.key=n.key||"",this.ctrlKey=n.ctrlKey,this.altKey=n.altKey,this.shiftKey=n.shiftKey,this.metaKey=n.metaKey,this.pointerId=n.pointerId||0,this.pointerType="string"==typeof n.pointerType?n.pointerType:LD[n.pointerType]||"",this.state=n.state,this.i=n,n.defaultPrevented&&wc.Z.h.call(this)}}bi.prototype.h=function(){this.defaultPrevented=!0},di(wc,bi);var LD={2:"touch",3:"pen",4:"mouse"};wc.prototype.h=function(){wc.Z.h.call(this);var n=this.i;n.preventDefault?n.preventDefault():n.returnValue=!1};var _f="closure_listenable_"+(1e6*Math.random()|0),UD=0;function VD(n,e,t,r,i){this.listener=n,this.proxy=null,this.src=e,this.type=t,this.capture=!!r,this.ia=i,this.key=++UD,this.ca=this.fa=!1}function sm(n){n.ca=!0,n.listener=null,n.proxy=null,n.src=null,n.ia=null}function om(n){this.src=n,this.g={},this.h=0}function od(n,e){var t=e.type;if(t in n.g){var a,r=n.g[t],i=Xw(r,e);(a=0<=i)&&Array.prototype.splice.call(r,i,1),a&&(sm(e),0==n.g[t].length&&(delete n.g[t],n.h--))}}function iu(n,e,t,r){for(var i=0;i<n.length;++i){var a=n[i];if(!a.ca&&a.listener==e&&a.capture==!!t&&a.ia==r)return i}return-1}om.prototype.add=function(n,e,t,r,i){var a=n.toString();(n=this.g[a])||(n=this.g[a]=[],this.h++);var c=iu(n,e,r,i);return-1<c?(e=n[c],t||(e.fa=!1)):((e=new VD(e,this.src,a,!!r,i)).fa=t,n.push(e)),e};var Zy="closure_lm_"+(1e6*Math.random()|0),Ic={};function lI(n,e,t,r,i){if(r&&r.once)return io(n,e,t,r,i);if(Array.isArray(e)){for(var a=0;a<e.length;a++)lI(n,e[a],t,r,i);return null}return t=ou(t),n&&n[_f]?n.N(e,t,id(r)?!!r.capture:!!r,i):dI(n,e,t,!1,r,i)}function dI(n,e,t,r,i,a){if(!e)throw Error("Invalid event type");var c=id(i)?!!i.capture:!!i,h=Ki(n);if(h||(n[Zy]=h=new om(n)),(t=h.add(e,t,r,c,a)).proxy)return t;if(r=function Yy(){var e=am;return function n(t){return e.call(n.src,n.listener,t)}}(),t.proxy=r,r.src=n,r.listener=t,n.addEventListener)cI||(i=c),void 0===i&&(i=!1),n.addEventListener(e.toString(),r,i);else if(n.attachEvent)n.attachEvent(su(e.toString()),r);else{if(!n.addListener||!n.removeListener)throw Error("addEventListener and attachEvent are unavailable.");n.addListener(r)}return t}function io(n,e,t,r,i){if(Array.isArray(e)){for(var a=0;a<e.length;a++)io(n,e[a],t,r,i);return null}return t=ou(t),n&&n[_f]?n.O(e,t,id(r)?!!r.capture:!!r,i):dI(n,e,t,!0,r,i)}function ad(n,e,t,r,i){if(Array.isArray(e))for(var a=0;a<e.length;a++)ad(n,e[a],t,r,i);else r=id(r)?!!r.capture:!!r,t=ou(t),n&&n[_f]?(n=n.i,(e=String(e).toString())in n.g&&-1<(t=iu(a=n.g[e],t,r,i))&&(sm(a[t]),Array.prototype.splice.call(a,t,1),0==a.length&&(delete n.g[e],n.h--))):n&&(n=Ki(n))&&(e=n.g[e.toString()],n=-1,e&&(n=iu(e,t,r,i)),(t=-1<n?e[n]:null)&&ni(t))}function ni(n){if("number"!=typeof n&&n&&!n.ca){var e=n.src;if(e&&e[_f])od(e.i,n);else{var t=n.type,r=n.proxy;e.removeEventListener?e.removeEventListener(t,r,n.capture):e.detachEvent?e.detachEvent(su(t),r):e.addListener&&e.removeListener&&e.removeListener(r),(t=Ki(e))?(od(t,n),0==t.h&&(t.src=null,e[Zy]=null)):sm(n)}}}function su(n){return n in Ic?Ic[n]:Ic[n]="on"+n}function am(n,e){if(n.ca)n=!0;else{e=new wc(e,this);var t=n.listener,r=n.ia||n.src;n.fa&&ni(n),n=t.call(r,e)}return n}function Ki(n){return(n=n[Zy])instanceof om?n:null}var yf="__closure_events_fn_"+(1e9*Math.random()>>>0);function ou(n){return"function"==typeof n?n:(n[yf]||(n[yf]=function(e){return n.handleEvent(e)}),n[yf])}function yr(){ru.call(this),this.i=new om(this),this.P=this,this.I=null}function Tr(n,e){var t,r=n.I;if(r)for(t=[];r;r=r.I)t.push(r);if(n=n.P,r=e.type||e,"string"==typeof e)e=new bi(e,n);else if(e instanceof bi)e.target=e.target||n;else{var i=e;Wy(e=new bi(r,n),i)}if(i=!0,t)for(var a=t.length-1;0<=a;a--){var c=e.g=t[a];i=ua(c,r,!0,e)&&i}if(i=ua(c=e.g=n,r,!0,e)&&i,i=ua(c,r,!1,e)&&i,t)for(a=0;a<t.length;a++)i=ua(c=e.g=t[a],r,!1,e)&&i}function ua(n,e,t,r){if(!(e=n.i.g[String(e)]))return!0;e=e.concat();for(var i=!0,a=0;a<e.length;++a){var c=e[a];if(c&&!c.ca&&c.capture==t){var h=c.listener,g=c.ia||c.src;c.fa&&od(n.i,c),i=!1!==h.call(g,r)&&i}}return i&&!r.defaultPrevented}di(yr,ru),yr.prototype[_f]=!0,yr.prototype.removeEventListener=function(n,e,t,r){ad(this,n,e,t,r)},yr.prototype.M=function(){if(yr.Z.M.call(this),this.i){var e,n=this.i;for(e in n.g){for(var t=n.g[e],r=0;r<t.length;r++)sm(t[r]);delete n.g[e],n.h--}}this.I=null},yr.prototype.N=function(n,e,t,r){return this.i.add(String(n),e,!1,t,r)},yr.prototype.O=function(n,e,t,r){return this.i.add(String(n),e,!0,t,r)};var au=Jt.JSON.stringify;function ud(){var n=Qy;let e=null;return n.g&&(e=n.g,n.g=n.g.next,n.g||(n.h=null),e.next=null),e}var cm,bc=new class{constructor(n,e){this.i=n,this.j=e,this.h=0,this.g=null}get(){let n;return 0<this.h?(this.h--,n=this.g,this.g=n.next,n.next=null):n=this.i(),n}}(()=>new ld,n=>n.reset());class ld{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}function hI(n){Jt.setTimeout(()=>{throw n},0)}function um(n,e){cm||function fI(){var n=Jt.Promise.resolve(void 0);cm=function(){n.then(pI)}}(),lm||(cm(),lm=!0),Qy.add(n,e)}var lm=!1,Qy=new class cd{constructor(){this.h=this.g=null}add(e,t){const r=bc.get();r.set(e,t),this.h?this.h.next=r:this.g=r,this.h=r}};function pI(){for(var n;n=ud();){try{n.h.call(n.g)}catch(t){hI(t)}var e=bc;e.j(n),100>e.h&&(e.h++,n.next=e.g,e.g=n)}lm=!1}function vf(n,e){yr.call(this),this.h=n||1,this.g=e||Jt,this.j=Cr(this.kb,this),this.l=Date.now()}function dm(n){n.da=!1,n.S&&(n.g.clearTimeout(n.S),n.S=null)}function Jy(n,e,t){if("function"==typeof n)t&&(n=Cr(n,t));else{if(!n||"function"!=typeof n.handleEvent)throw Error("Invalid listener argument");n=Cr(n.handleEvent,n)}return 2147483647<Number(e)?-1:Jt.setTimeout(n,e||0)}function Xy(n){n.g=Jy(()=>{n.g=null,n.i&&(n.i=!1,Xy(n))},n.j);const e=n.h;n.h=null,n.m.apply(null,e)}di(vf,yr),(It=vf.prototype).da=!1,It.S=null,It.kb=function(){if(this.da){var n=Date.now()-this.l;0<n&&n<.8*this.h?this.S=this.g.setTimeout(this.j,this.h-n):(this.S&&(this.g.clearTimeout(this.S),this.S=null),Tr(this,"tick"),this.da&&(dm(this),this.start()))}},It.start=function(){this.da=!0,this.S||(this.S=this.g.setTimeout(this.j,this.h),this.l=Date.now())},It.M=function(){vf.Z.M.call(this),dm(this),delete this.g};class BD extends ru{constructor(e,t){super(),this.m=e,this.j=t,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:Xy(this)}M(){super.M(),this.g&&(Jt.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Ef(n){ru.call(this),this.h=n,this.g={}}di(Ef,ru);var ev=[];function gI(n,e,t,r){Array.isArray(t)||(t&&(ev[0]=t.toString()),t=ev);for(var i=0;i<t.length;i++){var a=lI(e,t[i],r||n.handleEvent,!1,n.h||n);if(!a)break;n.g[a.key]=a}}function mI(n){$y(n.g,function(e,t){this.g.hasOwnProperty(t)&&ni(e)},n),n.g={}}function wf(){this.g=!0}function dd(n,e,t,r){n.info(function(){return"XMLHTTP TEXT ("+e+"): "+function JP(n,e){if(!n.g)return e;if(!e)return null;try{var t=JSON.parse(e);if(t)for(n=0;n<t.length;n++)if(Array.isArray(t[n])){var r=t[n];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var a=i[0];if("noop"!=a&&"stop"!=a&&"close"!=a)for(var c=1;c<i.length;c++)i[c]=""}}}return au(t)}catch(h){return e}}(n,t)+(r?" "+r:"")})}Ef.prototype.M=function(){Ef.Z.M.call(this),mI(this)},Ef.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},wf.prototype.Aa=function(){this.g=!1},wf.prototype.info=function(){};var Cc={},hm=null;function hd(){return hm=hm||new yr}function yI(n){bi.call(this,Cc.Ma,n)}function fm(n){const e=hd();Tr(e,new yI(e,n))}function HD(n,e){bi.call(this,Cc.STAT_EVENT,n),this.stat=e}function Zi(n){const e=hd();Tr(e,new HD(e,n))}function vI(n,e){bi.call(this,Cc.Na,n),this.size=e}function fd(n,e){if("function"!=typeof n)throw Error("Fn must not be null and must be a function");return Jt.setTimeout(function(){n()},e)}Cc.Ma="serverreachability",di(yI,bi),Cc.STAT_EVENT="statevent",di(HD,bi),Cc.Na="timingevent",di(vI,bi);var tv={NO_ERROR:0,lb:1,yb:2,xb:3,sb:4,wb:5,zb:6,Ja:7,TIMEOUT:8,Cb:9},EI={qb:"complete",Mb:"success",Ka:"error",Ja:"abort",Eb:"ready",Fb:"readystatechange",TIMEOUT:"timeout",Ab:"incrementaldata",Db:"progress",tb:"downloadprogress",Ub:"uploadprogress"};function uu(){}function nv(){}uu.prototype.h=null;var rv,If={OPEN:"a",pb:"b",Ka:"c",Bb:"d"};function pm(){bi.call(this,"d")}function pd(){bi.call(this,"c")}function bf(){}function Cf(n,e,t,r){this.l=n,this.j=e,this.m=t,this.X=r||1,this.V=new Ef(this),this.P=WD,this.W=new vf(n=Gy?125:void 0),this.H=null,this.i=!1,this.s=this.A=this.v=this.K=this.F=this.Y=this.B=null,this.D=[],this.g=null,this.C=0,this.o=this.u=null,this.N=-1,this.I=!1,this.O=0,this.L=null,this.aa=this.J=this.$=this.U=!1,this.h=new II}function II(){this.i=null,this.g="",this.h=!1}di(pm,bi),di(pd,bi),di(bf,uu),bf.prototype.g=function(){return new XMLHttpRequest},bf.prototype.i=function(){return{}},rv=new bf;var WD=45e3,iv={},gm={};function mm(n,e,t){n.K=1,n.v=Sf(Fs(e)),n.s=t,n.U=!0,bI(n,null)}function bI(n,e){n.F=Date.now(),_m(n),n.A=Fs(n.v);var t=n.A,r=n.X;Array.isArray(r)||(r=[String(r)]),hv(t.h,"t",r),n.C=0,t=n.l.H,n.h=new II,n.g=Sv(n.l,t?e:null,!n.s),0<n.O&&(n.L=new BD(Cr(n.Ia,n,n.g),n.O)),gI(n.V,n.g,"readystatechange",n.gb),e=n.H?Hy(n.H):{},n.s?(n.u||(n.u="POST"),e["Content-Type"]="application/x-www-form-urlencoded",n.g.ea(n.A,n.u,n.s,e)):(n.u="GET",n.g.ea(n.A,n.u,null,e)),fm(1),function jD(n,e,t,r,i,a){n.info(function(){if(n.g)if(a)for(var c="",h=a.split("&"),g=0;g<h.length;g++){var v=h[g].split("=");if(1<v.length){var C=v[0];v=v[1];var D=C.split("_");c=2<=D.length&&"type"==D[1]?c+(C+"=")+v+"&":c+(C+"=redacted&")}}else c=null;else c=a;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+e+"\n"+t+"\n"+c})}(n.j,n.u,n.A,n.m,n.X,n.s)}function sv(n){return!!n.g&&"GET"==n.u&&2!=n.K&&n.l.Ba}function ov(n,e,t){let i,r=!0;for(;!n.I&&n.C<t.length;){if(i=av(n,t),i==gm){4==e&&(n.o=4,Zi(14),r=!1),dd(n.j,n.m,null,"[Incomplete Response]");break}if(i==iv){n.o=4,Zi(15),dd(n.j,n.m,t,"[Invalid Chunk]"),r=!1;break}dd(n.j,n.m,i,null),wm(n,i)}sv(n)&&i!=gm&&i!=iv&&(n.h.g="",n.C=0),4!=e||0!=t.length||n.h.h||(n.o=1,Zi(16),r=!1),n.i=n.i&&r,r?0<t.length&&!n.aa&&(n.aa=!0,(e=n.l).g==n&&e.$&&!e.L&&(e.h.info("Great, no buffering proxy detected. Bytes received: "+t.length),wd(e),e.L=!0,Zi(11))):(dd(n.j,n.m,t,"[Invalid Chunked Response]"),so(n),Em(n))}function av(n,e){var t=n.C,r=e.indexOf("\n",t);return-1==r?gm:(t=Number(e.substring(t,r)),isNaN(t)?iv:(r+=1)+t>e.length?gm:(e=e.substr(r,t),n.C=r+t,e))}function _m(n){n.Y=Date.now()+n.P,ym(n,n.P)}function ym(n,e){if(null!=n.B)throw Error("WatchDog timer not null");n.B=fd(Cr(n.eb,n),e)}function vm(n){n.B&&(Jt.clearTimeout(n.B),n.B=null)}function Em(n){0==n.l.G||n.I||bv(n.l,n)}function so(n){vm(n);var e=n.L;e&&"function"==typeof e.na&&e.na(),n.L=null,dm(n.W),mI(n.V),n.g&&(e=n.g,n.g=null,e.abort(),e.na())}function wm(n,e){try{var t=n.l;if(0!=t.G&&(t.g==n||pv(t.i,n)))if(t.I=n.N,!n.J&&pv(t.i,n)&&3==t.G){try{var r=t.Ca.g.parse(e)}catch(v){r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0])e:if(t.u)t.ta=i[1],0<t.ta-t.U&&37500>i[2]&&t.N&&0==t.A&&!t.v&&(t.v=fd(Cr(t.ab,t),6e3));else{if(t.g){if(!(t.g.F+3e3<n.F))break e;Ff(t),xm(t)}Of(t),Zi(18)}if(1>=RI(t.i)&&t.ka){try{t.ka()}catch(v){}t.ka=void 0}}else lu(t,11)}else if((n.J||t.g==n)&&Ff(t),!gf(e))for(i=t.Ca.g.parse(e),e=0;e<i.length;e++){let v=i[e];if(t.U=v[0],v=v[1],2==t.G)if("c"==v[0]){t.J=v[1],t.la=v[2];const C=v[3];null!=C&&(t.ma=C,t.h.info("VER="+t.ma));const D=v[4];null!=D&&(t.za=D,t.h.info("SVER="+t.za));const x=v[5];null!=x&&"number"==typeof x&&0<x&&(t.K=r=1.5*x,t.h.info("backChannelRequestTimeoutMs_="+r)),r=t;const k=n.g;if(k){const B=k.g?k.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(B){var a=r.i;!a.g&&(Ii(B,"spdy")||Ii(B,"quic")||Ii(B,"h2"))&&(a.j=a.l,a.g=new Set,a.h&&(Dm(a,a.h),a.h=null))}if(r.D){const ge=k.g?k.g.getResponseHeader("X-HTTP-Session-Id"):null;ge&&(r.sa=ge,rr(r.F,r.D,ge))}}t.G=3,t.j&&t.j.xa(),t.$&&(t.O=Date.now()-n.F,t.h.info("Handshake RTT: "+t.O+"ms"));var c=n;if((r=t).oa=Dv(r,r.H?r.la:null,r.W),c.J){xI(r.i,c);var h=c,g=r.K;g&&h.setTimeout(g),h.B&&(vm(h),_m(h)),r.g=c}else wv(r);0<t.l.length&&Nf(t)}else"stop"!=v[0]&&"close"!=v[0]||lu(t,7);else 3==t.G&&("stop"==v[0]||"close"==v[0]?"stop"==v[0]?lu(t,7):Ac(t):"noop"!=v[0]&&t.j&&t.j.wa(v),t.A=0)}fm(4)}catch(v){}}function Tf(n,e){if(n.forEach&&"function"==typeof n.forEach)n.forEach(e,void 0);else if(tm(n)||"string"==typeof n)eI(n,e,void 0);else{if(n.T&&"function"==typeof n.T)var t=n.T();else if(n.R&&"function"==typeof n.R)t=void 0;else if(tm(n)||"string"==typeof n){t=[];for(var r=n.length,i=0;i<r;i++)t.push(i)}else for(i in t=[],r=0,n)t[r++]=i;r=function uv(n){if(n.R&&"function"==typeof n.R)return n.R();if("string"==typeof n)return n.split("");if(tm(n)){for(var e=[],t=n.length,r=0;r<t;r++)e.push(n[r]);return e}for(r in e=[],t=0,n)e[t++]=n[r];return e}(n),i=r.length;for(var a=0;a<i;a++)e.call(void 0,r[a],t&&t[a],n)}}function gd(n,e){this.h={},this.g=[],this.i=0;var t=arguments.length;if(1<t){if(t%2)throw Error("Uneven number of arguments");for(var r=0;r<t;r+=2)this.set(arguments[r],arguments[r+1])}else if(n)if(n instanceof gd)for(t=n.T(),r=0;r<t.length;r++)this.set(t[r],n.get(t[r]));else for(r in n)this.set(r,n[r])}function md(n){if(n.i!=n.g.length){for(var e=0,t=0;e<n.g.length;){var r=n.g[e];Oo(n.h,r)&&(n.g[t++]=r),e++}n.g.length=t}if(n.i!=n.g.length){var i={};for(t=e=0;e<n.g.length;)Oo(i,r=n.g[e])||(n.g[t++]=r,i[r]=1),e++;n.g.length=t}}function Oo(n,e){return Object.prototype.hasOwnProperty.call(n,e)}(It=Cf.prototype).setTimeout=function(n){this.P=n},It.gb=function(n){n=n.target;const e=this.L;e&&3==Uo(n)?e.l():this.Ia(n)},It.Ia=function(n){try{if(n==this.g)e:{const C=Uo(this.g);var e=this.g.Da();const D=this.g.ba();if(!(3>C)&&(3!=C||Gy||this.g&&(this.h.h||this.g.ga()||OI(this.g)))){this.I||4!=C||7==e||fm(8==e||0>=D?3:2),vm(this);var t=this.g.ba();this.N=t;t:if(sv(this)){var r=OI(this.g);n="";var i=r.length,a=4==Uo(this.g);if(!this.h.i){if("undefined"==typeof TextDecoder){so(this),Em(this);var c="";break t}this.h.i=new Jt.TextDecoder}for(e=0;e<i;e++)this.h.h=!0,n+=this.h.i.decode(r[e],{stream:a&&e==i-1});r.splice(0,i),this.h.g+=n,this.C=0,c=this.h.g}else c=this.g.ga();if(this.i=200==t,function _I(n,e,t,r,i,a,c){n.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+e+"\n"+t+"\n"+a+" "+c})}(this.j,this.u,this.A,this.m,this.X,C,t),this.i){if(this.$&&!this.J){t:{if(this.g){var h,g=this.g;if((h=g.g?g.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!gf(h)){var v=h;break t}}v=null}if(!(t=v)){this.i=!1,this.o=3,Zi(12),so(this),Em(this);break e}dd(this.j,this.m,t,"Initial handshake response via X-HTTP-Initial-Response"),this.J=!0,wm(this,t)}this.U?(ov(this,C,c),Gy&&this.i&&3==C&&(gI(this.V,this.W,"tick",this.fb),this.W.start())):(dd(this.j,this.m,c,null),wm(this,c)),4==C&&so(this),this.i&&!this.I&&(4==C?bv(this.l,this):(this.i=!1,_m(this)))}else 400==t&&0<c.indexOf("Unknown SID")?(this.o=3,Zi(12)):(this.o=0,Zi(13)),so(this),Em(this)}}}catch(C){}},It.fb=function(){if(this.g){var n=Uo(this.g),e=this.g.ga();this.C<e.length&&(vm(this),ov(this,n,e),this.i&&4!=n&&_m(this))}},It.cancel=function(){this.I=!0,so(this)},It.eb=function(){this.B=null;const n=Date.now();0<=n-this.Y?(function $D(n,e){n.info(function(){return"TIMEOUT: "+e})}(this.j,this.A),2!=this.K&&(fm(3),Zi(17)),so(this),this.o=2,Em(this)):ym(this,this.Y-n)},(It=gd.prototype).R=function(){md(this);for(var n=[],e=0;e<this.g.length;e++)n.push(this.h[this.g[e]]);return n},It.T=function(){return md(this),this.g.concat()},It.get=function(n,e){return Oo(this.h,n)?this.h[n]:e},It.set=function(n,e){Oo(this.h,n)||(this.i++,this.g.push(n)),this.h[n]=e},It.forEach=function(n,e){for(var t=this.T(),r=0;r<t.length;r++){var i=t[r],a=this.get(i);n.call(e,a,i,this)}};var Im=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function Tc(n,e){if(this.i=this.s=this.j="",this.m=null,this.o=this.l="",this.g=!1,n instanceof Tc){this.g=void 0!==e?e:n.g,Dc(this,n.j),this.s=n.s,Df(this,n.i),bm(this,n.m),this.l=n.l,e=n.h;var t=new yd;t.i=e.i,e.g&&(t.g=new gd(e.g),t.h=e.h),Cm(this,t),this.o=n.o}else n&&(t=String(n).match(Im))?(this.g=!!e,Dc(this,t[1]||"",!0),this.s=Af(t[2]||""),Df(this,t[3]||"",!0),bm(this,t[4]),this.l=Af(t[5]||"",!0),Cm(this,t[6]||"",!0),this.o=Af(t[7]||"")):(this.g=!!e,this.h=new yd(null,this.g))}function Fs(n){return new Tc(n)}function Dc(n,e,t){n.j=t?Af(e,!0):e,n.j&&(n.j=n.j.replace(/:$/,""))}function Df(n,e,t){n.i=t?Af(e,!0):e}function bm(n,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);n.m=e}else n.m=null}function Cm(n,e,t){e instanceof yd?(n.h=e,function DI(n,e){e&&!n.j&&(Fo(n),n.i=null,n.g.forEach(function(t,r){var i=r.toLowerCase();r!=i&&(lv(this,r),hv(this,i,t))},n)),n.j=e}(n.h,n.g)):(t||(e=_d(e,qD)),n.h=new yd(e,n.g))}function rr(n,e,t){n.h.set(e,t)}function Sf(n){return rr(n,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),n}function Af(n,e){return n?e?decodeURI(n.replace(/%25/g,"%2525")):decodeURIComponent(n):""}function _d(n,e,t){return"string"==typeof n?(n=encodeURI(n).replace(e,TI),t&&(n=n.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),n):null}function TI(n){return"%"+((n=n.charCodeAt(0))>>4&15).toString(16)+(15&n).toString(16)}Tc.prototype.toString=function(){var n=[],e=this.j;e&&n.push(_d(e,Tm,!0),":");var t=this.i;return(t||"file"==e)&&(n.push("//"),(e=this.s)&&n.push(_d(e,Tm,!0),"@"),n.push(encodeURIComponent(String(t)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(t=this.m)&&n.push(":",String(t))),(t=this.l)&&(this.i&&"/"!=t.charAt(0)&&n.push("/"),n.push(_d(t,"/"==t.charAt(0)?GD:zD,!0))),(t=this.h.toString())&&n.push("?",t),(t=this.o)&&n.push("#",_d(t,KD)),n.join("")};var Tm=/[#\/\?@]/g,zD=/[#\?:]/g,GD=/[#\?]/g,qD=/[#\?@]/g,KD=/#/g;function yd(n,e){this.h=this.g=null,this.i=n||null,this.j=!!e}function Fo(n){n.g||(n.g=new gd,n.h=0,n.i&&function XP(n,e){if(n){n=n.split("&");for(var t=0;t<n.length;t++){var r=n[t].indexOf("="),i=null;if(0<=r){var a=n[t].substring(0,r);i=n[t].substring(r+1)}else a=n[t];e(a,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(n.i,function(e,t){n.add(decodeURIComponent(e.replace(/\+/g," ")),t)}))}function lv(n,e){Fo(n),e=Sc(n,e),Oo(n.g.h,e)&&(n.i=null,n.h-=n.g.get(e).length,Oo((n=n.g).h,e)&&(delete n.h[e],n.i--,n.g.length>2*n.i&&md(n)))}function dv(n,e){return Fo(n),e=Sc(n,e),Oo(n.g.h,e)}function hv(n,e,t){lv(n,e),0<t.length&&(n.i=null,n.g.set(Sc(n,e),pf(t)),n.h+=t.length)}function Sc(n,e){return e=String(e),n.j&&(e=e.toLowerCase()),e}function fv(n){this.l=n||AI,n=Jt.PerformanceNavigationTiming?0<(n=Jt.performance.getEntriesByType("navigation")).length&&("hq"==n[0].nextHopProtocol||"h2"==n[0].nextHopProtocol):!!(Jt.g&&Jt.g.Ea&&Jt.g.Ea()&&Jt.g.Ea().Zb),this.j=n?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}(It=yd.prototype).add=function(n,e){Fo(this),this.i=null,n=Sc(this,n);var t=this.g.get(n);return t||this.g.set(n,t=[]),t.push(e),this.h+=1,this},It.forEach=function(n,e){Fo(this),this.g.forEach(function(t,r){eI(t,function(i){n.call(e,i,r,this)},this)},this)},It.T=function(){Fo(this);for(var n=this.g.R(),e=this.g.T(),t=[],r=0;r<e.length;r++)for(var i=n[r],a=0;a<i.length;a++)t.push(e[r]);return t},It.R=function(n){Fo(this);var e=[];if("string"==typeof n)dv(this,n)&&(e=fs(e,this.g.get(Sc(this,n))));else{n=this.g.R();for(var t=0;t<n.length;t++)e=fs(e,n[t])}return e},It.set=function(n,e){return Fo(this),this.i=null,dv(this,n=Sc(this,n))&&(this.h-=this.g.get(n).length),this.g.set(n,[e]),this.h+=1,this},It.get=function(n,e){return n&&0<(n=this.R(n)).length?String(n[0]):e},It.toString=function(){if(this.i)return this.i;if(!this.g)return"";for(var n=[],e=this.g.T(),t=0;t<e.length;t++){var r=e[t],i=encodeURIComponent(String(r));r=this.R(r);for(var a=0;a<r.length;a++){var c=i;""!==r[a]&&(c+="="+encodeURIComponent(String(r[a]))),n.push(c)}}return this.i=n.join("&")};var AI=10;function ZD(n){return!!n.h||!!n.g&&n.g.size>=n.j}function RI(n){return n.h?1:n.g?n.g.size:0}function pv(n,e){return n.h?n.h==e:!!n.g&&n.g.has(e)}function Dm(n,e){n.g?n.g.add(e):n.h=e}function xI(n,e){n.h&&n.h==e?n.h=null:n.g&&n.g.has(e)&&n.g.delete(e)}function $r(n){if(null!=n.h)return n.i.concat(n.h.D);if(null!=n.g&&0!==n.g.size){let e=n.i;for(const t of n.g.values())e=e.concat(t.D);return e}return pf(n.i)}function Sm(){}function YD(){this.g=new Sm}function QD(n,e,t){const r=t||"";try{Tf(n,function(i,a){let c=i;id(i)&&(c=au(i)),e.push(r+a+"="+encodeURIComponent(c))})}catch(i){throw e.push(r+"type="+encodeURIComponent("_badmap")),i}}function Am(n,e,t,r,i){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,i(r)}catch(a){}}function vd(n){this.l=n.$b||null,this.j=n.ib||!1}function Rf(n,e){yr.call(this),this.D=n,this.u=e,this.m=void 0,this.readyState=cu,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}fv.prototype.cancel=function(){if(this.i=$r(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const n of this.g.values())n.cancel();this.g.clear()}},Sm.prototype.stringify=function(n){return Jt.JSON.stringify(n,void 0)},Sm.prototype.parse=function(n){return Jt.JSON.parse(n,void 0)},di(vd,uu),vd.prototype.g=function(){return new Rf(this.l,this.j)},vd.prototype.i=function(n){return function(){return n}}({}),di(Rf,yr);var cu=0;function NI(n){n.j.read().then(n.Sa.bind(n)).catch(n.ha.bind(n))}function xf(n){n.readyState=4,n.l=null,n.j=null,n.A=null,Ed(n)}function Ed(n){n.onreadystatechange&&n.onreadystatechange.call(n)}(It=Rf.prototype).open=function(n,e){if(this.readyState!=cu)throw this.abort(),Error("Error reopening a connection");this.C=n,this.B=e,this.readyState=1,Ed(this)},It.send=function(n){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};n&&(e.body=n),(this.D||Jt).fetch(new Request(this.B,e)).then(this.Va.bind(this),this.ha.bind(this))},It.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted."),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,xf(this)),this.readyState=cu},It.Va=function(n){if(this.g&&(this.l=n,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=n.headers,this.readyState=2,Ed(this)),this.g&&(this.readyState=3,Ed(this),this.g)))if("arraybuffer"===this.responseType)n.arrayBuffer().then(this.Ta.bind(this),this.ha.bind(this));else if(void 0!==Jt.ReadableStream&&"body"in n){if(this.j=n.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;NI(this)}else n.text().then(this.Ua.bind(this),this.ha.bind(this))},It.Sa=function(n){if(this.g){if(this.u&&n.value)this.response.push(n.value);else if(!this.u){var e=n.value?n.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!n.done}))&&(this.response=this.responseText+=e)}n.done?xf(this):Ed(this),3==this.readyState&&NI(this)}},It.Ua=function(n){this.g&&(this.response=this.responseText=n,xf(this))},It.Ta=function(n){this.g&&(this.response=n,xf(this))},It.ha=function(){this.g&&xf(this)},It.setRequestHeader=function(n,e){this.v.append(n,e)},It.getResponseHeader=function(n){return this.h&&this.h.get(n.toLowerCase())||""},It.getAllResponseHeaders=function(){if(!this.h)return"";const n=[],e=this.h.entries();for(var t=e.next();!t.done;)n.push((t=t.value)[0]+": "+t[1]),t=e.next();return n.join("\r\n")},Object.defineProperty(Rf.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(n){this.m=n?"include":"same-origin"}});var JD=Jt.JSON.parse;function kr(n){yr.call(this),this.headers=new gd,this.u=n||null,this.h=!1,this.C=this.g=null,this.H="",this.m=0,this.j="",this.l=this.F=this.v=this.D=!1,this.B=0,this.A=null,this.J=XD,this.K=this.L=!1}di(kr,yr);var XD="",MI=/^https?$/i,gv=["POST","PUT"];function eS(n){return"content-type"==n.toLowerCase()}function kI(n,e){n.h=!1,n.g&&(n.l=!0,n.g.abort(),n.l=!1),n.j=e,n.m=5,oo(n),Yi(n)}function oo(n){n.D||(n.D=!0,Tr(n,"complete"),Tr(n,"error"))}function Ls(n){if(n.h&&void 0!==By&&(!n.C[1]||4!=Uo(n)||2!=n.ba()))if(n.v&&4==Uo(n))Jy(n.Fa,0,n);else if(Tr(n,"readystatechange"),4==Uo(n)){n.h=!1;try{const h=n.ba();e:switch(h){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var t;if(!(t=e)){var r;if(r=0===h){var i=String(n.H).match(Im)[1]||null;if(!i&&Jt.self&&Jt.self.location){var a=Jt.self.location.protocol;i=a.substr(0,a.length-1)}r=!MI.test(i?i.toLowerCase():"")}t=r}if(t)Tr(n,"complete"),Tr(n,"success");else{n.m=6;try{var c=2<Uo(n)?n.g.statusText:""}catch(g){c=""}n.j=c+" ["+n.ba()+"]",oo(n)}}finally{Yi(n)}}}function Yi(n,e){if(n.g){mv(n);const t=n.g,r=n.C[0]?df:null;n.g=null,n.C=null,e||Tr(n,"ready");try{t.onreadystatechange=r}catch(i){}}}function mv(n){n.g&&n.K&&(n.g.ontimeout=null),n.A&&(Jt.clearTimeout(n.A),n.A=null)}function Uo(n){return n.g?n.g.readyState:0}function OI(n){try{if(!n.g)return null;if("response"in n.g)return n.g.response;switch(n.J){case XD:case"text":return n.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in n.g)return n.g.mozResponseArrayBuffer}return null}catch(e){return null}}function _v(n,e,t){e:{for(r in t){var r=!1;break e}r=!0}r||(t=function tS(n){let e="";return $y(n,function(t,r){e+=r,e+=":",e+=t,e+="\r\n"}),e}(t),"string"==typeof n?null!=t&&encodeURIComponent(String(t)):rr(n,e,t))}function Pf(n,e,t){return t&&t.internalChannelParams&&t.internalChannelParams[n]||e}function Rm(n){this.za=0,this.l=[],this.h=new wf,this.la=this.oa=this.F=this.W=this.g=this.sa=this.D=this.aa=this.o=this.P=this.s=null,this.Za=this.V=0,this.Xa=Pf("failFast",!1,n),this.N=this.v=this.u=this.m=this.j=null,this.X=!0,this.I=this.ta=this.U=-1,this.Y=this.A=this.C=0,this.Pa=Pf("baseRetryDelayMs",5e3,n),this.$a=Pf("retryDelaySeedMs",1e4,n),this.Ya=Pf("forwardChannelMaxRetries",2,n),this.ra=Pf("forwardChannelRequestTimeoutMs",2e4,n),this.qa=n&&n.xmlHttpFactory||void 0,this.Ba=n&&n.Yb||!1,this.K=void 0,this.H=n&&n.supportsCrossDomainXhr||!1,this.J="",this.i=new fv(n&&n.concurrentRequestLimit),this.Ca=new YD,this.ja=n&&n.fastHandshake||!1,this.Ra=n&&n.Wb||!1,n&&n.Aa&&this.h.Aa(),n&&n.forceLongPolling&&(this.X=!1),this.$=!this.ja&&this.X&&n&&n.detectBufferingProxy||!1,this.ka=void 0,this.O=0,this.L=!1,this.B=null,this.Wa=!n||!1!==n.Xb}function Ac(n){if(yv(n),3==n.G){var e=n.V++,t=Fs(n.F);rr(t,"SID",n.J),rr(t,"RID",e),rr(t,"TYPE","terminate"),kf(n,t),(e=new Cf(n,n.h,e,void 0)).K=2,e.v=Sf(Fs(t)),t=!1,Jt.navigator&&Jt.navigator.sendBeacon&&(t=Jt.navigator.sendBeacon(e.v.toString(),"")),!t&&Jt.Image&&((new Image).src=e.v,t=!0),t||(e.g=Sv(e.l,null),e.g.ea(e.v)),e.F=Date.now(),_m(e)}Tv(n)}function xm(n){n.g&&(wd(n),n.g.cancel(),n.g=null)}function yv(n){xm(n),n.u&&(Jt.clearTimeout(n.u),n.u=null),Ff(n),n.i.cancel(),n.m&&("number"==typeof n.m&&Jt.clearTimeout(n.m),n.m=null)}function vv(n,e){n.l.push(new class{constructor(n,e){this.h=n,this.g=e}}(n.Za++,e)),3==n.G&&Nf(n)}function Nf(n){ZD(n.i)||n.m||(n.m=!0,um(n.Ha,n),n.C=0)}function Mf(n,e){var t;t=e?e.m:n.V++;const r=Fs(n.F);rr(r,"SID",n.J),rr(r,"RID",t),rr(r,"AID",n.U),kf(n,r),n.o&&n.s&&_v(r,n.o,n.s),t=new Cf(n,n.h,t,n.C+1),null===n.o&&(t.H=n.s),e&&(n.l=e.D.concat(n.l)),e=Ev(n,t,1e3),t.setTimeout(Math.round(.5*n.ra)+Math.round(.5*n.ra*Math.random())),Dm(n.i,t),mm(t,r,e)}function kf(n,e){n.j&&Tf({},function(t,r){rr(e,r,t)})}function Ev(n,e,t){t=Math.min(n.l.length,t);var r=n.j?Cr(n.j.Oa,n.j,n):null;e:{var i=n.l;let a=-1;for(;;){const c=["count="+t];-1==a?0<t?(a=i[0].h,c.push("ofs="+a)):a=0:c.push("ofs="+a);let h=!0;for(let g=0;g<t;g++){let v=i[g].h;const C=i[g].g;if(v-=a,0>v)a=Math.max(0,i[g].h-100),h=!1;else try{QD(C,c,"req"+v+"_")}catch(D){r&&r(C)}}if(h){r=c.join("&");break e}}}return n=n.l.splice(0,t),e.D=n,r}function wv(n){n.g||n.u||(n.Y=1,um(n.Ga,n),n.A=0)}function Of(n){return!(n.g||n.u||3<=n.A||(n.Y++,n.u=fd(Cr(n.Ga,n),Cv(n,n.A)),n.A++,0))}function wd(n){null!=n.B&&(Jt.clearTimeout(n.B),n.B=null)}function Iv(n){n.g=new Cf(n,n.h,"rpc",n.Y),null===n.o&&(n.g.H=n.s),n.g.O=0;var e=Fs(n.oa);rr(e,"RID","rpc"),rr(e,"SID",n.J),rr(e,"CI",n.N?"0":"1"),rr(e,"AID",n.U),kf(n,e),rr(e,"TYPE","xmlhttp"),n.o&&n.s&&_v(e,n.o,n.s),n.K&&n.g.setTimeout(n.K);var t=n.g;n=n.la,t.K=1,t.v=Sf(Fs(e)),t.s=null,t.U=!0,bI(t,n)}function Ff(n){null!=n.v&&(Jt.clearTimeout(n.v),n.v=null)}function bv(n,e){var t=null;if(n.g==e){Ff(n),wd(n),n.g=null;var r=2}else{if(!pv(n.i,e))return;t=e.D,xI(n.i,e),r=1}if(n.I=e.N,0!=n.G)if(e.i)if(1==r){t=e.s?e.s.length:0,e=Date.now()-e.F;var i=n.C;Tr(r=hd(),new vI(r,t,e,i)),Nf(n)}else wv(n);else if(3==(i=e.o)||0==i&&0<n.I||!(1==r&&function FI(n,e){return!(RI(n.i)>=n.i.j-(n.m?1:0)||(n.m?(n.l=e.D.concat(n.l),0):1==n.G||2==n.G||n.C>=(n.Xa?0:n.Ya)||(n.m=fd(Cr(n.Ha,n,e),Cv(n,n.C)),n.C++,0)))}(n,e)||2==r&&Of(n)))switch(t&&0<t.length&&(e=n.i,e.i=e.i.concat(t)),i){case 1:lu(n,5);break;case 4:lu(n,10);break;case 3:lu(n,6);break;default:lu(n,2)}}function Cv(n,e){let t=n.Pa+Math.floor(Math.random()*n.$a);return n.j||(t*=2),t*e}function lu(n,e){if(n.h.info("Error code "+e),2==e){var t=null;n.j&&(t=null);var r=Cr(n.jb,n);t||(t=new Tc("//www.google.com/images/cleardot.gif"),Jt.location&&"http"==Jt.location.protocol||Dc(t,"https"),Sf(t)),function PI(n,e){const t=new wf;if(Jt.Image){const r=new Image;r.onload=ff(Am,t,r,"TestLoadImage: loaded",!0,e),r.onerror=ff(Am,t,r,"TestLoadImage: error",!1,e),r.onabort=ff(Am,t,r,"TestLoadImage: abort",!1,e),r.ontimeout=ff(Am,t,r,"TestLoadImage: timeout",!1,e),Jt.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=n}else e(!1)}(t.toString(),r)}else Zi(2);n.G=0,n.j&&n.j.va(e),Tv(n),yv(n)}function Tv(n){n.G=0,n.I=-1,n.j&&((0!=$r(n.i).length||0!=n.l.length)&&(n.i.i.length=0,pf(n.l),n.l.length=0),n.j.ua())}function Dv(n,e,t){let r=function cv(n){return n instanceof Tc?Fs(n):new Tc(n,void 0)}(t);if(""!=r.i)e&&Df(r,e+"."+r.i),bm(r,r.m);else{const i=Jt.location;r=function CI(n,e,t,r){var i=new Tc(null,void 0);return n&&Dc(i,n),e&&Df(i,e),t&&bm(i,t),r&&(i.l=r),i}(i.protocol,e?e+"."+i.hostname:i.hostname,+i.port,t)}return n.aa&&$y(n.aa,function(i,a){rr(r,a,i)}),t=n.sa,(e=n.D)&&t&&rr(r,e,t),rr(r,"VER",n.ma),kf(n,r),r}function Sv(n,e,t){if(e&&!n.H)throw Error("Can't create secondary domain capable XhrIo object.");return(e=new kr(t&&n.Ba&&!n.qa?new vd({ib:!0}):n.qa)).L=n.H,e}function LI(){}function Pm(){if(mf&&!(10<=Number(uI)))throw Error("Environmental error: no available transport.")}function ps(n,e){yr.call(this),this.g=new Rm(e),this.l=n,this.h=e&&e.messageUrlParams||null,n=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(n?n["X-Client-Protocol"]="webchannel":n={"X-Client-Protocol":"webchannel"}),this.g.s=n,n=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(n?n["X-WebChannel-Content-Type"]=e.messageContentType:n={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.ya&&(n?n["X-WebChannel-Client-Profile"]=e.ya:n={"X-WebChannel-Client-Profile":e.ya}),this.g.P=n,(n=e&&e.httpHeadersOverwriteParam)&&!gf(n)&&(this.g.o=n),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!gf(e)&&(this.g.D=e,null!==(n=this.h)&&e in n&&e in(n=this.h)&&delete n[e]),this.j=new Id(this)}function UI(n){pm.call(this);var e=n.__sm__;if(e){e:{for(const t in e){n=t;break e}n=void 0}(this.i=n)&&(n=this.i,e=null!==e&&n in e?e[n]:void 0),this.data=e}else this.data=n}function VI(){pd.call(this),this.status=1}function Id(n){this.g=n}(It=kr.prototype).ea=function(n,e,t,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.H+"; newUri="+n);e=e?e.toUpperCase():"GET",this.H=n,this.j="",this.m=0,this.D=!1,this.h=!0,this.g=this.u?this.u.g():rv.g(),this.C=function wI(n){return n.h||(n.h=n.i())}(this.u?this.u:rv),this.g.onreadystatechange=Cr(this.Fa,this);try{this.F=!0,this.g.open(e,String(n),!0),this.F=!1}catch(a){return void kI(this,a)}n=t||"";const i=new gd(this.headers);r&&Tf(r,function(a,c){i.set(c,a)}),r=function ND(n){e:{var e=eS;const t=n.length,r="string"==typeof n?n.split(""):n;for(let i=0;i<t;i++)if(i in r&&e.call(void 0,r[i],i,n)){e=i;break e}e=-1}return 0>e?null:"string"==typeof n?n.charAt(e):n[e]}(i.T()),t=Jt.FormData&&n instanceof Jt.FormData,!(0<=Xw(gv,e))||r||t||i.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),i.forEach(function(a,c){this.g.setRequestHeader(c,a)},this),this.J&&(this.g.responseType=this.J),"withCredentials"in this.g&&this.g.withCredentials!==this.L&&(this.g.withCredentials=this.L);try{mv(this),0<this.B&&((this.K=function Lo(n){return mf&&function aI(){return function kD(n){var e=oI;return Object.prototype.hasOwnProperty.call(e,9)?e[9]:e[9]=n(9)}(function(){let n=0;const e=jy(String(qi)).split("."),t=jy("9").split("."),r=Math.max(e.length,t.length);for(let c=0;0==n&&c<r;c++){var i=e[c]||"",a=t[c]||"";do{if(i=/(\d*)(\D*)(.*)/.exec(i)||["","","",""],a=/(\d*)(\D*)(.*)/.exec(a)||["","","",""],0==i[0].length&&0==a[0].length)break;n=nm(0==i[1].length?0:parseInt(i[1],10),0==a[1].length?0:parseInt(a[1],10))||nm(0==i[2].length,0==a[2].length)||nm(i[2],a[2]),i=i[3],a=a[3]}while(0==n)}return 0<=n})}()&&"number"==typeof n.timeout&&void 0!==n.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=Cr(this.pa,this)):this.A=Jy(this.pa,this.B,this)),this.v=!0,this.g.send(n),this.v=!1}catch(a){kI(this,a)}},It.pa=function(){void 0!==By&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,Tr(this,"timeout"),this.abort(8))},It.abort=function(n){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=n||7,Tr(this,"complete"),Tr(this,"abort"),Yi(this))},It.M=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),Yi(this,!0)),kr.Z.M.call(this)},It.Fa=function(){this.s||(this.F||this.v||this.l?Ls(this):this.cb())},It.cb=function(){Ls(this)},It.ba=function(){try{return 2<Uo(this)?this.g.status:-1}catch(n){return-1}},It.ga=function(){try{return this.g?this.g.responseText:""}catch(n){return""}},It.Qa=function(n){if(this.g){var e=this.g.responseText;return n&&0==e.indexOf(n)&&(e=e.substring(n.length)),JD(e)}},It.Da=function(){return this.m},It.La=function(){return"string"==typeof this.j?this.j:String(this.j)},(It=Rm.prototype).ma=8,It.G=1,It.hb=function(n){try{this.h.info("Origin Trials invoked: "+n)}catch(e){}},It.Ha=function(n){if(this.m)if(this.m=null,1==this.G){if(!n){this.V=Math.floor(1e5*Math.random()),n=this.V++;const i=new Cf(this,this.h,n,void 0);let a=this.s;if(this.P&&(a?(a=Hy(a),Wy(a,this.P)):a=this.P),null===this.o&&(i.H=a),this.ja)e:{for(var e=0,t=0;t<this.l.length;t++){var r=this.l[t];if(void 0===(r="__data__"in r.g&&"string"==typeof(r=r.g.__data__)?r.length:void 0))break;if(4096<(e+=r)){e=t;break e}if(4096===e||t===this.l.length-1){e=t+1;break e}}e=1e3}else e=1e3;e=Ev(this,i,e),rr(t=Fs(this.F),"RID",n),rr(t,"CVER",22),this.D&&rr(t,"X-HTTP-Session-Id",this.D),kf(this,t),this.o&&a&&_v(t,this.o,a),Dm(this.i,i),this.Ra&&rr(t,"TYPE","init"),this.ja?(rr(t,"$req",e),rr(t,"SID","null"),i.$=!0,mm(i,t,null)):mm(i,t,e),this.G=2}}else 3==this.G&&(n?Mf(this,n):0==this.l.length||ZD(this.i)||Mf(this))},It.Ga=function(){if(this.u=null,Iv(this),this.$&&!(this.L||null==this.g||0>=this.O)){var n=2*this.O;this.h.info("BP detection timer enabled: "+n),this.B=fd(Cr(this.bb,this),n)}},It.bb=function(){this.B&&(this.B=null,this.h.info("BP detection timeout reached."),this.h.info("Buffering proxy detected and switch to long-polling!"),this.N=!1,this.L=!0,Zi(10),xm(this),Iv(this))},It.ab=function(){null!=this.v&&(this.v=null,xm(this),Of(this),Zi(19))},It.jb=function(n){n?(this.h.info("Successfully pinged google.com"),Zi(2)):(this.h.info("Failed to ping google.com"),Zi(1))},(It=LI.prototype).xa=function(){},It.wa=function(){},It.va=function(){},It.ua=function(){},It.Oa=function(){},Pm.prototype.g=function(n,e){return new ps(n,e)},di(ps,yr),ps.prototype.m=function(){this.g.j=this.j,this.A&&(this.g.H=!0);var n=this.g,e=this.l,t=this.h||void 0;n.Wa&&(n.h.info("Origin Trials enabled."),um(Cr(n.hb,n,e))),Zi(0),n.W=e,n.aa=t||{},n.N=n.X,n.F=Dv(n,null,n.W),Nf(n)},ps.prototype.close=function(){Ac(this.g)},ps.prototype.u=function(n){if("string"==typeof n){var e={};e.__data__=n,vv(this.g,e)}else this.v?((e={}).__data__=au(n),vv(this.g,e)):vv(this.g,n)},ps.prototype.M=function(){this.g.j=null,delete this.j,Ac(this.g),delete this.g,ps.Z.M.call(this)},di(UI,pm),di(VI,pd),di(Id,LI),Id.prototype.xa=function(){Tr(this.g,"a")},Id.prototype.wa=function(n){Tr(this.g,new UI(n))},Id.prototype.va=function(n){Tr(this.g,new VI(n))},Id.prototype.ua=function(){Tr(this.g,"b")},Pm.prototype.createWebChannel=Pm.prototype.g,ps.prototype.send=ps.prototype.u,ps.prototype.open=ps.prototype.m,ps.prototype.close=ps.prototype.close,tv.NO_ERROR=0,tv.TIMEOUT=8,tv.HTTP_ERROR=6,EI.COMPLETE="complete",nv.EventType=If,If.OPEN="a",If.CLOSE="b",If.ERROR="c",If.MESSAGE="d",yr.prototype.listen=yr.prototype.N,kr.prototype.listenOnce=kr.prototype.O,kr.prototype.getLastError=kr.prototype.La,kr.prototype.getLastErrorCode=kr.prototype.Da,kr.prototype.getStatus=kr.prototype.ba,kr.prototype.getResponseJson=kr.prototype.Qa,kr.prototype.getResponseText=kr.prototype.ga,kr.prototype.send=kr.prototype.ea;var nS=ro.createWebChannelTransport=function(){return new Pm},rS=ro.getStatEventTarget=function(){return hd()},Av=ro.ErrorCode=tv,iS=ro.EventType=EI,sS=ro.Event=Cc,BI=ro.Stat={rb:0,ub:1,vb:2,Ob:3,Tb:4,Qb:5,Rb:6,Pb:7,Nb:8,Sb:9,PROXY:10,NOPROXY:11,Lb:12,Hb:13,Ib:14,Gb:15,Jb:16,Kb:17,nb:18,mb:19,ob:20},oS=ro.FetchXmlHttpFactory=vd,Nm=ro.WebChannel=nv,aS=ro.XhrIo=kr;const jI="@firebase/firestore";class hi{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}hi.UNAUTHENTICATED=new hi(null),hi.GOOGLE_CREDENTIALS=new hi("google-credentials-uid"),hi.FIRST_PARTY=new hi("first-party-uid"),hi.MOCK_USER=new hi("mock-user");let bd="9.6.7";const ca=new no.Yd("@firebase/firestore");function Mm(){return ca.logLevel}function Je(n,...e){if(ca.logLevel<=no.in.DEBUG){const t=e.map(km);ca.debug(`Firestore (${bd}): ${n}`,...t)}}function Or(n,...e){if(ca.logLevel<=no.in.ERROR){const t=e.map(km);ca.error(`Firestore (${bd}): ${n}`,...t)}}function Cd(n,...e){if(ca.logLevel<=no.in.WARN){const t=e.map(km);ca.warn(`Firestore (${bd}): ${n}`,...t)}}function km(n){if("string"==typeof n)return n;try{return JSON.stringify(n)}catch(t){return n}}function Mt(n="Unexpected state"){const e=`FIRESTORE (${bd}) INTERNAL ASSERTION FAILED: `+n;throw Or(e),new Error(e)}function Kt(n,e){n||Mt()}function pt(n,e){return n}const ve={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class qe extends Z.ZR{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class ri{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}class Rc{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class eN{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(hi.UNAUTHENTICATED))}shutdown(){}}class Rv{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class tN{constructor(e){this.t=e,this.currentUser=hi.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){var r=this;let i=this.i;const a=v=>this.i!==i?(i=this.i,t(v)):Promise.resolve();let c=new ri;this.o=()=>{this.i++,this.currentUser=this.u(),c.resolve(),c=new ri,e.enqueueRetryable(()=>a(this.currentUser))};const h=()=>{const v=c;e.enqueueRetryable((0,Ce.Z)(function*(){yield v.promise,yield a(r.currentUser)}))},g=v=>{Je("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=v,this.auth.addAuthTokenListener(this.o),h()};this.t.onInit(v=>g(v)),setTimeout(()=>{if(!this.auth){const v=this.t.getImmediate({optional:!0});v?g(v):(Je("FirebaseAuthCredentialsProvider","Auth not yet detected"),c.resolve(),c=new ri)}},0),h()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?(Je("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Kt("string"==typeof r.accessToken),new Rc(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return Kt(null===e||"string"==typeof e),new hi(e)}}class WI{constructor(e,t,r){this.type="FirstParty",this.user=hi.FIRST_PARTY,this.headers=new Map,this.headers.set("X-Goog-AuthUser",t);const i=e.auth.getAuthHeaderValueForFirstParty([]);i&&this.headers.set("Authorization",i),r&&this.headers.set("X-Goog-Iam-Authorization-Token",r)}}class zI{constructor(e,t,r){this.h=e,this.l=t,this.m=r}getToken(){return Promise.resolve(new WI(this.h,this.l,this.m))}start(e,t){e.enqueueRetryable(()=>t(hi.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class uS{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class $t{constructor(e){this.g=e,this.forceRefresh=!1,this.appCheck=null,this.p=null}start(e,t){const r=a=>{null!=a.error&&Je("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${a.error.message}`);const c=a.token!==this.p;return this.p=a.token,Je("FirebaseAppCheckTokenProvider",`Received ${c?"new":"existing"} token.`),c?t(a.token):Promise.resolve()};this.o=a=>{e.enqueueRetryable(()=>r(a))};const i=a=>{Je("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=a,this.appCheck.addTokenListener(this.o)};this.g.onInit(a=>i(a)),setTimeout(()=>{if(!this.appCheck){const a=this.g.getImmediate({optional:!0});a?i(a):Je("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(Kt("string"==typeof t.token),this.p=t.token,new uS(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}class gs{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=r=>this.I(r),this.T=r=>t.writeSequenceNumber(r))}I(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.T&&this.T(e),e}}function cS(n){const e="undefined"!=typeof self&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}gs.A=-1;class Lf{static R(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const i=cS(40);for(let a=0;a<i.length;++a)r.length<20&&i[a]<t&&(r+=e.charAt(i[a]%e.length))}return r}}function bn(n,e){return n<e?-1:n>e?1:0}function la(n,e,t){return n.length===e.length&&n.every((r,i)=>t(r,e[i]))}function Uf(n){return n+"\0"}class _n{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new qe(ve.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new qe(ve.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new qe(ve.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new qe(ve.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return _n.fromMillis(Date.now())}static fromDate(e){return _n.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*t));return new _n(t,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?bn(this.nanoseconds,e.nanoseconds):bn(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class Zt{constructor(e){this.timestamp=e}static fromTimestamp(e){return new Zt(e)}static min(){return new Zt(new _n(0,0))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}function xv(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function xc(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function GI(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}class Td{constructor(e,t,r){void 0===t?t=0:t>e.length&&Mt(),void 0===r?r=e.length-t:r>e.length-t&&Mt(),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return 0===Td.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof Td?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return this.construct(this.segments,this.offset+(e=void 0===e?1:e),this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const r=Math.min(e.length,t.length);for(let i=0;i<r;i++){const a=e.get(i),c=t.get(i);if(a<c)return-1;if(a>c)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class Rn extends Td{construct(e,t,r){return new Rn(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...e){const t=[];for(const r of e){if(r.indexOf("//")>=0)throw new qe(ve.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(i=>i.length>0))}return new Rn(t)}static emptyPath(){return new Rn([])}}const qI=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Kr extends Td{construct(e,t,r){return new Kr(e,t,r)}static isValidIdentifier(e){return qI.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Kr.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new Kr(["__name__"])}static fromServerFormat(e){const t=[];let r="",i=0;const a=()=>{if(0===r.length)throw new qe(ve.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""};let c=!1;for(;i<e.length;){const h=e[i];if("\\"===h){if(i+1===e.length)throw new qe(ve.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const g=e[i+1];if("\\"!==g&&"."!==g&&"`"!==g)throw new qe(ve.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=g,i+=2}else"`"===h?(c=!c,i++):"."!==h||c?(r+=h,i++):(a(),i++)}if(a(),c)throw new qe(ve.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Kr(t)}static emptyPath(){return new Kr([])}}class Dd{constructor(e){this.fields=e,e.sort(Kr.comparator)}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return la(this.fields,e.fields,(t,r)=>t.isEqual(r))}}class Zr{constructor(e){this.binaryString=e}static fromBase64String(e){const t=atob(e);return new Zr(t)}static fromUint8Array(e){const t=function(r){let i="";for(let a=0;a<r.length;++a)i+=String.fromCharCode(r[a]);return i}(e);return new Zr(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return btoa(this.binaryString)}toUint8Array(){return function(e){const t=new Uint8Array(e.length);for(let r=0;r<e.length;r++)t[r]=e.charCodeAt(r);return t}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return bn(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Zr.EMPTY_BYTE_STRING=new Zr("");const Vf=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function du(n){if(Kt(!!n),"string"==typeof n){let e=0;const t=Vf.exec(n);if(Kt(!!t),t[1]){let i=t[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Dr(n.seconds),nanos:Dr(n.nanos)}}function Dr(n){return"number"==typeof n?n:"string"==typeof n?Number(n):0}function Pc(n){return"string"==typeof n?Zr.fromBase64String(n):Zr.fromUint8Array(n)}function Sd(n){var e,t;return"server_timestamp"===(null===(t=((null===(e=null==n?void 0:n.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===t?void 0:t.stringValue)}function Pv(n){const e=n.mapValue.fields.__previous_value__;return Sd(e)?Pv(e):e}function Ad(n){const e=du(n.mapValue.fields.__local_write_time__.timestampValue);return new _n(e.seconds,e.nanos)}class KI{constructor(e,t,r,i,a,c,h,g){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=i,this.ssl=a,this.forceLongPolling=c,this.autoDetectLongPolling=h,this.useFetchStreams=g}}class Nc{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new Nc("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof Nc&&e.projectId===this.projectId&&e.database===this.database}}function ao(n){return null==n}function da(n){return 0===n&&1/n==-1/0}function ZI(n){return"number"==typeof n&&Number.isInteger(n)&&!da(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}class Ct{constructor(e){this.path=e}static fromPath(e){return new Ct(Rn.fromString(e))}static fromName(e){return new Ct(Rn.fromString(e).popFirst(5))}static empty(){return new Ct(Rn.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===Rn.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return Rn.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Ct(new Rn(e.slice()))}}const dS={mapValue:{fields:{__type__:{stringValue:"__max___"}}}};function hu(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?Sd(n)?4:10:Mt()}function Us(n,e){if(n===e)return!0;const t=hu(n);if(t!==hu(e))return!1;switch(t){case 0:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return Ad(n).isEqual(Ad(e));case 3:return function(r,i){if("string"==typeof r.timestampValue&&"string"==typeof i.timestampValue&&r.timestampValue.length===i.timestampValue.length)return r.timestampValue===i.timestampValue;const a=du(r.timestampValue),c=du(i.timestampValue);return a.seconds===c.seconds&&a.nanos===c.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return i=e,Pc(n.bytesValue).isEqual(Pc(i.bytesValue));case 7:return n.referenceValue===e.referenceValue;case 8:return function(r,i){return Dr(r.geoPointValue.latitude)===Dr(i.geoPointValue.latitude)&&Dr(r.geoPointValue.longitude)===Dr(i.geoPointValue.longitude)}(n,e);case 2:return function(r,i){if("integerValue"in r&&"integerValue"in i)return Dr(r.integerValue)===Dr(i.integerValue);if("doubleValue"in r&&"doubleValue"in i){const a=Dr(r.doubleValue),c=Dr(i.doubleValue);return a===c?da(a)===da(c):isNaN(a)&&isNaN(c)}return!1}(n,e);case 9:return la(n.arrayValue.values||[],e.arrayValue.values||[],Us);case 10:return function(r,i){const a=r.mapValue.fields||{},c=i.mapValue.fields||{};if(xv(a)!==xv(c))return!1;for(const h in a)if(a.hasOwnProperty(h)&&(void 0===c[h]||!Us(a[h],c[h])))return!1;return!0}(n,e);default:return Mt()}var i}function Rd(n,e){return void 0!==(n.values||[]).find(t=>Us(t,e))}function xd(n,e){if(n===e)return 0;const t=hu(n),r=hu(e);if(t!==r)return bn(t,r);switch(t){case 0:return 0;case 1:return bn(n.booleanValue,e.booleanValue);case 2:return function(i,a){const c=Dr(i.integerValue||i.doubleValue),h=Dr(a.integerValue||a.doubleValue);return c<h?-1:c>h?1:c===h?0:isNaN(c)?isNaN(h)?0:-1:1}(n,e);case 3:return Nv(n.timestampValue,e.timestampValue);case 4:return Nv(Ad(n),Ad(e));case 5:return bn(n.stringValue,e.stringValue);case 6:return function(i,a){const c=Pc(i),h=Pc(a);return c.compareTo(h)}(n.bytesValue,e.bytesValue);case 7:return function(i,a){const c=i.split("/"),h=a.split("/");for(let g=0;g<c.length&&g<h.length;g++){const v=bn(c[g],h[g]);if(0!==v)return v}return bn(c.length,h.length)}(n.referenceValue,e.referenceValue);case 8:return function(i,a){const c=bn(Dr(i.latitude),Dr(a.latitude));return 0!==c?c:bn(Dr(i.longitude),Dr(a.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return function(i,a){const c=i.values||[],h=a.values||[];for(let g=0;g<c.length&&g<h.length;++g){const v=xd(c[g],h[g]);if(v)return v}return bn(c.length,h.length)}(n.arrayValue,e.arrayValue);case 10:return function(i,a){const c=i.fields||{},h=Object.keys(c),g=a.fields||{},v=Object.keys(g);h.sort(),v.sort();for(let C=0;C<h.length&&C<v.length;++C){const D=bn(h[C],v[C]);if(0!==D)return D;const x=xd(c[h[C]],g[v[C]]);if(0!==x)return x}return bn(h.length,v.length)}(n.mapValue,e.mapValue);default:throw Mt()}}function Nv(n,e){if("string"==typeof n&&"string"==typeof e&&n.length===e.length)return bn(n,e);const t=du(n),r=du(e),i=bn(t.seconds,r.seconds);return 0!==i?i:bn(t.nanos,r.nanos)}function Pd(n){return Mv(n)}function Mv(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(r){const i=du(r);return`time(${i.seconds},${i.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?Pc(n.bytesValue).toBase64():"referenceValue"in n?Ct.fromName(n.referenceValue).toString():"geoPointValue"in n?`geo(${(e=n.geoPointValue).latitude},${e.longitude})`:"arrayValue"in n?function(r){let i="[",a=!0;for(const c of r.values||[])a?a=!1:i+=",",i+=Mv(c);return i+"]"}(n.arrayValue):"mapValue"in n?function(r){const i=Object.keys(r.fields||{}).sort();let a="{",c=!0;for(const h of i)c?c=!1:a+=",",a+=`${h}:${Mv(r.fields[h])}`;return a+"}"}(n.mapValue):Mt();var e}function kv(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function YI(n){return!!n&&"integerValue"in n}function Ov(n){return!!n&&"arrayValue"in n}function hS(n){return!!n&&"nullValue"in n}function Fv(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function Mc(n){return!!n&&"mapValue"in n}function Bf(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&"object"==typeof n.timestampValue)return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){const e={mapValue:{fields:{}}};return xc(n.mapValue.fields,(t,r)=>e.mapValue.fields[t]=Bf(r)),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=Bf(n.arrayValue.values[t]);return e}return Object.assign({},n)}class Ci{constructor(e){this.value=e}static empty(){return new Ci({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!Mc(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Bf(t)}setAll(e){let t=Kr.emptyPath(),r={},i=[];e.forEach((c,h)=>{if(!t.isImmediateParentOf(h)){const g=this.getFieldsMap(t);this.applyChanges(g,r,i),r={},i=[],t=h.popLast()}c?r[h.lastSegment()]=Bf(c):i.push(h.lastSegment())});const a=this.getFieldsMap(t);this.applyChanges(a,r,i)}delete(e){const t=this.field(e.popLast());Mc(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Us(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=t.mapValue.fields[e.get(r)];Mc(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=i),t=i}return t.mapValue.fields}applyChanges(e,t,r){xc(t,(i,a)=>e[i]=a);for(const i of r)delete e[i]}clone(){return new Ci(Bf(this.value))}}function Lv(n){const e=[];return xc(n.fields,(t,r)=>{const i=new Kr([t]);if(Mc(r)){const a=Lv(r.mapValue).fields;if(0===a.length)e.push(i);else for(const c of a)e.push(i.child(c))}else e.push(i)}),new Dd(e)}class Gn{constructor(e,t,r,i,a,c){this.key=e,this.documentType=t,this.version=r,this.readTime=i,this.data=a,this.documentState=c}static newInvalidDocument(e){return new Gn(e,0,Zt.min(),Zt.min(),Ci.empty(),0)}static newFoundDocument(e,t,r){return new Gn(e,1,t,Zt.min(),r,0)}static newNoDocument(e,t){return new Gn(e,2,t,Zt.min(),Ci.empty(),0)}static newUnknownDocument(e,t){return new Gn(e,3,t,Zt.min(),Ci.empty(),2)}convertToFoundDocument(e,t){return this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Ci.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Ci.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof Gn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Gn(this.key,this.documentType,this.version,this.readTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}let Uv=(()=>{class n{constructor(t,r,i,a){this.indexId=t,this.collectionGroup=r,this.fields=i,this.indexState=a}}return n.UNKNOWN_ID=-1,n})();class Om{constructor(e,t){this.fieldPath=e,this.kind=t}}class jf{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new jf(0,Fm.min())}}class Fm{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new Fm(Zt.min(),Ct.empty(),-1)}}class fS{constructor(e,t=null,r=[],i=[],a=null,c=null,h=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=i,this.limit=a,this.startAt=c,this.endAt=h,this.P=null}}function Vv(n,e=null,t=[],r=[],i=null,a=null,c=null){return new fS(n,e,t,r,i,a,c)}function $f(n){const e=pt(n);if(null===e.P){let t=e.path.canonicalString();null!==e.collectionGroup&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>{return(i=r).field.canonicalString()+i.op.toString()+Pd(i.value);var i}).join(","),t+="|ob:",t+=e.orderBy.map(r=>{return(i=r).field.canonicalString()+i.dir;var i}).join(","),ao(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>Pd(r)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>Pd(r)).join(",")),e.P=t}return e.P}function ha(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let i=0;i<n.orderBy.length;i++)if(!vS(n.orderBy[i],e.orderBy[i]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let i=0;i<n.filters.length;i++)if((t=n.filters[i]).op!==(r=e.filters[i]).op||!t.field.isEqual(r.field)||!Us(t.value,r.value))return!1;var t,r;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!Um(n.startAt,e.startAt)&&Um(n.endAt,e.endAt)}function Lm(n){return Ct.isDocumentKey(n.path)&&null===n.collectionGroup&&0===n.filters.length}class Ti extends class{}{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?"in"===t||"not-in"===t?this.v(e,t,r):new gS(e,t,r):"array-contains"===t?new _S(e,r):"in"===t?new jv(e,r):"not-in"===t?new yS(e,r):"array-contains-any"===t?new JI(e,r):new Ti(e,t,r)}static v(e,t,r){return"in"===t?new QI(e,r):new mS(e,r)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&this.V(xd(t,this.value)):null!==t&&hu(this.value)===hu(t)&&this.V(xd(t,this.value))}V(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return Mt()}}S(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}}class gS extends Ti{constructor(e,t,r){super(e,t,r),this.key=Ct.fromName(r.referenceValue)}matches(e){const t=Ct.comparator(e.key,this.key);return this.V(t)}}class QI extends Ti{constructor(e,t){super(e,"in",t),this.keys=Bv(0,t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class mS extends Ti{constructor(e,t){super(e,"not-in",t),this.keys=Bv(0,t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function Bv(n,e){var t;return((null===(t=e.arrayValue)||void 0===t?void 0:t.values)||[]).map(r=>Ct.fromName(r.referenceValue))}class _S extends Ti{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return Ov(t)&&Rd(t.arrayValue,this.value)}}class jv extends Ti{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&Rd(this.value.arrayValue,t)}}class yS extends Ti{constructor(e,t){super(e,"not-in",t)}matches(e){if(Rd(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&!Rd(this.value.arrayValue,t)}}class JI extends Ti{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!Ov(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>Rd(this.value.arrayValue,r))}}class kc{constructor(e,t){this.position=e,this.inclusive=t}}class Nd{constructor(e,t="asc"){this.field=e,this.dir=t}}function vS(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}function XI(n,e,t){let r=0;for(let i=0;i<n.position.length;i++){const a=e[i],c=n.position[i];if(r=a.field.isKeyField()?Ct.comparator(Ct.fromName(c.referenceValue),t.key):xd(c,t.data.field(a.field)),"desc"===a.dir&&(r*=-1),0!==r)break}return r}function Um(n,e){if(null===n)return null===e;if(null===e||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!Us(n.position[t],e.position[t]))return!1;return!0}class fa{constructor(e,t=null,r=[],i=[],a=null,c="F",h=null,g=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=i,this.limit=a,this.limitType=c,this.startAt=h,this.endAt=g,this.D=null,this.C=null}}function $v(n,e,t,r,i,a,c,h){return new fa(n,e,t,r,i,a,c,h)}function Md(n){return new fa(n)}function Vm(n){return!ao(n.limit)&&"F"===n.limitType}function Bm(n){return!ao(n.limit)&&"L"===n.limitType}function Hv(n){return n.explicitOrderBy.length>0?n.explicitOrderBy[0].field:null}function Wv(n){for(const e of n.filters)if(e.S())return e.field;return null}function zv(n){return null!==n.collectionGroup}function kd(n){const e=pt(n);if(null===e.D){e.D=[];const t=Wv(e),r=Hv(e);if(null!==t&&null===r)t.isKeyField()||e.D.push(new Nd(t)),e.D.push(new Nd(Kr.keyField(),"asc"));else{let i=!1;for(const a of e.explicitOrderBy)e.D.push(a),a.field.isKeyField()&&(i=!0);if(!i){const a=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";e.D.push(new Nd(Kr.keyField(),a))}}}return e.D}function Vs(n){const e=pt(n);if(!e.C)if("F"===e.limitType)e.C=Vv(e.path,e.collectionGroup,kd(e),e.filters,e.limit,e.startAt,e.endAt);else{const t=[];for(const a of kd(e))t.push(new Nd(a.field,"desc"===a.dir?"asc":"desc"));const r=e.endAt?new kc(e.endAt.position,!e.endAt.inclusive):null,i=e.startAt?new kc(e.startAt.position,!e.startAt.inclusive):null;e.C=Vv(e.path,e.collectionGroup,t,e.filters,e.limit,r,i)}return e.C}function Gv(n,e,t){return new fa(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function Od(n,e){return ha(Vs(n),Vs(e))&&n.limitType===e.limitType}function eb(n){return`${$f(Vs(n))}|lt:${n.limitType}`}function qv(n){return`Query(target=${function pS(n){let e=n.path.canonicalString();return null!==n.collectionGroup&&(e+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(e+=`, filters: [${n.filters.map(t=>{return`${(r=t).field.canonicalString()} ${r.op} ${Pd(r.value)}`;var r}).join(", ")}]`),ao(n.limit)||(e+=", limit: "+n.limit),n.orderBy.length>0&&(e+=`, orderBy: [${n.orderBy.map(t=>{return`${(r=t).field.canonicalString()} (${r.dir})`;var r}).join(", ")}]`),n.startAt&&(e+=", startAt: ",e+=n.startAt.inclusive?"b:":"a:",e+=n.startAt.position.map(t=>Pd(t)).join(",")),n.endAt&&(e+=", endAt: ",e+=n.endAt.inclusive?"a:":"b:",e+=n.endAt.position.map(t=>Pd(t)).join(",")),`Target(${e})`}(Vs(n))}; limitType=${n.limitType})`}function jm(n,e){return e.isFoundDocument()&&function(t,r){const i=r.key.path;return null!==t.collectionGroup?r.key.hasCollectionId(t.collectionGroup)&&t.path.isPrefixOf(i):Ct.isDocumentKey(t.path)?t.path.isEqual(i):t.path.isImmediateParentOf(i)}(n,e)&&function(t,r){for(const i of t.explicitOrderBy)if(!i.field.isKeyField()&&null===r.data.field(i.field))return!1;return!0}(n,e)&&function(t,r){for(const i of t.filters)if(!i.matches(r))return!1;return!0}(n,e)&&(r=e,!((t=n).startAt&&!function(i,a,c){const h=XI(i,a,c);return i.inclusive?h<=0:h<0}(t.startAt,kd(t),r)||t.endAt&&!function(i,a,c){const h=XI(i,a,c);return i.inclusive?h>=0:h>0}(t.endAt,kd(t),r)));var t,r}function tb(n){return(e,t)=>{let r=!1;for(const i of kd(n)){const a=ES(i,e,t);if(0!==a)return a;r=r||i.field.isKeyField()}return 0}}function ES(n,e,t){const r=n.field.isKeyField()?Ct.comparator(e.key,t.key):function(i,a,c){const h=a.data.field(i),g=c.data.field(i);return null!==h&&null!==g?xd(h,g):Mt()}(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return Mt()}}function nb(n,e){if(n.N){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:da(e)?"-0":e}}function $m(n){return{integerValue:""+n}}function Hm(n,e){return ZI(e)?$m(e):nb(n,e)}class Hf{constructor(){this._=void 0}}function Kv(n,e,t){return n instanceof fu?function(r,i){const a={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:r.seconds,nanos:r.nanoseconds}}}};return i&&(a.fields.__previous_value__=i),{mapValue:a}}(t,e):n instanceof Oc?ib(n,e):n instanceof Fc?Zv(n,e):function(r,i){const a=rb(r,i),c=Yv(a)+Yv(r.k);return YI(a)&&YI(r.k)?$m(c):nb(r.O,c)}(n,e)}function wS(n,e,t){return n instanceof Oc?ib(n,e):n instanceof Fc?Zv(n,e):t}function rb(n,e){return n instanceof Fd?YI(t=e)||(r=t)&&"doubleValue"in r?e:{integerValue:0}:null;var r,t}class fu extends Hf{}class Oc extends Hf{constructor(e){super(),this.elements=e}}function ib(n,e){const t=IS(e);for(const r of n.elements)t.some(i=>Us(i,r))||t.push(r);return{arrayValue:{values:t}}}class Fc extends Hf{constructor(e){super(),this.elements=e}}function Zv(n,e){let t=IS(e);for(const r of n.elements)t=t.filter(i=>!Us(i,r));return{arrayValue:{values:t}}}class Fd extends Hf{constructor(e,t){super(),this.O=e,this.k=t}}function Yv(n){return Dr(n.integerValue||n.doubleValue)}function IS(n){return Ov(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}class Wf{constructor(e,t){this.field=e,this.transform=t}}class bS{constructor(e,t){this.version=e,this.transformResults=t}}class ir{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new ir}static exists(e){return new ir(void 0,e)}static updateTime(e){return new ir(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function pu(n,e){return void 0!==n.updateTime?e.isFoundDocument()&&e.version.isEqual(n.updateTime):void 0===n.exists||n.exists===e.isFoundDocument()}class Wm{}function rN(n,e,t){n instanceof Gf?function(r,i,a){const c=r.value.clone(),h=Gm(r.fieldTransforms,i,a.transformResults);c.setAll(h),i.convertToFoundDocument(a.version,c).setHasCommittedMutations()}(n,e,t):n instanceof gu?function(r,i,a){if(!pu(r.precondition,i))return void i.convertToUnknownDocument(a.version);const c=Gm(r.fieldTransforms,i,a.transformResults),h=i.data;h.setAll(Qv(r)),h.setAll(c),i.convertToFoundDocument(a.version,h).setHasCommittedMutations()}(n,e,t):e.convertToNoDocument(t.version).setHasCommittedMutations()}function zm(n,e,t){var i;n instanceof Gf?function(r,i,a){if(!pu(r.precondition,i))return;const c=r.value.clone(),h=qf(r.fieldTransforms,a,i);c.setAll(h),i.convertToFoundDocument(ob(i),c).setHasLocalMutations()}(n,e,t):n instanceof gu?function(r,i,a){if(!pu(r.precondition,i))return;const c=qf(r.fieldTransforms,a,i),h=i.data;h.setAll(Qv(r)),h.setAll(c),i.convertToFoundDocument(ob(i),h).setHasLocalMutations()}(n,e,t):pu(n.precondition,i=e)&&i.convertToNoDocument(Zt.min())}function CS(n,e){let t=null;for(const r of n.fieldTransforms){const i=e.data.field(r.field),a=rb(r.transform,i||null);null!=a&&(null==t&&(t=Ci.empty()),t.set(r.field,a))}return t||null}function sb(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&(r=e.fieldTransforms,!!(void 0===(t=n.fieldTransforms)&&void 0===r||t&&r&&la(t,r,(i,a)=>function zf(n,e){return n.field.isEqual(e.field)&&(r=e.transform,(t=n.transform)instanceof Oc&&r instanceof Oc||t instanceof Fc&&r instanceof Fc?la(t.elements,r.elements,Us):t instanceof Fd&&r instanceof Fd?Us(t.k,r.k):t instanceof fu&&r instanceof fu);var t,r}(i,a))))&&(0===n.type?n.value.isEqual(e.value):1!==n.type||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask));var t,r}function ob(n){return n.isFoundDocument()?n.version:Zt.min()}class Gf extends Wm{constructor(e,t,r,i=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=i,this.type=0}}class gu extends Wm{constructor(e,t,r,i,a=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=i,this.fieldTransforms=a,this.type=1}}function Qv(n){const e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const r=n.data.field(t);e.set(t,r)}}),e}function Gm(n,e,t){const r=new Map;Kt(n.length===t.length);for(let i=0;i<t.length;i++){const a=n[i],c=a.transform,h=e.data.field(a.field);r.set(a.field,wS(c,h,t[i]))}return r}function qf(n,e,t){const r=new Map;for(const i of n){const a=i.transform,c=t.data.field(i.field);r.set(i.field,Kv(a,c,e))}return r}class pa extends Wm{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}}class Jv extends Wm{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}}class ab{constructor(e){this.count=e}}var Fr,Dn;function ub(n){switch(n){default:return Mt();case ve.CANCELLED:case ve.UNKNOWN:case ve.DEADLINE_EXCEEDED:case ve.RESOURCE_EXHAUSTED:case ve.INTERNAL:case ve.UNAVAILABLE:case ve.UNAUTHENTICATED:return!1;case ve.INVALID_ARGUMENT:case ve.NOT_FOUND:case ve.ALREADY_EXISTS:case ve.PERMISSION_DENIED:case ve.FAILED_PRECONDITION:case ve.ABORTED:case ve.OUT_OF_RANGE:case ve.UNIMPLEMENTED:case ve.DATA_LOSS:return!0}}function cb(n){if(void 0===n)return Or("GRPC error has no .code"),ve.UNKNOWN;switch(n){case Fr.OK:return ve.OK;case Fr.CANCELLED:return ve.CANCELLED;case Fr.UNKNOWN:return ve.UNKNOWN;case Fr.DEADLINE_EXCEEDED:return ve.DEADLINE_EXCEEDED;case Fr.RESOURCE_EXHAUSTED:return ve.RESOURCE_EXHAUSTED;case Fr.INTERNAL:return ve.INTERNAL;case Fr.UNAVAILABLE:return ve.UNAVAILABLE;case Fr.UNAUTHENTICATED:return ve.UNAUTHENTICATED;case Fr.INVALID_ARGUMENT:return ve.INVALID_ARGUMENT;case Fr.NOT_FOUND:return ve.NOT_FOUND;case Fr.ALREADY_EXISTS:return ve.ALREADY_EXISTS;case Fr.PERMISSION_DENIED:return ve.PERMISSION_DENIED;case Fr.FAILED_PRECONDITION:return ve.FAILED_PRECONDITION;case Fr.ABORTED:return ve.ABORTED;case Fr.OUT_OF_RANGE:return ve.OUT_OF_RANGE;case Fr.UNIMPLEMENTED:return ve.UNIMPLEMENTED;case Fr.DATA_LOSS:return ve.DATA_LOSS;default:return Mt()}}(Dn=Fr||(Fr={}))[Dn.OK=0]="OK",Dn[Dn.CANCELLED=1]="CANCELLED",Dn[Dn.UNKNOWN=2]="UNKNOWN",Dn[Dn.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Dn[Dn.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Dn[Dn.NOT_FOUND=5]="NOT_FOUND",Dn[Dn.ALREADY_EXISTS=6]="ALREADY_EXISTS",Dn[Dn.PERMISSION_DENIED=7]="PERMISSION_DENIED",Dn[Dn.UNAUTHENTICATED=16]="UNAUTHENTICATED",Dn[Dn.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Dn[Dn.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Dn[Dn.ABORTED=10]="ABORTED",Dn[Dn.OUT_OF_RANGE=11]="OUT_OF_RANGE",Dn[Dn.UNIMPLEMENTED=12]="UNIMPLEMENTED",Dn[Dn.INTERNAL=13]="INTERNAL",Dn[Dn.UNAVAILABLE=14]="UNAVAILABLE",Dn[Dn.DATA_LOSS=15]="DATA_LOSS";class vr{constructor(e,t){this.comparator=e,this.root=t||Di.EMPTY}insert(e,t){return new vr(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Di.BLACK,null,null))}remove(e){return new vr(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Di.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const r=this.comparator(e,t.key);if(0===r)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(0===i)return t+r.left.size;i<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){const e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new qm(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new qm(this.root,e,this.comparator,!1)}getReverseIterator(){return new qm(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new qm(this.root,e,this.comparator,!0)}}class qm{constructor(e,t,r,i){this.isReverse=i,this.nodeStack=[];let a=1;for(;!e.isEmpty();)if(a=t?r(e.key,t):1,i&&(a*=-1),a<0)e=this.isReverse?e.left:e.right;else{if(0===a){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Di{constructor(e,t,r,i,a){this.key=e,this.value=t,this.color=null!=r?r:Di.RED,this.left=null!=i?i:Di.EMPTY,this.right=null!=a?a:Di.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,i,a){return new Di(null!=e?e:this.key,null!=t?t:this.value,null!=r?r:this.color,null!=i?i:this.left,null!=a?a:this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let i=this;const a=r(e,i.key);return i=a<0?i.copy(null,null,null,i.left.insert(e,t,r),null):0===a?i.copy(null,t,null,null,null):i.copy(null,null,null,null,i.right.insert(e,t,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return Di.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,i=this;if(t(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,t),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),0===t(e,i.key)){if(i.right.isEmpty())return Di.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,t))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Di.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Di.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw Mt();const e=this.left.check();if(e!==this.right.check())throw Mt();return e+(this.isRed()?0:1)}}Di.EMPTY=null,Di.RED=!0,Di.BLACK=!1,Di.EMPTY=new class{constructor(){this.size=0}get key(){throw Mt()}get value(){throw Mt()}get color(){throw Mt()}get left(){throw Mt()}get right(){throw Mt()}copy(n,e,t,r,i){return this}insert(n,e,t){return new Di(n,e)}remove(n,e){return this}isEmpty(){return!0}inorderTraversal(n){return!1}reverseTraversal(n){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class hr{constructor(e){this.comparator=e,this.data=new vr(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;t(i.key)}}forEachWhile(e,t){let r;for(r=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new lb(this.data.getIterator())}getIteratorFrom(e){return new lb(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof hr)||this.size!==e.size)return!1;const t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){const i=t.getNext().key,a=r.getNext().key;if(0!==this.comparator(i,a))return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new hr(this.comparator);return t.data=e,t}}class lb{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function uo(n){return n.hasNext()?n.getNext():void 0}const db=new vr(Ct.comparator);function fi(){return db}const iN=new vr(Ct.comparator);function Km(){return iN}const TS=new vr(Ct.comparator),sN=new hr(Ct.comparator);function Mn(...n){let e=sN;for(const t of n)e=e.add(t);return e}const oN=new hr(bn);function Kf(){return oN}class Lc{constructor(e,t,r,i,a){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=a}static createSynthesizedRemoteEventForCurrentChange(e,t){const r=new Map;return r.set(e,Zf.createSynthesizedTargetChangeForCurrentChange(e,t)),new Lc(Zt.min(),r,Kf(),fi(),Mn())}}class Zf{constructor(e,t,r,i,a){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=a}static createSynthesizedTargetChangeForCurrentChange(e,t){return new Zf(Zr.EMPTY_BYTE_STRING,t,Mn(),Mn(),Mn())}}class Yf{constructor(e,t,r,i){this.M=e,this.removedTargetIds=t,this.key=r,this.$=i}}class hb{constructor(e,t){this.targetId=e,this.F=t}}class fb{constructor(e,t,r=Zr.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=i}}class pb{constructor(){this.B=0,this.L=mb(),this.U=Zr.EMPTY_BYTE_STRING,this.q=!1,this.K=!0}get current(){return this.q}get resumeToken(){return this.U}get G(){return 0!==this.B}get j(){return this.K}W(e){e.approximateByteSize()>0&&(this.K=!0,this.U=e)}H(){let e=Mn(),t=Mn(),r=Mn();return this.L.forEach((i,a)=>{switch(a){case 0:e=e.add(i);break;case 2:t=t.add(i);break;case 1:r=r.add(i);break;default:Mt()}}),new Zf(this.U,this.q,e,t,r)}J(){this.K=!1,this.L=mb()}Y(e,t){this.K=!0,this.L=this.L.insert(e,t)}X(e){this.K=!0,this.L=this.L.remove(e)}Z(){this.B+=1}tt(){this.B-=1}et(){this.K=!0,this.q=!0}}class DS{constructor(e){this.nt=e,this.st=new Map,this.it=fi(),this.rt=gb(),this.ot=new hr(bn)}ct(e){for(const t of e.M)e.$&&e.$.isFoundDocument()?this.ut(t,e.$):this.at(t,e.key,e.$);for(const t of e.removedTargetIds)this.at(t,e.key,e.$)}ht(e){this.forEachTarget(e,t=>{const r=this.lt(t);switch(e.state){case 0:this.ft(t)&&r.W(e.resumeToken);break;case 1:r.tt(),r.G||r.J(),r.W(e.resumeToken);break;case 2:r.tt(),r.G||this.removeTarget(t);break;case 3:this.ft(t)&&(r.et(),r.W(e.resumeToken));break;case 4:this.ft(t)&&(this.dt(t),r.W(e.resumeToken));break;default:Mt()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.st.forEach((r,i)=>{this.ft(i)&&t(i)})}_t(e){const t=e.targetId,r=e.F.count,i=this.wt(t);if(i){const a=i.target;if(Lm(a))if(0===r){const c=new Ct(a.path);this.at(t,c,Gn.newNoDocument(c,Zt.min()))}else Kt(1===r);else this.gt(t)!==r&&(this.dt(t),this.ot=this.ot.add(t))}}yt(e){const t=new Map;this.st.forEach((a,c)=>{const h=this.wt(c);if(h){if(a.current&&Lm(h.target)){const g=new Ct(h.target.path);null!==this.it.get(g)||this.It(c,g)||this.at(c,g,Gn.newNoDocument(g,e))}a.j&&(t.set(c,a.H()),a.J())}});let r=Mn();this.rt.forEach((a,c)=>{let h=!0;c.forEachWhile(g=>{const v=this.wt(g);return!v||2===v.purpose||(h=!1,!1)}),h&&(r=r.add(a))}),this.it.forEach((a,c)=>c.setReadTime(e));const i=new Lc(e,t,this.ot,this.it,r);return this.it=fi(),this.rt=gb(),this.ot=new hr(bn),i}ut(e,t){if(!this.ft(e))return;const r=this.It(e,t.key)?2:0;this.lt(e).Y(t.key,r),this.it=this.it.insert(t.key,t),this.rt=this.rt.insert(t.key,this.Et(t.key).add(e))}at(e,t,r){if(!this.ft(e))return;const i=this.lt(e);this.It(e,t)?i.Y(t,1):i.X(t),this.rt=this.rt.insert(t,this.Et(t).delete(e)),r&&(this.it=this.it.insert(t,r))}removeTarget(e){this.st.delete(e)}gt(e){const t=this.lt(e).H();return this.nt.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Z(e){this.lt(e).Z()}lt(e){let t=this.st.get(e);return t||(t=new pb,this.st.set(e,t)),t}Et(e){let t=this.rt.get(e);return t||(t=new hr(bn),this.rt=this.rt.insert(e,t)),t}ft(e){const t=null!==this.wt(e);return t||Je("WatchChangeAggregator","Detected inactive target",e),t}wt(e){const t=this.st.get(e);return t&&t.G?null:this.nt.Tt(e)}dt(e){this.st.set(e,new pb),this.nt.getRemoteKeysForTarget(e).forEach(t=>{this.at(e,t,null)})}It(e,t){return this.nt.getRemoteKeysForTarget(e).has(t)}}function gb(){return new vr(Ct.comparator)}function mb(){return new vr(Ct.comparator)}const SS={asc:"ASCENDING",desc:"DESCENDING"},AS={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"};class Qf{constructor(e,t){this.databaseId=e,this.N=t}}function Ld(n,e){return n.N?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function Xv(n,e){return n.N?e.toBase64():e.toUint8Array()}function _b(n,e){return Ld(n,e.toTimestamp())}function Yr(n){return Kt(!!n),Zt.fromTimestamp(function(e){const t=du(e);return new _n(t.seconds,t.nanos)}(n))}function Zm(n,e){return(t=n,new Rn(["projects",t.projectId,"databases",t.database])).child("documents").child(e).canonicalString();var t}function eE(n){const e=Rn.fromString(n);return Kt(Tb(e)),e}function Jf(n,e){return Zm(n.databaseId,e.path)}function co(n,e){const t=eE(e);if(t.get(1)!==n.databaseId.projectId)throw new qe(ve.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new qe(ve.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new Ct(vb(t))}function tE(n,e){return Zm(n.databaseId,e)}function yb(n){const e=eE(n);return 4===e.length?Rn.emptyPath():vb(e)}function Xf(n){return new Rn(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function vb(n){return Kt(n.length>4&&"documents"===n.get(4)),n.popFirst(5)}function Ud(n,e,t){return{name:Jf(n,e),fields:t.value.mapValue.fields}}function Eb(n,e,t){const r=co(n,e.name),i=Yr(e.updateTime),a=new Ci({mapValue:{fields:e.fields}}),c=Gn.newFoundDocument(r,i,a);return t&&c.setHasCommittedMutations(),t?c.setHasCommittedMutations():c}function ep(n,e){let t;if(e instanceof Gf)t={update:Ud(n,e.key,e.value)};else if(e instanceof pa)t={delete:Jf(n,e.key)};else if(e instanceof gu)t={update:Ud(n,e.key,e.data),updateMask:PS(e.fieldMask)};else{if(!(e instanceof Jv))return Mt();t={verify:Jf(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(r=>function(i,a){const c=a.transform;if(c instanceof fu)return{fieldPath:a.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(c instanceof Oc)return{fieldPath:a.field.canonicalString(),appendMissingElements:{values:c.elements}};if(c instanceof Fc)return{fieldPath:a.field.canonicalString(),removeAllFromArray:{values:c.elements}};if(c instanceof Fd)return{fieldPath:a.field.canonicalString(),increment:c.k};throw Mt()}(0,r))),e.precondition.isNone||(t.currentDocument=void 0!==(i=e.precondition).updateTime?{updateTime:_b(n,i.updateTime)}:void 0!==i.exists?{exists:i.exists}:Mt()),t;var i}function tp(n,e){const t=e.currentDocument?void 0!==(i=e.currentDocument).updateTime?ir.updateTime(Yr(i.updateTime)):void 0!==i.exists?ir.exists(i.exists):ir.none():ir.none(),r=e.updateTransforms?e.updateTransforms.map(i=>function(a,c){let h=null;"setToServerValue"in c?(Kt("REQUEST_TIME"===c.setToServerValue),h=new fu):"appendMissingElements"in c?h=new Oc(c.appendMissingElements.values||[]):"removeAllFromArray"in c?h=new Fc(c.removeAllFromArray.values||[]):"increment"in c?h=new Fd(a,c.increment):Mt();const g=Kr.fromServerFormat(c.fieldPath);return new Wf(g,h)}(n,i)):[];var i;if(e.update){const i=co(n,e.update.name),a=new Ci({mapValue:{fields:e.update.fields}});if(e.updateMask){const c=new Dd((e.updateMask.fieldPaths||[]).map(v=>Kr.fromServerFormat(v)));return new gu(i,a,c,t,r)}return new Gf(i,a,t,r)}if(e.delete){const i=co(n,e.delete);return new pa(i,t)}if(e.verify){const i=co(n,e.verify);return new Jv(i,t)}return Mt()}function wb(n,e){return{documents:[tE(n,e.path)]}}function Ib(n,e){const t={structuredQuery:{}},r=e.path;null!==e.collectionGroup?(t.parent=tE(n,r),t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(t.parent=tE(n,r.popLast()),t.structuredQuery.from=[{collectionId:r.lastSegment()}]);const i=function(g){if(0===g.length)return;const v=g.map(C=>function(D){if("=="===D.op){if(Fv(D.value))return{unaryFilter:{field:Uc(D.field),op:"IS_NAN"}};if(hS(D.value))return{unaryFilter:{field:Uc(D.field),op:"IS_NULL"}}}else if("!="===D.op){if(Fv(D.value))return{unaryFilter:{field:Uc(D.field),op:"IS_NOT_NAN"}};if(hS(D.value))return{unaryFilter:{field:Uc(D.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Uc(D.field),op:xS(D.op),value:D.value}}}(C));return 1===v.length?v[0]:{compositeFilter:{op:"AND",filters:v}}}(e.filters);i&&(t.structuredQuery.where=i);const a=function(g){if(0!==g.length)return g.map(v=>{return{field:Uc((C=v).field),direction:RS(C.dir)};var C})}(e.orderBy);a&&(t.structuredQuery.orderBy=a);const c=(v=e.limit,n.N||ao(v)?v:{value:v});var v,h,g;return null!==c&&(t.structuredQuery.limit=c),e.startAt&&(t.structuredQuery.startAt={before:(h=e.startAt).inclusive,values:h.position}),e.endAt&&(t.structuredQuery.endAt={before:!(g=e.endAt).inclusive,values:g.position}),t}function bb(n){let e=yb(n.parent);const t=n.structuredQuery,r=t.from?t.from.length:0;let i=null;if(r>0){Kt(1===r);const C=t.from[0];C.allDescendants?i=C.collectionId:e=e.child(C.collectionId)}let a=[];t.where&&(a=rp(t.where));let c=[];t.orderBy&&(c=t.orderBy.map(C=>{return new Nd(Vc((D=C).field),function(x){switch(x){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(D.direction));var D}));let h=null;t.limit&&(h=function(C){let D;return D="object"==typeof C?C.value:C,ao(D)?null:D}(t.limit));let g=null;var C;t.startAt&&(g=new kc((C=t.startAt).values||[],!!C.before));let v=null;return t.endAt&&(v=function(C){return new kc(C.values||[],!C.before)}(t.endAt)),$v(e,i,c,a,h,"F",g,v)}function rp(n){return n?void 0!==n.unaryFilter?[Cb(n)]:void 0!==n.fieldFilter?[rE(n)]:void 0!==n.compositeFilter?n.compositeFilter.filters.map(e=>rp(e)).reduce((e,t)=>e.concat(t)):Mt():[]}function RS(n){return SS[n]}function xS(n){return AS[n]}function Uc(n){return{fieldPath:n.canonicalString()}}function Vc(n){return Kr.fromServerFormat(n.fieldPath)}function rE(n){return Ti.create(Vc(n.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return Mt()}}(n.fieldFilter.op),n.fieldFilter.value)}function Cb(n){switch(n.unaryFilter.op){case"IS_NAN":const e=Vc(n.unaryFilter.field);return Ti.create(e,"==",{doubleValue:NaN});case"IS_NULL":const t=Vc(n.unaryFilter.field);return Ti.create(t,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const r=Vc(n.unaryFilter.field);return Ti.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const i=Vc(n.unaryFilter.field);return Ti.create(i,"!=",{nullValue:"NULL_VALUE"});default:return Mt()}}function PS(n){const e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function Tb(n){return n.length>=4&&"projects"===n.get(0)&&"databases"===n.get(2)}function pi(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=Qm(e)),e=iE(n.get(t),e);return Qm(e)}function iE(n,e){let t=e;const r=n.length;for(let i=0;i<r;i++){const a=n.charAt(i);switch(a){case"\0":t+="\x01\x10";break;case"\x01":t+="\x01\x11";break;default:t+=a}}return t}function Qm(n){return n+"\x01\x01"}function lo(n){const e=n.length;if(Kt(e>=2),2===e)return Kt("\x01"===n.charAt(0)&&"\x01"===n.charAt(1)),Rn.emptyPath();const t=e-2,r=[];let i="";for(let a=0;a<e;){const c=n.indexOf("\x01",a);switch((c<0||c>t)&&Mt(),n.charAt(c+1)){case"\x01":const h=n.substring(a,c);let g;0===i.length?g=h:(i+=h,g=i,i=""),r.push(g);break;case"\x10":i+=n.substring(a,c),i+="\0";break;case"\x11":i+=n.substring(a,c+1);break;default:Mt()}a=c+2}return new Rn(r)}class sE{constructor(e,t){this.seconds=e,this.nanoseconds=t}}class Ui{constructor(e,t,r){this.ownerId=e,this.allowTabSynchronization=t,this.leaseTimestampMs=r}}Ui.store="owner",Ui.key="owner";class mu{constructor(e,t,r){this.userId=e,this.lastAcknowledgedBatchId=t,this.lastStreamToken=r}}mu.store="mutationQueues",mu.keyPath="userId";class sr{constructor(e,t,r,i,a){this.userId=e,this.batchId=t,this.localWriteTimeMs=r,this.baseMutations=i,this.mutations=a}}sr.store="mutations",sr.keyPath="batchId",sr.userMutationsIndex="userMutationsIndex",sr.userMutationsKeyPath=["userId","batchId"];class Si{constructor(){}static prefixForUser(e){return[e]}static prefixForPath(e,t){return[e,pi(t)]}static key(e,t,r){return[e,pi(t),r]}}Si.store="documentMutations",Si.PLACEHOLDER=new Si;class NS{constructor(e,t){this.path=e,this.readTime=t}}class Db{constructor(e,t){this.path=e,this.version=t}}class fr{constructor(e,t,r,i,a,c){this.unknownDocument=e,this.noDocument=t,this.document=r,this.hasCommittedMutations=i,this.readTime=a,this.parentPath=c}}fr.store="remoteDocuments",fr.readTimeIndex="readTimeIndex",fr.readTimeIndexPath="readTime",fr.collectionReadTimeIndex="collectionReadTimeIndex",fr.collectionReadTimeIndexPath=["parentPath","readTime"];class ho{constructor(e){this.byteSize=e}}ho.store="remoteDocumentGlobal",ho.key="remoteDocumentGlobalKey";class Qi{constructor(e,t,r,i,a,c,h){this.targetId=e,this.canonicalId=t,this.readTime=r,this.resumeToken=i,this.lastListenSequenceNumber=a,this.lastLimboFreeSnapshotVersion=c,this.query=h}}Qi.store="targets",Qi.keyPath="targetId",Qi.queryTargetsIndexName="queryTargetsIndex",Qi.queryTargetsKeyPath=["canonicalId","targetId"];class ii{constructor(e,t,r){this.targetId=e,this.path=t,this.sequenceNumber=r}}ii.store="targetDocuments",ii.keyPath=["targetId","path"],ii.documentTargetsIndex="documentTargetsIndex",ii.documentTargetsKeyPath=["path","targetId"];class Ji{constructor(e,t,r,i){this.highestTargetId=e,this.highestListenSequenceNumber=t,this.lastRemoteSnapshotVersion=r,this.targetCount=i}}Ji.key="targetGlobalKey",Ji.store="targetGlobal";class Bc{constructor(e,t){this.collectionId=e,this.parent=t}}Bc.store="collectionParents",Bc.keyPath=["collectionId","parent"];class Bo{constructor(e,t,r,i){this.clientId=e,this.updateTimeMs=t,this.networkEnabled=r,this.inForeground=i}}Bo.store="clientMetadata",Bo.keyPath="clientId";class jc{constructor(e,t,r){this.bundleId=e,this.createTime=t,this.version=r}}jc.store="bundles",jc.keyPath="bundleId";class Vd{constructor(e,t,r){this.name=e,this.readTime=t,this.bundledQuery=r}}Vd.store="namedQueries",Vd.keyPath="name";class Xi{constructor(e,t,r){this.indexId=e,this.collectionGroup=t,this.fields=r}}Xi.store="indexConfiguration",Xi.keyPath="indexId",Xi.collectionGroupIndex="collectionGroupIndex",Xi.collectionGroupIndexPath="collectionGroup";class Bs{constructor(e,t,r,i,a,c){this.indexId=e,this.uid=t,this.sequenceNumber=r,this.readTime=i,this.documentKey=a,this.largestBatchId=c}}Bs.store="indexState",Bs.keyPath=["indexId","uid"],Bs.sequenceNumberIndex="sequenceNumberIndex",Bs.sequenceNumberIndexPath=["uid","sequenceNumber"];class Qn{constructor(e,t,r,i,a){this.indexId=e,this.uid=t,this.arrayValue=r,this.directionalValue=i,this.documentKey=a}}Qn.store="indexEntries",Qn.keyPath=["indexId","uid","arrayValue","directionalValue","documentKey"],Qn.documentKeyIndex="documentKeyIndex",Qn.documentKeyIndexPath=["indexId","uid","documentKey"];class Er{constructor(e,t,r,i,a,c){this.userId=e,this.collectionPath=t,this.documentId=r,this.collectionGroup=i,this.largestBatchId=a,this.overlayMutation=c}}Er.store="documentOverlays",Er.keyPath=["userId","collectionPath","documentId"],Er.collectionPathOverlayIndex="collectionPathOverlayIndex",Er.collectionPathOverlayIndexPath=["userId","collectionPath","largestBatchId"],Er.collectionGroupOverlayIndex="collectionGroupOverlayIndex",Er.collectionGroupOverlayIndexPath=["userId","collectionGroup","largestBatchId"];const Sb=[mu.store,sr.store,Si.store,fr.store,Qi.store,Ui.store,Ji.store,ii.store,Bo.store,ho.store,Bc.store,jc.store,Vd.store],Ab=[...Sb,Er.store],aN=[...Ab,Xi.store,Bs.store,Qn.store],Bd="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class Rb{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}class Se{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&Mt(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new Se((r,i)=>{this.nextCallback=a=>{this.wrapSuccess(e,a).next(r,i)},this.catchCallback=a=>{this.wrapFailure(t,a).next(r,i)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof Se?t:Se.resolve(t)}catch(t){return Se.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):Se.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):Se.reject(t)}static resolve(e){return new Se((t,r)=>{t(e)})}static reject(e){return new Se((t,r)=>{r(e)})}static waitFor(e){return new Se((t,r)=>{let i=0,a=0,c=!1;e.forEach(h=>{++i,h.next(()=>{++a,c&&a===i&&t()},g=>r(g))}),c=!0,a===i&&t()})}static or(e){let t=Se.resolve(!1);for(const r of e)t=t.next(i=>i?Se.resolve(i):r());return t}static forEach(e,t){const r=[];return e.forEach((i,a)=>{r.push(t.call(this,i,a))}),this.waitFor(r)}}class Jm{constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.At=new ri,this.transaction.oncomplete=()=>{this.At.resolve()},this.transaction.onabort=()=>{t.error?this.At.reject(new ip(e,t.error)):this.At.resolve()},this.transaction.onerror=r=>{const i=op(r.target.error);this.At.reject(new ip(e,i))}}static open(e,t,r,i){try{return new Jm(t,e.transaction(i,r))}catch(a){throw new ip(t,a)}}get Rt(){return this.At.promise}abort(e){e&&this.At.reject(e),this.aborted||(Je("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}Pt(){const e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}store(e){const t=this.transaction.objectStore(e);return new xb(t)}}class js{constructor(e,t,r){this.name=e,this.version=t,this.bt=r,12.2===js.vt((0,Z.z$)())&&Or("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return Je("SimpleDb","Removing database:",e),_u(window.indexedDB.deleteDatabase(e)).toPromise()}static Vt(){if(!(0,Z.hl)())return!1;if(js.St())return!0;const e=(0,Z.z$)(),t=js.vt(e),r=0<t&&t<10,i=js.Dt(e),a=0<i&&i<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||a)}static St(){var e;return"undefined"!=typeof process&&"YES"===(null===(e=process.env)||void 0===e?void 0:e.Ct)}static Nt(e,t){return e.store(t)}static vt(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(r)}static Dt(e){const t=e.match(/Android ([\d.]+)/i),r=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(r)}xt(e){var t=this;return(0,Ce.Z)(function*(){return t.db||(Je("SimpleDb","Opening database:",t.name),t.db=yield new Promise((r,i)=>{const a=indexedDB.open(t.name,t.version);a.onsuccess=c=>{r(c.target.result)},a.onblocked=()=>{i(new ip(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},a.onerror=c=>{const h=c.target.error;i("VersionError"===h.name?new qe(ve.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):"InvalidStateError"===h.name?new qe(ve.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+h):new ip(e,h))},a.onupgradeneeded=c=>{Je("SimpleDb",'Database "'+t.name+'" requires upgrade from version:',c.oldVersion),t.bt.kt(c.target.result,a.transaction,c.oldVersion,t.version).next(()=>{Je("SimpleDb","Database upgrade to version "+t.version+" complete")})}})),t.Ot&&(t.db.onversionchange=r=>t.Ot(r)),t.db})()}Mt(e){this.Ot=e,this.db&&(this.db.onversionchange=t=>e(t))}runTransaction(e,t,r,i){var a=this;return(0,Ce.Z)(function*(){const c="readonly"===t;let h=0;for(;;){++h;try{a.db=yield a.xt(e);const g=Jm.open(a.db,e,c?"readonly":"readwrite",r),v=i(g).next(C=>(g.Pt(),C)).catch(C=>(g.abort(C),Se.reject(C))).toPromise();return v.catch(()=>{}),yield g.Rt,v}catch(g){const v="FirebaseError"!==g.name&&h<3;if(Je("SimpleDb","Transaction failed with error:",g.message,"Retrying:",v),a.close(),!v)return Promise.reject(g)}}})()}close(){this.db&&this.db.close(),this.db=void 0}}class MS{constructor(e){this.$t=e,this.Ft=!1,this.Bt=null}get isDone(){return this.Ft}get Lt(){return this.Bt}set cursor(e){this.$t=e}done(){this.Ft=!0}Ut(e){this.Bt=e}delete(){return _u(this.$t.delete())}}class ip extends qe{constructor(e,t){super(ve.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}}function ga(n){return"IndexedDbTransactionError"===n.name}class xb{constructor(e){this.store=e}put(e,t){let r;return void 0!==t?(Je("SimpleDb","PUT",this.store.name,e,t),r=this.store.put(t,e)):(Je("SimpleDb","PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),_u(r)}add(e){return Je("SimpleDb","ADD",this.store.name,e,e),_u(this.store.add(e))}get(e){return _u(this.store.get(e)).next(t=>(void 0===t&&(t=null),Je("SimpleDb","GET",this.store.name,e,t),t))}delete(e){return Je("SimpleDb","DELETE",this.store.name,e),_u(this.store.delete(e))}count(){return Je("SimpleDb","COUNT",this.store.name),_u(this.store.count())}qt(e,t){const r=this.options(e,t);if(r.index||"function"!=typeof this.store.getAll){const i=this.cursor(r),a=[];return this.Kt(i,(c,h)=>{a.push(h)}).next(()=>a)}{const i=this.store.getAll(r.range);return new Se((a,c)=>{i.onerror=h=>{c(h.target.error)},i.onsuccess=h=>{a(h.target.result)}})}}Gt(e,t){Je("SimpleDb","DELETE ALL",this.store.name);const r=this.options(e,t);r.jt=!1;const i=this.cursor(r);return this.Kt(i,(a,c,h)=>h.delete())}Qt(e,t){let r;t?r=e:(r={},t=e);const i=this.cursor(r);return this.Kt(i,t)}Wt(e){const t=this.cursor({});return new Se((r,i)=>{t.onerror=a=>{const c=op(a.target.error);i(c)},t.onsuccess=a=>{const c=a.target.result;c?e(c.primaryKey,c.value).next(h=>{h?c.continue():r()}):r()}})}Kt(e,t){const r=[];return new Se((i,a)=>{e.onerror=c=>{a(c.target.error)},e.onsuccess=c=>{const h=c.target.result;if(!h)return void i();const g=new MS(h),v=t(h.primaryKey,h.value,g);if(v instanceof Se){const C=v.catch(D=>(g.done(),Se.reject(D)));r.push(C)}g.isDone?i():null===g.Lt?h.continue():h.continue(g.Lt)}}).next(()=>Se.waitFor(r))}options(e,t){let r;return void 0!==e&&("string"==typeof e?r=e:t=e),{index:r,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const r=this.store.index(e.index);return e.jt?r.openKeyCursor(e.range,t):r.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function _u(n){return new Se((e,t)=>{n.onsuccess=r=>{e(r.target.result)},n.onerror=r=>{const i=op(r.target.error);t(i)}})}let sp=!1;function op(n){const e=js.vt((0,Z.z$)());if(e>=12.2&&e<13){const t="An internal error was encountered in the Indexed Database server";if(n.message.indexOf(t)>=0){const r=new qe("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return sp||(sp=!0,setTimeout(()=>{throw r},0)),r}}return n}class kS extends Rb{constructor(e,t){super(),this.zt=e,this.currentSequenceNumber=t}}function Qr(n,e){const t=pt(n);return js.Nt(t.zt,e)}class oE{constructor(e,t,r,i){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,t){const r=t.mutationResults;for(let i=0;i<this.mutations.length;i++){const a=this.mutations[i];a.key.isEqual(e.key)&&rN(a,e,r[i])}}applyToLocalView(e){for(const t of this.baseMutations)t.key.isEqual(e.key)&&zm(t,e,this.localWriteTime);for(const t of this.mutations)t.key.isEqual(e.key)&&zm(t,e,this.localWriteTime)}applyToLocalDocumentSet(e){this.mutations.forEach(t=>{const r=e.get(t.key),i=r;this.applyToLocalView(i),r.isValidDocument()||i.convertToNoDocument(Zt.min())})}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),Mn())}isEqual(e){return this.batchId===e.batchId&&la(this.mutations,e.mutations,(t,r)=>sb(t,r))&&la(this.baseMutations,e.baseMutations,(t,r)=>sb(t,r))}}class Xm{constructor(e,t,r,i){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=i}static from(e,t,r){Kt(e.mutations.length===r.length);let i=TS;const a=e.mutations;for(let c=0;c<a.length;c++)i=i.insert(a[c].key,r[c].version);return new Xm(e,t,r,i)}}class jd{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}class ma{constructor(e,t,r,i,a=Zt.min(),c=Zt.min(),h=Zr.EMPTY_BYTE_STRING){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=a,this.lastLimboFreeSnapshotVersion=c,this.resumeToken=h}withSequenceNumber(e){return new ma(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)}withResumeToken(e,t){return new ma(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e)}withLastLimboFreeSnapshotVersion(e){return new ma(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken)}}class Pb{constructor(e){this.Ht=e}}function e_(n,e){let t;if(e.document)t=Eb(n.Ht,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const r=Ct.fromSegments(e.noDocument.path),i=yu(e.noDocument.readTime);t=Gn.newNoDocument(r,i),e.hasCommittedMutations&&t.setHasCommittedMutations()}else{if(!e.unknownDocument)return Mt();{const r=Ct.fromSegments(e.unknownDocument.path),i=yu(e.unknownDocument.version);t=Gn.newUnknownDocument(r,i)}}return e.readTime&&t.setReadTime(aE(e.readTime)),t}function t_(n,e){const t=Nb(e.readTime),r=e.key.path.popLast().toArray();if(e.isFoundDocument()){const i={name:Jf(c=n.Ht,(h=e).key),fields:h.data.value.mapValue.fields,updateTime:Ld(c,h.version.toTimestamp())};return new fr(null,null,i,e.hasCommittedMutations,t,r)}var c,h;if(e.isNoDocument()){const i=e.key.path.toArray(),a=$c(e.version),c=e.hasCommittedMutations;return new fr(null,new NS(i,a),null,c,t,r)}if(e.isUnknownDocument()){const i=e.key.path.toArray(),a=$c(e.version);return new fr(new Db(i,a),null,null,!0,t,r)}return Mt()}function Nb(n){const e=n.toTimestamp();return[e.seconds,e.nanoseconds]}function aE(n){const e=new _n(n[0],n[1]);return Zt.fromTimestamp(e)}function $c(n){const e=n.toTimestamp();return new sE(e.seconds,e.nanoseconds)}function yu(n){const e=new _n(n.seconds,n.nanoseconds);return Zt.fromTimestamp(e)}function Hc(n,e){const t=(e.baseMutations||[]).map(a=>tp(n.Ht,a));for(let a=0;a<e.mutations.length-1;++a){const c=e.mutations[a];a+1<e.mutations.length&&void 0!==e.mutations[a+1].transform&&(c.updateTransforms=e.mutations[a+1].transform.fieldTransforms,e.mutations.splice(a+1,1),++a)}const r=e.mutations.map(a=>tp(n.Ht,a)),i=_n.fromMillis(e.localWriteTimeMs);return new oE(e.batchId,i,t,r)}function ap(n){const e=yu(n.readTime),t=void 0!==n.lastLimboFreeSnapshotVersion?yu(n.lastLimboFreeSnapshotVersion):Zt.min();let r;var i;return void 0!==n.query.documents?(Kt(1===(i=n.query).documents.length),r=Vs(Md(yb(i.documents[0])))):r=Vs(bb(n.query)),new ma(r,n.targetId,0,n.lastListenSequenceNumber,e,t,Zr.fromBase64String(n.resumeToken))}function uE(n,e){const t=$c(e.snapshotVersion),r=$c(e.lastLimboFreeSnapshotVersion);let i;i=Lm(e.target)?wb(n.Ht,e.target):Ib(n.Ht,e.target);const a=e.resumeToken.toBase64();return new Qi(e.targetId,$f(e.target),t,a,e.sequenceNumber,r,i)}function n_(n){const e=bb({parent:n.parent,structuredQuery:n.structuredQuery});return"LAST"===n.limitType?Gv(e,e.limit,"L"):e}function cE(n,e){return new jd(e.largestBatchId,tp(n.Ht,e.overlayMutation))}function Mb(n,e){const t=e.path.lastSegment();return[n,pi(e.path.popLast()),t]}class kb{getBundleMetadata(e,t){return Ob(e).get(t).next(r=>{if(r)return{id:(i=r).bundleId,createTime:yu(i.createTime),version:i.version};var i})}saveBundleMetadata(e,t){return Ob(e).put({bundleId:(r=t).id,createTime:$c(Yr(r.createTime)),version:r.version});var r}getNamedQuery(e,t){return lE(e).get(t).next(r=>{if(r)return{name:(i=r).name,query:n_(i.bundledQuery),readTime:yu(i.readTime)};var i})}saveNamedQuery(e,t){return lE(e).put({name:(r=t).name,readTime:$c(Yr(r.readTime)),bundledQuery:r.bundledQuery});var r}}function Ob(n){return Qr(n,jc.store)}function lE(n){return Qr(n,Vd.store)}class r_{constructor(e,t){this.O=e,this.userId=t}static Jt(e,t){return new r_(e,t.uid||"")}getOverlay(e,t){return $d(e).get(Mb(this.userId,t)).next(r=>r?cE(this.O,r):null)}saveOverlays(e,t,r){const i=[];return r.forEach(a=>{const c=new jd(t,a);i.push(this.Yt(e,c))}),Se.waitFor(i)}removeOverlaysForBatchId(e,t,r){const i=new Set;t.forEach(c=>i.add(pi(c.getCollectionPath())));const a=[];return i.forEach(c=>{const h=IDBKeyRange.bound([this.userId,c,r],[this.userId,c,r+1],!1,!0);a.push($d(e).Gt(Er.collectionPathOverlayIndex,h))}),Se.waitFor(a)}getOverlaysForCollection(e,t,r){const i=new Map,a=pi(t),c=IDBKeyRange.bound([this.userId,a,r],[this.userId,a,Number.POSITIVE_INFINITY],!0);return $d(e).qt(Er.collectionPathOverlayIndex,c).next(h=>{for(const g of h){const v=cE(this.O,g);i.set(v.getKey(),v)}return i})}getOverlaysForCollectionGroup(e,t,r,i){const a=new Map;let c;const h=IDBKeyRange.bound([this.userId,t,r],[this.userId,t,Number.POSITIVE_INFINITY],!0);return $d(e).Qt({index:Er.collectionGroupOverlayIndex,range:h},(g,v,C)=>{const D=cE(this.O,v);a.size<i||D.largestBatchId===c?(a.set(D.getKey(),D),c=D.largestBatchId):C.done()}).next(()=>a)}Yt(e,t){return $d(e).put(function(r,i,a){const[c,h,g]=Mb(i,a.mutation.key);return new Er(i,h,g,a.mutation.key.getCollectionGroup(),a.largestBatchId,ep(r.Ht,a.mutation))}(this.O,this.userId,t))}}function $d(n){return Qr(n,Er.store)}class up{constructor(){}Xt(e,t){this.Zt(e,t),t.te()}Zt(e,t){if("nullValue"in e)this.ee(t,5);else if("booleanValue"in e)this.ee(t,10),t.ne(e.booleanValue?1:0);else if("integerValue"in e)this.ee(t,15),t.ne(Dr(e.integerValue));else if("doubleValue"in e){const r=Dr(e.doubleValue);isNaN(r)?this.ee(t,13):(this.ee(t,15),da(r)?t.ne(0):t.ne(r))}else if("timestampValue"in e){const r=e.timestampValue;this.ee(t,20),"string"==typeof r?t.se(r):(t.se(`${r.seconds||""}`),t.ne(r.nanos||0))}else if("stringValue"in e)this.ie(e.stringValue,t),this.re(t);else if("bytesValue"in e)this.ee(t,30),t.oe(Pc(e.bytesValue)),this.re(t);else if("referenceValue"in e)this.ce(e.referenceValue,t);else if("geoPointValue"in e){const r=e.geoPointValue;this.ee(t,45),t.ne(r.latitude||0),t.ne(r.longitude||0)}else"mapValue"in e?Us(e,dS)?this.ee(t,Number.MAX_SAFE_INTEGER):(this.ue(e.mapValue,t),this.re(t)):"arrayValue"in e?(this.ae(e.arrayValue,t),this.re(t)):Mt()}ie(e,t){this.ee(t,25),this.he(e,t)}he(e,t){t.se(e)}ue(e,t){const r=e.fields||{};this.ee(t,55);for(const i of Object.keys(r))this.ie(i,t),this.Zt(r[i],t)}ae(e,t){const r=e.values||[];this.ee(t,50);for(const i of r)this.Zt(i,t)}ce(e,t){this.ee(t,37),Ct.fromName(e).path.forEach(r=>{this.ee(t,60),this.he(r,t)})}ee(e,t){e.ne(t)}re(e){e.ne(2)}}function OS(n){if(0===n)return 8;let e=0;return n>>4==0&&(e+=4,n<<=4),n>>6==0&&(e+=2,n<<=2),n>>7==0&&(e+=1),e}function Fb(n){const e=64-function(t){let r=0;for(let i=0;i<8;++i){const a=OS(255&t[i]);if(r+=a,8!==a)break}return r}(n);return Math.ceil(e/8)}up.le=new up;class uN{constructor(){this.buffer=new Uint8Array(1024),this.position=0}fe(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.de(r.value),r=t.next();this._e()}we(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.me(r.value),r=t.next();this.ge()}ye(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.de(r);else if(r<2048)this.de(960|r>>>6),this.de(128|63&r);else if(t<"\ud800"||"\udbff"<t)this.de(480|r>>>12),this.de(128|63&r>>>6),this.de(128|63&r);else{const i=t.codePointAt(0);this.de(240|i>>>18),this.de(128|63&i>>>12),this.de(128|63&i>>>6),this.de(128|63&i)}}this._e()}pe(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.me(r);else if(r<2048)this.me(960|r>>>6),this.me(128|63&r);else if(t<"\ud800"||"\udbff"<t)this.me(480|r>>>12),this.me(128|63&r>>>6),this.me(128|63&r);else{const i=t.codePointAt(0);this.me(240|i>>>18),this.me(128|63&i>>>12),this.me(128|63&i>>>6),this.me(128|63&i)}}this.ge()}Ie(e){const t=this.Ee(e),r=Fb(t);this.Te(1+r),this.buffer[this.position++]=255&r;for(let i=t.length-r;i<t.length;++i)this.buffer[this.position++]=255&t[i]}Ae(e){const t=this.Ee(e),r=Fb(t);this.Te(1+r),this.buffer[this.position++]=~(255&r);for(let i=t.length-r;i<t.length;++i)this.buffer[this.position++]=~(255&t[i])}Re(){this.Pe(255),this.Pe(255)}be(){this.ve(255),this.ve(255)}reset(){this.position=0}seed(e){this.Te(e.length),this.buffer.set(e,this.position),this.position+=e.length}Ve(){return this.buffer.slice(0,this.position)}Ee(e){const t=function(i){const a=new DataView(new ArrayBuffer(8));return a.setFloat64(0,i,!1),new Uint8Array(a.buffer)}(e),r=0!=(128&t[0]);t[0]^=r?255:128;for(let i=1;i<t.length;++i)t[i]^=r?255:0;return t}de(e){const t=255&e;0===t?(this.Pe(0),this.Pe(255)):255===t?(this.Pe(255),this.Pe(0)):this.Pe(t)}me(e){const t=255&e;0===t?(this.ve(0),this.ve(255)):255===t?(this.ve(255),this.ve(0)):this.ve(e)}_e(){this.Pe(0),this.Pe(1)}ge(){this.ve(0),this.ve(1)}Pe(e){this.Te(1),this.buffer[this.position++]=e}ve(e){this.Te(1),this.buffer[this.position++]=~e}Te(e){const t=e+this.position;if(t<=this.buffer.length)return;let r=2*this.buffer.length;r<t&&(r=t);const i=new Uint8Array(r);i.set(this.buffer),this.buffer=i}}class Lb{constructor(e){this.Se=e}oe(e){this.Se.fe(e)}se(e){this.Se.ye(e)}ne(e){this.Se.Ie(e)}te(){this.Se.Re()}}class cN{constructor(e){this.Se=e}oe(e){this.Se.we(e)}se(e){this.Se.pe(e)}ne(e){this.Se.Ae(e)}te(){this.Se.be()}}class FS{constructor(){this.Se=new uN,this.De=new Lb(this.Se),this.Ce=new cN(this.Se)}seed(e){this.Se.seed(e)}Ne(e){return 0===e?this.De:this.Ce}Ve(){return this.Se.Ve()}reset(){this.Se.reset()}}class Ub{constructor(e,t,r,i){this.indexId=e,this.documentKey=t,this.arrayValue=r,this.directionalValue=i}}function Vb(n,e){let t=n.indexId-e.indexId;return 0!==t?t:(t=Ct.comparator(n.documentKey,e.documentKey),0!==t?t:(t=LS(n.arrayValue,e.arrayValue),0!==t?t:LS(n.directionalValue,e.directionalValue)))}function LS(n,e){for(let t=0;t<n.length&&t<e.length;++t){const r=n[t]-e[t];if(0!==r)return r}return n.length-e.length}class lN{constructor(){this.xe=new Bb}addToCollectionParentIndex(e,t){return this.xe.add(t),Se.resolve()}getCollectionParents(e,t){return Se.resolve(this.xe.getEntries(t))}addFieldIndex(e,t){return Se.resolve()}deleteFieldIndex(e,t){return Se.resolve()}getDocumentsMatchingTarget(e,t,r){return Se.resolve(Mn())}getFieldIndex(e,t){return Se.resolve(null)}getFieldIndexes(e,t){return Se.resolve([])}getNextCollectionGroupToUpdate(e){return Se.resolve(null)}updateCollectionGroup(e,t,r){return Se.resolve()}updateIndexEntries(e,t){return Se.resolve()}}class Bb{constructor(){this.index={}}add(e){const t=e.lastSegment(),r=e.popLast(),i=this.index[t]||new hr(Rn.comparator),a=!i.has(r);return this.index[t]=i.add(r),a}has(e){const t=e.lastSegment(),r=e.popLast(),i=this.index[t];return i&&i.has(r)}getEntries(e){return(this.index[e]||new hr(Rn.comparator)).toArray()}}class dN{constructor(e){this.user=e,this.ke=new Bb,this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.ke.has(t)){const r=t.lastSegment(),i=t.popLast();e.addOnCommittedListener(()=>{this.ke.add(t)});const a={collectionId:r,parent:pi(i)};return cp(e).put(a)}return Se.resolve()}getCollectionParents(e,t){const r=[],i=IDBKeyRange.bound([t,""],[Uf(t),""],!1,!0);return cp(e).qt(i).next(a=>{for(const c of a){if(c.collectionId!==t)break;r.push(lo(c.parent))}return r})}addFieldIndex(e,t){const r=Hd(e),i=new Xi((a=t).indexId,a.collectionGroup,a.fields.map(c=>[c.fieldPath.canonicalString(),c.kind]));var a;return delete i.indexId,r.add(i).next()}deleteFieldIndex(e,t){const r=Hd(e),i=_a(e),a=dE(e);return r.delete(t.indexId).next(()=>i.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))).next(()=>a.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))}getDocumentsMatchingTarget(e,t,r){return Se.resolve(Mn())}getFieldIndex(e,t){return Se.resolve(null)}Oe(e,t){const r=new FS;for(const i of e.fields.filter(c=>2!==c.kind)){const a=t.data.field(i.fieldPath);if(null==a)return null;const c=r.Ne(i.kind);up.le.Xt(a,c)}return r.Ve()}Me(e){const t=new FS;return up.le.Xt(e,t.Ne(0)),t.Ve()}getFieldIndexes(e,t){const r=Hd(e),i=_a(e);return(t?r.qt(Xi.collectionGroupIndex,IDBKeyRange.bound(t,t)):r.qt()).next(a=>{const c=[];return Se.forEach(a,h=>i.get([h.indexId,this.uid]).next(g=>{c.push(function(v,C){const D=C?new jf(C.sequenceNumber,new Fm(yu(C.readTime),new Ct(lo(C.documentKey)),C.largestBatchId)):jf.empty(),x=v.fields.map(([k,B])=>new Om(Kr.fromServerFormat(k),B));return new Uv(v.indexId,v.collectionGroup,x,D)}(h,g))})).next(()=>c)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(t=>0===t.length?null:(t.sort((r,i)=>r.indexState.sequenceNumber-i.indexState.sequenceNumber),t[0].collectionGroup))}updateCollectionGroup(e,t,r){const i=Hd(e),a=_a(e);return this.$e(e).next(c=>i.qt(Xi.collectionGroupIndex,IDBKeyRange.bound(t,t)).next(h=>Se.forEach(h,g=>{return a.put(new Bs(g.indexId,this.user.uid||"",c,$c((x=r).readTime),pi(x.documentKey.path),x.largestBatchId));var x})))}updateIndexEntries(e,t){const r=new Map;return Se.forEach(t,(i,a)=>{const c=r.get(i.collectionGroup);return(c?Se.resolve(c):this.getFieldIndexes(e,i.collectionGroup)).next(h=>(r.set(i.collectionGroup,h),Se.forEach(h,g=>this.Fe(e,i,g).next(v=>{const C=this.Be(a,g);return v.isEqual(C)?Se.resolve():this.Le(e,a,v,C)}))))})}Ue(e,t,r){return dE(e).put(new Qn(r.indexId,this.uid,r.arrayValue,r.directionalValue,pi(t.key.path)))}qe(e,t,r){return dE(e).delete([r.indexId,this.uid,r.arrayValue,r.directionalValue,pi(t.key.path)])}Fe(e,t,r){const i=dE(e);let a=new hr(Vb);return i.Qt({index:Qn.documentKeyIndex,range:IDBKeyRange.only([r.indexId,this.uid,pi(t.path)])},(c,h)=>{a=a.add(new Ub(r.indexId,t,h.arrayValue,h.directionalValue))}).next(()=>a)}Be(e,t){let r=new hr(Vb);const i=this.Oe(t,e);if(null==i)return r;const a=t.fields.find(h=>2===h.kind);if(null!=a){const c=e.data.field(a.fieldPath);if(Ov(c))for(const h of c.arrayValue.values||[])r=r.add(new Ub(t.indexId,e.key,this.Me(h),i))}else r=r.add(new Ub(t.indexId,e.key,new Uint8Array,i));return r}Le(e,t,r,i){Je("IndexedDbIndexManager","Updating index entries for document '%s'",t.key);const a=[];return function(c,h,g,v,C){const D=c.getIterator(),x=h.getIterator();let k=uo(D),B=uo(x);for(;k||B;){let ge=!1,xe=!1;if(k&&B){const bt=g(k,B);bt<0?xe=!0:bt>0&&(ge=!0)}else null!=k?xe=!0:ge=!0;ge?(v(B),B=uo(x)):xe?(C(k),k=uo(D)):(k=uo(D),B=uo(x))}}(r,i,Vb,c=>{a.push(this.Ue(e,t,c))},c=>{a.push(this.qe(e,t,c))}),Se.waitFor(a)}$e(e){let t=1;return _a(e).Qt({index:Bs.sequenceNumberIndex,reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(r,i,a)=>{a.done(),t=i.sequenceNumber+1}).next(()=>t)}}function cp(n){return Qr(n,Bc.store)}function dE(n){return Qr(n,Qn.store)}function Hd(n){return Qr(n,Xi.store)}function _a(n){return Qr(n,Bs.store)}const hE={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class es{constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}static withCacheSize(e){return new es(e,es.DEFAULT_COLLECTION_PERCENTILE,es.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}function jb(n,e,t){const r=n.store(sr.store),i=n.store(Si.store),a=[],c=IDBKeyRange.only(t.batchId);let h=0;const g=r.Qt({range:c},(C,D,x)=>(h++,x.delete()));a.push(g.next(()=>{Kt(1===h)}));const v=[];for(const C of t.mutations){const D=Si.key(e,C.key.path,t.batchId);a.push(i.delete(D)),v.push(C.key)}return Se.waitFor(a).next(()=>v)}function Wd(n){if(!n)return 0;let e;if(n.document)e=n.document;else if(n.unknownDocument)e=n.unknownDocument;else{if(!n.noDocument)throw Mt();e=n.noDocument}return JSON.stringify(e).length}es.DEFAULT_COLLECTION_PERCENTILE=10,es.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,es.DEFAULT=new es(41943040,es.DEFAULT_COLLECTION_PERCENTILE,es.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),es.DISABLED=new es(-1,0,0);class i_{constructor(e,t,r,i){this.userId=e,this.O=t,this.indexManager=r,this.referenceDelegate=i,this.Ke={}}static Jt(e,t,r,i){Kt(""!==e.uid);const a=e.isAuthenticated()?e.uid:"";return new i_(a,t,r,i)}checkEmpty(e){let t=!0;const r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return ya(e).Qt({index:sr.userMutationsIndex,range:r},(i,a,c)=>{t=!1,c.done()}).next(()=>t)}addMutationBatch(e,t,r,i){const a=lp(e),c=ya(e);return c.add({}).next(h=>{Kt("number"==typeof h);const g=new oE(h,t,r,i),v=function(x,k,B){const ge=B.baseMutations.map(bt=>ep(x.Ht,bt)),xe=B.mutations.map(bt=>ep(x.Ht,bt));return new sr(k,B.batchId,B.localWriteTime.toMillis(),ge,xe)}(this.O,this.userId,g),C=[];let D=new hr((x,k)=>bn(x.canonicalString(),k.canonicalString()));for(const x of i){const k=Si.key(this.userId,x.key.path,h);D=D.add(x.key.path.popLast()),C.push(c.put(v)),C.push(a.put(k,Si.PLACEHOLDER))}return D.forEach(x=>{C.push(this.indexManager.addToCollectionParentIndex(e,x))}),e.addOnCommittedListener(()=>{this.Ke[h]=g.keys()}),Se.waitFor(C).next(()=>g)})}lookupMutationBatch(e,t){return ya(e).get(t).next(r=>r?(Kt(r.userId===this.userId),Hc(this.O,r)):null)}Ge(e,t){return this.Ke[t]?Se.resolve(this.Ke[t]):this.lookupMutationBatch(e,t).next(r=>{if(r){const i=r.keys();return this.Ke[t]=i,i}return null})}getNextMutationBatchAfterBatchId(e,t){const r=t+1,i=IDBKeyRange.lowerBound([this.userId,r]);let a=null;return ya(e).Qt({index:sr.userMutationsIndex,range:i},(c,h,g)=>{h.userId===this.userId&&(Kt(h.batchId>=r),a=Hc(this.O,h)),g.done()}).next(()=>a)}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let r=-1;return ya(e).Qt({index:sr.userMutationsIndex,range:t,reverse:!0},(i,a,c)=>{r=a.batchId,c.done()}).next(()=>r)}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return ya(e).qt(sr.userMutationsIndex,t).next(r=>r.map(i=>Hc(this.O,i)))}getAllMutationBatchesAffectingDocumentKey(e,t){const r=Si.prefixForPath(this.userId,t.path),i=IDBKeyRange.lowerBound(r),a=[];return lp(e).Qt({range:i},(c,h,g)=>{const[v,C,D]=c,x=lo(C);if(v===this.userId&&t.path.isEqual(x))return ya(e).get(D).next(k=>{if(!k)throw Mt();Kt(k.userId===this.userId),a.push(Hc(this.O,k))});g.done()}).next(()=>a)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new hr(bn);const i=[];return t.forEach(a=>{const c=Si.prefixForPath(this.userId,a.path),h=IDBKeyRange.lowerBound(c),g=lp(e).Qt({range:h},(v,C,D)=>{const[x,k,B]=v,ge=lo(k);x===this.userId&&a.path.isEqual(ge)?r=r.add(B):D.done()});i.push(g)}),Se.waitFor(i).next(()=>this.je(e,r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,i=r.length+1,a=Si.prefixForPath(this.userId,r),c=IDBKeyRange.lowerBound(a);let h=new hr(bn);return lp(e).Qt({range:c},(g,v,C)=>{const[D,x,k]=g,B=lo(x);D===this.userId&&r.isPrefixOf(B)?B.length===i&&(h=h.add(k)):C.done()}).next(()=>this.je(e,h))}je(e,t){const r=[],i=[];return t.forEach(a=>{i.push(ya(e).get(a).next(c=>{if(null===c)throw Mt();Kt(c.userId===this.userId),r.push(Hc(this.O,c))}))}),Se.waitFor(i).next(()=>r)}removeMutationBatch(e,t){return jb(e.zt,this.userId,t).next(r=>(e.addOnCommittedListener(()=>{this.Qe(t.batchId)}),Se.forEach(r,i=>this.referenceDelegate.markPotentiallyOrphaned(e,i))))}Qe(e){delete this.Ke[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(t=>{if(!t)return Se.resolve();const r=IDBKeyRange.lowerBound(Si.prefixForUser(this.userId)),i=[];return lp(e).Qt({range:r},(a,c,h)=>{if(a[0]===this.userId){const g=lo(a[1]);i.push(g)}else h.done()}).next(()=>{Kt(0===i.length)})})}containsKey(e,t){return fE(e,this.userId,t)}We(e){return pE(e).get(this.userId).next(t=>t||new mu(this.userId,-1,""))}}function fE(n,e,t){const r=Si.prefixForPath(e,t.path),i=r[1],a=IDBKeyRange.lowerBound(r);let c=!1;return lp(n).Qt({range:a,jt:!0},(h,g,v)=>{const[C,D,x]=h;C===e&&D===i&&(c=!0),v.done()}).next(()=>c)}function ya(n){return Qr(n,sr.store)}function lp(n){return Qr(n,Si.store)}function pE(n){return Qr(n,mu.store)}class jo{constructor(e){this.ze=e}next(){return this.ze+=2,this.ze}static He(){return new jo(0)}static Je(){return new jo(-1)}}class $b{constructor(e,t){this.referenceDelegate=e,this.O=t}allocateTargetId(e){return this.Ye(e).next(t=>{const r=new jo(t.highestTargetId);return t.highestTargetId=r.next(),this.Xe(e,t).next(()=>t.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.Ye(e).next(t=>Zt.fromTimestamp(new _n(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.Ye(e).next(t=>t.highestListenSequenceNumber)}setTargetsMetadata(e,t,r){return this.Ye(e).next(i=>(i.highestListenSequenceNumber=t,r&&(i.lastRemoteSnapshotVersion=r.toTimestamp()),t>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=t),this.Xe(e,i)))}addTargetData(e,t){return this.Ze(e,t).next(()=>this.Ye(e).next(r=>(r.targetCount+=1,this.tn(t,r),this.Xe(e,r))))}updateTargetData(e,t){return this.Ze(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next(()=>dp(e).delete(t.targetId)).next(()=>this.Ye(e)).next(r=>(Kt(r.targetCount>0),r.targetCount-=1,this.Xe(e,r)))}removeTargets(e,t,r){let i=0;const a=[];return dp(e).Qt((c,h)=>{const g=ap(h);g.sequenceNumber<=t&&null===r.get(g.targetId)&&(i++,a.push(this.removeTargetData(e,g)))}).next(()=>Se.waitFor(a)).next(()=>i)}forEachTarget(e,t){return dp(e).Qt((r,i)=>{const a=ap(i);t(a)})}Ye(e){return US(e).get(Ji.key).next(t=>(Kt(null!==t),t))}Xe(e,t){return US(e).put(Ji.key,t)}Ze(e,t){return dp(e).put(uE(this.O,t))}tn(e,t){let r=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,r=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,r=!0),r}getTargetCount(e){return this.Ye(e).next(t=>t.targetCount)}getTargetData(e,t){const r=$f(t),i=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]);let a=null;return dp(e).Qt({range:i,index:Qi.queryTargetsIndexName},(c,h,g)=>{const v=ap(h);ha(t,v.target)&&(a=v,g.done())}).next(()=>a)}addMatchingKeys(e,t,r){const i=[],a=Wc(e);return t.forEach(c=>{const h=pi(c.path);i.push(a.put(new ii(r,h))),i.push(this.referenceDelegate.addReference(e,r,c))}),Se.waitFor(i)}removeMatchingKeys(e,t,r){const i=Wc(e);return Se.forEach(t,a=>{const c=pi(a.path);return Se.waitFor([i.delete([r,c]),this.referenceDelegate.removeReference(e,r,a)])})}removeMatchingKeysForTargetId(e,t){const r=Wc(e),i=IDBKeyRange.bound([t],[t+1],!1,!0);return r.delete(i)}getMatchingKeysForTargetId(e,t){const r=IDBKeyRange.bound([t],[t+1],!1,!0),i=Wc(e);let a=Mn();return i.Qt({range:r,jt:!0},(c,h,g)=>{const v=lo(c[1]),C=new Ct(v);a=a.add(C)}).next(()=>a)}containsKey(e,t){const r=pi(t.path),i=IDBKeyRange.bound([r],[Uf(r)],!1,!0);let a=0;return Wc(e).Qt({index:ii.documentTargetsIndex,jt:!0,range:i},([c,h],g,v)=>{0!==c&&(a++,v.done())}).next(()=>a>0)}Tt(e,t){return dp(e).get(t).next(r=>r?ap(r):null)}}function dp(n){return Qr(n,Qi.store)}function US(n){return Qr(n,Ji.store)}function Wc(n){return Qr(n,ii.store)}function zc(n){return hp.apply(this,arguments)}function hp(){return hp=(0,Ce.Z)(function*(n){if(n.code!==ve.FAILED_PRECONDITION||n.message!==Bd)throw n;Je("LocalStore","Unexpectedly lost primary lease")}),hp.apply(this,arguments)}function Hb([n,e],[t,r]){const i=bn(n,t);return 0===i?bn(e,r):i}class hN{constructor(e){this.en=e,this.buffer=new hr(Hb),this.nn=0}sn(){return++this.nn}rn(e){const t=[e,this.sn()];if(this.buffer.size<this.en)this.buffer=this.buffer.add(t);else{const r=this.buffer.last();Hb(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}}class VS{constructor(e,t){this.garbageCollector=e,this.asyncQueue=t,this.on=!1,this.cn=null}start(e){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.un(e)}stop(){this.cn&&(this.cn.cancel(),this.cn=null)}get started(){return null!==this.cn}un(e){var t=this;const r=this.on?3e5:6e4;Je("LruGarbageCollector",`Garbage collection scheduled in ${r}ms`),this.cn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",r,(0,Ce.Z)(function*(){t.cn=null,t.on=!0;try{yield e.collectGarbage(t.garbageCollector)}catch(i){ga(i)?Je("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",i):yield zc(i)}yield t.un(e)}))}}class gE{constructor(e,t){this.an=e,this.params=t}calculateTargetCount(e,t){return this.an.hn(e).next(r=>Math.floor(t/100*r))}nthSequenceNumber(e,t){if(0===t)return Se.resolve(gs.A);const r=new hN(t);return this.an.forEachTarget(e,i=>r.rn(i.sequenceNumber)).next(()=>this.an.ln(e,i=>r.rn(i))).next(()=>r.maxValue)}removeTargets(e,t,r){return this.an.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.an.removeOrphanedDocuments(e,t)}collect(e,t){return-1===this.params.cacheSizeCollectionThreshold?(Je("LruGarbageCollector","Garbage collection skipped; disabled"),Se.resolve(hE)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(Je("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),hE):this.fn(e,t))}getCacheSize(e){return this.an.getCacheSize(e)}fn(e,t){let r,i,a,c,h,g,v;const C=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(D=>(D>this.params.maximumSequenceNumbersToCollect?(Je("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${D}`),i=this.params.maximumSequenceNumbersToCollect):i=D,c=Date.now(),this.nthSequenceNumber(e,i))).next(D=>(r=D,h=Date.now(),this.removeTargets(e,r,t))).next(D=>(a=D,g=Date.now(),this.removeOrphanedDocuments(e,r))).next(D=>(v=Date.now(),Mm()<=no.in.DEBUG&&Je("LruGarbageCollector",`LRU Garbage Collection\n\tCounted targets in ${c-C}ms\n\tDetermined least recently used ${i} in `+(h-c)+`ms\n\tRemoved ${a} targets in `+(g-h)+`ms\n\tRemoved ${D} documents in `+(v-g)+`ms\nTotal Duration: ${v-C}ms`),Se.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:a,documentsRemoved:D})))}}class BS{constructor(e,t){this.db=e,this.garbageCollector=new gE(this,t)}hn(e){const t=this.dn(e);return this.db.getTargetCache().getTargetCount(e).next(r=>t.next(i=>r+i))}dn(e){let t=0;return this.ln(e,r=>{t++}).next(()=>t)}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}ln(e,t){return this._n(e,(r,i)=>t(i))}addReference(e,t,r){return Ai(e,r)}removeReference(e,t,r){return Ai(e,r)}removeTargets(e,t,r){return this.db.getTargetCache().removeTargets(e,t,r)}markPotentiallyOrphaned(e,t){return Ai(e,t)}wn(e,t){return function(r,i){let a=!1;return pE(r).Wt(c=>fE(r,c,i).next(h=>(h&&(a=!0),Se.resolve(!h)))).next(()=>a)}(e,t)}removeOrphanedDocuments(e,t){const r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[];let a=0;return this._n(e,(c,h)=>{if(h<=t){const g=this.wn(e,c).next(v=>{if(!v)return a++,r.getEntry(e,c).next(()=>(r.removeEntry(c,Zt.min()),Wc(e).delete([0,pi(c.path)])))});i.push(g)}}).next(()=>Se.waitFor(i)).next(()=>r.apply(e)).next(()=>a)}removeTarget(e,t){const r=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)}updateLimboDocument(e,t){return Ai(e,t)}_n(e,t){const r=Wc(e);let i,a=gs.A;return r.Qt({index:ii.documentTargetsIndex},([c,h],{path:g,sequenceNumber:v})=>{0===c?(a!==gs.A&&t(new Ct(lo(i)),a),a=v,i=g):a=gs.A}).next(()=>{a!==gs.A&&t(new Ct(lo(i)),a)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function Ai(n,e){return Wc(n).put((r=n.currentSequenceNumber,new ii(0,pi(e.path),r)));var r}class zd{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={}}get(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0!==r)for(const[i,a]of r)if(this.equalsFn(i,e))return a}has(e){return void 0!==this.get(e)}set(e,t){const r=this.mapKeyFn(e),i=this.inner[r];if(void 0!==i){for(let a=0;a<i.length;a++)if(this.equalsFn(i[a][0],e))return void(i[a]=[e,t]);i.push([e,t])}else this.inner[r]=[[e,t]]}delete(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0===r)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return 1===r.length?delete this.inner[t]:r.splice(i,1),!0;return!1}forEach(e){xc(this.inner,(t,r)=>{for(const[i,a]of r)e(i,a)})}isEmpty(){return GI(this.inner)}}class s_{constructor(){this.changes=new zd(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,Gn.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const r=this.changes.get(t);return void 0!==r?Se.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class jS{constructor(e){this.O=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,r){return va(e).put(fp(t),r)}removeEntry(e,t){const r=va(e),i=fp(t);return r.delete(i)}updateMetadata(e,t){return this.getMetadata(e).next(r=>(r.byteSize+=t,this.mn(e,r)))}getEntry(e,t){return va(e).get(fp(t)).next(r=>this.gn(t,r))}yn(e,t){return va(e).get(fp(t)).next(r=>({document:this.gn(t,r),size:Wd(r)}))}getEntries(e,t){let r=fi();return this.pn(e,t,(i,a)=>{const c=this.gn(i,a);r=r.insert(i,c)}).next(()=>r)}In(e,t){let r=fi(),i=new vr(Ct.comparator);return this.pn(e,t,(a,c)=>{const h=this.gn(a,c);r=r.insert(a,h),i=i.insert(a,Wd(c))}).next(()=>({documents:r,En:i}))}pn(e,t,r){if(t.isEmpty())return Se.resolve();const i=IDBKeyRange.bound(t.first().path.toArray(),t.last().path.toArray()),a=t.getIterator();let c=a.getNext();return va(e).Qt({range:i},(h,g,v)=>{const C=Ct.fromSegments(h);for(;c&&Ct.comparator(c,C)<0;)r(c,null),c=a.getNext();c&&c.isEqual(C)&&(r(c,g),c=a.hasNext()?a.getNext():null),c?v.Ut(c.path.toArray()):v.done()}).next(()=>{for(;c;)r(c,null),c=a.hasNext()?a.getNext():null})}getAll(e,t,r){let i=fi();const a=t.length+1,c={};if(r.isEqual(Zt.min())){const h=t.toArray();c.range=IDBKeyRange.lowerBound(h)}else{const h=t.toArray(),g=Nb(r);c.range=IDBKeyRange.lowerBound([h,g],!0),c.index=fr.collectionReadTimeIndex}return va(e).Qt(c,(h,g,v)=>{if(h.length!==a)return;const C=this.gn(Ct.fromSegments(h),g);t.isPrefixOf(C.key.path)?i=i.insert(C.key,C):v.done()}).next(()=>i)}newChangeBuffer(e){return new $S(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(t=>t.byteSize)}getMetadata(e){return o_(e).get(ho.key).next(t=>(Kt(!!t),t))}mn(e,t){return o_(e).put(ho.key,t)}gn(e,t){if(t){const r=e_(this.O,t);if(!r.isNoDocument()||!r.version.isEqual(Zt.min()))return r}return Gn.newInvalidDocument(e)}}class $S extends s_{constructor(e,t){super(),this.Tn=e,this.trackRemovals=t,this.An=new zd(r=>r.toString(),(r,i)=>r.isEqual(i))}applyChanges(e){const t=[];let r=0,i=new hr((a,c)=>bn(a.canonicalString(),c.canonicalString()));return this.changes.forEach((a,c)=>{const h=this.An.get(a);if(c.isValidDocument()){const g=t_(this.Tn.O,c);i=i.add(a.path.popLast()),r+=Wd(g)-h,t.push(this.Tn.addEntry(e,a,g))}else if(r-=h,this.trackRemovals){const g=t_(this.Tn.O,c.convertToNoDocument(Zt.min()));t.push(this.Tn.addEntry(e,a,g))}else t.push(this.Tn.removeEntry(e,a))}),i.forEach(a=>{t.push(this.Tn.indexManager.addToCollectionParentIndex(e,a))}),t.push(this.Tn.updateMetadata(e,r)),Se.waitFor(t)}getFromCache(e,t){return this.Tn.yn(e,t).next(r=>(this.An.set(t,r.size),r.document))}getAllFromCache(e,t){return this.Tn.In(e,t).next(({documents:r,En:i})=>(i.forEach((a,c)=>{this.An.set(a,c)}),r))}}function o_(n){return Qr(n,ho.store)}function va(n){return Qr(n,fr.store)}function fp(n){return n.path.toArray()}class HS{constructor(e){this.O=e}kt(e,t,r,i){const a=new Jm("createOrUpgrade",t);var h;r<1&&i>=1&&(e.createObjectStore(Ui.store),(h=e).createObjectStore(mu.store,{keyPath:mu.keyPath}),h.createObjectStore(sr.store,{keyPath:sr.keyPath,autoIncrement:!0}).createIndex(sr.userMutationsIndex,sr.userMutationsKeyPath,{unique:!0}),h.createObjectStore(Si.store),mE(e),function(h){h.createObjectStore(fr.store)}(e));let c=Se.resolve();return r<3&&i>=3&&(0!==r&&(function(h){h.deleteObjectStore(ii.store),h.deleteObjectStore(Qi.store),h.deleteObjectStore(Ji.store)}(e),mE(e)),c=c.next(()=>function(h){const g=h.store(Ji.store),v=new Ji(0,0,Zt.min().toTimestamp(),0);return g.put(Ji.key,v)}(a))),r<4&&i>=4&&(0!==r&&(c=c.next(()=>function(h,g){return g.store(sr.store).qt().next(v=>{h.deleteObjectStore(sr.store),h.createObjectStore(sr.store,{keyPath:sr.keyPath,autoIncrement:!0}).createIndex(sr.userMutationsIndex,sr.userMutationsKeyPath,{unique:!0});const C=g.store(sr.store),D=v.map(x=>C.put(x));return Se.waitFor(D)})}(e,a))),c=c.next(()=>{!function(h){h.createObjectStore(Bo.store,{keyPath:Bo.keyPath})}(e)})),r<5&&i>=5&&(c=c.next(()=>this.Rn(a))),r<6&&i>=6&&(c=c.next(()=>(function(h){h.createObjectStore(ho.store)}(e),this.Pn(a)))),r<7&&i>=7&&(c=c.next(()=>this.bn(a))),r<8&&i>=8&&(c=c.next(()=>this.vn(e,a))),r<9&&i>=9&&(c=c.next(()=>{(function(h){h.objectStoreNames.contains("remoteDocumentChanges")&&h.deleteObjectStore("remoteDocumentChanges")})(e),function(h){const g=h.objectStore(fr.store);g.createIndex(fr.readTimeIndex,fr.readTimeIndexPath,{unique:!1}),g.createIndex(fr.collectionReadTimeIndex,fr.collectionReadTimeIndexPath,{unique:!1})}(t)})),r<10&&i>=10&&(c=c.next(()=>this.Vn(a))),r<11&&i>=11&&(c=c.next(()=>{(function(h){h.createObjectStore(jc.store,{keyPath:jc.keyPath})})(e),function(h){h.createObjectStore(Vd.store,{keyPath:Vd.keyPath})}(e)})),r<12&&i>=12&&(c=c.next(()=>{!function(h){const g=h.createObjectStore(Er.store,{keyPath:Er.keyPath});g.createIndex(Er.collectionPathOverlayIndex,Er.collectionPathOverlayIndexPath,{unique:!1}),g.createIndex(Er.collectionGroupOverlayIndex,Er.collectionGroupOverlayIndexPath,{unique:!1})}(e)})),r<13&&i>=13&&(c=c.next(()=>{!function(h){h.createObjectStore(Xi.store,{keyPath:Xi.keyPath,autoIncrement:!0}).createIndex(Xi.collectionGroupIndex,Xi.collectionGroupIndexPath,{unique:!1}),h.createObjectStore(Bs.store,{keyPath:Bs.keyPath}).createIndex(Bs.sequenceNumberIndex,Bs.sequenceNumberIndexPath,{unique:!1}),h.createObjectStore(Qn.store,{keyPath:Qn.keyPath}).createIndex(Qn.documentKeyIndex,Qn.documentKeyIndexPath,{unique:!1})}(e)})),c}Pn(e){let t=0;return e.store(fr.store).Qt((r,i)=>{t+=Wd(i)}).next(()=>{const r=new ho(t);return e.store(ho.store).put(ho.key,r)})}Rn(e){const t=e.store(mu.store),r=e.store(sr.store);return t.qt().next(i=>Se.forEach(i,a=>{const c=IDBKeyRange.bound([a.userId,-1],[a.userId,a.lastAcknowledgedBatchId]);return r.qt(sr.userMutationsIndex,c).next(h=>Se.forEach(h,g=>{Kt(g.userId===a.userId);const v=Hc(this.O,g);return jb(e,a.userId,v).next(()=>{})}))}))}bn(e){const t=e.store(ii.store),r=e.store(fr.store);return e.store(Ji.store).get(Ji.key).next(i=>{const a=[];return r.Qt((c,h)=>{const g=new Rn(c),v=[0,pi(g)];a.push(t.get(v).next(C=>C?Se.resolve():t.put(new ii(0,pi(g),i.highestListenSequenceNumber))))}).next(()=>Se.waitFor(a))})}vn(e,t){e.createObjectStore(Bc.store,{keyPath:Bc.keyPath});const r=t.store(Bc.store),i=new Bb,a=c=>{if(i.add(c)){const h=c.lastSegment(),g=c.popLast();return r.put({collectionId:h,parent:pi(g)})}};return t.store(fr.store).Qt({jt:!0},(c,h)=>{const g=new Rn(c);return a(g.popLast())}).next(()=>t.store(Si.store).Qt({jt:!0},([c,h,g],v)=>{const C=lo(h);return a(C.popLast())}))}Vn(e){const t=e.store(Qi.store);return t.Qt((r,i)=>{const a=ap(i),c=uE(this.O,a);return t.put(c)})}}function mE(n){n.createObjectStore(ii.store,{keyPath:ii.keyPath}).createIndex(ii.documentTargetsIndex,ii.documentTargetsKeyPath,{unique:!0}),n.createObjectStore(Qi.store,{keyPath:Qi.keyPath}).createIndex(Qi.queryTargetsIndexName,Qi.queryTargetsKeyPath,{unique:!0}),n.createObjectStore(Ji.store)}const a_="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class _E{constructor(e,t,r,i,a,c,h,g,v,C,D=12){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=r,this.Sn=a,this.window=c,this.document=h,this.Dn=v,this.Cn=C,this.schemaVersion=D,this.Nn=null,this.xn=!1,this.isPrimary=!1,this.networkEnabled=!0,this.kn=null,this.inForeground=!1,this.On=null,this.Mn=null,this.$n=Number.NEGATIVE_INFINITY,this.Fn=x=>Promise.resolve(),!_E.Vt())throw new qe(ve.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new BS(this,i),this.Bn=t+"main",this.O=new Pb(g),this.Ln=new js(this.Bn,this.schemaVersion,new HS(this.O)),this.Un=new $b(this.referenceDelegate,this.O),this.qn=new jS(this.O),this.Kn=new kb,this.window&&this.window.localStorage?this.Gn=this.window.localStorage:(this.Gn=null,!1===C&&Or("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.jn().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new qe(ve.FAILED_PRECONDITION,a_);return this.Qn(),this.Wn(),this.zn(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.Un.getHighestSequenceNumber(e))}).then(e=>{this.Nn=new gs(e,this.Dn)}).then(()=>{this.xn=!0}).catch(e=>(this.Ln&&this.Ln.close(),Promise.reject(e)))}Hn(e){var t=this;return this.Fn=function(){var r=(0,Ce.Z)(function*(i){if(t.started)return e(i)});return function(i){return r.apply(this,arguments)}}(),e(this.isPrimary)}setDatabaseDeletedListener(e){this.Ln.Mt(function(){var t=(0,Ce.Z)(function*(r){null===r.newVersion&&(yield e())});return function(r){return t.apply(this,arguments)}}())}setNetworkEnabled(e){var t=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.Sn.enqueueAndForget((0,Ce.Z)(function*(){t.started&&(yield t.jn())})))}jn(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>Gd(e).put(new Bo(this.clientId,Date.now(),this.networkEnabled,this.inForeground)).next(()=>{if(this.isPrimary)return this.Jn(e).next(t=>{t||(this.isPrimary=!1,this.Sn.enqueueRetryable(()=>this.Fn(!1)))})}).next(()=>this.Yn(e)).next(t=>this.isPrimary&&!t?this.Xn(e).next(()=>!1):!!t&&this.Zn(e).next(()=>!0))).catch(e=>{if(ga(e))return Je("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return Je("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.Sn.enqueueRetryable(()=>this.Fn(e)),this.isPrimary=e})}Jn(e){return pp(e).get(Ui.key).next(t=>Se.resolve(this.ts(t)))}es(e){return Gd(e).delete(this.clientId)}ns(){var e=this;return(0,Ce.Z)(function*(){if(e.isPrimary&&!e.ss(e.$n,18e5)){e.$n=Date.now();const t=yield e.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",r=>{const i=Qr(r,Bo.store);return i.qt().next(a=>{const c=e.rs(a,18e5),h=a.filter(g=>-1===c.indexOf(g));return Se.forEach(h,g=>i.delete(g.clientId)).next(()=>h)})}).catch(()=>[]);if(e.Gn)for(const r of t)e.Gn.removeItem(e.os(r.clientId))}})()}zn(){this.Mn=this.Sn.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.jn().then(()=>this.ns()).then(()=>this.zn()))}ts(e){return!!e&&e.ownerId===this.clientId}Yn(e){return this.Cn?Se.resolve(!0):pp(e).get(Ui.key).next(t=>{if(null!==t&&this.ss(t.leaseTimestampMs,5e3)&&!this.cs(t.ownerId)){if(this.ts(t)&&this.networkEnabled)return!0;if(!this.ts(t)){if(!t.allowTabSynchronization)throw new qe(ve.FAILED_PRECONDITION,a_);return!1}}return!(!this.networkEnabled||!this.inForeground)||Gd(e).qt().next(r=>void 0===this.rs(r,5e3).find(i=>{if(this.clientId!==i.clientId){const c=!this.inForeground&&i.inForeground,h=this.networkEnabled===i.networkEnabled;if(!this.networkEnabled&&i.networkEnabled||c&&h)return!0}return!1}))}).next(t=>(this.isPrimary!==t&&Je("IndexedDbPersistence",`Client ${t?"is":"is not"} eligible for a primary lease.`),t))}shutdown(){var e=this;return(0,Ce.Z)(function*(){e.xn=!1,e.us(),e.Mn&&(e.Mn.cancel(),e.Mn=null),e.hs(),e.ls(),yield e.Ln.runTransaction("shutdown","readwrite",[Ui.store,Bo.store],t=>{const r=new kS(t,gs.A);return e.Xn(r).next(()=>e.es(r))}),e.Ln.close(),e.fs()})()}rs(e,t){return e.filter(r=>this.ss(r.updateTimeMs,t)&&!this.cs(r.clientId))}ds(){return this.runTransaction("getActiveClients","readonly",e=>Gd(e).qt().next(t=>this.rs(t,18e5).map(r=>r.clientId)))}get started(){return this.xn}getMutationQueue(e,t){return i_.Jt(e,this.O,t,this.referenceDelegate)}getTargetCache(){return this.Un}getRemoteDocumentCache(){return this.qn}getIndexManager(e){return new dN(e)}getDocumentOverlayCache(e){return r_.Jt(this.O,e)}getBundleCache(){return this.Kn}runTransaction(e,t,r){Je("IndexedDbPersistence","Starting transaction:",e);const i="readonly"===t?"readonly":"readwrite",a=13===(c=this.schemaVersion)?aN:12===c?Ab:11===c?Sb:void Mt();var c;let h;return this.Ln.runTransaction(e,i,a,g=>(h=new kS(g,this.Nn?this.Nn.next():gs.A),"readwrite-primary"===t?this.Jn(h).next(v=>!!v||this.Yn(h)).next(v=>{if(!v)throw Or(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.Sn.enqueueRetryable(()=>this.Fn(!1)),new qe(ve.FAILED_PRECONDITION,Bd);return r(h)}).next(v=>this.Zn(h).next(()=>v)):this._s(h).next(()=>r(h)))).then(g=>(h.raiseOnCommittedEvent(),g))}_s(e){return pp(e).get(Ui.key).next(t=>{if(null!==t&&this.ss(t.leaseTimestampMs,5e3)&&!this.cs(t.ownerId)&&!this.ts(t)&&!(this.Cn||this.allowTabSynchronization&&t.allowTabSynchronization))throw new qe(ve.FAILED_PRECONDITION,a_)})}Zn(e){const t=new Ui(this.clientId,this.allowTabSynchronization,Date.now());return pp(e).put(Ui.key,t)}static Vt(){return js.Vt()}Xn(e){const t=pp(e);return t.get(Ui.key).next(r=>this.ts(r)?(Je("IndexedDbPersistence","Releasing primary lease."),t.delete(Ui.key)):Se.resolve())}ss(e,t){const r=Date.now();return!(e<r-t||e>r&&(Or(`Detected an update time that is in the future: ${e} > ${r}`),1))}Qn(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.On=()=>{this.Sn.enqueueAndForget(()=>(this.inForeground="visible"===this.document.visibilityState,this.jn()))},this.document.addEventListener("visibilitychange",this.On),this.inForeground="visible"===this.document.visibilityState)}hs(){this.On&&(this.document.removeEventListener("visibilitychange",this.On),this.On=null)}Wn(){var e;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.kn=()=>{this.us(),(0,Z.G6)()&&navigator.appVersion.match(/Version\/1[45]/)&&this.Sn.enterRestrictedMode(!0),this.Sn.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.kn))}ls(){this.kn&&(this.window.removeEventListener("pagehide",this.kn),this.kn=null)}cs(e){var t;try{const r=null!==(null===(t=this.Gn)||void 0===t?void 0:t.getItem(this.os(e)));return Je("IndexedDbPersistence",`Client '${e}' ${r?"is":"is not"} zombied in LocalStorage`),r}catch(r){return Or("IndexedDbPersistence","Failed to get zombied client id.",r),!1}}us(){if(this.Gn)try{this.Gn.setItem(this.os(this.clientId),String(Date.now()))}catch(e){Or("Failed to set zombie client id.",e)}}fs(){if(this.Gn)try{this.Gn.removeItem(this.os(this.clientId))}catch(e){}}os(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function pp(n){return Qr(n,Ui.store)}function Gd(n){return Qr(n,Bo.store)}function ms(n,e){let t=n.projectId;return n.isDefaultDatabase||(t+="."+n.database),"firestore/"+e+"/"+t+"/"}class WS{constructor(e,t){this.progress=e,this.ws=t}}class fN{constructor(e,t,r){this.qn=e,this.gs=t,this.indexManager=r}ys(e,t){return this.gs.getAllMutationBatchesAffectingDocumentKey(e,t).next(r=>this.ps(e,t,r))}ps(e,t,r){return this.qn.getEntry(e,t).next(i=>{for(const a of r)a.applyToLocalView(i);return i})}Is(e,t){e.forEach((r,i)=>{for(const a of t)a.applyToLocalView(i)})}Es(e,t){return this.qn.getEntries(e,t).next(r=>this.Ts(e,r).next(()=>r))}Ts(e,t){return this.gs.getAllMutationBatchesAffectingDocumentKeys(e,t).next(r=>this.Is(t,r))}As(e,t,r){return Ct.isDocumentKey((i=t).path)&&null===i.collectionGroup&&0===i.filters.length?this.Rs(e,t.path):zv(t)?this.Ps(e,t,r):this.bs(e,t,r);var i}Rs(e,t){return this.ys(e,new Ct(t)).next(r=>{let i=Km();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}Ps(e,t,r){const i=t.collectionGroup;let a=Km();return this.indexManager.getCollectionParents(e,i).next(c=>Se.forEach(c,h=>{const g=(v=t,C=h.child(i),new fa(C,null,v.explicitOrderBy.slice(),v.filters.slice(),v.limit,v.limitType,v.startAt,v.endAt));var v,C;return this.bs(e,g,r).next(v=>{v.forEach((C,D)=>{a=a.insert(C,D)})})}).next(()=>a))}bs(e,t,r){let i;return this.qn.getAll(e,t.path,r).next(a=>(i=a,this.gs.getAllMutationBatchesAffectingQuery(e,t))).next(a=>{for(const c of a)for(const h of c.mutations){const g=h.key;let v=i.get(g);null==v&&(v=Gn.newInvalidDocument(g),i=i.insert(g,v)),zm(h,v,c.localWriteTime),v.isFoundDocument()||(i=i.remove(g))}}).next(()=>(i.forEach((a,c)=>{jm(t,c)||(i=i.remove(a))}),i))}}class yE{constructor(e,t,r,i){this.targetId=e,this.fromCache=t,this.vs=r,this.Vs=i}static Ss(e,t){let r=Mn(),i=Mn();for(const a of t.docChanges)switch(a.type){case 0:r=r.add(a.doc.key);break;case 1:i=i.add(a.doc.key)}return new yE(e,t.fromCache,r,i)}}class vE{Ds(e){this.Cs=e}As(e,t,r,i){return 0===(a=t).filters.length&&null===a.limit&&null==a.startAt&&null==a.endAt&&(0===a.explicitOrderBy.length||1===a.explicitOrderBy.length&&a.explicitOrderBy[0].field.isKeyField())||r.isEqual(Zt.min())?this.Ns(e,t):this.Cs.Es(e,i).next(a=>{const c=this.xs(t,a);return(Vm(t)||Bm(t))&&this.ks(t.limitType,c,i,r)?this.Ns(e,t):(Mm()<=no.in.DEBUG&&Je("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),qv(t)),this.Cs.As(e,t,r).next(h=>(c.forEach(g=>{h=h.insert(g.key,g)}),h)))});var a}xs(e,t){let r=new hr(tb(e));return t.forEach((i,a)=>{jm(e,a)&&(r=r.add(a))}),r}ks(e,t,r,i){if(r.size!==t.size)return!0;const a="F"===e?t.last():t.first();return!!a&&(a.hasPendingWrites||a.version.compareTo(i)>0)}Ns(e,t){return Mm()<=no.in.DEBUG&&Je("QueryEngine","Using full collection scan to execute query:",qv(t)),this.Cs.As(e,t,Zt.min())}}class zS{constructor(e,t,r,i){this.persistence=e,this.Os=t,this.O=i,this.Ms=new vr(bn),this.$s=new zd(a=>$f(a),ha),this.Fs=Zt.min(),this.Bs=e.getRemoteDocumentCache(),this.Un=e.getTargetCache(),this.Kn=e.getBundleCache(),this.Ls(r)}Ls(e){this.indexManager=this.persistence.getIndexManager(e),this.gs=this.persistence.getMutationQueue(e,this.indexManager),this.Us=new fN(this.Bs,this.gs,this.indexManager),this.Bs.setIndexManager(this.indexManager),this.Os.Ds(this.Us)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.Ms))}}function Wb(n,e,t,r){return new zS(n,e,t,r)}function EE(n,e){return wE.apply(this,arguments)}function wE(){return wE=(0,Ce.Z)(function*(n,e){const t=pt(n);return yield t.persistence.runTransaction("Handle user change","readonly",r=>{let i;return t.gs.getAllMutationBatches(r).next(a=>(i=a,t.Ls(e),t.gs.getAllMutationBatches(r))).next(a=>{const c=[],h=[];let g=Mn();for(const v of i){c.push(v.batchId);for(const C of v.mutations)g=g.add(C.key)}for(const v of a){h.push(v.batchId);for(const C of v.mutations)g=g.add(C.key)}return t.Us.Es(r,g).next(v=>({qs:v,removedBatchIds:c,addedBatchIds:h}))})})}),wE.apply(this,arguments)}function pN(n,e){const t=pt(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const i=e.batch.keys(),a=t.Bs.newChangeBuffer({trackRemovals:!0});return function(c,h,g,v){const C=g.batch,D=C.keys();let x=Se.resolve();return D.forEach(k=>{x=x.next(()=>v.getEntry(h,k)).next(B=>{const ge=g.docVersions.get(k);Kt(null!==ge),B.version.compareTo(ge)<0&&(C.applyToRemoteDocument(B,g),B.isValidDocument()&&(B.setReadTime(g.commitVersion),v.addEntry(B)))})}),x.next(()=>c.gs.removeMutationBatch(h,C))}(t,r,e,a).next(()=>a.apply(r)).next(()=>t.gs.performConsistencyCheck(r)).next(()=>t.Us.Es(r,i))})}function IE(n){const e=pt(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Un.getLastRemoteSnapshotVersion(t))}function zb(n,e){const t=pt(n),r=e.snapshotVersion;let i=t.Ms;return t.persistence.runTransaction("Apply remote event","readwrite-primary",a=>{const c=t.Bs.newChangeBuffer({trackRemovals:!0});i=t.Ms;const h=[];e.targetChanges.forEach((v,C)=>{const D=i.get(C);if(!D)return;h.push(t.Un.removeMatchingKeys(a,v.removedDocuments,C).next(()=>t.Un.addMatchingKeys(a,v.addedDocuments,C)));let x=D.withSequenceNumber(a.currentSequenceNumber);var k,B,ge;e.targetMismatches.has(C)?x=x.withResumeToken(Zr.EMPTY_BYTE_STRING,Zt.min()).withLastLimboFreeSnapshotVersion(Zt.min()):v.resumeToken.approximateByteSize()>0&&(x=x.withResumeToken(v.resumeToken,r)),i=i.insert(C,x),B=x,ge=v,(0===(k=D).resumeToken.approximateByteSize()||B.snapshotVersion.toMicroseconds()-k.snapshotVersion.toMicroseconds()>=3e8||ge.addedDocuments.size+ge.modifiedDocuments.size+ge.removedDocuments.size>0)&&h.push(t.Un.updateTargetData(a,x))});let g=fi();if(e.documentUpdates.forEach(v=>{e.resolvedLimboDocuments.has(v)&&h.push(t.persistence.referenceDelegate.updateLimboDocument(a,v))}),h.push(Gb(a,c,e.documentUpdates).next(v=>{g=v})),!r.isEqual(Zt.min())){const v=t.Un.getLastRemoteSnapshotVersion(a).next(C=>t.Un.setTargetsMetadata(a,a.currentSequenceNumber,r));h.push(v)}return Se.waitFor(h).next(()=>c.apply(a)).next(()=>t.Us.Ts(a,g)).next(()=>g)}).then(a=>(t.Ms=i,a))}function Gb(n,e,t){let r=Mn();return t.forEach(i=>r=r.add(i)),e.getEntries(n,r).next(i=>{let a=fi();return t.forEach((c,h)=>{const g=i.get(c);h.isNoDocument()&&h.version.isEqual(Zt.min())?(e.removeEntry(c,h.readTime),a=a.insert(c,h)):!g.isValidDocument()||h.version.compareTo(g.version)>0||0===h.version.compareTo(g.version)&&g.hasPendingWrites?(e.addEntry(h),a=a.insert(c,h)):Je("LocalStore","Ignoring outdated watch update for ",c,". Current version:",g.version," Watch version:",h.version)}),a})}function GS(n,e){const t=pt(n);return t.persistence.runTransaction("Get next mutation batch","readonly",r=>(void 0===e&&(e=-1),t.gs.getNextMutationBatchAfterBatchId(r,e)))}function Gc(n,e){const t=pt(n);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return t.Un.getTargetData(r,e).next(a=>a?(i=a,Se.resolve(i)):t.Un.allocateTargetId(r).next(c=>(i=new ma(e,c,0,r.currentSequenceNumber),t.Un.addTargetData(r,i).next(()=>i))))}).then(r=>{const i=t.Ms.get(r.targetId);return(null===i||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(t.Ms=t.Ms.insert(r.targetId,r),t.$s.set(e,r.targetId)),r})}function $o(n,e,t){return gp.apply(this,arguments)}function gp(){return gp=(0,Ce.Z)(function*(n,e,t){const r=pt(n),i=r.Ms.get(e),a=t?"readwrite":"readwrite-primary";try{t||(yield r.persistence.runTransaction("Release target",a,c=>r.persistence.referenceDelegate.removeTarget(c,i)))}catch(c){if(!ga(c))throw c;Je("LocalStore",`Failed to update sequence numbers for target ${e}: ${c}`)}r.Ms=r.Ms.remove(e),r.$s.delete(i.target)}),gp.apply(this,arguments)}function mp(n,e,t){const r=pt(n);let i=Zt.min(),a=Mn();return r.persistence.runTransaction("Execute query","readonly",c=>function(h,g,v){const C=pt(h),D=C.$s.get(v);return void 0!==D?Se.resolve(C.Ms.get(D)):C.Un.getTargetData(g,v)}(r,c,Vs(e)).next(h=>{if(h)return i=h.lastLimboFreeSnapshotVersion,r.Un.getMatchingKeysForTargetId(c,h.targetId).next(g=>{a=g})}).next(()=>r.Os.As(c,e,t?i:Zt.min(),t?a:Mn())).next(h=>({documents:h,Ks:a})))}function qb(n,e){const t=pt(n),r=pt(t.Un),i=t.Ms.get(e);return i?Promise.resolve(i.target):t.persistence.runTransaction("Get target data","readonly",a=>r.Tt(a,e).next(c=>c?c.target:null))}function bE(n){const e=pt(n);return e.persistence.runTransaction("Get new document changes","readonly",t=>function(r,i,a){const c=pt(r);let h=fi(),g=Nb(a);const v=va(i),C=IDBKeyRange.lowerBound(g,!0);return v.Qt({index:fr.readTimeIndex,range:C},(D,x)=>{const k=e_(c.O,x);h=h.insert(k.key,k),g=x.readTime}).next(()=>({ws:h,readTime:aE(g)}))}(e.Bs,t,e.Fs)).then(({ws:t,readTime:r})=>(e.Fs=r,t))}function CE(){return CE=(0,Ce.Z)(function*(n){const e=pt(n);return e.persistence.runTransaction("Synchronize last document change read time","readonly",t=>function(r){const i=va(r);let a=Zt.min();return i.Qt({index:fr.readTimeIndex,reverse:!0},(c,h,g)=>{h.readTime&&(a=aE(h.readTime)),g.done()}).next(()=>a)}(t)).then(t=>{e.Fs=t})}),CE.apply(this,arguments)}function Zb(){return Zb=(0,Ce.Z)(function*(n,e,t,r){const i=pt(n);let a=Mn(),c=fi();for(const v of t){const C=e.Gs(v.metadata.name);v.document&&(a=a.add(C));const D=e.js(v);D.setReadTime(e.Qs(v.metadata.readTime)),c=c.insert(C,D)}const h=i.Bs.newChangeBuffer({trackRemovals:!0}),g=yield Gc(i,(v=r,Vs(Md(Rn.fromString(`__bundle__/docs/${v}`)))));var v;return i.persistence.runTransaction("Apply bundle documents","readwrite",v=>Gb(v,h,c).next(C=>(h.apply(v),C)).next(C=>i.Un.removeMatchingKeysForTargetId(v,g.targetId).next(()=>i.Un.addMatchingKeys(v,a,g.targetId)).next(()=>i.Us.Ts(v,C)).next(()=>C)))}),Zb.apply(this,arguments)}function gN(n,e){return u_.apply(this,arguments)}function u_(){return u_=(0,Ce.Z)(function*(n,e,t=Mn()){const r=yield Gc(n,Vs(n_(e.bundledQuery))),i=pt(n);return i.persistence.runTransaction("Save named query","readwrite",a=>{const c=Yr(e.readTime);if(r.snapshotVersion.compareTo(c)>=0)return i.Kn.saveNamedQuery(a,e);const h=r.withResumeToken(Zr.EMPTY_BYTE_STRING,c);return i.Ms=i.Ms.insert(h.targetId,h),i.Un.updateTargetData(a,h).next(()=>i.Un.removeMatchingKeysForTargetId(a,r.targetId)).next(()=>i.Un.addMatchingKeys(a,t,r.targetId)).next(()=>i.Kn.saveNamedQuery(a,e))})}),u_.apply(this,arguments)}class KS{constructor(e){this.O=e,this.Ws=new Map,this.zs=new Map}getBundleMetadata(e,t){return Se.resolve(this.Ws.get(t))}saveBundleMetadata(e,t){var r;return this.Ws.set(t.id,{id:(r=t).id,version:r.version,createTime:Yr(r.createTime)}),Se.resolve()}getNamedQuery(e,t){return Se.resolve(this.zs.get(t))}saveNamedQuery(e,t){return this.zs.set(t.name,{name:(r=t).name,query:n_(r.bundledQuery),readTime:Yr(r.readTime)}),Se.resolve();var r}}class ZS{constructor(){this.overlays=new vr(Ct.comparator),this.Hs=new Map}getOverlay(e,t){return Se.resolve(this.overlays.get(t))}saveOverlays(e,t,r){return r.forEach(i=>{this.Yt(e,t,i)}),Se.resolve()}removeOverlaysForBatchId(e,t,r){const i=this.Hs.get(r);return void 0!==i&&(i.forEach(a=>this.overlays=this.overlays.remove(a)),this.Hs.delete(r)),Se.resolve()}getOverlaysForCollection(e,t,r){const i=new Map,a=t.length+1,c=new Ct(t.child("")),h=this.overlays.getIteratorFrom(c);for(;h.hasNext();){const g=h.getNext().value,v=g.getKey();if(!t.isPrefixOf(v.path))break;v.path.length===a&&g.largestBatchId>r&&i.set(g.getKey(),g)}return Se.resolve(i)}getOverlaysForCollectionGroup(e,t,r,i){let a=new vr((v,C)=>v-C);const c=this.overlays.getIterator();for(;c.hasNext();){const v=c.getNext().value;if(v.getKey().getCollectionGroup()===t&&v.largestBatchId>r){let C=a.get(v.largestBatchId);null===C&&(C=new Map,a=a.insert(v.largestBatchId,C)),C.set(v.getKey(),v)}}const h=new Map,g=a.getIterator();for(;g.hasNext()&&(g.getNext().value.forEach((v,C)=>h.set(C,v)),!(h.size>=i)););return Se.resolve(h)}Yt(e,t,r){if(null===r)return;const i=this.overlays.get(r.key);null!==i&&this.Hs.get(i.largestBatchId).delete(r.key),this.overlays=this.overlays.insert(r.key,new jd(t,r));let a=this.Hs.get(t);void 0===a&&(a=new Set,this.Hs.set(t,a)),a.add(r.key)}}class TE{constructor(){this.Js=new hr(gi.Ys),this.Xs=new hr(gi.Zs)}isEmpty(){return this.Js.isEmpty()}addReference(e,t){const r=new gi(e,t);this.Js=this.Js.add(r),this.Xs=this.Xs.add(r)}ti(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.ei(new gi(e,t))}ni(e,t){e.forEach(r=>this.removeReference(r,t))}si(e){const t=new Ct(new Rn([])),r=new gi(t,e),i=new gi(t,e+1),a=[];return this.Xs.forEachInRange([r,i],c=>{this.ei(c),a.push(c.key)}),a}ii(){this.Js.forEach(e=>this.ei(e))}ei(e){this.Js=this.Js.delete(e),this.Xs=this.Xs.delete(e)}ri(e){const t=new Ct(new Rn([])),r=new gi(t,e),i=new gi(t,e+1);let a=Mn();return this.Xs.forEachInRange([r,i],c=>{a=a.add(c.key)}),a}containsKey(e){const t=new gi(e,0),r=this.Js.firstAfterOrEqual(t);return null!==r&&e.isEqual(r.key)}}class gi{constructor(e,t){this.key=e,this.oi=t}static Ys(e,t){return Ct.comparator(e.key,t.key)||bn(e.oi,t.oi)}static Zs(e,t){return bn(e.oi,t.oi)||Ct.comparator(e.key,t.key)}}class mN{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.gs=[],this.ci=1,this.ui=new hr(gi.Ys)}checkEmpty(e){return Se.resolve(0===this.gs.length)}addMutationBatch(e,t,r,i){const a=this.ci;this.ci++;const c=new oE(a,t,r,i);this.gs.push(c);for(const h of i)this.ui=this.ui.add(new gi(h.key,a)),this.indexManager.addToCollectionParentIndex(e,h.key.path.popLast());return Se.resolve(c)}lookupMutationBatch(e,t){return Se.resolve(this.ai(t))}getNextMutationBatchAfterBatchId(e,t){const i=this.hi(t+1),a=i<0?0:i;return Se.resolve(this.gs.length>a?this.gs[a]:null)}getHighestUnacknowledgedBatchId(){return Se.resolve(0===this.gs.length?-1:this.ci-1)}getAllMutationBatches(e){return Se.resolve(this.gs.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const r=new gi(t,0),i=new gi(t,Number.POSITIVE_INFINITY),a=[];return this.ui.forEachInRange([r,i],c=>{const h=this.ai(c.oi);a.push(h)}),Se.resolve(a)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new hr(bn);return t.forEach(i=>{const a=new gi(i,0),c=new gi(i,Number.POSITIVE_INFINITY);this.ui.forEachInRange([a,c],h=>{r=r.add(h.oi)})}),Se.resolve(this.li(r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,i=r.length+1;let a=r;Ct.isDocumentKey(a)||(a=a.child(""));const c=new gi(new Ct(a),0);let h=new hr(bn);return this.ui.forEachWhile(g=>{const v=g.key.path;return!!r.isPrefixOf(v)&&(v.length===i&&(h=h.add(g.oi)),!0)},c),Se.resolve(this.li(h))}li(e){const t=[];return e.forEach(r=>{const i=this.ai(r);null!==i&&t.push(i)}),t}removeMutationBatch(e,t){Kt(0===this.fi(t.batchId,"removed")),this.gs.shift();let r=this.ui;return Se.forEach(t.mutations,i=>{const a=new gi(i.key,t.batchId);return r=r.delete(a),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.ui=r})}Qe(e){}containsKey(e,t){const r=new gi(t,0),i=this.ui.firstAfterOrEqual(r);return Se.resolve(t.isEqual(i&&i.key))}performConsistencyCheck(e){return Se.resolve()}fi(e,t){return this.hi(e)}hi(e){return 0===this.gs.length?0:e-this.gs[0].batchId}ai(e){const t=this.hi(e);return t<0||t>=this.gs.length?null:this.gs[t]}}class _N{constructor(e){this.di=e,this.docs=new vr(Ct.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const r=t.key,i=this.docs.get(r),a=i?i.size:0,c=this.di(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:c}),this.size+=c-a,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const r=this.docs.get(t);return Se.resolve(r?r.document.mutableCopy():Gn.newInvalidDocument(t))}getEntries(e,t){let r=fi();return t.forEach(i=>{const a=this.docs.get(i);r=r.insert(i,a?a.document.mutableCopy():Gn.newInvalidDocument(i))}),Se.resolve(r)}getAll(e,t,r){let i=fi();const a=new Ct(t.child("")),c=this.docs.getIteratorFrom(a);for(;c.hasNext();){const{key:h,value:{document:g}}=c.getNext();if(!t.isPrefixOf(h.path))break;h.path.length>t.length+1||g.readTime.compareTo(r)<=0||(i=i.insert(g.key,g.mutableCopy()))}return Se.resolve(i)}_i(e,t){return Se.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new yN(this)}getSize(e){return Se.resolve(this.size)}}class yN extends s_{constructor(e){super(),this.Tn=e}applyChanges(e){const t=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?t.push(this.Tn.addEntry(e,i)):this.Tn.removeEntry(r)}),Se.waitFor(t)}getFromCache(e,t){return this.Tn.getEntry(e,t)}getAllFromCache(e,t){return this.Tn.getEntries(e,t)}}class vN{constructor(e){this.persistence=e,this.wi=new zd(t=>$f(t),ha),this.lastRemoteSnapshotVersion=Zt.min(),this.highestTargetId=0,this.mi=0,this.gi=new TE,this.targetCount=0,this.yi=jo.He()}forEachTarget(e,t){return this.wi.forEach((r,i)=>t(i)),Se.resolve()}getLastRemoteSnapshotVersion(e){return Se.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return Se.resolve(this.mi)}allocateTargetId(e){return this.highestTargetId=this.yi.next(),Se.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.mi&&(this.mi=t),Se.resolve()}Ze(e){this.wi.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.yi=new jo(t),this.highestTargetId=t),e.sequenceNumber>this.mi&&(this.mi=e.sequenceNumber)}addTargetData(e,t){return this.Ze(t),this.targetCount+=1,Se.resolve()}updateTargetData(e,t){return this.Ze(t),Se.resolve()}removeTargetData(e,t){return this.wi.delete(t.target),this.gi.si(t.targetId),this.targetCount-=1,Se.resolve()}removeTargets(e,t,r){let i=0;const a=[];return this.wi.forEach((c,h)=>{h.sequenceNumber<=t&&null===r.get(h.targetId)&&(this.wi.delete(c),a.push(this.removeMatchingKeysForTargetId(e,h.targetId)),i++)}),Se.waitFor(a).next(()=>i)}getTargetCount(e){return Se.resolve(this.targetCount)}getTargetData(e,t){const r=this.wi.get(t)||null;return Se.resolve(r)}addMatchingKeys(e,t,r){return this.gi.ti(t,r),Se.resolve()}removeMatchingKeys(e,t,r){this.gi.ni(t,r);const i=this.persistence.referenceDelegate,a=[];return i&&t.forEach(c=>{a.push(i.markPotentiallyOrphaned(e,c))}),Se.waitFor(a)}removeMatchingKeysForTargetId(e,t){return this.gi.si(t),Se.resolve()}getMatchingKeysForTargetId(e,t){const r=this.gi.ri(t);return Se.resolve(r)}containsKey(e,t){return Se.resolve(this.gi.containsKey(t))}}class YS{constructor(e,t){this.pi={},this.overlays={},this.Nn=new gs(0),this.xn=!1,this.xn=!0,this.referenceDelegate=e(this),this.Un=new vN(this),this.indexManager=new lN,this.qn=new _N(r=>this.referenceDelegate.Ii(r)),this.O=new Pb(t),this.Kn=new KS(this.O)}start(){return Promise.resolve()}shutdown(){return this.xn=!1,Promise.resolve()}get started(){return this.xn}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new ZS,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.pi[e.toKey()];return r||(r=new mN(t,this.referenceDelegate),this.pi[e.toKey()]=r),r}getTargetCache(){return this.Un}getRemoteDocumentCache(){return this.qn}getBundleCache(){return this.Kn}runTransaction(e,t,r){Je("MemoryPersistence","Starting transaction:",e);const i=new c_(this.Nn.next());return this.referenceDelegate.Ei(),r(i).next(a=>this.referenceDelegate.Ti(i).next(()=>a)).toPromise().then(a=>(i.raiseOnCommittedEvent(),a))}Ai(e,t){return Se.or(Object.values(this.pi).map(r=>()=>r.containsKey(e,t)))}}class c_ extends Rb{constructor(e){super(),this.currentSequenceNumber=e}}class DE{constructor(e){this.persistence=e,this.Ri=new TE,this.Pi=null}static bi(e){return new DE(e)}get vi(){if(this.Pi)return this.Pi;throw Mt()}addReference(e,t,r){return this.Ri.addReference(r,t),this.vi.delete(r.toString()),Se.resolve()}removeReference(e,t,r){return this.Ri.removeReference(r,t),this.vi.add(r.toString()),Se.resolve()}markPotentiallyOrphaned(e,t){return this.vi.add(t.toString()),Se.resolve()}removeTarget(e,t){this.Ri.si(t.targetId).forEach(i=>this.vi.add(i.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(i=>{i.forEach(a=>this.vi.add(a.toString()))}).next(()=>r.removeTargetData(e,t))}Ei(){this.Pi=new Set}Ti(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Se.forEach(this.vi,r=>{const i=Ct.fromPath(r);return this.Vi(e,i).next(a=>{a||t.removeEntry(i,Zt.min())})}).next(()=>(this.Pi=null,t.apply(e)))}updateLimboDocument(e,t){return this.Vi(e,t).next(r=>{r?this.vi.delete(t.toString()):this.vi.add(t.toString())})}Ii(e){return 0}Vi(e,t){return Se.or([()=>Se.resolve(this.Ri.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ai(e,t)])}}function Yb(n,e){return`firestore_clients_${n}_${e}`}function SE(n,e,t){let r=`firestore_mutations_${n}_${t}`;return e.isAuthenticated()&&(r+=`_${e.uid}`),r}function Ea(n,e){return`firestore_targets_${n}_${e}`}class _p{constructor(e,t,r,i){this.user=e,this.batchId=t,this.state=r,this.error=i}static Si(e,t,r){const i=JSON.parse(r);let a,c="object"==typeof i&&-1!==["pending","acknowledged","rejected"].indexOf(i.state)&&(void 0===i.error||"object"==typeof i.error);return c&&i.error&&(c="string"==typeof i.error.message&&"string"==typeof i.error.code,c&&(a=new qe(i.error.code,i.error.message))),c?new _p(e,t,i.state,a):(Or("SharedClientState",`Failed to parse mutation state for ID '${t}': ${r}`),null)}Di(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class qc{constructor(e,t,r){this.targetId=e,this.state=t,this.error=r}static Si(e,t){const r=JSON.parse(t);let i,a="object"==typeof r&&-1!==["not-current","current","rejected"].indexOf(r.state)&&(void 0===r.error||"object"==typeof r.error);return a&&r.error&&(a="string"==typeof r.error.message&&"string"==typeof r.error.code,a&&(i=new qe(r.error.code,r.error.message))),a?new qc(e,r.state,i):(Or("SharedClientState",`Failed to parse target state for ID '${e}': ${t}`),null)}Di(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class qd{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static Si(e,t){const r=JSON.parse(t);let i="object"==typeof r&&r.activeTargetIds instanceof Array,a=Kf();for(let c=0;i&&c<r.activeTargetIds.length;++c)i=ZI(r.activeTargetIds[c]),a=a.add(r.activeTargetIds[c]);return i?new qd(e,a):(Or("SharedClientState",`Failed to parse client data for instance '${e}': ${t}`),null)}}class AE{constructor(e,t){this.clientId=e,this.onlineState=t}static Si(e){const t=JSON.parse(e);return"object"==typeof t&&-1!==["Unknown","Online","Offline"].indexOf(t.onlineState)&&"string"==typeof t.clientId?new AE(t.clientId,t.onlineState):(Or("SharedClientState",`Failed to parse online state: ${e}`),null)}}class yp{constructor(){this.activeTargetIds=Kf()}Ci(e){this.activeTargetIds=this.activeTargetIds.add(e)}Ni(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Di(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class vp{constructor(e,t,r,i,a){this.window=e,this.Sn=t,this.persistenceKey=r,this.xi=i,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.ki=this.Oi.bind(this),this.Mi=new vr(bn),this.started=!1,this.$i=[];const c=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=a,this.Fi=Yb(this.persistenceKey,this.xi),this.Bi=`firestore_sequence_number_${this.persistenceKey}`,this.Mi=this.Mi.insert(this.xi,new yp),this.Li=new RegExp(`^firestore_clients_${c}_([^_]*)$`),this.Ui=new RegExp(`^firestore_mutations_${c}_(\\d+)(?:_(.*))?$`),this.qi=new RegExp(`^firestore_targets_${c}_(\\d+)$`),this.Ki=`firestore_online_state_${this.persistenceKey}`,this.Gi=function(h){return`firestore_bundle_loaded_${h}`}(this.persistenceKey),this.window.addEventListener("storage",this.ki)}static Vt(e){return!(!e||!e.localStorage)}start(){var e=this;return(0,Ce.Z)(function*(){const t=yield e.syncEngine.ds();for(const i of t){if(i===e.xi)continue;const a=e.getItem(Yb(e.persistenceKey,i));if(a){const c=qd.Si(i,a);c&&(e.Mi=e.Mi.insert(c.clientId,c))}}e.ji();const r=e.storage.getItem(e.Ki);if(r){const i=e.Qi(r);i&&e.Wi(i)}for(const i of e.$i)e.Oi(i);e.$i=[],e.window.addEventListener("pagehide",()=>e.shutdown()),e.started=!0})()}writeSequenceNumber(e){this.setItem(this.Bi,JSON.stringify(e))}getAllActiveQueryTargets(){return this.zi(this.Mi)}isActiveQueryTarget(e){let t=!1;return this.Mi.forEach((r,i)=>{i.activeTargetIds.has(e)&&(t=!0)}),t}addPendingMutation(e){this.Hi(e,"pending")}updateMutationState(e,t,r){this.Hi(e,t,r),this.Ji(e)}addLocalQueryTarget(e){let t="not-current";if(this.isActiveQueryTarget(e)){const r=this.storage.getItem(Ea(this.persistenceKey,e));if(r){const i=qc.Si(e,r);i&&(t=i.state)}}return this.Yi.Ci(e),this.ji(),t}removeLocalQueryTarget(e){this.Yi.Ni(e),this.ji()}isLocalQueryTarget(e){return this.Yi.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(Ea(this.persistenceKey,e))}updateQueryState(e,t,r){this.Xi(e,t,r)}handleUserChange(e,t,r){t.forEach(i=>{this.Ji(i)}),this.currentUser=e,r.forEach(i=>{this.addPendingMutation(i)})}setOnlineState(e){this.Zi(e)}notifyBundleLoaded(){this.tr()}shutdown(){this.started&&(this.window.removeEventListener("storage",this.ki),this.removeItem(this.Fi),this.started=!1)}getItem(e){const t=this.storage.getItem(e);return Je("SharedClientState","READ",e,t),t}setItem(e,t){Je("SharedClientState","SET",e,t),this.storage.setItem(e,t)}removeItem(e){Je("SharedClientState","REMOVE",e),this.storage.removeItem(e)}Oi(e){var t=this;const r=e;if(r.storageArea===this.storage){if(Je("SharedClientState","EVENT",r.key,r.newValue),r.key===this.Fi)return void Or("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Sn.enqueueRetryable((0,Ce.Z)(function*(){if(t.started){if(null!==r.key)if(t.Li.test(r.key)){if(null==r.newValue){const i=t.er(r.key);return t.nr(i,null)}{const i=t.sr(r.key,r.newValue);if(i)return t.nr(i.clientId,i)}}else if(t.Ui.test(r.key)){if(null!==r.newValue){const i=t.ir(r.key,r.newValue);if(i)return t.rr(i)}}else if(t.qi.test(r.key)){if(null!==r.newValue){const i=t.cr(r.key,r.newValue);if(i)return t.ur(i)}}else if(r.key===t.Ki){if(null!==r.newValue){const i=t.Qi(r.newValue);if(i)return t.Wi(i)}}else if(r.key===t.Bi){const i=function(a){let c=gs.A;if(null!=a)try{const h=JSON.parse(a);Kt("number"==typeof h),c=h}catch(h){Or("SharedClientState","Failed to read sequence number from WebStorage",h)}return c}(r.newValue);i!==gs.A&&t.sequenceNumberHandler(i)}else if(r.key===t.Gi)return t.syncEngine.ar()}else t.$i.push(r)}))}}get Yi(){return this.Mi.get(this.xi)}ji(){this.setItem(this.Fi,this.Yi.Di())}Hi(e,t,r){const i=new _p(this.currentUser,e,t,r),a=SE(this.persistenceKey,this.currentUser,e);this.setItem(a,i.Di())}Ji(e){const t=SE(this.persistenceKey,this.currentUser,e);this.removeItem(t)}Zi(e){this.storage.setItem(this.Ki,JSON.stringify({clientId:this.xi,onlineState:e}))}Xi(e,t,r){const i=Ea(this.persistenceKey,e),a=new qc(e,t,r);this.setItem(i,a.Di())}tr(){this.setItem(this.Gi,"value-not-used")}er(e){const t=this.Li.exec(e);return t?t[1]:null}sr(e,t){const r=this.er(e);return qd.Si(r,t)}ir(e,t){const r=this.Ui.exec(e),i=Number(r[1]);return _p.Si(new hi(void 0!==r[2]?r[2]:null),i,t)}cr(e,t){const r=this.qi.exec(e),i=Number(r[1]);return qc.Si(i,t)}Qi(e){return AE.Si(e)}rr(e){var t=this;return(0,Ce.Z)(function*(){if(e.user.uid===t.currentUser.uid)return t.syncEngine.hr(e.batchId,e.state,e.error);Je("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)})()}ur(e){return this.syncEngine.lr(e.targetId,e.state,e.error)}nr(e,t){const r=t?this.Mi.insert(e,t):this.Mi.remove(e),i=this.zi(this.Mi),a=this.zi(r),c=[],h=[];return a.forEach(g=>{i.has(g)||c.push(g)}),i.forEach(g=>{a.has(g)||h.push(g)}),this.syncEngine.dr(c,h).then(()=>{this.Mi=r})}Wi(e){this.Mi.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}zi(e){let t=Kf();return e.forEach((r,i)=>{t=t.unionWith(i.activeTargetIds)}),t}}class Ep{constructor(){this._r=new yp,this.wr={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e){return this._r.Ci(e),this.wr[e]||"not-current"}updateQueryState(e,t,r){this.wr[e]=t}removeLocalQueryTarget(e){this._r.Ni(e)}isLocalQueryTarget(e){return this._r.activeTargetIds.has(e)}clearQueryState(e){delete this.wr[e]}getAllActiveQueryTargets(){return this._r.activeTargetIds}isActiveQueryTarget(e){return this._r.activeTargetIds.has(e)}start(){return this._r=new yp,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(){}}class EN{mr(e){}shutdown(){}}class QS{constructor(){this.gr=()=>this.yr(),this.pr=()=>this.Ir(),this.Er=[],this.Tr()}mr(e){this.Er.push(e)}shutdown(){window.removeEventListener("online",this.gr),window.removeEventListener("offline",this.pr)}Tr(){window.addEventListener("online",this.gr),window.addEventListener("offline",this.pr)}yr(){Je("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.Er)e(0)}Ir(){Je("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.Er)e(1)}static Vt(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}const wN={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery"};class IN{constructor(e){this.Ar=e.Ar,this.Rr=e.Rr}Pr(e){this.br=e}vr(e){this.Vr=e}onMessage(e){this.Sr=e}close(){this.Rr()}send(e){this.Ar(e)}Dr(){this.br()}Cr(e){this.Vr(e)}Nr(e){this.Sr(e)}}class Qb extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId,this.kr=(e.ssl?"https":"http")+"://"+e.host,this.Or="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}Mr(e,t,r,i,a){const c=this.$r(e,t);Je("RestConnection","Sending: ",c,r);const h={};return this.Fr(h,i,a),this.Br(e,c,h,r).then(g=>(Je("RestConnection","Received: ",g),g),g=>{throw Cd("RestConnection",`${e} failed with error: `,g,"url: ",c,"request:",r),g})}Lr(e,t,r,i,a){return this.Mr(e,t,r,i,a)}Fr(e,t,r){e["X-Goog-Api-Client"]="gl-js/ fire/"+bd,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((i,a)=>e[a]=i),r&&r.headers.forEach((i,a)=>e[a]=i)}$r(e,t){return`${this.kr}/v1/${t}:${wN[e]}`}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams}Br(e,t,r,i){return new Promise((a,c)=>{const h=new aS;h.listenOnce(iS.COMPLETE,()=>{try{switch(h.getLastErrorCode()){case Av.NO_ERROR:const v=h.getResponseJson();Je("Connection","XHR received:",JSON.stringify(v)),a(v);break;case Av.TIMEOUT:Je("Connection",'RPC "'+e+'" timed out'),c(new qe(ve.DEADLINE_EXCEEDED,"Request time out"));break;case Av.HTTP_ERROR:const C=h.getStatus();if(Je("Connection",'RPC "'+e+'" failed with status:',C,"response text:",h.getResponseText()),C>0){const D=h.getResponseJson().error;if(D&&D.status&&D.message){const x=function(k){const B=k.toLowerCase().replace(/_/g,"-");return Object.values(ve).indexOf(B)>=0?B:ve.UNKNOWN}(D.status);c(new qe(x,D.message))}else c(new qe(ve.UNKNOWN,"Server responded with status "+h.getStatus()))}else c(new qe(ve.UNAVAILABLE,"Connection failed."));break;default:Mt()}}finally{Je("Connection",'RPC "'+e+'" completed.')}});const g=JSON.stringify(i);h.send(t,"POST",g,r,15)})}Ur(e,t,r){const i=[this.kr,"/","google.firestore.v1.Firestore","/",e,"/channel"],a=nS(),c=rS(),h={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.useFetchStreams&&(h.xmlHttpFactory=new oS({})),this.Fr(h.initMessageHeaders,t,r),(0,Z.uI)()||(0,Z.b$)()||(0,Z.d)()||(0,Z.w1)()||(0,Z.Mn)()||(0,Z.ru)()||(h.httpHeadersOverwriteParam="$httpHeaders");const g=i.join("");Je("Connection","Creating WebChannel: "+g,h);const v=a.createWebChannel(g,h);let C=!1,D=!1;const x=new IN({Ar:B=>{D?Je("Connection","Not sending because WebChannel is closed:",B):(C||(Je("Connection","Opening WebChannel transport."),v.open(),C=!0),Je("Connection","WebChannel sending:",B),v.send(B))},Rr:()=>v.close()}),k=(B,ge,xe)=>{B.listen(ge,bt=>{try{xe(bt)}catch(Tt){setTimeout(()=>{throw Tt},0)}})};return k(v,Nm.EventType.OPEN,()=>{D||Je("Connection","WebChannel transport opened.")}),k(v,Nm.EventType.CLOSE,()=>{D||(D=!0,Je("Connection","WebChannel transport closed"),x.Cr())}),k(v,Nm.EventType.ERROR,B=>{D||(D=!0,Cd("Connection","WebChannel transport errored:",B),x.Cr(new qe(ve.UNAVAILABLE,"The operation could not be completed")))}),k(v,Nm.EventType.MESSAGE,B=>{var ge;if(!D){const xe=B.data[0];Kt(!!xe);const bt=xe,Tt=bt.error||(null===(ge=bt[0])||void 0===ge?void 0:ge.error);if(Tt){Je("Connection","WebChannel received error:",Tt);const Wt=Tt.status;let Rt=function(Rr){const Pu=Fr[Rr];if(void 0!==Pu)return cb(Pu)}(Wt),En=Tt.message;void 0===Rt&&(Rt=ve.INTERNAL,En="Unknown error status: "+Wt+" with message "+Tt.message),D=!0,x.Cr(new qe(Rt,En)),v.close()}else Je("Connection","WebChannel received:",xe),x.Nr(xe)}}),k(c,sS.STAT_EVENT,B=>{B.stat===BI.PROXY?Je("Connection","Detected buffering proxy"):B.stat===BI.NOPROXY&&Je("Connection","Detected no buffering proxy")}),setTimeout(()=>{x.Dr()},0),x}}function Jb(){return"undefined"!=typeof window?window:null}function l_(){return"undefined"!=typeof document?document:null}function wp(n){return new Qf(n,!0)}class RE{constructor(e,t,r=1e3,i=1.5,a=6e4){this.Sn=e,this.timerId=t,this.qr=r,this.Kr=i,this.Gr=a,this.jr=0,this.Qr=null,this.Wr=Date.now(),this.reset()}reset(){this.jr=0}zr(){this.jr=this.Gr}Hr(e){this.cancel();const t=Math.floor(this.jr+this.Jr()),r=Math.max(0,Date.now()-this.Wr),i=Math.max(0,t-r);i>0&&Je("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.jr} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.Qr=this.Sn.enqueueAfterDelay(this.timerId,i,()=>(this.Wr=Date.now(),e())),this.jr*=this.Kr,this.jr<this.qr&&(this.jr=this.qr),this.jr>this.Gr&&(this.jr=this.Gr)}Yr(){null!==this.Qr&&(this.Qr.skipDelay(),this.Qr=null)}cancel(){null!==this.Qr&&(this.Qr.cancel(),this.Qr=null)}Jr(){return(Math.random()-.5)*this.jr}}class xE{constructor(e,t,r,i,a,c,h,g){this.Sn=e,this.Xr=r,this.Zr=i,this.eo=a,this.authCredentialsProvider=c,this.appCheckCredentialsProvider=h,this.listener=g,this.state=0,this.no=0,this.so=null,this.io=null,this.stream=null,this.ro=new RE(e,t)}oo(){return 1===this.state||5===this.state||this.co()}co(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.uo()}stop(){var e=this;return(0,Ce.Z)(function*(){e.oo()&&(yield e.close(0))})()}ao(){this.state=0,this.ro.reset()}ho(){this.co()&&null===this.so&&(this.so=this.Sn.enqueueAfterDelay(this.Xr,6e4,()=>this.lo()))}fo(e){this._o(),this.stream.send(e)}lo(){var e=this;return(0,Ce.Z)(function*(){if(e.co())return e.close(0)})()}_o(){this.so&&(this.so.cancel(),this.so=null)}wo(){this.io&&(this.io.cancel(),this.io=null)}close(e,t){var r=this;return(0,Ce.Z)(function*(){r._o(),r.wo(),r.ro.cancel(),r.no++,4!==e?r.ro.reset():t&&t.code===ve.RESOURCE_EXHAUSTED?(Or(t.toString()),Or("Using maximum backoff delay to prevent overloading the backend."),r.ro.zr()):t&&t.code===ve.UNAUTHENTICATED&&3!==r.state&&(r.authCredentialsProvider.invalidateToken(),r.appCheckCredentialsProvider.invalidateToken()),null!==r.stream&&(r.mo(),r.stream.close(),r.stream=null),r.state=e,yield r.listener.vr(t)})()}mo(){}auth(){this.state=1;const e=this.yo(this.no),t=this.no;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.no===t&&this.po(r,i)},r=>{e(()=>{const i=new qe(ve.UNKNOWN,"Fetching auth token failed: "+r.message);return this.Io(i)})})}po(e,t){const r=this.yo(this.no);this.stream=this.Eo(e,t),this.stream.Pr(()=>{r(()=>(this.state=2,this.io=this.Sn.enqueueAfterDelay(this.Zr,1e4,()=>(this.co()&&(this.state=3),Promise.resolve())),this.listener.Pr()))}),this.stream.vr(i=>{r(()=>this.Io(i))}),this.stream.onMessage(i=>{r(()=>this.onMessage(i))})}uo(){var e=this;this.state=5,this.ro.Hr((0,Ce.Z)(function*(){e.state=0,e.start()}))}Io(e){return Je("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}yo(e){return t=>{this.Sn.enqueueAndForget(()=>this.no===e?t():(Je("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class Xb extends xE{constructor(e,t,r,i,a,c){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,i,c),this.O=a}Eo(e,t){return this.eo.Ur("Listen",e,t)}onMessage(e){this.ro.reset();const t=function Vo(n,e){let t;if("targetChange"in e){const r="NO_CHANGE"===(g=e.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===g?1:"REMOVE"===g?2:"CURRENT"===g?3:"RESET"===g?4:Mt(),i=e.targetChange.targetIds||[],a=function(g,v){return g.N?(Kt(void 0===v||"string"==typeof v),Zr.fromBase64String(v||"")):(Kt(void 0===v||v instanceof Uint8Array),Zr.fromUint8Array(v||new Uint8Array))}(n,e.targetChange.resumeToken),c=e.targetChange.cause,h=c&&function(g){const v=void 0===g.code?ve.UNKNOWN:cb(g.code);return new qe(v,g.message||"")}(c);t=new fb(r,i,a,h||null)}else if("documentChange"in e){const r=e.documentChange,i=co(n,r.document.name),a=Yr(r.document.updateTime),c=new Ci({mapValue:{fields:r.document.fields}}),h=Gn.newFoundDocument(i,a,c);t=new Yf(r.targetIds||[],r.removedTargetIds||[],h.key,h)}else if("documentDelete"in e){const r=e.documentDelete,i=co(n,r.document),a=r.readTime?Yr(r.readTime):Zt.min(),c=Gn.newNoDocument(i,a);t=new Yf([],r.removedTargetIds||[],c.key,c)}else if("documentRemove"in e){const r=e.documentRemove,i=co(n,r.document);t=new Yf([],r.removedTargetIds||[],i,null)}else{if(!("filter"in e))return Mt();{const r=e.filter,a=new ab(r.count||0);t=new hb(r.targetId,a)}}var g;return t}(this.O,e),r=function(i){if(!("targetChange"in i))return Zt.min();const a=i.targetChange;return a.targetIds&&a.targetIds.length?Zt.min():a.readTime?Yr(a.readTime):Zt.min()}(e);return this.listener.To(t,r)}Ao(e){const t={};t.database=Xf(this.O),t.addTarget=function(i,a){let c;const h=a.target;return c=Lm(h)?{documents:wb(i,h)}:{query:Ib(i,h)},c.targetId=a.targetId,a.resumeToken.approximateByteSize()>0?c.resumeToken=Xv(i,a.resumeToken):a.snapshotVersion.compareTo(Zt.min())>0&&(c.readTime=Ld(i,a.snapshotVersion.toTimestamp())),c}(this.O,e);const r=function Ym(n,e){const t=function(r,i){switch(i){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return Mt()}}(0,e.purpose);return null==t?null:{"goog-listen-tags":t}}(0,e);r&&(t.labels=r),this.fo(t)}Ro(e){const t={};t.database=Xf(this.O),t.removeTarget=e,this.fo(t)}}class eC extends xE{constructor(e,t,r,i,a,c){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,i,c),this.O=a,this.Po=!1}get bo(){return this.Po}start(){this.Po=!1,this.lastStreamToken=void 0,super.start()}mo(){this.Po&&this.vo([])}Eo(e,t){return this.eo.Ur("Write",e,t)}onMessage(e){if(Kt(!!e.streamToken),this.lastStreamToken=e.streamToken,this.Po){this.ro.reset();const t=function np(n,e){return n&&n.length>0?(Kt(void 0!==e),n.map(t=>function(r,i){let a=Yr(r.updateTime?r.updateTime:i);return a.isEqual(Zt.min())&&(a=Yr(i)),new bS(a,r.transformResults||[])}(t,e))):[]}(e.writeResults,e.commitTime),r=Yr(e.commitTime);return this.listener.Vo(r,t)}return Kt(!e.writeResults||0===e.writeResults.length),this.Po=!0,this.listener.So()}Do(){const e={};e.database=Xf(this.O),this.fo(e)}vo(e){const t={streamToken:this.lastStreamToken,writes:e.map(r=>ep(this.O,r))};this.fo(t)}}class JS extends class{}{constructor(e,t,r,i){super(),this.authCredentials=e,this.appCheckCredentials=t,this.eo=r,this.O=i,this.Co=!1}No(){if(this.Co)throw new qe(ve.FAILED_PRECONDITION,"The client has already been terminated.")}Mr(e,t,r){return this.No(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,a])=>this.eo.Mr(e,t,r,i,a)).catch(i=>{throw"FirebaseError"===i.name?(i.code===ve.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new qe(ve.UNKNOWN,i.toString())})}Lr(e,t,r){return this.No(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,a])=>this.eo.Lr(e,t,r,i,a)).catch(i=>{throw"FirebaseError"===i.name?(i.code===ve.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new qe(ve.UNKNOWN,i.toString())})}terminate(){this.Co=!0}}class XS{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.xo=0,this.ko=null,this.Oo=!0}Mo(){0===this.xo&&(this.$o("Unknown"),this.ko=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.ko=null,this.Fo("Backend didn't respond within 10 seconds."),this.$o("Offline"),Promise.resolve())))}Bo(e){"Online"===this.state?this.$o("Unknown"):(this.xo++,this.xo>=1&&(this.Lo(),this.Fo(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.$o("Offline")))}set(e){this.Lo(),this.xo=0,"Online"===e&&(this.Oo=!1),this.$o(e)}$o(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}Fo(e){const t=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.Oo?(Or(t),this.Oo=!1):Je("OnlineStateTracker",t)}Lo(){null!==this.ko&&(this.ko.cancel(),this.ko=null)}}class tC{constructor(e,t,r,i,a){var c=this;this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.Uo=[],this.qo=new Map,this.Ko=new Set,this.Go=[],this.jo=a,this.jo.mr(h=>{r.enqueueAndForget((0,Ce.Z)(function*(){var g;vu(c)&&(Je("RemoteStore","Restarting streams for network reachability change."),yield(g=(0,Ce.Z)(function*(v){const C=pt(v);C.Ko.add(4),yield Zc(C),C.Qo.set("Unknown"),C.Ko.delete(4),yield Kc(C)}),function(v){return g.apply(this,arguments)})(c))}))}),this.Qo=new XS(r,i)}}function Kc(n){return nC.apply(this,arguments)}function nC(){return nC=(0,Ce.Z)(function*(n){if(vu(n))for(const e of n.Go)yield e(!0)}),nC.apply(this,arguments)}function Zc(n){return Ip.apply(this,arguments)}function Ip(){return Ip=(0,Ce.Z)(function*(n){for(const e of n.Go)yield e(!1)}),Ip.apply(this,arguments)}function d_(n,e){const t=pt(n);t.qo.has(e.targetId)||(t.qo.set(e.targetId,e),PE(t)?iC(t):Ae(t).co()&&rC(t,e))}function bp(n,e){const t=pt(n),r=Ae(t);t.qo.delete(e),r.co()&&eA(t,e),0===t.qo.size&&(r.co()?r.ho():vu(t)&&t.Qo.set("Unknown"))}function rC(n,e){n.Wo.Z(e.targetId),Ae(n).Ao(e)}function eA(n,e){n.Wo.Z(e),Ae(n).Ro(e)}function iC(n){n.Wo=new DS({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),Tt:e=>n.qo.get(e)||null}),Ae(n).start(),n.Qo.Mo()}function PE(n){return vu(n)&&!Ae(n).oo()&&n.qo.size>0}function vu(n){return 0===pt(n).Ko.size}function sC(n){n.Wo=void 0}function tA(n){return NE.apply(this,arguments)}function NE(){return NE=(0,Ce.Z)(function*(n){n.qo.forEach((e,t)=>{rC(n,e)})}),NE.apply(this,arguments)}function nA(n,e){return oC.apply(this,arguments)}function oC(){return oC=(0,Ce.Z)(function*(n,e){sC(n),PE(n)?(n.Qo.Bo(e),iC(n)):n.Qo.set("Unknown")}),oC.apply(this,arguments)}function bN(n,e,t){return aC.apply(this,arguments)}function aC(){return aC=(0,Ce.Z)(function*(n,e,t){if(n.Qo.set("Online"),e instanceof fb&&2===e.state&&e.cause)try{yield(r=(0,Ce.Z)(function*(i,a){const c=a.cause;for(const h of a.targetIds)i.qo.has(h)&&(yield i.remoteSyncer.rejectListen(h,c),i.qo.delete(h),i.Wo.removeTarget(h))}),function(i,a){return r.apply(this,arguments)})(n,e)}catch(r){Je("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),yield ME(n,r)}else if(e instanceof Yf?n.Wo.ct(e):e instanceof hb?n.Wo._t(e):n.Wo.ht(e),!t.isEqual(Zt.min()))try{const r=yield IE(n.localStore);t.compareTo(r)>=0&&(yield function(i,a){const c=i.Wo.yt(a);return c.targetChanges.forEach((h,g)=>{if(h.resumeToken.approximateByteSize()>0){const v=i.qo.get(g);v&&i.qo.set(g,v.withResumeToken(h.resumeToken,a))}}),c.targetMismatches.forEach(h=>{const g=i.qo.get(h);if(!g)return;i.qo.set(h,g.withResumeToken(Zr.EMPTY_BYTE_STRING,g.snapshotVersion)),eA(i,h);const v=new ma(g.target,h,1,g.sequenceNumber);rC(i,v)}),i.remoteSyncer.applyRemoteEvent(c)}(n,t))}catch(r){Je("RemoteStore","Failed to raise snapshot:",r),yield ME(n,r)}var r}),aC.apply(this,arguments)}function ME(n,e,t){return uC.apply(this,arguments)}function uC(){return uC=(0,Ce.Z)(function*(n,e,t){if(!ga(e))throw e;n.Ko.add(1),yield Zc(n),n.Qo.set("Offline"),t||(t=()=>IE(n.localStore)),n.asyncQueue.enqueueRetryable((0,Ce.Z)(function*(){Je("RemoteStore","Retrying IndexedDB access"),yield t(),n.Ko.delete(1),yield Kc(n)}))}),uC.apply(this,arguments)}function cC(n,e){return e().catch(t=>ME(n,t,e))}function Cp(n){return lC.apply(this,arguments)}function lC(){return lC=(0,Ce.Z)(function*(n){const e=pt(n),t=Ke(e);let r=e.Uo.length>0?e.Uo[e.Uo.length-1].batchId:-1;for(;CN(e);)try{const i=yield GS(e.localStore,r);if(null===i){0===e.Uo.length&&t.ho();break}r=i.batchId,TN(e,i)}catch(i){yield ME(e,i)}s(e)&&o(e)}),lC.apply(this,arguments)}function CN(n){return vu(n)&&n.Uo.length<10}function TN(n,e){n.Uo.push(e);const t=Ke(n);t.co()&&t.bo&&t.vo(e.mutations)}function s(n){return vu(n)&&!Ke(n).oo()&&n.Uo.length>0}function o(n){Ke(n).start()}function u(n){return l.apply(this,arguments)}function l(){return l=(0,Ce.Z)(function*(n){Ke(n).Do()}),l.apply(this,arguments)}function d(n){return f.apply(this,arguments)}function f(){return f=(0,Ce.Z)(function*(n){const e=Ke(n);for(const t of n.Uo)e.vo(t.mutations)}),f.apply(this,arguments)}function y(n,e,t){return w.apply(this,arguments)}function w(){return w=(0,Ce.Z)(function*(n,e,t){const r=n.Uo.shift(),i=Xm.from(r,e,t);yield cC(n,()=>n.remoteSyncer.applySuccessfulWrite(i)),yield Cp(n)}),w.apply(this,arguments)}function b(n,e){return S.apply(this,arguments)}function S(){return S=(0,Ce.Z)(function*(n,e){var t;e&&Ke(n).bo&&(yield(t=(0,Ce.Z)(function*(r,i){if(ub(a=i.code)&&a!==ve.ABORTED){const c=r.Uo.shift();Ke(r).ao(),yield cC(r,()=>r.remoteSyncer.rejectFailedWrite(c.batchId,i)),yield Cp(r)}var a}),function(r,i){return t.apply(this,arguments)})(n,e)),s(n)&&o(n)}),S.apply(this,arguments)}function R(n,e){return O.apply(this,arguments)}function O(){return O=(0,Ce.Z)(function*(n,e){const t=pt(n);t.asyncQueue.verifyOperationInProgress(),Je("RemoteStore","RemoteStore received new credentials");const r=vu(t);t.Ko.add(3),yield Zc(t),r&&t.Qo.set("Unknown"),yield t.remoteSyncer.handleCredentialChange(e),t.Ko.delete(3),yield Kc(t)}),O.apply(this,arguments)}function W(n,e){return te.apply(this,arguments)}function te(){return te=(0,Ce.Z)(function*(n,e){const t=pt(n);e?(t.Ko.delete(2),yield Kc(t)):e||(t.Ko.add(2),yield Zc(t),t.Qo.set("Unknown"))}),te.apply(this,arguments)}function Ae(n){return n.zo||(n.zo=function(e,t,r){const i=pt(e);return i.No(),new Xb(t,i.eo,i.authCredentials,i.appCheckCredentials,i.O,r)}(n.datastore,n.asyncQueue,{Pr:tA.bind(null,n),vr:nA.bind(null,n),To:bN.bind(null,n)}),n.Go.push(function(){var e=(0,Ce.Z)(function*(t){t?(n.zo.ao(),PE(n)?iC(n):n.Qo.set("Unknown")):(yield n.zo.stop(),sC(n))});return function(t){return e.apply(this,arguments)}}())),n.zo}function Ke(n){return n.Ho||(n.Ho=function(e,t,r){const i=pt(e);return i.No(),new eC(t,i.eo,i.authCredentials,i.appCheckCredentials,i.O,r)}(n.datastore,n.asyncQueue,{Pr:u.bind(null,n),vr:b.bind(null,n),So:d.bind(null,n),Vo:y.bind(null,n)}),n.Go.push(function(){var e=(0,Ce.Z)(function*(t){t?(n.Ho.ao(),yield Cp(n)):(yield n.Ho.stop(),n.Uo.length>0&&(Je("RemoteStore",`Stopping write stream with ${n.Uo.length} pending writes`),n.Uo=[]))});return function(t){return e.apply(this,arguments)}}())),n.Ho}class dt{constructor(e,t,r,i,a){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=i,this.removalCallback=a,this.deferred=new ri,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(c=>{})}static createAndSchedule(e,t,r,i,a){const c=Date.now()+r,h=new dt(e,t,c,i,a);return h.start(r),h}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new qe(ve.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function wt(n,e){if(Or("AsyncQueue",`${e}: ${n}`),ga(n))return new qe(ve.UNAVAILABLE,`${e}: ${n}`);throw n}class Fe{constructor(e){this.comparator=e?(t,r)=>e(t,r)||Ct.comparator(t.key,r.key):(t,r)=>Ct.comparator(t.key,r.key),this.keyedMap=Km(),this.sortedSet=new vr(this.comparator)}static emptySet(e){return new Fe(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof Fe)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){const i=t.getNext().key,a=r.getNext().key;if(!i.isEqual(a))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const r=new Fe;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}}class Ft{constructor(){this.Jo=new vr(Ct.comparator)}track(e){const t=e.doc.key,r=this.Jo.get(t);r?0!==e.type&&3===r.type?this.Jo=this.Jo.insert(t,e):3===e.type&&1!==r.type?this.Jo=this.Jo.insert(t,{type:r.type,doc:e.doc}):2===e.type&&2===r.type?this.Jo=this.Jo.insert(t,{type:2,doc:e.doc}):2===e.type&&0===r.type?this.Jo=this.Jo.insert(t,{type:0,doc:e.doc}):1===e.type&&0===r.type?this.Jo=this.Jo.remove(t):1===e.type&&2===r.type?this.Jo=this.Jo.insert(t,{type:1,doc:r.doc}):0===e.type&&1===r.type?this.Jo=this.Jo.insert(t,{type:2,doc:e.doc}):Mt():this.Jo=this.Jo.insert(t,e)}Yo(){const e=[];return this.Jo.inorderTraversal((t,r)=>{e.push(r)}),e}}class un{constructor(e,t,r,i,a,c,h,g){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=a,this.fromCache=c,this.syncStateChanged=h,this.excludesMetadataChanges=g}static fromInitialDocuments(e,t,r,i){const a=[];return t.forEach(c=>{a.push({type:0,doc:c})}),new un(e,t,Fe.emptySet(t),a,r,i,!0,!1)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Od(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let i=0;i<t.length;i++)if(t[i].type!==r[i].type||!t[i].doc.isEqual(r[i].doc))return!1;return!0}}class Ln{constructor(){this.Xo=void 0,this.listeners=[]}}class _s{constructor(){this.queries=new zd(e=>eb(e),Od),this.onlineState="Unknown",this.Zo=new Set}}function wa(n,e){return Tp.apply(this,arguments)}function Tp(){return Tp=(0,Ce.Z)(function*(n,e){const t=pt(n),r=e.query;let i=!1,a=t.queries.get(r);if(a||(i=!0,a=new Ln),i)try{a.Xo=yield t.onListen(r)}catch(c){const h=wt(c,`Initialization of query '${qv(e.query)}' failed`);return void e.onError(h)}t.queries.set(r,a),a.listeners.push(e),e.tc(t.onlineState),a.Xo&&e.ec(a.Xo)&&Ap(t)}),Tp.apply(this,arguments)}function Dp(n,e){return Sp.apply(this,arguments)}function Sp(){return Sp=(0,Ce.Z)(function*(n,e){const t=pt(n),r=e.query;let i=!1;const a=t.queries.get(r);if(a){const c=a.listeners.indexOf(e);c>=0&&(a.listeners.splice(c,1),i=0===a.listeners.length)}if(i)return t.queries.delete(r),t.onUnlisten(r)}),Sp.apply(this,arguments)}function kE(n,e){const t=pt(n);let r=!1;for(const i of e){const c=t.queries.get(i.query);if(c){for(const h of c.listeners)h.ec(i)&&(r=!0);c.Xo=i}}r&&Ap(t)}function OE(n,e,t){const r=pt(n),i=r.queries.get(e);if(i)for(const a of i.listeners)a.onError(t);r.queries.delete(e)}function Ap(n){n.Zo.forEach(e=>{e.next()})}class Rp{constructor(e,t,r){this.query=e,this.nc=t,this.sc=!1,this.ic=null,this.onlineState="Unknown",this.options=r||{}}ec(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)3!==i.type&&r.push(i);e=new un(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0)}let t=!1;return this.sc?this.rc(e)&&(this.nc.next(e),t=!0):this.oc(e,this.onlineState)&&(this.cc(e),t=!0),this.ic=e,t}onError(e){this.nc.error(e)}tc(e){this.onlineState=e;let t=!1;return this.ic&&!this.sc&&this.oc(this.ic,e)&&(this.cc(this.ic),t=!0),t}oc(e,t){return!e.fromCache||!(this.options.uc&&"Offline"!==t||e.docs.isEmpty()&&"Offline"!==t)}rc(e){return e.docChanges.length>0||!!(e.syncStateChanged||this.ic&&this.ic.hasPendingWrites!==e.hasPendingWrites)&&!0===this.options.includeMetadataChanges}cc(e){e=un.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache),this.sc=!0,this.nc.next(e)}}class FE{constructor(e,t){this.payload=e,this.byteLength=t}ac(){return"metadata"in this.payload}}class h_{constructor(e){this.O=e}Gs(e){return co(this.O,e)}js(e){return e.metadata.exists?Eb(this.O,e.document,!1):Gn.newNoDocument(this.Gs(e.metadata.name),this.Qs(e.metadata.readTime))}Qs(e){return Yr(e)}}class WF{constructor(e,t,r){this.hc=e,this.localStore=t,this.O=r,this.queries=[],this.documents=[],this.progress=DN(e)}lc(e){this.progress.bytesLoaded+=e.byteLength;let t=this.progress.documentsLoaded;return e.payload.namedQuery?this.queries.push(e.payload.namedQuery):e.payload.documentMetadata?(this.documents.push({metadata:e.payload.documentMetadata}),e.payload.documentMetadata.exists||++t):e.payload.document&&(this.documents[this.documents.length-1].document=e.payload.document,++t),t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}fc(e){const t=new Map,r=new h_(this.O);for(const i of e)if(i.metadata.queries){const a=r.Gs(i.metadata.name);for(const c of i.metadata.queries){const h=(t.get(c)||Mn()).add(a);t.set(c,h)}}return t}complete(){var e=this;return(0,Ce.Z)(function*(){const t=yield function qS(n,e,t,r){return Zb.apply(this,arguments)}(e.localStore,new h_(e.O),e.documents,e.hc.id),r=e.fc(e.documents);for(const i of e.queries)yield gN(e.localStore,i,r.get(i.name));return e.progress.taskState="Success",new WS(Object.assign({},e.progress),t)})()}}function DN(n){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:n.totalDocuments,totalBytes:n.totalBytes}}class SN{constructor(e){this.key=e}}class AN{constructor(e){this.key=e}}class RN{constructor(e,t){this.query=e,this.dc=t,this._c=null,this.current=!1,this.wc=Mn(),this.mutatedKeys=Mn(),this.mc=tb(e),this.gc=new Fe(this.mc)}get yc(){return this.dc}Ic(e,t){const r=t?t.Ec:new Ft,i=t?t.gc:this.gc;let a=t?t.mutatedKeys:this.mutatedKeys,c=i,h=!1;const g=Vm(this.query)&&i.size===this.query.limit?i.last():null,v=Bm(this.query)&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((C,D)=>{const x=i.get(C),k=jm(this.query,D)?D:null,B=!!x&&this.mutatedKeys.has(x.key),ge=!!k&&(k.hasLocalMutations||this.mutatedKeys.has(k.key)&&k.hasCommittedMutations);let xe=!1;x&&k?x.data.isEqual(k.data)?B!==ge&&(r.track({type:3,doc:k}),xe=!0):this.Tc(x,k)||(r.track({type:2,doc:k}),xe=!0,(g&&this.mc(k,g)>0||v&&this.mc(k,v)<0)&&(h=!0)):!x&&k?(r.track({type:0,doc:k}),xe=!0):x&&!k&&(r.track({type:1,doc:x}),xe=!0,(g||v)&&(h=!0)),xe&&(k?(c=c.add(k),a=ge?a.add(C):a.delete(C)):(c=c.delete(C),a=a.delete(C)))}),Vm(this.query)||Bm(this.query))for(;c.size>this.query.limit;){const C=Vm(this.query)?c.last():c.first();c=c.delete(C.key),a=a.delete(C.key),r.track({type:1,doc:C})}return{gc:c,Ec:r,ks:h,mutatedKeys:a}}Tc(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r){const i=this.gc;this.gc=e.gc,this.mutatedKeys=e.mutatedKeys;const a=e.Ec.Yo();a.sort((v,C)=>function(D,x){const k=B=>{switch(B){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Mt()}};return k(D)-k(x)}(v.type,C.type)||this.mc(v.doc,C.doc)),this.Ac(r);const c=t?this.Rc():[],h=0===this.wc.size&&this.current?1:0,g=h!==this._c;return this._c=h,0!==a.length||g?{snapshot:new un(this.query,e.gc,i,a,e.mutatedKeys,0===h,g,!1),Pc:c}:{Pc:c}}tc(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({gc:this.gc,Ec:new Ft,mutatedKeys:this.mutatedKeys,ks:!1},!1)):{Pc:[]}}bc(e){return!this.dc.has(e)&&!!this.gc.has(e)&&!this.gc.get(e).hasLocalMutations}Ac(e){e&&(e.addedDocuments.forEach(t=>this.dc=this.dc.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.dc=this.dc.delete(t)),this.current=e.current)}Rc(){if(!this.current)return[];const e=this.wc;this.wc=Mn(),this.gc.forEach(r=>{this.bc(r.key)&&(this.wc=this.wc.add(r.key))});const t=[];return e.forEach(r=>{this.wc.has(r)||t.push(new AN(r))}),this.wc.forEach(r=>{e.has(r)||t.push(new SN(r))}),t}vc(e){this.dc=e.Ks,this.wc=Mn();const t=this.Ic(e.documents);return this.applyChanges(t,!0)}Vc(){return un.fromInitialDocuments(this.query,this.gc,this.mutatedKeys,0===this._c)}}class zF{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}}class GF{constructor(e){this.key=e,this.Sc=!1}}class qF{constructor(e,t,r,i,a,c){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=i,this.currentUser=a,this.maxConcurrentLimboResolutions=c,this.Dc={},this.Cc=new zd(h=>eb(h),Od),this.Nc=new Map,this.xc=new Set,this.kc=new vr(Ct.comparator),this.Oc=new Map,this.Mc=new TE,this.$c={},this.Fc=new Map,this.Bc=jo.Je(),this.onlineState="Unknown",this.Lc=void 0}get isPrimaryClient(){return!0===this.Lc}}function KF(n,e){return rA.apply(this,arguments)}function rA(){return rA=(0,Ce.Z)(function*(n,e){const t=DA(n);let r,i;const a=t.Cc.get(e);if(a)r=a.targetId,t.sharedClientState.addLocalQueryTarget(r),i=a.view.Vc();else{const c=yield Gc(t.localStore,Vs(e));t.isPrimaryClient&&d_(t.remoteStore,c);const h=t.sharedClientState.addLocalQueryTarget(c.targetId);r=c.targetId,i=yield iA(t,e,r,"current"===h)}return i}),rA.apply(this,arguments)}function iA(n,e,t,r){return sA.apply(this,arguments)}function sA(){return sA=(0,Ce.Z)(function*(n,e,t,r){n.Uc=(C,D,x)=>{return(k=(0,Ce.Z)(function*(B,ge,xe,bt){let Tt=ge.view.Ic(xe);Tt.ks&&(Tt=yield mp(B.localStore,ge.query,!1).then(({documents:En})=>ge.view.Ic(En,Tt)));const Wt=bt&&bt.targetChanges.get(ge.targetId),Rt=ge.view.applyChanges(Tt,B.isPrimaryClient,Wt);return gA(B,ge.targetId,Rt.Pc),Rt.snapshot}),function(B,ge,xe,bt){return k.apply(this,arguments)})(n,C,D,x);var k};const i=yield mp(n.localStore,e,!0),a=new RN(e,i.Ks),c=a.Ic(i.documents),h=Zf.createSynthesizedTargetChangeForCurrentChange(t,r&&"Offline"!==n.onlineState),g=a.applyChanges(c,n.isPrimaryClient,h);gA(n,t,g.Pc);const v=new zF(e,t,a);return n.Cc.set(e,v),n.Nc.has(t)?n.Nc.get(t).push(e):n.Nc.set(t,[e]),g.snapshot}),sA.apply(this,arguments)}function ZF(n,e){return oA.apply(this,arguments)}function oA(){return oA=(0,Ce.Z)(function*(n,e){const t=pt(n),r=t.Cc.get(e),i=t.Nc.get(r.targetId);if(i.length>1)return t.Nc.set(r.targetId,i.filter(a=>!Od(a,e))),void t.Cc.delete(e);t.isPrimaryClient?(t.sharedClientState.removeLocalQueryTarget(r.targetId),t.sharedClientState.isActiveQueryTarget(r.targetId)||(yield $o(t.localStore,r.targetId,!1).then(()=>{t.sharedClientState.clearQueryState(r.targetId),bp(t.remoteStore,r.targetId),f_(t,r.targetId)}).catch(zc))):(f_(t,r.targetId),yield $o(t.localStore,r.targetId,!0))}),oA.apply(this,arguments)}function aA(){return aA=(0,Ce.Z)(function*(n,e,t){const r=SA(n);try{const i=yield function(a,c){const h=pt(a),g=_n.now(),v=c.reduce((D,x)=>D.add(x.key),Mn());let C;return h.persistence.runTransaction("Locally write mutations","readwrite",D=>h.Us.Es(D,v).next(x=>{C=x;const k=[];for(const B of c){const ge=CS(B,C.get(B.key));null!=ge&&k.push(new gu(B.key,ge,Lv(ge.value.mapValue),ir.exists(!0)))}return h.gs.addMutationBatch(D,g,k,c)})).then(D=>(D.applyToLocalDocumentSet(C),{batchId:D.batchId,changes:C}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(a,c,h){let g=a.$c[a.currentUser.toKey()];g||(g=new vr(bn)),g=g.insert(c,h),a.$c[a.currentUser.toKey()]=g}(r,i.batchId,t),yield Yc(r,i.changes),yield Cp(r.remoteStore)}catch(i){const a=wt(i,"Failed to persist write");t.reject(a)}}),aA.apply(this,arguments)}function xN(n,e){return uA.apply(this,arguments)}function uA(){return uA=(0,Ce.Z)(function*(n,e){const t=pt(n);try{const r=yield zb(t.localStore,e);e.targetChanges.forEach((i,a)=>{const c=t.Oc.get(a);c&&(Kt(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?c.Sc=!0:i.modifiedDocuments.size>0?Kt(c.Sc):i.removedDocuments.size>0&&(Kt(c.Sc),c.Sc=!1))}),yield Yc(t,r,e)}catch(r){yield zc(r)}}),uA.apply(this,arguments)}function PN(n,e,t){const r=pt(n);if(r.isPrimaryClient&&0===t||!r.isPrimaryClient&&1===t){const i=[];r.Cc.forEach((a,c)=>{const h=c.view.tc(e);h.snapshot&&i.push(h.snapshot)}),function(a,c){const h=pt(a);h.onlineState=c;let g=!1;h.queries.forEach((v,C)=>{for(const D of C.listeners)D.tc(c)&&(g=!0)}),g&&Ap(h)}(r.eventManager,e),i.length&&r.Dc.To(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function QF(n,e,t){return cA.apply(this,arguments)}function cA(){return cA=(0,Ce.Z)(function*(n,e,t){const r=pt(n);r.sharedClientState.updateQueryState(e,"rejected",t);const i=r.Oc.get(e),a=i&&i.key;if(a){let c=new vr(Ct.comparator);c=c.insert(a,Gn.newNoDocument(a,Zt.min()));const h=Mn().add(a),g=new Lc(Zt.min(),new Map,new hr(bn),c,h);yield xN(r,g),r.kc=r.kc.remove(a),r.Oc.delete(e),mA(r)}else yield $o(r.localStore,e,!1).then(()=>f_(r,e,t)).catch(zc)}),cA.apply(this,arguments)}function JF(n,e){return lA.apply(this,arguments)}function lA(){return lA=(0,Ce.Z)(function*(n,e){const t=pt(n),r=e.batch.batchId;try{const i=yield pN(t.localStore,e);pA(t,r,null),fA(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),yield Yc(t,i)}catch(i){yield zc(i)}}),lA.apply(this,arguments)}function XF(n,e,t){return dA.apply(this,arguments)}function dA(){return dA=(0,Ce.Z)(function*(n,e,t){const r=pt(n);try{const i=yield function(a,c){const h=pt(a);return h.persistence.runTransaction("Reject batch","readwrite-primary",g=>{let v;return h.gs.lookupMutationBatch(g,c).next(C=>(Kt(null!==C),v=C.keys(),h.gs.removeMutationBatch(g,C))).next(()=>h.gs.performConsistencyCheck(g)).next(()=>h.Us.Es(g,v))})}(r.localStore,e);pA(r,e,t),fA(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),yield Yc(r,i)}catch(i){yield zc(i)}}),dA.apply(this,arguments)}function hA(){return hA=(0,Ce.Z)(function*(n,e){const t=pt(n);vu(t.remoteStore)||Je("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const r=yield function(a){const c=pt(a);return c.persistence.runTransaction("Get highest unacknowledged batch id","readonly",h=>c.gs.getHighestUnacknowledgedBatchId(h))}(t.localStore);if(-1===r)return void e.resolve();const i=t.Fc.get(r)||[];i.push(e),t.Fc.set(r,i)}catch(r){const i=wt(r,"Initialization of waitForPendingWrites() operation failed");e.reject(i)}}),hA.apply(this,arguments)}function fA(n,e){(n.Fc.get(e)||[]).forEach(t=>{t.resolve()}),n.Fc.delete(e)}function pA(n,e,t){const r=pt(n);let i=r.$c[r.currentUser.toKey()];if(i){const a=i.get(e);a&&(t?a.reject(t):a.resolve(),i=i.remove(e)),r.$c[r.currentUser.toKey()]=i}}function f_(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const r of n.Nc.get(e))n.Cc.delete(r),t&&n.Dc.qc(r,t);n.Nc.delete(e),n.isPrimaryClient&&n.Mc.si(e).forEach(r=>{n.Mc.containsKey(r)||NN(n,r)})}function NN(n,e){n.xc.delete(e.path.canonicalString());const t=n.kc.get(e);null!==t&&(bp(n.remoteStore,t),n.kc=n.kc.remove(e),n.Oc.delete(t),mA(n))}function gA(n,e,t){for(const r of t)r instanceof SN?(n.Mc.addReference(r.key,e),tL(n,r)):r instanceof AN?(Je("SyncEngine","Document no longer in limbo: "+r.key),n.Mc.removeReference(r.key,e),n.Mc.containsKey(r.key)||NN(n,r.key)):Mt()}function tL(n,e){const t=e.key,r=t.path.canonicalString();n.kc.get(t)||n.xc.has(r)||(Je("SyncEngine","New document in limbo: "+t),n.xc.add(r),mA(n))}function mA(n){for(;n.xc.size>0&&n.kc.size<n.maxConcurrentLimboResolutions;){const e=n.xc.values().next().value;n.xc.delete(e);const t=new Ct(Rn.fromString(e)),r=n.Bc.next();n.Oc.set(r,new GF(t)),n.kc=n.kc.insert(t,r),d_(n.remoteStore,new ma(Vs(Md(t.path)),r,2,gs.A))}}function Yc(n,e,t){return _A.apply(this,arguments)}function _A(){return _A=(0,Ce.Z)(function*(n,e,t){const r=pt(n),i=[],a=[],c=[];var h;r.Cc.isEmpty()||(r.Cc.forEach((h,g)=>{c.push(r.Uc(g,e,t).then(v=>{if(v){r.isPrimaryClient&&r.sharedClientState.updateQueryState(g.targetId,v.fromCache?"not-current":"current"),i.push(v);const C=yE.Ss(g.targetId,v);a.push(C)}}))}),yield Promise.all(c),r.Dc.To(i),yield(h=(0,Ce.Z)(function*(g,v){const C=pt(g);try{yield C.persistence.runTransaction("notifyLocalViewChanges","readwrite",D=>Se.forEach(v,x=>Se.forEach(x.vs,k=>C.persistence.referenceDelegate.addReference(D,x.targetId,k)).next(()=>Se.forEach(x.Vs,k=>C.persistence.referenceDelegate.removeReference(D,x.targetId,k)))))}catch(D){if(!ga(D))throw D;Je("LocalStore","Failed to update sequence numbers: "+D)}for(const D of v){const x=D.targetId;if(!D.fromCache){const k=C.Ms.get(x),ge=k.withLastLimboFreeSnapshotVersion(k.snapshotVersion);C.Ms=C.Ms.insert(x,ge)}}}),function(g,v){return h.apply(this,arguments)})(r.localStore,a))}),_A.apply(this,arguments)}function nL(n,e){return yA.apply(this,arguments)}function yA(){return yA=(0,Ce.Z)(function*(n,e){const t=pt(n);if(!t.currentUser.isEqual(e)){Je("SyncEngine","User change. New user:",e.toKey());const r=yield EE(t.localStore,e);t.currentUser=e,(i=t).Fc.forEach(c=>{c.forEach(h=>{h.reject(new qe(ve.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),i.Fc.clear(),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),yield Yc(t,r.qs)}var i}),yA.apply(this,arguments)}function rL(n,e){const t=pt(n),r=t.Oc.get(e);if(r&&r.Sc)return Mn().add(r.key);{let i=Mn();const a=t.Nc.get(e);if(!a)return i;for(const c of a){const h=t.Cc.get(c);i=i.unionWith(h.view.yc)}return i}}function iL(n,e){return vA.apply(this,arguments)}function vA(){return vA=(0,Ce.Z)(function*(n,e){const t=pt(n),r=yield mp(t.localStore,e.query,!0),i=e.view.vc(r);return t.isPrimaryClient&&gA(t,e.targetId,i.Pc),i}),vA.apply(this,arguments)}function sL(n){return EA.apply(this,arguments)}function EA(){return EA=(0,Ce.Z)(function*(n){const e=pt(n);return bE(e.localStore).then(t=>Yc(e,t))}),EA.apply(this,arguments)}function oL(n,e,t,r){return wA.apply(this,arguments)}function wA(){return wA=(0,Ce.Z)(function*(n,e,t,r){const i=pt(n),a=yield function(c,h){const g=pt(c),v=pt(g.gs);return g.persistence.runTransaction("Lookup mutation documents","readonly",C=>v.Ge(C,h).next(D=>D?g.Us.Es(C,D):Se.resolve(null)))}(i.localStore,e);var h;null!==a?("pending"===t?yield Cp(i.remoteStore):"acknowledged"===t||"rejected"===t?(pA(i,e,r||null),fA(i,e),h=e,pt(pt(i.localStore).gs).Qe(h)):Mt(),yield Yc(i,a)):Je("SyncEngine","Cannot apply mutation batch with id: "+e)}),wA.apply(this,arguments)}function IA(){return IA=(0,Ce.Z)(function*(n,e){const t=pt(n);if(DA(t),SA(t),!0===e&&!0!==t.Lc){const r=t.sharedClientState.getAllActiveQueryTargets(),i=yield MN(t,r.toArray());t.Lc=!0,yield W(t.remoteStore,!0);for(const a of i)d_(t.remoteStore,a)}else if(!1===e&&!1!==t.Lc){const r=[];let i=Promise.resolve();t.Nc.forEach((a,c)=>{t.sharedClientState.isLocalQueryTarget(c)?r.push(c):i=i.then(()=>(f_(t,c),$o(t.localStore,c,!0))),bp(t.remoteStore,c)}),yield i,yield MN(t,r),function(a){const c=pt(a);c.Oc.forEach((h,g)=>{bp(c.remoteStore,g)}),c.Mc.ii(),c.Oc=new Map,c.kc=new vr(Ct.comparator)}(t),t.Lc=!1,yield W(t.remoteStore,!1)}}),IA.apply(this,arguments)}function MN(n,e,t){return bA.apply(this,arguments)}function bA(){return bA=(0,Ce.Z)(function*(n,e,t){const r=pt(n),i=[],a=[];for(const c of e){let h;const g=r.Nc.get(c);if(g&&0!==g.length){h=yield Gc(r.localStore,Vs(g[0]));for(const v of g){const C=r.Cc.get(v),D=yield iL(r,C);D.snapshot&&a.push(D.snapshot)}}else{const v=yield qb(r.localStore,c);h=yield Gc(r.localStore,v),yield iA(r,kN(v),c,!1)}i.push(h)}return r.Dc.To(a),i}),bA.apply(this,arguments)}function kN(n){return $v(n.path,n.collectionGroup,n.orderBy,n.filters,n.limit,"F",n.startAt,n.endAt)}function uL(n){const e=pt(n);return pt(pt(e.localStore).persistence).ds()}function cL(n,e,t,r){return CA.apply(this,arguments)}function CA(){return CA=(0,Ce.Z)(function*(n,e,t,r){const i=pt(n);if(i.Lc)Je("SyncEngine","Ignoring unexpected query state notification.");else if(i.Nc.has(e))switch(t){case"current":case"not-current":{const a=yield bE(i.localStore),c=Lc.createSynthesizedRemoteEventForCurrentChange(e,"current"===t);yield Yc(i,a,c);break}case"rejected":yield $o(i.localStore,e,!0),f_(i,e,r);break;default:Mt()}}),CA.apply(this,arguments)}function lL(n,e,t){return TA.apply(this,arguments)}function TA(){return TA=(0,Ce.Z)(function*(n,e,t){const r=DA(n);if(r.Lc){for(const i of e){if(r.Nc.has(i)){Je("SyncEngine","Adding an already active target "+i);continue}const a=yield qb(r.localStore,i),c=yield Gc(r.localStore,a);yield iA(r,kN(a),c.targetId,!1),d_(r.remoteStore,c)}for(const i of t)r.Nc.has(i)&&(yield $o(r.localStore,i,!1).then(()=>{bp(r.remoteStore,i),f_(r,i)}).catch(zc))}}),TA.apply(this,arguments)}function DA(n){const e=pt(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=xN.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=rL.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=QF.bind(null,e),e.Dc.To=kE.bind(null,e.eventManager),e.Dc.qc=OE.bind(null,e.eventManager),e}function SA(n){const e=pt(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=JF.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=XF.bind(null,e),e}class ON{constructor(){this.synchronizeTabs=!1}initialize(e){var t=this;return(0,Ce.Z)(function*(){t.O=wp(e.databaseInfo.databaseId),t.sharedClientState=t.Gc(e),t.persistence=t.jc(e),yield t.persistence.start(),t.gcScheduler=t.Qc(e),t.localStore=t.Wc(e)})()}Qc(e){return null}Wc(e){return Wb(this.persistence,new vE,e.initialUser,this.O)}jc(e){return new YS(DE.bi,this.O)}Gc(e){return new Ep}terminate(){var e=this;return(0,Ce.Z)(function*(){e.gcScheduler&&e.gcScheduler.stop(),yield e.sharedClientState.shutdown(),yield e.persistence.shutdown()})()}}class FN extends ON{constructor(e,t,r){super(),this.zc=e,this.cacheSizeBytes=t,this.forceOwnership=r,this.synchronizeTabs=!1}initialize(e){var t=()=>super.initialize,r=this;return(0,Ce.Z)(function*(){yield t().call(r,e),yield function Kb(n){return CE.apply(this,arguments)}(r.localStore),yield r.zc.initialize(r,e),yield SA(r.zc.syncEngine),yield Cp(r.zc.remoteStore),yield r.persistence.Hn(()=>(r.gcScheduler&&!r.gcScheduler.started&&r.gcScheduler.start(r.localStore),Promise.resolve()))})()}Wc(e){return Wb(this.persistence,new vE,e.initialUser,this.O)}Qc(e){return new VS(this.persistence.referenceDelegate.garbageCollector,e.asyncQueue)}jc(e){const t=ms(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),r=void 0!==this.cacheSizeBytes?es.withCacheSize(this.cacheSizeBytes):es.DEFAULT;return new _E(this.synchronizeTabs,t,e.clientId,r,e.asyncQueue,Jb(),l_(),this.O,this.sharedClientState,!!this.forceOwnership)}Gc(e){return new Ep}}class hL extends FN{constructor(e,t){super(e,t,!1),this.zc=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}initialize(e){var t=()=>super.initialize,r=this;return(0,Ce.Z)(function*(){yield t().call(r,e);const i=r.zc.syncEngine;r.sharedClientState instanceof vp&&(r.sharedClientState.syncEngine={hr:oL.bind(null,i),lr:cL.bind(null,i),dr:lL.bind(null,i),ds:uL.bind(null,i),ar:sL.bind(null,i)},yield r.sharedClientState.start()),yield r.persistence.Hn(function(){var a=(0,Ce.Z)(function*(c){yield function aL(n,e){return IA.apply(this,arguments)}(r.zc.syncEngine,c),r.gcScheduler&&(c&&!r.gcScheduler.started?r.gcScheduler.start(r.localStore):c||r.gcScheduler.stop())});return function(c){return a.apply(this,arguments)}}())})()}Gc(e){const t=Jb();if(!vp.Vt(t))throw new qe(ve.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const r=ms(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new vp(t,e.asyncQueue,r,e.clientId,e.initialUser)}}class AA{initialize(e,t){var r=this;return(0,Ce.Z)(function*(){r.localStore||(r.localStore=e.localStore,r.sharedClientState=e.sharedClientState,r.datastore=r.createDatastore(t),r.remoteStore=r.createRemoteStore(t),r.eventManager=r.createEventManager(t),r.syncEngine=r.createSyncEngine(t,!e.synchronizeTabs),r.sharedClientState.onlineStateHandler=i=>PN(r.syncEngine,i,1),r.remoteStore.remoteSyncer.handleCredentialChange=nL.bind(null,r.syncEngine),yield W(r.remoteStore,r.syncEngine.isPrimaryClient))})()}createEventManager(e){return new _s}createDatastore(e){const t=wp(e.databaseInfo.databaseId),r=new Qb(e.databaseInfo);return new JS(e.authCredentials,e.appCheckCredentials,r,t)}createRemoteStore(e){return t=this.localStore,r=this.datastore,i=e.asyncQueue,a=h=>PN(this.syncEngine,h,0),c=QS.Vt()?new QS:new EN,new tC(t,r,i,a,c);var t,r,i,a,c}createSyncEngine(e,t){return function(r,i,a,c,h,g,v){const C=new qF(r,i,a,c,h,g);return v&&(C.Lc=!0),C}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}terminate(){return(e=(0,Ce.Z)(function*(t){const r=pt(t);Je("RemoteStore","RemoteStore shutting down."),r.Ko.add(5),yield Zc(r),r.jo.shutdown(),r.Qo.set("Unknown")}),function(t){return e.apply(this,arguments)})(this.remoteStore);var e}}function LN(n,e=10240){let t=0;return{read:()=>(0,Ce.Z)(function*(){if(t<n.byteLength){const r={value:n.slice(t,t+e),done:!1};return t+=e,r}return{done:!0}})(),cancel:()=>(0,Ce.Z)(function*(){})(),releaseLock(){},closed:Promise.reject("unimplemented")}}class dC{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Hc(this.observer.next,e)}error(e){this.observer.error?this.Hc(this.observer.error,e):console.error("Uncaught Error in snapshot listener:",e)}Jc(){this.muted=!0}Hc(e,t){this.muted||setTimeout(()=>{this.muted||e(t)},0)}}class fL{constructor(e,t){this.Yc=e,this.O=t,this.metadata=new ri,this.buffer=new Uint8Array,this.Xc=new TextDecoder("utf-8"),this.Zc().then(r=>{r&&r.ac()?this.metadata.resolve(r.payload.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is\n             ${JSON.stringify(null==r?void 0:r.payload)}`))},r=>this.metadata.reject(r))}close(){return this.Yc.cancel()}getMetadata(){var e=this;return(0,Ce.Z)(function*(){return e.metadata.promise})()}Kc(){var e=this;return(0,Ce.Z)(function*(){return yield e.getMetadata(),e.Zc()})()}Zc(){var e=this;return(0,Ce.Z)(function*(){const t=yield e.tu();if(null===t)return null;const r=e.Xc.decode(t),i=Number(r);isNaN(i)&&e.eu(`length string (${r}) is not valid number`);const a=yield e.nu(i);return new FE(JSON.parse(a),t.length+i)})()}su(){return this.buffer.findIndex(e=>e==="{".charCodeAt(0))}tu(){var e=this;return(0,Ce.Z)(function*(){for(;e.su()<0&&!(yield e.iu()););if(0===e.buffer.length)return null;const t=e.su();t<0&&e.eu("Reached the end of bundle when a length string is expected.");const r=e.buffer.slice(0,t);return e.buffer=e.buffer.slice(t),r})()}nu(e){var t=this;return(0,Ce.Z)(function*(){for(;t.buffer.length<e;)(yield t.iu())&&t.eu("Reached the end of bundle when more is expected.");const r=t.Xc.decode(t.buffer.slice(0,e));return t.buffer=t.buffer.slice(e),r})()}eu(e){throw this.Yc.cancel(),new Error(`Invalid bundle format: ${e}`)}iu(){var e=this;return(0,Ce.Z)(function*(){const t=yield e.Yc.read();if(!t.done){const r=new Uint8Array(e.buffer.length+t.value.length);r.set(e.buffer),r.set(t.value,e.buffer.length),e.buffer=r}return t.done})()}}class pL{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}lookup(e){var t=this;return(0,Ce.Z)(function*(){if(t.ensureCommitNotCalled(),t.mutations.length>0)throw new qe(ve.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");const r=yield(i=(0,Ce.Z)(function*(a,c){const h=pt(a),g=Xf(h.O)+"/documents",v={documents:c.map(k=>Jf(h.O,k))},C=yield h.Lr("BatchGetDocuments",g,v),D=new Map;C.forEach(k=>{const B=function nE(n,e){return"found"in e?function(t,r){Kt(!!r.found);const i=co(t,r.found.name),a=Yr(r.found.updateTime),c=new Ci({mapValue:{fields:r.found.fields}});return Gn.newFoundDocument(i,a,c)}(n,e):"missing"in e?function(t,r){Kt(!!r.missing),Kt(!!r.readTime);const i=co(t,r.missing),a=Yr(r.readTime);return Gn.newNoDocument(i,a)}(n,e):Mt()}(h.O,k);D.set(B.key.toString(),B)});const x=[];return c.forEach(k=>{const B=D.get(k.toString());Kt(!!B),x.push(B)}),x}),function(a,c){return i.apply(this,arguments)})(t.datastore,e);var i;return r.forEach(i=>t.recordVersion(i)),r})()}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(r){this.lastWriteError=r}this.writtenDocs.add(e.toString())}delete(e){this.write(new pa(e,this.precondition(e))),this.writtenDocs.add(e.toString())}commit(){var e=this;return(0,Ce.Z)(function*(){if(e.ensureCommitNotCalled(),e.lastWriteError)throw e.lastWriteError;const t=e.readVersions;var r;e.mutations.forEach(r=>{t.delete(r.key.toString())}),t.forEach((r,i)=>{const a=Ct.fromPath(i);e.mutations.push(new Jv(a,e.precondition(a)))}),yield(r=(0,Ce.Z)(function*(i,a){const c=pt(i),h=Xf(c.O)+"/documents",g={writes:a.map(v=>ep(c.O,v))};yield c.Mr("Commit",h,g)}),function(i,a){return r.apply(this,arguments)})(e.datastore,e.mutations),e.committed=!0})()}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw Mt();t=Zt.min()}const r=this.readVersions.get(e.key.toString());if(r){if(!t.isEqual(r))throw new qe(ve.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){const t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?ir.updateTime(t):ir.none()}preconditionForUpdate(e){const t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(Zt.min()))throw new qe(ve.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return ir.updateTime(t)}return ir.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}class gL{constructor(e,t,r,i){this.asyncQueue=e,this.datastore=t,this.updateFunction=r,this.deferred=i,this.ru=5,this.ro=new RE(this.asyncQueue,"transaction_retry")}run(){this.ru-=1,this.ou()}ou(){var e=this;this.ro.Hr((0,Ce.Z)(function*(){const t=new pL(e.datastore),r=e.cu(t);r&&r.then(i=>{e.asyncQueue.enqueueAndForget(()=>t.commit().then(()=>{e.deferred.resolve(i)}).catch(a=>{e.uu(a)}))}).catch(i=>{e.uu(i)})}))}cu(e){try{const t=this.updateFunction(e);return!ao(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}}uu(e){this.ru>0&&this.au(e)?(this.ru-=1,this.asyncQueue.enqueueAndForget(()=>(this.ou(),Promise.resolve()))):this.deferred.reject(e)}au(e){if("FirebaseError"===e.name){const t=e.code;return"aborted"===t||"failed-precondition"===t||!ub(t)}return!1}}class mL{constructor(e,t,r,i){var a=this;this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=i,this.user=hi.UNAUTHENTICATED,this.clientId=Lf.R(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(r,function(){var c=(0,Ce.Z)(function*(h){Je("FirestoreClient","Received user=",h.uid),yield a.authCredentialListener(h),a.user=h});return function(h){return c.apply(this,arguments)}}()),this.appCheckCredentials.start(r,c=>(Je("FirestoreClient","Received new app check token=",c),this.appCheckCredentialListener(c,this.user)))}getConfiguration(){var e=this;return(0,Ce.Z)(function*(){return{asyncQueue:e.asyncQueue,databaseInfo:e.databaseInfo,clientId:e.clientId,authCredentials:e.authCredentials,appCheckCredentials:e.appCheckCredentials,initialUser:e.user,maxConcurrentLimboResolutions:100}})()}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new qe(ve.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){var e=this;this.asyncQueue.enterRestrictedMode();const t=new ri;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((0,Ce.Z)(function*(){try{e.onlineComponents&&(yield e.onlineComponents.terminate()),e.offlineComponents&&(yield e.offlineComponents.terminate()),e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),t.resolve()}catch(r){const i=wt(r,"Failed to shutdown persistence");t.reject(i)}})),t.promise}}function UN(n,e){return RA.apply(this,arguments)}function RA(){return RA=(0,Ce.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress(),Je("FirestoreClient","Initializing OfflineComponentProvider");const t=yield n.getConfiguration();yield e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener(function(){var i=(0,Ce.Z)(function*(a){r.isEqual(a)||(yield EE(e.localStore,a),r=a)});return function(a){return i.apply(this,arguments)}}()),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n.offlineComponents=e}),RA.apply(this,arguments)}function VN(n,e){return xA.apply(this,arguments)}function xA(){return xA=(0,Ce.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress();const t=yield PA(n);Je("FirestoreClient","Initializing OnlineComponentProvider");const r=yield n.getConfiguration();yield e.initialize(t,r),n.setCredentialChangeListener(i=>R(e.remoteStore,i)),n.setAppCheckTokenChangeListener((i,a)=>R(e.remoteStore,a)),n.onlineComponents=e}),xA.apply(this,arguments)}function PA(n){return NA.apply(this,arguments)}function NA(){return NA=(0,Ce.Z)(function*(n){return n.offlineComponents||(Je("FirestoreClient","Using default OfflineComponentProvider"),yield UN(n,new ON)),n.offlineComponents}),NA.apply(this,arguments)}function hC(n){return MA.apply(this,arguments)}function MA(){return MA=(0,Ce.Z)(function*(n){return n.onlineComponents||(Je("FirestoreClient","Using default OnlineComponentProvider"),yield VN(n,new AA)),n.onlineComponents}),MA.apply(this,arguments)}function BN(n){return PA(n).then(e=>e.persistence)}function kA(n){return PA(n).then(e=>e.localStore)}function jN(n){return hC(n).then(e=>e.remoteStore)}function OA(n){return hC(n).then(e=>e.syncEngine)}function p_(n){return FA.apply(this,arguments)}function FA(){return FA=(0,Ce.Z)(function*(n){const e=yield hC(n),t=e.eventManager;return t.onListen=KF.bind(null,e.syncEngine),t.onUnlisten=ZF.bind(null,e.syncEngine),t}),FA.apply(this,arguments)}function $N(n,e,t={}){const r=new ri;return n.asyncQueue.enqueueAndForget((0,Ce.Z)(function*(){return function(i,a,c,h,g){const v=new dC({next:D=>{a.enqueueAndForget(()=>Dp(i,C));const x=D.docs.has(c);!x&&D.fromCache?g.reject(new qe(ve.UNAVAILABLE,"Failed to get document because the client is offline.")):x&&D.fromCache&&h&&"server"===h.source?g.reject(new qe(ve.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):g.resolve(D)},error:D=>g.reject(D)}),C=new Rp(Md(c.path),v,{includeMetadataChanges:!0,uc:!0});return wa(i,C)}(yield p_(n),n.asyncQueue,e,t,r)})),r.promise}function HN(n,e,t={}){const r=new ri;return n.asyncQueue.enqueueAndForget((0,Ce.Z)(function*(){return function(i,a,c,h,g){const v=new dC({next:D=>{a.enqueueAndForget(()=>Dp(i,C)),D.fromCache&&"server"===h.source?g.reject(new qe(ve.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):g.resolve(D)},error:D=>g.reject(D)}),C=new Rp(c,v,{includeMetadataChanges:!0,uc:!0});return wa(i,C)}(yield p_(n),n.asyncQueue,e,t,r)})),r.promise}const WN=new Map;function LA(n,e,t){if(!t)throw new qe(ve.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function zN(n,e,t,r){if(!0===e&&!0===r)throw new qe(ve.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function GN(n){if(!Ct.isDocumentKey(n))throw new qe(ve.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function qN(n){if(Ct.isDocumentKey(n))throw new qe(ve.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function fC(n){if(void 0===n)return"undefined";if(null===n)return"null";if("string"==typeof n)return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if("number"==typeof n||"boolean"==typeof n)return""+n;if("object"==typeof n){if(n instanceof Array)return"an array";{const e=(t=n).constructor?t.constructor.name:null;return e?`a custom ${e} object`:"an object"}}var t;return"function"==typeof n?"a function":Mt()}function xn(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new qe(ve.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=fC(n);throw new qe(ve.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function KN(n,e){if(e<=0)throw new qe(ve.INVALID_ARGUMENT,`Function ${n}() requires a positive number, but it was: ${e}.`)}class ZN{constructor(e){var t;if(void 0===e.host){if(void 0!==e.ssl)throw new qe(ve.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(t=e.ssl)||void 0===t||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new qe(ve.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.useFetchStreams=!!e.useFetchStreams,zN("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling)}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class LE{constructor(e,t,r){this._authCredentials=t,this._appCheckCredentials=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new ZN({}),this._settingsFrozen=!1,e instanceof Nc?this._databaseId=e:(this._app=e,this._databaseId=function(i){if(!Object.prototype.hasOwnProperty.apply(i.options,["projectId"]))throw new qe(ve.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Nc(i.options.projectId)}(e))}get app(){if(!this._app)throw new qe(ve.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new qe(ve.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new ZN(e),void 0!==e.credentials&&(this._authCredentials=function(t){if(!t)return new eN;switch(t.type){case"gapi":const r=t.client;return Kt(!("object"!=typeof r||null===r||!r.auth||!r.auth.getAuthHeaderValueForFirstParty)),new zI(r,t.sessionIndex||"0",t.iamToken||null);case"provider":return t.client;default:throw new qe(ve.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const t=WN.get(e);t&&(Je("ComponentProvider","Removing Datastore"),WN.delete(e),t.terminate())}(this),Promise.resolve()}}class wr{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Eu(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new wr(this.firestore,e,this._key)}}class ts{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new ts(this.firestore,e,this._query)}}class Eu extends ts{constructor(e,t,r){super(e,t,Md(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new wr(this.firestore,null,new Ct(e))}withConverter(e){return new Eu(this.firestore,e,this._path)}}function YN(n,e,...t){if(n=(0,Z.m9)(n),LA("collection","path",e),n instanceof LE){const r=Rn.fromString(e,...t);return qN(r),new Eu(n,null,r)}{if(!(n instanceof wr||n instanceof Eu))throw new qe(ve.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(Rn.fromString(e,...t));return qN(r),new Eu(n.firestore,null,r)}}function pC(n,e,...t){if(n=(0,Z.m9)(n),1===arguments.length&&(e=Lf.R()),LA("doc","path",e),n instanceof LE){const r=Rn.fromString(e,...t);return GN(r),new wr(n,null,new Ct(r))}{if(!(n instanceof wr||n instanceof Eu))throw new qe(ve.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(Rn.fromString(e,...t));return GN(r),new wr(n.firestore,n instanceof Eu?n.converter:null,new Ct(r))}}function QN(n,e){return n=(0,Z.m9)(n),e=(0,Z.m9)(e),(n instanceof wr||n instanceof Eu)&&(e instanceof wr||e instanceof Eu)&&n.firestore===e.firestore&&n.path===e.path&&n.converter===e.converter}function JN(n,e){return n=(0,Z.m9)(n),e=(0,Z.m9)(e),n instanceof ts&&e instanceof ts&&n.firestore===e.firestore&&Od(n._query,e._query)&&n.converter===e.converter}class SL{constructor(){this.hu=Promise.resolve(),this.lu=[],this.fu=!1,this.du=[],this._u=null,this.wu=!1,this.mu=!1,this.gu=[],this.ro=new RE(this,"async_queue_retry"),this.yu=()=>{const t=l_();t&&Je("AsyncQueue","Visibility state changed to "+t.visibilityState),this.ro.Yr()};const e=l_();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.yu)}get isShuttingDown(){return this.fu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.pu(),this.Iu(e)}enterRestrictedMode(e){if(!this.fu){this.fu=!0,this.mu=e||!1;const t=l_();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.yu)}}enqueue(e){if(this.pu(),this.fu)return new Promise(()=>{});const t=new ri;return this.Iu(()=>this.fu&&this.mu?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.lu.push(e),this.Eu()))}Eu(){var e=this;return(0,Ce.Z)(function*(){if(0!==e.lu.length){try{yield e.lu[0](),e.lu.shift(),e.ro.reset()}catch(t){if(!ga(t))throw t;Je("AsyncQueue","Operation failed with retryable error: "+t)}e.lu.length>0&&e.ro.Hr(()=>e.Eu())}})()}Iu(e){const t=this.hu.then(()=>(this.wu=!0,e().catch(r=>{throw this._u=r,this.wu=!1,Or("INTERNAL UNHANDLED ERROR: ",function(a){let c=a.message||"";return a.stack&&(c=a.stack.includes(a.message)?a.stack:a.message+"\n"+a.stack),c}(r)),r}).then(r=>(this.wu=!1,r))));return this.hu=t,t}enqueueAfterDelay(e,t,r){this.pu(),this.gu.indexOf(e)>-1&&(t=0);const i=dt.createAndSchedule(this,e,t,r,a=>this.Tu(a));return this.du.push(i),i}pu(){this._u&&Mt()}verifyOperationInProgress(){}Au(){var e=this;return(0,Ce.Z)(function*(){let t;do{t=e.hu,yield t}while(t!==e.hu)})()}Ru(e){for(const t of this.du)if(t.timerId===e)return!0;return!1}Pu(e){return this.Au().then(()=>{this.du.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(const t of this.du)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.Au()})}bu(e){this.gu.push(e)}Tu(e){const t=this.du.indexOf(e);this.du.splice(t,1)}}function UA(n){return function(e,t){if("object"!=typeof e||null===e)return!1;const r=e;for(const i of["next","error","complete"])if(i in r&&"function"==typeof r[i])return!0;return!1}(n)}class AL{constructor(){this._progressObserver={},this._taskCompletionResolver=new ri,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,t,r){this._progressObserver={next:e,error:t,complete:r}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,t){return this._taskCompletionResolver.promise.then(e,t)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}class Sr extends LE{constructor(e,t,r){super(e,t,r),this.type="firestore",this._queue=new SL,this._persistenceKey="name"in e?e.name:"[DEFAULT]"}_terminate(){return this._firestoreClient||XN(this),this._firestoreClient.terminate()}}function xL(n=(0,Nn.getApp)()){return(0,Nn._getProvider)(n,"firestore").getImmediate()}function si(n){return n._firestoreClient||XN(n),n._firestoreClient.verifyNotTerminated(),n._firestoreClient}function XN(n){var e;const t=n._freezeSettings(),r=(a=(null===(e=n._app)||void 0===e?void 0:e.options.appId)||"",new KI(n._databaseId,a,n._persistenceKey,(h=t).host,h.ssl,h.experimentalForceLongPolling,h.experimentalAutoDetectLongPolling,h.useFetchStreams));var a,h;n._firestoreClient=new mL(n._authCredentials,n._appCheckCredentials,n._queue,r)}function eM(n,e,t){const r=new ri;return n.asyncQueue.enqueue((0,Ce.Z)(function*(){try{yield UN(n,t),yield VN(n,e),r.resolve()}catch(i){if(!("FirebaseError"===(a=i).name?a.code===ve.FAILED_PRECONDITION||a.code===ve.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&a instanceof DOMException)||22===a.code||20===a.code||11===a.code))throw i;console.warn("Error enabling offline persistence. Falling back to persistence disabled: "+i),r.reject(i)}var a})).then(()=>r.promise)}function tM(n){if(n._initialized||n._terminated)throw new qe(ve.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}class Qc{constructor(...e){for(let t=0;t<e.length;++t)if(0===e[t].length)throw new qe(ve.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Kr(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class wu{constructor(e){this._byteString=e}static fromBase64String(e){try{return new wu(Zr.fromBase64String(e))}catch(t){throw new qe(ve.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new wu(Zr.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class xp{constructor(e){this._methodName=e}}class gC{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new qe(ve.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new qe(ve.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return bn(this._lat,e._lat)||bn(this._long,e._long)}}const VL=/^__.*__$/;class BL{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return null!==this.fieldMask?new gu(e,this.data,this.fieldMask,t,this.fieldTransforms):new Gf(e,this.data,t,this.fieldTransforms)}}class nM{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new gu(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function rM(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Mt()}}class mC{constructor(e,t,r,i,a,c){this.settings=e,this.databaseId=t,this.O=r,this.ignoreUndefinedProperties=i,void 0===a&&this.vu(),this.fieldTransforms=a||[],this.fieldMask=c||[]}get path(){return this.settings.path}get Vu(){return this.settings.Vu}Su(e){return new mC(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.O,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Du(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),i=this.Su({path:r,Cu:!1});return i.Nu(e),i}xu(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),i=this.Su({path:r,Cu:!1});return i.vu(),i}ku(e){return this.Su({path:void 0,Cu:!0})}Ou(e){return vC(e,this.settings.methodName,this.settings.Mu||!1,this.path,this.settings.$u)}contains(e){return void 0!==this.fieldMask.find(t=>e.isPrefixOf(t))||void 0!==this.fieldTransforms.find(t=>e.isPrefixOf(t.field))}vu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Nu(this.path.get(e))}Nu(e){if(0===e.length)throw this.Ou("Document fields must not be empty");if(rM(this.Vu)&&VL.test(e))throw this.Ou('Document fields cannot begin and end with "__"')}}class jL{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.O=r||wp(e)}Fu(e,t,r,i=!1){return new mC({Vu:e,methodName:t,$u:r,path:Kr.emptyPath(),Cu:!1,Mu:i},this.databaseId,this.O,this.ignoreUndefinedProperties)}}function Pp(n){const e=n._freezeSettings(),t=wp(n._databaseId);return new jL(n._databaseId,!!e.ignoreUndefinedProperties,t)}function _C(n,e,t,r,i,a={}){const c=n.Fu(a.merge||a.mergeFields?2:0,e,t,i);$A("Data must be an object, but it was:",c,r);const h=oM(r,c);let g,v;if(a.merge)g=new Dd(c.fieldMask),v=c.fieldTransforms;else if(a.mergeFields){const C=[];for(const D of a.mergeFields){const x=HA(e,D,t);if(!c.contains(x))throw new qe(ve.INVALID_ARGUMENT,`Field '${x}' is specified in your field mask but missing from your input data.`);uM(C,x)||C.push(x)}g=new Dd(C),v=c.fieldTransforms.filter(D=>g.covers(D.field))}else g=null,v=c.fieldTransforms;return new BL(new Ci(h),g,v)}class UE extends xp{_toFieldTransform(e){if(2!==e.Vu)throw e.Ou(1===e.Vu?`${this._methodName}() can only appear at the top level of your update data`:`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof UE}}function iM(n,e,t){return new mC({Vu:3,$u:e.settings.$u,methodName:n._methodName,Cu:t},e.databaseId,e.O,e.ignoreUndefinedProperties)}class VA extends xp{_toFieldTransform(e){return new Wf(e.path,new fu)}isEqual(e){return e instanceof VA}}class $L extends xp{constructor(e,t){super(e),this.Bu=t}_toFieldTransform(e){const t=iM(this,e,!0),r=this.Bu.map(a=>Np(a,t)),i=new Oc(r);return new Wf(e.path,i)}isEqual(e){return this===e}}class HL extends xp{constructor(e,t){super(e),this.Bu=t}_toFieldTransform(e){const t=iM(this,e,!0),r=this.Bu.map(a=>Np(a,t)),i=new Fc(r);return new Wf(e.path,i)}isEqual(e){return this===e}}class WL extends xp{constructor(e,t){super(e),this.Lu=t}_toFieldTransform(e){const t=new Fd(e.O,Hm(e.O,this.Lu));return new Wf(e.path,t)}isEqual(e){return this===e}}function BA(n,e,t,r){const i=n.Fu(1,e,t);$A("Data must be an object, but it was:",i,r);const a=[],c=Ci.empty();xc(r,(g,v)=>{const C=yC(e,g,t);v=(0,Z.m9)(v);const D=i.xu(C);if(v instanceof UE)a.push(C);else{const x=Np(v,D);null!=x&&(a.push(C),c.set(C,x))}});const h=new Dd(a);return new nM(c,h,i.fieldTransforms)}function jA(n,e,t,r,i,a){const c=n.Fu(1,e,t),h=[HA(e,r,t)],g=[i];if(a.length%2!=0)throw new qe(ve.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let x=0;x<a.length;x+=2)h.push(HA(e,a[x])),g.push(a[x+1]);const v=[],C=Ci.empty();for(let x=h.length-1;x>=0;--x)if(!uM(v,h[x])){const k=h[x];let B=g[x];B=(0,Z.m9)(B);const ge=c.xu(k);if(B instanceof UE)v.push(k);else{const xe=Np(B,ge);null!=xe&&(v.push(k),C.set(k,xe))}}const D=new Dd(v);return new nM(C,D,c.fieldTransforms)}function sM(n,e,t,r=!1){return Np(t,n.Fu(r?4:3,e))}function Np(n,e){if(aM(n=(0,Z.m9)(n)))return $A("Unsupported field value:",e,n),oM(n,e);if(n instanceof xp)return function(t,r){if(!rM(r.Vu))throw r.Ou(`${t._methodName}() can only be used with update() and set()`);if(!r.path)throw r.Ou(`${t._methodName}() is not currently supported inside arrays`);const i=t._toFieldTransform(r);i&&r.fieldTransforms.push(i)}(n,e),null;if(void 0===n&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.Cu&&4!==e.Vu)throw e.Ou("Nested arrays are not supported");return function(t,r){const i=[];let a=0;for(const c of t){let h=Np(c,r.ku(a));null==h&&(h={nullValue:"NULL_VALUE"}),i.push(h),a++}return{arrayValue:{values:i}}}(n,e)}return function(t,r){if(null===(t=(0,Z.m9)(t)))return{nullValue:"NULL_VALUE"};if("number"==typeof t)return Hm(r.O,t);if("boolean"==typeof t)return{booleanValue:t};if("string"==typeof t)return{stringValue:t};if(t instanceof Date){const i=_n.fromDate(t);return{timestampValue:Ld(r.O,i)}}if(t instanceof _n){const i=new _n(t.seconds,1e3*Math.floor(t.nanoseconds/1e3));return{timestampValue:Ld(r.O,i)}}if(t instanceof gC)return{geoPointValue:{latitude:t.latitude,longitude:t.longitude}};if(t instanceof wu)return{bytesValue:Xv(r.O,t._byteString)};if(t instanceof wr){const i=r.databaseId,a=t.firestore._databaseId;if(!a.isEqual(i))throw r.Ou(`Document reference is for database ${a.projectId}/${a.database} but should be for database ${i.projectId}/${i.database}`);return{referenceValue:Zm(t.firestore._databaseId||r.databaseId,t._key.path)}}throw r.Ou(`Unsupported field value: ${fC(t)}`)}(n,e)}function oM(n,e){const t={};return GI(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):xc(n,(r,i)=>{const a=Np(i,e.Du(r));null!=a&&(t[r]=a)}),{mapValue:{fields:t}}}function aM(n){return!("object"!=typeof n||null===n||n instanceof Array||n instanceof Date||n instanceof _n||n instanceof gC||n instanceof wu||n instanceof wr||n instanceof xp)}function $A(n,e,t){if(!aM(t)||"object"!=typeof(r=t)||null===r||Object.getPrototypeOf(r)!==Object.prototype&&null!==Object.getPrototypeOf(r)){const r=fC(t);throw e.Ou("an object"===r?n+" a custom object":n+" "+r)}var r}function HA(n,e,t){if((e=(0,Z.m9)(e))instanceof Qc)return e._internalPath;if("string"==typeof e)return yC(n,e);throw vC("Field path arguments must be of type string or ",n,!1,void 0,t)}const zL=new RegExp("[~\\*/\\[\\]]");function yC(n,e,t){if(e.search(zL)>=0)throw vC(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new Qc(...e.split("."))._internalPath}catch(r){throw vC(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function vC(n,e,t,r,i){const a=r&&!r.isEmpty(),c=void 0!==i;let h=`Function ${e}() called with invalid data`;t&&(h+=" (via `toFirestore()`)"),h+=". ";let g="";return(a||c)&&(g+=" (found",a&&(g+=` in field ${r}`),c&&(g+=` in document ${i}`),g+=")"),new qe(ve.INVALID_ARGUMENT,h+n+g)}function uM(n,e){return n.some(t=>t.isEqual(e))}class VE{constructor(e,t,r,i,a){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=i,this._converter=a}get id(){return this._key.path.lastSegment()}get ref(){return new wr(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new GL(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(EC("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class GL extends VE{data(){return super.data()}}function EC(n,e){return"string"==typeof e?yC(n,e):e instanceof Qc?e._internalPath:e._delegate._internalPath}class Mp{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Jc extends VE{constructor(e,t,r,i,a,c){super(e,t,r,i,c),this._firestore=e,this._firestoreImpl=e,this.metadata=a}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new BE(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const r=this._document.data.field(EC("DocumentSnapshot.get",e));if(null!==r)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}}class BE extends Jc{data(e={}){return super.data(e)}}class Kd{constructor(e,t,r,i){this._firestore=e,this._userDataWriter=t,this._snapshot=i,this.metadata=new Mp(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new BE(this._firestore,this._userDataWriter,r.key,r,new Mp(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new qe(ve.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(r,i){if(r._snapshot.oldDocs.isEmpty()){let a=0;return r._snapshot.docChanges.map(c=>({type:"added",doc:new BE(r._firestore,r._userDataWriter,c.doc.key,c.doc,new Mp(r._snapshot.mutatedKeys.has(c.doc.key),r._snapshot.fromCache),r.query.converter),oldIndex:-1,newIndex:a++}))}{let a=r._snapshot.oldDocs;return r._snapshot.docChanges.filter(c=>i||3!==c.type).map(c=>{const h=new BE(r._firestore,r._userDataWriter,c.doc.key,c.doc,new Mp(r._snapshot.mutatedKeys.has(c.doc.key),r._snapshot.fromCache),r.query.converter);let g=-1,v=-1;return 0!==c.type&&(g=a.indexOf(c.doc.key),a=a.delete(c.doc.key)),1!==c.type&&(a=a.add(c.doc),v=a.indexOf(c.doc.key)),{type:qL(c.type),doc:h,oldIndex:g,newIndex:v}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function qL(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Mt()}}function cM(n,e){return n instanceof Jc&&e instanceof Jc?n._firestore===e._firestore&&n._key.isEqual(e._key)&&(null===n._document?null===e._document:n._document.isEqual(e._document))&&n._converter===e._converter:n instanceof Kd&&e instanceof Kd&&n._firestore===e._firestore&&JN(n.query,e.query)&&n.metadata.isEqual(e.metadata)&&n._snapshot.isEqual(e._snapshot)}function lM(n){if(Bm(n)&&0===n.explicitOrderBy.length)throw new qe(ve.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class jE{}function Zd(n,...e){for(const t of e)n=t._apply(n);return n}class KL extends jE{constructor(e,t,r){super(),this.Uu=e,this.qu=t,this.Ku=r,this.type="where"}_apply(e){const t=Pp(e.firestore),r=function(i,a,c,h,g,v,C){let D;if(g.isKeyField()){if("array-contains"===v||"array-contains-any"===v)throw new qe(ve.INVALID_ARGUMENT,`Invalid Query. You can't perform '${v}' queries on documentId().`);if("in"===v||"not-in"===v){mM(C,v);const k=[];for(const B of C)k.push(gM(h,i,B));D={arrayValue:{values:k}}}else D=gM(h,i,C)}else"in"!==v&&"not-in"!==v&&"array-contains-any"!==v||mM(C,v),D=sM(c,"where",C,"in"===v||"not-in"===v);const x=Ti.create(g,v,D);return function(k,B){if(B.S()){const xe=Wv(k);if(null!==xe&&!xe.isEqual(B.field))throw new qe(ve.INVALID_ARGUMENT,`Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '${xe.toString()}' and '${B.field.toString()}'`);const bt=Hv(k);null!==bt&&_M(0,B.field,bt)}const ge=function(xe,bt){for(const Tt of xe.filters)if(bt.indexOf(Tt.op)>=0)return Tt.op;return null}(k,function(xe){switch(xe){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}(B.op));if(null!==ge)throw new qe(ve.INVALID_ARGUMENT,ge===B.op?`Invalid query. You cannot use more than one '${B.op.toString()}' filter.`:`Invalid query. You cannot use '${B.op.toString()}' filters with '${ge.toString()}' filters.`)}(i,x),x}(e._query,0,t,e.firestore._databaseId,this.Uu,this.qu,this.Ku);return new ts(e.firestore,e.converter,function(i,a){const c=i.filters.concat([a]);return new fa(i.path,i.collectionGroup,i.explicitOrderBy.slice(),c,i.limit,i.limitType,i.startAt,i.endAt)}(e._query,r))}}class YL extends jE{constructor(e,t){super(),this.Uu=e,this.Gu=t,this.type="orderBy"}_apply(e){const t=function(r,i,a){if(null!==r.startAt)throw new qe(ve.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==r.endAt)throw new qe(ve.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");const c=new Nd(i,a);return function(h,g){if(null===Hv(h)){const v=Wv(h);null!==v&&_M(0,v,g.field)}}(r,c),c}(e._query,this.Uu,this.Gu);return new ts(e.firestore,e.converter,function(r,i){const a=r.explicitOrderBy.concat([i]);return new fa(r.path,r.collectionGroup,a,r.filters.slice(),r.limit,r.limitType,r.startAt,r.endAt)}(e._query,t))}}class dM extends jE{constructor(e,t,r){super(),this.type=e,this.ju=t,this.Qu=r}_apply(e){return new ts(e.firestore,e.converter,Gv(e._query,this.ju,this.Qu))}}class hM extends jE{constructor(e,t,r){super(),this.type=e,this.Wu=t,this.zu=r}_apply(e){const t=pM(e,this.type,this.Wu,this.zu);return new ts(e.firestore,e.converter,(i=t,new fa((r=e._query).path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,i,r.endAt)));var r,i}}class fM extends jE{constructor(e,t,r){super(),this.type=e,this.Wu=t,this.zu=r}_apply(e){const t=pM(e,this.type,this.Wu,this.zu);return new ts(e.firestore,e.converter,(i=t,new fa((r=e._query).path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,r.startAt,i)));var r,i}}function pM(n,e,t,r){if(t[0]=(0,Z.m9)(t[0]),t[0]instanceof VE)return function(i,a,c,h,g){if(!h)throw new qe(ve.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${c}().`);const v=[];for(const C of kd(i))if(C.field.isKeyField())v.push(kv(a,h.key));else{const D=h.data.field(C.field);if(Sd(D))throw new qe(ve.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+C.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===D){const x=C.field.canonicalString();throw new qe(ve.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${x}' (used as the orderBy) does not exist.`)}v.push(D)}return new kc(v,g)}(n._query,n.firestore._databaseId,e,t[0]._document,r);{const i=Pp(n.firestore);return function(a,c,h,g,v,C){const D=a.explicitOrderBy;if(v.length>D.length)throw new qe(ve.INVALID_ARGUMENT,`Too many arguments provided to ${g}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const x=[];for(let k=0;k<v.length;k++){const B=v[k];if(D[k].field.isKeyField()){if("string"!=typeof B)throw new qe(ve.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${g}(), but got a ${typeof B}`);if(!zv(a)&&-1!==B.indexOf("/"))throw new qe(ve.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${g}() must be a plain document ID, but '${B}' contains a slash.`);const ge=a.path.child(Rn.fromString(B));if(!Ct.isDocumentKey(ge))throw new qe(ve.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${g}() must result in a valid document path, but '${ge}' is not because it contains an odd number of segments.`);const xe=new Ct(ge);x.push(kv(c,xe))}else{const ge=sM(h,g,B);x.push(ge)}}return new kc(x,C)}(n._query,n.firestore._databaseId,i,e,t,r)}}function gM(n,e,t){if("string"==typeof(t=(0,Z.m9)(t))){if(""===t)throw new qe(ve.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!zv(e)&&-1!==t.indexOf("/"))throw new qe(ve.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const r=e.path.child(Rn.fromString(t));if(!Ct.isDocumentKey(r))throw new qe(ve.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return kv(n,new Ct(r))}if(t instanceof wr)return kv(n,t._key);throw new qe(ve.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${fC(t)}.`)}function mM(n,e){if(!Array.isArray(n)||0===n.length)throw new qe(ve.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`);if(n.length>10)throw new qe(ve.INVALID_ARGUMENT,`Invalid Query. '${e.toString()}' filters support a maximum of 10 elements in the value array.`)}function _M(n,e,t){if(!t.isEqual(e))throw new qe(ve.INVALID_ARGUMENT,`Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '${e.toString()}' and so you must also use '${e.toString()}' as your first argument to orderBy(), but your first orderBy() is on field '${t.toString()}' instead.`)}class WA{convertValue(e,t="none"){switch(hu(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Dr(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Pc(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw Mt()}}convertObject(e,t){const r={};return xc(e.fields,(i,a)=>{r[i]=this.convertValue(a,t)}),r}convertGeoPoint(e){return new gC(Dr(e.latitude),Dr(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":const r=Pv(e);return null==r?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(Ad(e));default:return null}}convertTimestamp(e){const t=du(e);return new _n(t.seconds,t.nanos)}convertDocumentKey(e,t){const r=Rn.fromString(e);Kt(Tb(r));const i=new Nc(r.get(1),r.get(3)),a=new Ct(r.popFirst(5));return i.isEqual(t)||Or(`Document ${a} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),a}}function wC(n,e,t){let r;return r=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,r}class iU extends WA{constructor(e){super(),this.firestore=e}convertBytes(e){return new wu(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new wr(this.firestore,null,t)}}class yM{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=Pp(e)}set(e,t,r){this._verifyNotCommitted();const i=Yd(e,this._firestore),a=wC(i.converter,t,r),c=_C(this._dataReader,"WriteBatch.set",i._key,a,null!==i.converter,r);return this._mutations.push(c.toMutation(i._key,ir.none())),this}update(e,t,r,...i){this._verifyNotCommitted();const a=Yd(e,this._firestore);let c;return c="string"==typeof(t=(0,Z.m9)(t))||t instanceof Qc?jA(this._dataReader,"WriteBatch.update",a._key,t,r,i):BA(this._dataReader,"WriteBatch.update",a._key,t),this._mutations.push(c.toMutation(a._key,ir.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=Yd(e,this._firestore);return this._mutations=this._mutations.concat(new pa(t._key,ir.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new qe(ve.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function Yd(n,e){if((n=(0,Z.m9)(n)).firestore!==e)throw new qe(ve.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return n}class kp extends WA{constructor(e){super(),this.firestore=e}convertBytes(e){return new wu(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new wr(this.firestore,null,t)}}function vM(n,e,t){n=xn(n,wr);const r=xn(n.firestore,Sr),i=wC(n.converter,e,t);return g_(r,[_C(Pp(r),"setDoc",n._key,i,null!==n.converter,t).toMutation(n._key,ir.none())])}function EM(n,e,t,...r){n=xn(n,wr);const i=xn(n.firestore,Sr),a=Pp(i);let c;return c="string"==typeof(e=(0,Z.m9)(e))||e instanceof Qc?jA(a,"updateDoc",n._key,e,t,r):BA(a,"updateDoc",n._key,e),g_(i,[c.toMutation(n._key,ir.exists(!0))])}function wM(n,...e){var t,r,i;n=(0,Z.m9)(n);let a={includeMetadataChanges:!1},c=0;"object"!=typeof e[c]||UA(e[c])||(a=e[c],c++);const h={includeMetadataChanges:a.includeMetadataChanges};if(UA(e[c])){const D=e[c];e[c]=null===(t=D.next)||void 0===t?void 0:t.bind(D),e[c+1]=null===(r=D.error)||void 0===r?void 0:r.bind(D),e[c+2]=null===(i=D.complete)||void 0===i?void 0:i.bind(D)}let g,v,C;if(n instanceof wr)v=xn(n.firestore,Sr),C=Md(n._key.path),g={next:D=>{e[c]&&e[c](zA(v,n,D))},error:e[c+1],complete:e[c+2]};else{const D=xn(n,ts);v=xn(D.firestore,Sr),C=D._query;const x=new kp(v);g={next:k=>{e[c]&&e[c](new Kd(v,x,D,k))},error:e[c+1],complete:e[c+2]},lM(n._query)}return function(D,x,k,B){const ge=new dC(B),xe=new Rp(x,ge,k);return D.asyncQueue.enqueueAndForget((0,Ce.Z)(function*(){return wa(yield p_(D),xe)})),()=>{ge.Jc(),D.asyncQueue.enqueueAndForget((0,Ce.Z)(function*(){return Dp(yield p_(D),xe)}))}}(si(v),C,h,g)}function g_(n,e){return function(t,r){const i=new ri;return t.asyncQueue.enqueueAndForget((0,Ce.Z)(function*(){return function YF(n,e,t){return aA.apply(this,arguments)}(yield OA(t),r,i)})),i.promise}(si(n),e)}function zA(n,e,t){const r=t.docs.get(e._key),i=new kp(n);return new Jc(n,i,e._key,r,new Mp(t.hasPendingWrites,t.fromCache),e.converter)}class pU extends class{constructor(e,t){this._firestore=e,this._transaction=t,this._dataReader=Pp(e)}get(e){const t=Yd(e,this._firestore),r=new iU(this._firestore);return this._transaction.lookup([t._key]).then(i=>{if(!i||1!==i.length)return Mt();const a=i[0];if(a.isFoundDocument())return new VE(this._firestore,r,a.key,a,t.converter);if(a.isNoDocument())return new VE(this._firestore,r,t._key,null,t.converter);throw Mt()})}set(e,t,r){const i=Yd(e,this._firestore),a=wC(i.converter,t,r),c=_C(this._dataReader,"Transaction.set",i._key,a,null!==i.converter,r);return this._transaction.set(i._key,c),this}update(e,t,r,...i){const a=Yd(e,this._firestore);let c;return c="string"==typeof(t=(0,Z.m9)(t))||t instanceof Qc?jA(this._dataReader,"Transaction.update",a._key,t,r,i):BA(this._dataReader,"Transaction.update",a._key,t),this._transaction.update(a._key,c),this}delete(e){const t=Yd(e,this._firestore);return this._transaction.delete(t._key),this}}{constructor(e,t){super(e,t),this._firestore=e}get(e){const t=Yd(e,this._firestore),r=new kp(this._firestore);return super.get(e).then(i=>new Jc(this._firestore,r,t._key,i._document,new Mp(!1,!1),t.converter))}}function GA(n,e){if(void 0===e)return{merge:!1};if(void 0!==e.mergeFields&&void 0!==e.merge)throw new qe("invalid-argument",`Invalid options passed to function ${n}(): You cannot specify both "merge" and "mergeFields".`);return e}function bM(){if("undefined"==typeof Uint8Array)throw new qe("unimplemented","Uint8Arrays are not available in this environment.")}function CM(){if(!function lS(){return"undefined"!=typeof atob}())throw new qe("unimplemented","Blobs are unavailable in Firestore in this environment.")}!function(n,e=!0){bd=Nn.SDK_VERSION,(0,Nn._registerComponent)(new nu.wA("firestore",(t,{options:r})=>{const i=t.getProvider("app").getImmediate(),a=new Sr(i,new tN(t.getProvider("auth-internal")),new $t(t.getProvider("app-check-internal")));return r=Object.assign({useFetchStreams:e},r),a._setSettings(r),a},"PUBLIC")),(0,Nn.registerVersion)(jI,"3.4.5",n),(0,Nn.registerVersion)(jI,"3.4.5","esm2017")}();class $E{constructor(e){this._delegate=e}static fromBase64String(e){return CM(),new $E(wu.fromBase64String(e))}static fromUint8Array(e){return bM(),new $E(wu.fromUint8Array(e))}toBase64(){return CM(),this._delegate.toBase64()}toUint8Array(){return bM(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}}function qA(n){return function bU(n,e){if("object"!=typeof n||null===n)return!1;const t=n;for(const r of e)if(r in t&&"function"==typeof t[r])return!0;return!1}(n,["next","error","complete"])}class CU{enableIndexedDbPersistence(e,t){return function PL(n,e){tM(n=xn(n,Sr));const t=si(n),r=n._freezeSettings(),i=new AA;return eM(t,i,new FN(i,r.cacheSizeBytes,null==e?void 0:e.forceOwnership))}(e._delegate,{forceOwnership:t})}enableMultiTabIndexedDbPersistence(e){return function NL(n){tM(n=xn(n,Sr));const e=si(n),t=n._freezeSettings(),r=new AA;return eM(e,r,new hL(r,t.cacheSizeBytes))}(e._delegate)}clearIndexedDbPersistence(e){return function ML(n){if(n._initialized&&!n._terminated)throw new qe(ve.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const e=new ri;return n._queue.enqueueAndForgetEvenWhileRestricted((0,Ce.Z)(function*(){try{yield(t=(0,Ce.Z)(function*(r){if(!js.Vt())return Promise.resolve();const i=r+"main";yield js.delete(i)}),function(r){return t.apply(this,arguments)})(ms(n._databaseId,n._persistenceKey)),e.resolve()}catch(t){e.reject(t)}var t})),e.promise}(e._delegate)}}class TM{constructor(e,t,r){this._delegate=t,this._persistenceProvider=r,this.INTERNAL={delete:()=>this.terminate()},e instanceof Nc||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){const t=this._delegate._getSettings();!e.merge&&t.host!==e.host&&Cd("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},t),e)).merge,this._delegate._setSettings(e)}useEmulator(e,t,r={}){!function TL(n,e,t,r={}){var i;const a=(n=xn(n,LE))._getSettings();if("firestore.googleapis.com"!==a.host&&a.host!==e&&Cd("Host has been set in both settings() and useEmulator(), emulator host will be used"),n._setSettings(Object.assign(Object.assign({},a),{host:`${e}:${t}`,ssl:!1})),r.mockUserToken){let c,h;if("string"==typeof r.mockUserToken)c=r.mockUserToken,h=hi.MOCK_USER;else{c=(0,Z.Sg)(r.mockUserToken,null===(i=n._app)||void 0===i?void 0:i.options.projectId);const g=r.mockUserToken.sub||r.mockUserToken.user_id;if(!g)throw new qe(ve.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");h=new hi(g)}n._authCredentials=new Rv(new Rc(c,h))}}(this._delegate,e,t,r)}enableNetwork(){return function OL(n){return function _L(n){return n.asyncQueue.enqueue((0,Ce.Z)(function*(){const e=yield BN(n),t=yield jN(n);return e.setNetworkEnabled(!0),function(r){const i=pt(r);return i.Ko.delete(0),Kc(i)}(t)}))}(si(n=xn(n,Sr)))}(this._delegate)}disableNetwork(){return function FL(n){return function yL(n){return n.asyncQueue.enqueue((0,Ce.Z)(function*(){const e=yield BN(n),t=yield jN(n);return e.setNetworkEnabled(!1),(r=(0,Ce.Z)(function*(i){const a=pt(i);a.Ko.add(0),yield Zc(a),a.Qo.set("Offline")}),function(i){return r.apply(this,arguments)})(t);var r}))}(si(n=xn(n,Sr)))}(this._delegate)}enablePersistence(e){let t=!1,r=!1;return e&&(t=!!e.synchronizeTabs,r=!!e.experimentalForceOwningTab,zN("synchronizeTabs",t,"experimentalForceOwningTab",r)),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,r)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return function kL(n){return function(e){const t=new ri;return e.asyncQueue.enqueueAndForget((0,Ce.Z)(function*(){return function eL(n,e){return hA.apply(this,arguments)}(yield OA(e),t)})),t.promise}(si(n=xn(n,Sr)))}(this._delegate)}onSnapshotsInSync(e){return function fU(n,e){return function wL(n,e){const t=new dC(e);return n.asyncQueue.enqueueAndForget((0,Ce.Z)(function*(){return r=yield p_(n),i=t,pt(r).Zo.add(i),void i.next();var r,i})),()=>{t.Jc(),n.asyncQueue.enqueueAndForget((0,Ce.Z)(function*(){return r=yield p_(n),i=t,void pt(r).Zo.delete(i);var r,i}))}}(si(n=xn(n,Sr)),UA(e)?e:{next:e})}(this._delegate,e)}get app(){if(!this._appCompat)throw new qe("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new m_(this,YN(this._delegate,e))}catch(t){throw ys(t,"collection()","Firestore.collection()")}}doc(e){try{return new Ho(this,pC(this._delegate,e))}catch(t){throw ys(t,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new vs(this,function DL(n,e){if(n=xn(n,LE),LA("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new qe(ve.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new ts(n,null,(t=e,new fa(Rn.emptyPath(),t)));var t}(this._delegate,e))}catch(t){throw ys(t,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return function gU(n,e){return function IL(n,e){const t=new ri;return n.asyncQueue.enqueueAndForget((0,Ce.Z)(function*(){const r=yield(i=n,hC(i).then(a=>a.datastore));var i;new gL(n.asyncQueue,r,e,t).run()})),t.promise}(si(n=xn(n,Sr)),t=>e(new pU(n,t)))}(this._delegate,t=>e(new DM(this,t)))}batch(){return si(this._delegate),new SM(new yM(this._delegate,e=>g_(this._delegate,e)))}loadBundle(e){return function LL(n,e){const t=si(n=xn(n,Sr)),r=new AL;return function bL(n,e,t,r){const i=function(a,c){let h;return h="string"==typeof a?(new TextEncoder).encode(a):a,g=function(g,v){if(g instanceof Uint8Array)return LN(g,v);if(g instanceof ArrayBuffer)return LN(new Uint8Array(g),v);if(g instanceof ReadableStream)return g.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(h),new fL(g,c);var g}(t,wp(e));n.asyncQueue.enqueueAndForget((0,Ce.Z)(function*(){!function dL(n,e,t){const r=pt(n);var i;(i=(0,Ce.Z)(function*(a,c,h){try{const g=yield c.getMetadata();if(yield function(x,k){const B=pt(x),ge=Yr(k.createTime);return B.persistence.runTransaction("hasNewerBundle","readonly",xe=>B.Kn.getBundleMetadata(xe,k.id)).then(xe=>!!xe&&xe.createTime.compareTo(ge)>=0)}(a.localStore,g))return yield c.close(),void h._completeWith((x=g,{taskState:"Success",documentsLoaded:x.totalDocuments,bytesLoaded:x.totalBytes,totalDocuments:x.totalDocuments,totalBytes:x.totalBytes}));h._updateProgress(DN(g));const v=new WF(g,a.localStore,c.O);let C=yield c.Kc();for(;C;){const x=yield v.lc(C);x&&h._updateProgress(x),C=yield c.Kc()}const D=yield v.complete();yield Yc(a,D.ws,void 0),yield function(x,k){const B=pt(x);return B.persistence.runTransaction("Save bundle","readwrite",ge=>B.Kn.saveBundleMetadata(ge,k))}(a.localStore,g),h._completeWith(D.progress)}catch(g){Cd("SyncEngine",`Loading bundle failed with ${g}`),h._failWith(g)}var x}),function(a,c,h){return i.apply(this,arguments)})(r,e,t).then(()=>{r.sharedClientState.notifyBundleLoaded()})}(yield OA(n),i,r)}))}(t,n._databaseId,e,r),r}(this._delegate,e)}namedQuery(e){return function UL(n,e){return function CL(n,e){return n.asyncQueue.enqueue((0,Ce.Z)(function*(){return function(t,r){const i=pt(t);return i.persistence.runTransaction("Get named query","readonly",a=>i.Kn.getNamedQuery(a,r))}(yield kA(n),e)}))}(si(n=xn(n,Sr)),e).then(t=>t?new ts(n,null,t.query):null)}(this._delegate,e).then(t=>t?new vs(this,t):null)}}class IC extends WA{constructor(e){super(),this.firestore=e}convertBytes(e){return new $E(new wu(e))}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return Ho.forKey(t,this.firestore,null)}}class DM{constructor(e,t){this._firestore=e,this._delegate=t,this._userDataWriter=new IC(e)}get(e){const t=Fp(e);return this._delegate.get(t).then(r=>new HE(this._firestore,new Jc(this._firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,t.converter)))}set(e,t,r){const i=Fp(e);return r?(GA("Transaction.set",r),this._delegate.set(i,t,r)):this._delegate.set(i,t),this}update(e,t,r,...i){const a=Fp(e);return 2===arguments.length?this._delegate.update(a,t):this._delegate.update(a,t,r,...i),this}delete(e){const t=Fp(e);return this._delegate.delete(t),this}}class SM{constructor(e){this._delegate=e}set(e,t,r){const i=Fp(e);return r?(GA("WriteBatch.set",r),this._delegate.set(i,t,r)):this._delegate.set(i,t),this}update(e,t,r,...i){const a=Fp(e);return 2===arguments.length?this._delegate.update(a,t):this._delegate.update(a,t,r,...i),this}delete(e){const t=Fp(e);return this._delegate.delete(t),this}commit(){return this._delegate.commit()}}class Op{constructor(e,t,r){this._firestore=e,this._userDataWriter=t,this._delegate=r}fromFirestore(e,t){const r=new BE(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new WE(this._firestore,r),null!=t?t:{})}toFirestore(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}static getInstance(e,t){const r=Op.INSTANCES;let i=r.get(e);i||(i=new WeakMap,r.set(e,i));let a=i.get(t);return a||(a=new Op(e,new IC(e),t),i.set(t,a)),a}}Op.INSTANCES=new WeakMap;class Ho{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new IC(e)}static forPath(e,t,r){if(e.length%2!=0)throw new qe("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new Ho(t,new wr(t._delegate,r,new Ct(e)))}static forKey(e,t,r){return new Ho(t,new wr(t._delegate,r,e))}get id(){return this._delegate.id}get parent(){return new m_(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new m_(this.firestore,YN(this._delegate,e))}catch(t){throw ys(t,"collection()","DocumentReference.collection()")}}isEqual(e){return(e=(0,Z.m9)(e))instanceof wr&&QN(this._delegate,e)}set(e,t){t=GA("DocumentReference.set",t);try{return t?vM(this._delegate,e,t):vM(this._delegate,e)}catch(r){throw ys(r,"setDoc()","DocumentReference.set()")}}update(e,t,...r){try{return 1===arguments.length?EM(this._delegate,e):EM(this._delegate,e,t,...r)}catch(i){throw ys(i,"updateDoc()","DocumentReference.update()")}}delete(){return function dU(n){return g_(xn(n.firestore,Sr),[new pa(n._key,ir.none())])}(this._delegate)}onSnapshot(...e){const t=AM(e),r=RM(e,i=>new HE(this.firestore,new Jc(this.firestore._delegate,this._userDataWriter,i._key,i._document,i.metadata,this._delegate.converter)));return wM(this._delegate,t,r)}get(e){let t;return t="cache"===(null==e?void 0:e.source)?function oU(n){n=xn(n,wr);const e=xn(n.firestore,Sr),t=si(e),r=new kp(e);return function vL(n,e){const t=new ri;return n.asyncQueue.enqueueAndForget((0,Ce.Z)(function*(){return(r=(0,Ce.Z)(function*(i,a,c){try{const h=yield function(g,v){const C=pt(g);return C.persistence.runTransaction("read document","readonly",D=>C.Us.ys(D,v))}(i,a);h.isFoundDocument()?c.resolve(h):h.isNoDocument()?c.resolve(null):c.reject(new qe(ve.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(h){const g=wt(h,`Failed to get document '${a} from cache`);c.reject(g)}}),function(i,a,c){return r.apply(this,arguments)})(yield kA(n),e,t);var r})),t.promise}(t,n._key).then(i=>new Jc(e,r,n._key,i,new Mp(null!==i&&i.hasLocalMutations,!0),n.converter))}(this._delegate):"server"===(null==e?void 0:e.source)?function aU(n){n=xn(n,wr);const e=xn(n.firestore,Sr);return $N(si(e),n._key,{source:"server"}).then(t=>zA(e,n,t))}(this._delegate):function sU(n){n=xn(n,wr);const e=xn(n.firestore,Sr);return $N(si(e),n._key).then(t=>zA(e,n,t))}(this._delegate),t.then(r=>new HE(this.firestore,new Jc(this.firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,this._delegate.converter)))}withConverter(e){return new Ho(this.firestore,this._delegate.withConverter(e?Op.getInstance(this.firestore,e):null))}}function ys(n,e,t){return n.message=n.message.replace(e,t),n}function AM(n){for(const e of n)if("object"==typeof e&&!qA(e))return e;return{}}function RM(n,e){var t,r;let i;return i=qA(n[0])?n[0]:qA(n[1])?n[1]:"function"==typeof n[0]?{next:n[0],error:n[1],complete:n[2]}:{next:n[1],error:n[2],complete:n[3]},{next:a=>{i.next&&i.next(e(a))},error:null===(t=i.error)||void 0===t?void 0:t.bind(i),complete:null===(r=i.complete)||void 0===r?void 0:r.bind(i)}}class HE{constructor(e,t){this._firestore=e,this._delegate=t}get ref(){return new Ho(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,t){return this._delegate.get(e,t)}isEqual(e){return cM(this._delegate,e._delegate)}}class WE extends HE{data(e){const t=this._delegate.data(e);return function HI(n,e){n||Mt()}(void 0!==t),t}}class vs{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new IC(e)}where(e,t,r){try{return new vs(this.firestore,Zd(this._delegate,function ZL(n,e,t){const r=e,i=EC("where",n);return new KL(i,r,t)}(e,t,r)))}catch(i){throw ys(i,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,t){try{return new vs(this.firestore,Zd(this._delegate,function QL(n,e="asc"){const t=e,r=EC("orderBy",n);return new YL(r,t)}(e,t)))}catch(r){throw ys(r,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new vs(this.firestore,Zd(this._delegate,function JL(n){return KN("limit",n),new dM("limit",n,"F")}(e)))}catch(t){throw ys(t,"limit()","Query.limit()")}}limitToLast(e){try{return new vs(this.firestore,Zd(this._delegate,function XL(n){return KN("limitToLast",n),new dM("limitToLast",n,"L")}(e)))}catch(t){throw ys(t,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new vs(this.firestore,Zd(this._delegate,function eU(...n){return new hM("startAt",n,!0)}(...e)))}catch(t){throw ys(t,"startAt()","Query.startAt()")}}startAfter(...e){try{return new vs(this.firestore,Zd(this._delegate,function tU(...n){return new hM("startAfter",n,!1)}(...e)))}catch(t){throw ys(t,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new vs(this.firestore,Zd(this._delegate,function nU(...n){return new fM("endBefore",n,!1)}(...e)))}catch(t){throw ys(t,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new vs(this.firestore,Zd(this._delegate,function rU(...n){return new fM("endAt",n,!0)}(...e)))}catch(t){throw ys(t,"endAt()","Query.endAt()")}}isEqual(e){return JN(this._delegate,e._delegate)}get(e){let t;return t="cache"===(null==e?void 0:e.source)?function cU(n){n=xn(n,ts);const e=xn(n.firestore,Sr),t=si(e),r=new kp(e);return function EL(n,e){const t=new ri;return n.asyncQueue.enqueueAndForget((0,Ce.Z)(function*(){return(r=(0,Ce.Z)(function*(i,a,c){try{const h=yield mp(i,a,!0),g=new RN(a,h.Ks),v=g.Ic(h.documents),C=g.applyChanges(v,!1);c.resolve(C.snapshot)}catch(h){const g=wt(h,`Failed to execute query '${a} against cache`);c.reject(g)}}),function(i,a,c){return r.apply(this,arguments)})(yield kA(n),e,t);var r})),t.promise}(t,n._query).then(i=>new Kd(e,r,n,i))}(this._delegate):"server"===(null==e?void 0:e.source)?function lU(n){n=xn(n,ts);const e=xn(n.firestore,Sr),t=si(e),r=new kp(e);return HN(t,n._query,{source:"server"}).then(i=>new Kd(e,r,n,i))}(this._delegate):function uU(n){n=xn(n,ts);const e=xn(n.firestore,Sr),t=si(e),r=new kp(e);return lM(n._query),HN(t,n._query).then(i=>new Kd(e,r,n,i))}(this._delegate),t.then(r=>new KA(this.firestore,new Kd(this.firestore._delegate,this._userDataWriter,this._delegate,r._snapshot)))}onSnapshot(...e){const t=AM(e),r=RM(e,i=>new KA(this.firestore,new Kd(this.firestore._delegate,this._userDataWriter,this._delegate,i._snapshot)));return wM(this._delegate,t,r)}withConverter(e){return new vs(this.firestore,this._delegate.withConverter(e?Op.getInstance(this.firestore,e):null))}}class DU{constructor(e,t){this._firestore=e,this._delegate=t}get type(){return this._delegate.type}get doc(){return new WE(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class KA{constructor(e,t){this._firestore=e,this._delegate=t}get query(){return new vs(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new WE(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(t=>new DU(this._firestore,t))}forEach(e,t){this._delegate.forEach(r=>{e.call(t,new WE(this._firestore,r))})}isEqual(e){return cM(this._delegate,e._delegate)}}class m_ extends vs{constructor(e,t){super(e,t),this.firestore=e,this._delegate=t}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const e=this._delegate.parent;return e?new Ho(this.firestore,e):null}doc(e){try{return new Ho(this.firestore,void 0===e?pC(this._delegate):pC(this._delegate,e))}catch(t){throw ys(t,"doc()","CollectionReference.doc()")}}add(e){return function hU(n,e){const t=xn(n.firestore,Sr),r=pC(n),i=wC(n.converter,e);return g_(t,[_C(Pp(n.firestore),"addDoc",r._key,i,null!==n.converter,{}).toMutation(r._key,ir.exists(!1))]).then(()=>r)}(this._delegate,e).then(t=>new Ho(this.firestore,t))}isEqual(e){return QN(this._delegate,e._delegate)}withConverter(e){return new m_(this.firestore,this._delegate.withConverter(e?Op.getInstance(this.firestore,e):null))}}function Fp(n){return xn(n,wr)}class ZA{constructor(...e){this._delegate=new Qc(...e)}static documentId(){return new ZA(Kr.keyField().canonicalString())}isEqual(e){return(e=(0,Z.m9)(e))instanceof Qc&&this._delegate._internalPath.isEqual(e._internalPath)}}class Lp{constructor(e){this._delegate=e}static serverTimestamp(){const e=function _U(){return new VA("serverTimestamp")}();return e._methodName="FieldValue.serverTimestamp",new Lp(e)}static delete(){const e=function mU(){return new UE("deleteField")}();return e._methodName="FieldValue.delete",new Lp(e)}static arrayUnion(...e){const t=function yU(...n){return new $L("arrayUnion",n)}(...e);return t._methodName="FieldValue.arrayUnion",new Lp(t)}static arrayRemove(...e){const t=function vU(...n){return new HL("arrayRemove",n)}(...e);return t._methodName="FieldValue.arrayRemove",new Lp(t)}static increment(e){const t=function EU(n){return new WL("increment",n)}(e);return t._methodName="FieldValue.increment",new Lp(t)}isEqual(e){return this._delegate.isEqual(e._delegate)}}const SU={Firestore:TM,GeoPoint:gC,Timestamp:_n,Blob:$E,Transaction:DM,WriteBatch:SM,DocumentReference:Ho,DocumentSnapshot:HE,Query:vs,QueryDocumentSnapshot:WE,QuerySnapshot:KA,CollectionReference:m_,FieldPath:ZA,FieldValue:Lp,setLogLevel:function TU(n){!function $I(n){ca.setLogLevel(n)}(n)},CACHE_SIZE_UNLIMITED:-1};!function RU(n){(function AU(n,e){n.INTERNAL.registerComponent(new nu.wA("firestore-compat",t=>{const r=t.getProvider("app-compat").getImmediate(),i=t.getProvider("firestore").getImmediate();return e(r,i)},"PUBLIC").setServiceProps(Object.assign({},SU)))})(n,(e,t)=>new TM(e,t,new CU)),n.registerVersion("@firebase/firestore-compat","0.1.14")}(aa.Z);var xU=P(6451),bC=P(5363),PU=P(3099);function xM(n,e,t){var r,i;let a,c=!1;return n&&"object"==typeof n?(a=null!==(r=n.bufferSize)&&void 0!==r?r:1/0,e=null!==(i=n.windowTime)&&void 0!==i?i:1/0,c=!!n.refCount,t=n.scheduler):a=null!=n?n:1/0,(0,PU.B)({connector:()=>new by(a,e,t),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:c})}function PM(n,e){return(0,Ba.m)(e)?jn(()=>n,e):jn(()=>n)}var YA=P(9468),Vi=P(5867);class fo{constructor(e){return e}}function OU(n){return(e,t)=>{const r=e.runOutsideAngular(()=>n(t));return new fo(r)}}const UU=(0,lt.u3)(Vi.ZF,!0),NM=new Map,VU={activated:!1,tokenObservers:[]},BU={initialized:!1,enabled:!1};function Ri(n){return NM.get(n)||VU}function Ia(n,e){NM.set(n,e)}function CC(){return BU}class zU{constructor(e,t,r,i,a){if(this.operation=e,this.retryPolicy=t,this.getWaitDuration=r,this.lowerBound=i,this.upperBound=a,this.pending=null,this.nextErrorWaitInterval=i,i>a)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(e){var t=this;return(0,Ce.Z)(function*(){t.stop();try{t.pending=new Z.BH,yield function GU(n){return new Promise(e=>{setTimeout(e,n)})}(t.getNextRun(e)),t.pending.resolve(),yield t.pending.promise,t.pending=new Z.BH,yield t.operation(),t.pending.resolve(),yield t.pending.promise,t.process(!0).catch(()=>{})}catch(r){t.retryPolicy(r)?t.process(!1).catch(()=>{}):t.stop()}})()}getNextRun(e){if(e)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{const t=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),t}}}const Es=new Z.LL("appCheck","AppCheck",{"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"});function kM(n){if(!Ri(n).activated)throw Es.create("use-before-activation",{appName:n.name})}function eR(n,e){return tR.apply(this,arguments)}function tR(){return tR=(0,Ce.Z)(function*({url:n,body:e},t){const r={"Content-Type":"application/json"},i=t.getImmediate({optional:!0});i&&(r["X-Firebase-Client"]=i.getPlatformInfoString());const a={method:"POST",body:JSON.stringify(e),headers:r};let c,h;try{c=yield fetch(n,a)}catch(D){throw Es.create("fetch-network-error",{originalErrorMessage:D.message})}if(200!==c.status)throw Es.create("fetch-status-error",{httpStatus:c.status});try{h=yield c.json()}catch(D){throw Es.create("fetch-parse-error",{originalErrorMessage:D.message})}const g=h.ttl.match(/^([\d.]+)(s)$/);if(!g||!g[2]||isNaN(Number(g[1])))throw Es.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${h.ttl}`});const v=1e3*Number(g[1]),C=Date.now();return{token:h.attestationToken,expireTimeMillis:C+v,issuedAtTimeMillis:C}}),tR.apply(this,arguments)}function QU(n,e){const{projectId:t,appId:r,apiKey:i}=n.options;return{url:`https://content-firebaseappcheck.googleapis.com/v1beta/projects/${t}/apps/${r}:exchangeDebugToken?key=${i}`,body:{debug_token:e}}}const zE="firebase-app-check-store";let SC=null;function FM(){return SC||(SC=new Promise((n,e)=>{try{const t=indexedDB.open("firebase-app-check-database",1);t.onsuccess=r=>{n(r.target.result)},t.onerror=r=>{var i;e(Es.create("storage-open",{originalErrorMessage:null===(i=r.target.error)||void 0===i?void 0:i.message}))},t.onupgradeneeded=r=>{0===r.oldVersion&&r.target.result.createObjectStore(zE,{keyPath:"compositeKey"})}}catch(t){e(Es.create("storage-open",{originalErrorMessage:t.message}))}}),SC)}function nR(){return nR=(0,Ce.Z)(function*(n,e){const r=(yield FM()).transaction(zE,"readwrite"),a=r.objectStore(zE).put({compositeKey:n,value:e});return new Promise((c,h)=>{a.onsuccess=g=>{c()},r.onerror=g=>{var v;h(Es.create("storage-set",{originalErrorMessage:null===(v=g.target.error)||void 0===v?void 0:v.message}))}})}),nR.apply(this,arguments)}const GE=new no.Yd("@firebase/app-check");function BM(n,e){return(0,Z.hl)()?function tV(n,e){return function LM(n,e){return nR.apply(this,arguments)}(function VM(n){return`${n.options.appId}-${n.name}`}(n),e)}(n,e).catch(t=>{GE.warn(`Failed to write token to IndexedDB. Error: ${t}`)}):Promise.resolve()}function jM(){return CC().enabled}function $M(){return oR.apply(this,arguments)}function oR(){return oR=(0,Ce.Z)(function*(){const n=CC();if(n.enabled&&n.token)return n.token.promise;throw Error("\n            Can't get debug token in production mode.\n        ")}),oR.apply(this,arguments)}const aV={error:"UNKNOWN_ERROR"};function uV(n){return Z.US.encodeString(JSON.stringify(n),!1)}function AC(n){return aR.apply(this,arguments)}function aR(){return aR=(0,Ce.Z)(function*(n,e=!1){const t=n.app;kM(t);const r=Ri(t);let a,i=r.token;if(!i){const g=yield r.cachedTokenPromise;g&&RC(g)&&(i=g)}if(!e&&i&&RC(i))return{token:i.token};let h,c=!1;if(jM()){r.exchangeTokenPromise||(r.exchangeTokenPromise=eR(QU(t,yield $M()),n.platformLoggerProvider).then(v=>(r.exchangeTokenPromise=void 0,v)),c=!0);const g=yield r.exchangeTokenPromise;return yield BM(t,g),Ia(t,Object.assign(Object.assign({},r),{token:g})),{token:g.token}}try{r.exchangeTokenPromise||(r.exchangeTokenPromise=r.provider.getToken().then(g=>(r.exchangeTokenPromise=void 0,g)),c=!0),i=yield r.exchangeTokenPromise}catch(g){"appCheck/throttled"===g.code?GE.warn(g.message):GE.error(g),a=g}return i?(h={token:i.token},Ia(t,Object.assign(Object.assign({},r),{token:i})),yield BM(t,i)):h=lV(a),c&&WM(t,h),h}),aR.apply(this,arguments)}function cR(n,e){const t=Ri(n),r=t.tokenObservers.filter(i=>i.next!==e);0===r.length&&t.tokenRefresher&&t.tokenRefresher.isRunning()&&t.tokenRefresher.stop(),Ia(n,Object.assign(Object.assign({},t),{tokenObservers:r}))}function HM(n){const{app:e}=n,t=Ri(e);let r=t.tokenRefresher;r||(r=function cV(n){const{app:e}=n;return new zU((0,Ce.Z)(function*(){let r;if(r=Ri(e).token?yield AC(n,!0):yield AC(n),r.error)throw r.error}),()=>!0,()=>{const t=Ri(e);if(t.token){let r=t.token.issuedAtTimeMillis+.5*(t.token.expireTimeMillis-t.token.issuedAtTimeMillis)+3e5;return r=Math.min(r,t.token.expireTimeMillis-3e5),Math.max(0,r-Date.now())}return 0},3e4,96e4)}(n),Ia(e,Object.assign(Object.assign({},t),{tokenRefresher:r}))),!r.isRunning()&&t.isTokenAutoRefreshEnabled&&r.start()}function WM(n,e){const t=Ri(n).tokenObservers;for(const r of t)try{"EXTERNAL"===r.type&&null!=e.error?r.error(e.error):r.next(e)}catch(i){}}function RC(n){return n.expireTimeMillis-Date.now()>0}function lV(n){return{token:uV(aV),error:n}}class dV{constructor(e,t){this.app=e,this.platformLoggerProvider=t}_delete(){const{tokenObservers:e}=Ri(this.app);for(const t of e)cR(this.app,t.next);return Promise.resolve()}}const JM="app-check-internal";!function TV(){(0,Nn._registerComponent)(new nu.wA("app-check",n=>function hV(n,e){return new dV(n,e)}(n.getProvider("app").getImmediate(),n.getProvider("platform-logger")),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((n,e,t)=>{n.getProvider(JM).initialize()})),(0,Nn._registerComponent)(new nu.wA(JM,n=>function fV(n){return{getToken:e=>AC(n,e),addTokenListener:e=>function uR(n,e,t,r){const{app:i}=n,a=Ri(i),c={next:t,error:r,type:e};if(Ia(i,Object.assign(Object.assign({},a),{tokenObservers:[...a.tokenObservers,c]})),a.token&&RC(a.token)){const h=a.token;Promise.resolve().then(()=>{t({token:h.token}),HM(n)}).catch(()=>{})}a.cachedTokenPromise.then(()=>HM(n))}(n,"INTERNAL",e),removeTokenListener:e=>cR(n.app,e)}}(n.getProvider("app-check").getImmediate()),"PUBLIC").setInstantiationMode("EXPLICIT")),(0,Nn.registerVersion)("@firebase/app-check","0.5.3")}();class Qd{constructor(){return(0,lt.vb)("app-check")}}"undefined"!=typeof window&&window,P(127);const ek=new m.OlP("angularfire2.auth.use-emulator"),tk=new m.OlP("angularfire2.auth.settings"),nk=new m.OlP("angularfire2.auth.tenant-id"),rk=new m.OlP("angularfire2.auth.langugage-code"),ik=new m.OlP("angularfire2.auth.use-device-language"),sk=new m.OlP("angularfire.auth.persistence"),ok=(n,e,t,r,i,a,c,h)=>(0,Os.cc)(`${n.name}.auth`,"AngularFireAuth",n.name,()=>{const g=e.runOutsideAngular(()=>n.auth());if(t&&g.useEmulator(...t),r&&(g.tenantId=r),g.languageCode=i,a&&g.useDeviceLanguage(),c)for(const[v,C]of Object.entries(c))g.settings[v]=C;return h&&g.setPersistence(h),g},[t,r,i,a,c,h]);let ak=(()=>{class n{constructor(t,r,i,a,c,h,g,v,C,D,x,k){const B=new Ir.x,ge=kt(void 0).pipe((0,bC.Q)(c.outsideAngular),jn(()=>a.runOutsideAngular(()=>Promise.resolve().then(P.bind(P,5881)))),(0,Vt.U)(()=>(0,Os.on)(t,a,r)),(0,Vt.U)(xe=>ok(xe,a,h,v,C,D,g,x)),xM({bufferSize:1,refCount:!1}));if(Vu(i))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=kt(null);else{ge.pipe(na()).subscribe();const bt=ge.pipe(jn(Rt=>Rt.getRedirectResult().then(En=>En,()=>null)),lt.iC,xM({bufferSize:1,refCount:!1})),Tt=ge.pipe(jn(Rt=>new cr.y(En=>({unsubscribe:a.runOutsideAngular(()=>Rt.onAuthStateChanged(Rr=>En.next(Rr),Rr=>En.error(Rr),()=>En.complete()))})))),Wt=ge.pipe(jn(Rt=>new cr.y(En=>({unsubscribe:a.runOutsideAngular(()=>Rt.onIdTokenChanged(Rr=>En.next(Rr),Rr=>En.error(Rr),()=>En.complete()))}))));this.authState=bt.pipe(PM(Tt),(0,YA.R)(c.outsideAngular),(0,bC.Q)(c.insideAngular)),this.user=bt.pipe(PM(Wt),(0,YA.R)(c.outsideAngular),(0,bC.Q)(c.insideAngular)),this.idToken=this.user.pipe(jn(Rt=>Rt?(0,ur.D)(Rt.getIdToken()):kt(null))),this.idTokenResult=this.user.pipe(jn(Rt=>Rt?(0,ur.D)(Rt.getIdTokenResult()):kt(null))),this.credential=(0,xU.T)(bt,B,this.authState.pipe(lr(Rt=>!Rt))).pipe((0,Vt.U)(Rt=>(null==Rt?void 0:Rt.user)?Rt:null),(0,YA.R)(c.outsideAngular),(0,bC.Q)(c.insideAngular))}return(0,Os.pX)(this,ge,a,{spy:{apply:(xe,bt,Tt)=>{(xe.startsWith("signIn")||xe.startsWith("createUser"))&&Tt.then(Wt=>B.next(Wt))}}})}}return n.\u0275fac=function(t){return new(t||n)(m.LFG(Os.Dh),m.LFG(Os.xv,8),m.LFG(m.Lbi),m.LFG(m.R0b),m.LFG(lt.HU),m.LFG(ek,8),m.LFG(tk,8),m.LFG(nk,8),m.LFG(rk,8),m.LFG(ik,8),m.LFG(sk,8),m.LFG(Qd,8))},n.\u0275prov=m.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})();function uk(n,e){return function PV(n,e=Ly.z){return new cr.y(t=>{let r;return null!=e?e.schedule(()=>{r=n.onSnapshot({includeMetadataChanges:!0},t)}):r=n.onSnapshot({includeMetadataChanges:!0},t),()=>{null!=r&&r()}})}(n,e)}function pR(n,e){return uk(n,e).pipe((0,Vt.U)(t=>({payload:t,type:"query"})))}function PC(n,e){return pR(n,e).pipe(Co(void 0),lf(),(0,Vt.U)(([t,r])=>{const i=r.payload.docChanges(),a=i.map(c=>({type:c.type,payload:c}));return t&&JSON.stringify(t.payload.metadata)!==JSON.stringify(r.payload.metadata)&&r.payload.docs.forEach((c,h)=>{const g=i.find(C=>C.doc.ref.isEqual(c.ref)),v=null==t?void 0:t.payload.docs.find(C=>C.ref.isEqual(c.ref));g&&JSON.stringify(g.doc.metadata)===JSON.stringify(c.metadata)||!g&&v&&JSON.stringify(v.metadata)===JSON.stringify(c.metadata)||a.push({type:"modified",payload:{oldIndex:h,newIndex:h,type:"modified",doc:c}})}),a}))}function ck(n,e,t){return PC(n,t).pipe(Ss((r,i)=>function MV(n,e,t){return e.forEach(r=>{t.indexOf(r.type)>-1&&(n=function kV(n,e){switch(e.type){case"added":if(!n[e.newIndex]||!n[e.newIndex].doc.ref.isEqual(e.doc.ref))return gR(n,e.newIndex,0,e);break;case"modified":if(null==n[e.oldIndex]||n[e.oldIndex].doc.ref.isEqual(e.doc.ref)){if(e.oldIndex!==e.newIndex){const t=n.slice();return t.splice(e.oldIndex,1),t.splice(e.newIndex,0,e),t}return gR(n,e.newIndex,1,e)}break;case"removed":if(n[e.oldIndex]&&n[e.oldIndex].doc.ref.isEqual(e.doc.ref))return gR(n,e.oldIndex,1)}return n}(n,r))}),n}(r,i.map(a=>a.payload),e),[]),qr(),(0,Vt.U)(r=>r.map(i=>({type:i.type,payload:i}))))}function gR(n,e,t,...r){const i=n.slice();return i.splice(e,t,...r),i}function lk(n){return(!n||0===n.length)&&(n=["added","removed","modified"]),n}class dk{constructor(e,t,r){this.ref=e,this.query=t,this.afs=r}stateChanges(e){let t=PC(this.query,this.afs.schedulers.outsideAngular);return e&&e.length>0&&(t=t.pipe((0,Vt.U)(r=>r.filter(i=>e.indexOf(i.type)>-1)))),t.pipe(Co(void 0),lf(),lr(([r,i])=>i.length>0||!r),(0,Vt.U)(([r,i])=>i),lt.iC)}auditTrail(e){return this.stateChanges(e).pipe(Ss((t,r)=>[...t,...r],[]))}snapshotChanges(e){const t=lk(e);return ck(this.query,t,this.afs.schedulers.outsideAngular).pipe(lt.iC)}valueChanges(e={}){return pR(this.query,this.afs.schedulers.outsideAngular).pipe((0,Vt.U)(t=>t.payload.docs.map(r=>e.idField?Object.assign(Object.assign({},r.data()),{[e.idField]:r.id}):r.data())),lt.iC)}get(e){return(0,ur.D)(this.query.get(e)).pipe(lt.iC)}add(e){return this.ref.add(e)}doc(e){return new hk(this.ref.doc(e),this.afs)}}class hk{constructor(e,t){this.ref=e,this.afs=t}set(e,t){return this.ref.set(e,t)}update(e){return this.ref.update(e)}delete(){return this.ref.delete()}collection(e,t){const r=this.ref.collection(e),{ref:i,query:a}=fk(r,t);return new dk(i,a,this.afs)}snapshotChanges(){return function NV(n,e){return uk(n,e).pipe(Co(void 0),lf(),(0,Vt.U)(([t,r])=>r.exists?(null==t?void 0:t.exists)?{payload:r,type:"modified"}:{payload:r,type:"added"}:{payload:r,type:"removed"}))}(this.ref,this.afs.schedulers.outsideAngular).pipe(lt.iC)}valueChanges(e={}){return this.snapshotChanges().pipe((0,Vt.U)(({payload:t})=>e.idField?Object.assign(Object.assign({},t.data()),{[e.idField]:t.id}):t.data()))}get(e){return(0,ur.D)(this.ref.get(e)).pipe(lt.iC)}}class OV{constructor(e,t){this.query=e,this.afs=t}stateChanges(e){return e&&0!==e.length?PC(this.query,this.afs.schedulers.outsideAngular).pipe((0,Vt.U)(t=>t.filter(r=>e.indexOf(r.type)>-1)),lr(t=>t.length>0),lt.iC):PC(this.query,this.afs.schedulers.outsideAngular).pipe(lt.iC)}auditTrail(e){return this.stateChanges(e).pipe(Ss((t,r)=>[...t,...r],[]))}snapshotChanges(e){const t=lk(e);return ck(this.query,t,this.afs.schedulers.outsideAngular).pipe(lt.iC)}valueChanges(e={}){return pR(this.query,this.afs.schedulers.outsideAngular).pipe((0,Vt.U)(r=>r.payload.docs.map(i=>e.idField?Object.assign({[e.idField]:i.id},i.data()):i.data())),lt.iC)}get(e){return(0,ur.D)(this.query.get(e)).pipe(lt.iC)}}const FV=new m.OlP("angularfire2.enableFirestorePersistence"),LV=new m.OlP("angularfire2.firestore.persistenceSettings"),UV=new m.OlP("angularfire2.firestore.settings"),VV=new m.OlP("angularfire2.firestore.use-emulator");function fk(n,e=(t=>t)){return{query:e(n),ref:n}}let BV=(()=>{class n{constructor(t,r,i,a,c,h,g,v,C,D,x,k,B,ge,xe,bt,Tt){this.schedulers=g;const Wt=(0,Os.on)(t,h,r),Rt=C;D&&ok(Wt,h,x,B,ge,xe,k,bt),[this.firestore,this.persistenceEnabled$]=(0,Os.cc)(`${Wt.name}.firestore`,"AngularFirestore",Wt.name,()=>{const En=h.runOutsideAngular(()=>Wt.firestore());if(a&&En.settings(a),Rt&&En.useEmulator(...Rt),i&&!Vu(c)){const Rr=()=>{try{return(0,ur.D)(En.enablePersistence(v||void 0).then(()=>!0,()=>!1))}catch(Pu){return"undefined"!=typeof console&&console.warn(Pu),kt(!1)}};return[En,h.runOutsideAngular(Rr)]}return[En,kt(!1)]},[a,Rt,i])}collection(t,r){let i;i="string"==typeof t?this.firestore.collection(t):t;const{ref:a,query:c}=fk(i,r),h=this.schedulers.ngZone.run(()=>a);return new dk(h,c,this)}collectionGroup(t,r){const i=r||(c=>c),a=this.firestore.collectionGroup(t);return new OV(i(a),this)}doc(t){let r;r="string"==typeof t?this.firestore.doc(t):t;const i=this.schedulers.ngZone.run(()=>r);return new hk(i,this)}createId(){return this.firestore.collection("_").doc().id}}return n.\u0275fac=function(t){return new(t||n)(m.LFG(Os.Dh),m.LFG(Os.xv,8),m.LFG(FV,8),m.LFG(UV,8),m.LFG(m.Lbi),m.LFG(m.R0b),m.LFG(lt.HU),m.LFG(LV,8),m.LFG(VV,8),m.LFG(ak,8),m.LFG(ek,8),m.LFG(tk,8),m.LFG(nk,8),m.LFG(rk,8),m.LFG(ik,8),m.LFG(sk,8),m.LFG(Qd,8))},n.\u0275prov=m.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),pk=(()=>{class n{constructor(t,r){this.personsStore=t,this.firestore=r,this.unsubscriber=new Ir.x,this.personCollection=r.collection("person"),this.fetch()}ngOnDestroy(){this.unsubscriber.next(),this.unsubscriber.complete()}fetch(){this.personCollection.valueChanges({idField:"id"}).pipe(yw(this.unsubscriber)).subscribe(t=>{this.personsStore.set(t)})}add(t){const r=this.firestore.createId(),i=Object.assign(Object.assign({},t),{id:r});this.personCollection.doc(r).set(i).then(a=>{this.personsStore.add(i)})}update(t,r){this.personCollection.doc(t).update(Object.assign({},r)).then(i=>{this.personsStore.update(t,r)})}remove(t){this.personCollection.doc(t).delete().then(r=>{this.personsStore.remove(t)})}}return n.\u0275fac=function(t){return new(t||n)(m.LFG(ko),m.LFG(BV))},n.\u0275prov=m.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),gk=(()=>{class n extends Fy{constructor(t){super(t),this.store=t}}return n.\u0275fac=function(t){return new(t||n)(m.LFG(ko))},n.\u0275prov=m.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function NC(...n){const e=n.length;if(0===e)throw new Error("list of properties cannot be empty.");return(0,Vt.U)(t=>{let r=t;for(let i=0;i<e;i++){const a=null==r?void 0:r[n[i]];if(void 0===a)return;r=a}return r})}let mk=(()=>{let n=class extends No{constructor(){super({state:null,navigationId:null})}};return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=m.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n=(0,Fn.gn)([Mw({name:"router"}),(0,Fn.w6)("design:paramtypes",[])],n),n})();function Xc(n){return e=>e.pipe((0,Vt.U)(t=>t.state)).pipe(Ow(),(0,Vt.U)(t=>t[n]))}let _k=(()=>{class n extends Ec{constructor(t){super(t),this.store=t,this.__navigationCancel=new Ir.x,this.__navigationError=new Ir.x}selectParams(t){if(void 0===t)return this.select().pipe(Xc("params"),qr());const r=i=>this.select().pipe(Xc("params"),NC(i),qr());return Array.isArray(t)?Yu(t.map(r)):r(t).pipe(qr())}getParams(t){if(this.getValue().state){const r=this.getValue().state.params;return void 0===t?r:r[t]}return null}selectQueryParams(t){if(void 0===t)return this.select().pipe(Xc("queryParams"),qr());const r=i=>this.select().pipe(Xc("queryParams"),NC(i),qr());return Array.isArray(t)?Yu(t.map(r)):r(t)}getQueryParams(t){if(this.getValue().state){const r=this.getValue().state.queryParams;return void 0===t?r:r[t]}return null}selectFragment(){return this.select().pipe(Xc("fragment"),qr())}getFragment(){return this.getValue().state?this.getValue().state.fragment:null}selectData(t){return void 0===t?this.select().pipe(Xc("data"),qr()):this.select().pipe(Xc("data"),NC(t),qr())}getData(t){if(this.getValue().state){const r=this.getValue().state.data;return void 0===t?r:r[t]}return null}selectNavigationExtras(t){return void 0===t?this.select().pipe(Xc("navigationExtras"),qr()):this.select().pipe(Xc("data"),NC(t),qr())}getNavigationExtras(t){if(this.getValue().state){const r=this.getValue().state.navigationExtras;return void 0===t?r:r[t]}return null}selectNavigationCancel(){return this.__navigationCancel.asObservable()}selectNavigationError(){return this.__navigationError.asObservable()}}return n.\u0275fac=function(t){return new(t||n)(m.LFG(mk))},n.\u0275prov=m.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),$V=(()=>{class n{constructor(t,r,i){this.routerStore=t,this.routerQuery=r,this.router=i,this.dispatchTriggeredByRouter=!1,this.navigationTriggeredByDispatch=!1}dispatchRouterCancel(t){this.update({navigationId:t.id}),this.routerQuery.__navigationCancel.next(t)}dispatchRouterError(t){this.update({navigationId:t.id}),this.routerQuery.__navigationError.next(t)}dispatchRouterSuccess(){this.update(this.lastRouterState)}init(){this.setUpStoreListener(),this.setUpStateRollbackEvents()}update(t){this.dispatchTriggeredByRouter=!0,this.routerStore.update(r=>Object.assign(Object.assign({},r),t)),this.dispatchTriggeredByRouter=!1,this.navigationTriggeredByDispatch=!1}setUpStoreListener(){this.routerQuery.select(t=>t).subscribe(t=>{this.lastRouterState=t,this.navigateIfNeeded()})}navigateIfNeeded(){!this.lastRouterState||!this.lastRouterState.state||this.dispatchTriggeredByRouter||this.router.url!==this.lastRouterState.state.url&&(this.navigationTriggeredByDispatch=!0,tD(),this.router.navigateByUrl(this.lastRouterState.state.url))}setUpStateRollbackEvents(){this.router.events.subscribe(t=>{t instanceof ja||t instanceof kh||t instanceof ai?this.lastRouterState=this.serializeRoute(t):t instanceof ec?this.dispatchRouterCancel(t):t instanceof _r?this.dispatchRouterError(t):t instanceof As&&!this.navigationTriggeredByDispatch&&this.dispatchRouterSuccess()})}serializeRoute(t){let r=t.state.root;for(;r.firstChild;)r=r.firstChild;const{params:i,data:a,queryParams:c,fragment:h}=r;return{navigationId:t.id,state:{url:t.url,urlAfterRedirects:t.urlAfterRedirects,params:i,queryParams:c,fragment:h,data:a,navigationExtras:this.router.getCurrentNavigation().extras?this.router.getCurrentNavigation().extras.state:{}}}}}return n.\u0275fac=function(t){return new(t||n)(m.LFG(mk),m.LFG(_k),m.LFG(ci))},n.\u0275prov=m.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),(0,Fn.gn)([tf("Navigation Cancelled"),(0,Fn.w6)("design:type",Function),(0,Fn.w6)("design:paramtypes",[ec]),(0,Fn.w6)("design:returntype",void 0)],n.prototype,"dispatchRouterCancel",null),(0,Fn.gn)([tf("Navigation Error"),(0,Fn.w6)("design:type",Function),(0,Fn.w6)("design:paramtypes",[_r]),(0,Fn.w6)("design:returntype",void 0)],n.prototype,"dispatchRouterError",null),(0,Fn.gn)([tf("Navigation Succeeded"),(0,Fn.w6)("design:type",Function),(0,Fn.w6)("design:paramtypes",[]),(0,Fn.w6)("design:returntype",void 0)],n.prototype,"dispatchRouterSuccess",null),n})(),HV=(()=>{class n{constructor(t){this.routerService=t,this.routerService.init()}}return n.\u0275fac=function(t){return new(t||n)(m.LFG($V))},n.\u0275mod=m.oAB({type:n}),n.\u0275inj=m.cJS({}),n})();function WV(n,e){if(1&n&&(m.TgZ(0,"p"),m._uU(1),m.ALo(2,"json"),m.qZA()),2&n){const t=e.$implicit;m.xp6(1),m.Oqu(m.lcZ(2,1,t))}}function zV(n,e){if(1&n&&(m.ynx(0),m.YNc(1,WV,3,3,"p",1),m.BQk()),2&n){const t=e.ngIf;m.xp6(1),m.Q6J("ngForOf",t)}}let yk=(()=>{class n{constructor(t,r,i){this.personsService=t,this.personsQuery=r,this.routerQuery=i,this.persons$=this.personsQuery.selectAll()}ngOnInit(){this.routerQuery.selectParams("pesonId").subscribe(t=>console.log(t))}}return n.\u0275fac=function(t){return new(t||n)(m.Y36(pk),m.Y36(gk),m.Y36(_k))},n.\u0275cmp=m.Xpm({type:n,selectors:[["app-person-details"]],decls:2,vars:3,consts:[[4,"ngIf"],[4,"ngFor","ngForOf"]],template:function(t,r){1&t&&(m.YNc(0,zV,2,1,"ng-container",0),m.ALo(1,"async")),2&t&&m.Q6J("ngIf",m.lcZ(1,1,r.persons$))},directives:[oi,Pr],pipes:[Qp,Zo],styles:["[_nghost-%COMP%]{color:#fff}"]}),n})();const GV=[{path:"person/:personId",component:yk},{path:"",redirectTo:"/person",pathMatch:"full"},{path:"**",component:yk}];let qV=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=m.oAB({type:n}),n.\u0275inj=m.cJS({imports:[[yy.forRoot(GV)],yy]}),n})(),el=class extends No{constructor(){super({isDarkMode:!1})}};el.\u0275fac=function(e){return new(e||el)},el.\u0275prov=m.Yz7({token:el,factory:el.\u0275fac,providedIn:"root"}),el=(0,Fn.gn)([Mw({name:"context"})],el);let vk=(()=>{class n extends Ec{constructor(t){super(t),this.store=t,this.isDarkMode$=this.select("isDarkMode")}}return n.\u0275fac=function(t){return new(t||n)(m.LFG(el))},n.\u0275prov=m.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),ZV=(()=>{class n{constructor(t,r){this.contextStore=t,this.contextQuery=r}swapMode(){this.contextQuery.isDarkMode$.pipe((0,Ys.q)(1)).subscribe(t=>this.contextStore.update({isDarkMode:!t}))}}return n.\u0275fac=function(t){return new(t||n)(m.LFG(el),m.LFG(vk))},n.\u0275prov=m.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),YV=(()=>{class n{constructor(t){this.contextService=t}ngOnInit(){}swapMode(){this.contextService.swapMode()}}return n.\u0275fac=function(t){return new(t||n)(m.Y36(ZV))},n.\u0275cmp=m.Xpm({type:n,selectors:[["app-header"]],decls:10,vars:0,consts:[[1,"header-menu"],["href","#",1,"menu-link","is-active"],["href","#",1,"menu-link"],[1,"search-bar"],["type","text","placeholder","Search"],[1,"dark-light",3,"click"],["viewBox","0 0 24 24","stroke","currentColor","stroke-width","1.5","fill","none","stroke-linecap","round","stroke-linejoin","round"],["d","M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"]],template:function(t,r){1&t&&(m.TgZ(0,"div",0)(1,"a",1),m._uU(2,"Lista de personas"),m.qZA(),m.TgZ(3,"a",2),m._uU(4,"Arbol"),m.qZA()(),m.TgZ(5,"div",3),m._UZ(6,"input",4),m.qZA(),m.TgZ(7,"button",5),m.NdJ("click",function(){return r.swapMode()}),m.O4$(),m.TgZ(8,"svg",6),m._UZ(9,"path",7),m.qZA()())},styles:["[_nghost-%COMP%]{--blur-value: 20px;background-color:var(--theme-bg-color);-webkit-backdrop-filter:blur(var(--blur-value));backdrop-filter:blur(var(--blur-value));display:flex;gap:1rem;justify-content:space-between;width:100%;align-items:center;flex-shrink:0;height:58px;border-bottom:1px solid var(--border-color);padding:0 30px;white-space:nowrap}@media screen and (max-width: 480px){[_nghost-%COMP%]{padding:0 16px}}.header-menu[_ngcontent-%COMP%]{display:flex;align-items:center}.header-menu[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{padding:20px 30px;text-decoration:none;color:var(--inactive-color);border-bottom:2px solid transparent;transition:.3s}@media screen and (max-width: 610px){.header-menu[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:not(.main-header-link){display:none}}.header-menu[_ngcontent-%COMP%]   a.is-active[_ngcontent-%COMP%], .header-menu[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{color:var(--theme-color);border-bottom:2px solid var(--theme-color)}.dark-light[_ngcontent-%COMP%]{background-color:var(--dropdown-bg);box-shadow:-1px 3px 8px -1px #0003;padding:8px;border-radius:50%;cursor:pointer}.dark-light[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{width:24px;flex-shrink:0;fill:#ffce45;stroke:#ffce45;transition:.5s}"]}),n})();const QV=function(n){return["/person",n]};function JV(n,e){if(1&n&&(m.TgZ(0,"li")(1,"a",2)(2,"span"),m._uU(3),m.qZA()()()),2&n){const t=e.$implicit;m.xp6(1),m.Q6J("routerLink",m.VKq(2,QV,t.id)),m.xp6(2),m.hij(" ",t.name+" "+t.surname1+" "+t.surname2," ")}}function XV(n,e){if(1&n&&(m.TgZ(0,"ul"),m.YNc(1,JV,4,4,"li",1),m.qZA()),2&n){const t=e.ngIf;m.xp6(1),m.Q6J("ngForOf",t)}}let eB=(()=>{class n{constructor(t){this.personsQuery=t,this.persons$=this.personsQuery.selectAll()}ngOnInit(){}}return n.\u0275fac=function(t){return new(t||n)(m.Y36(gk))},n.\u0275cmp=m.Xpm({type:n,selectors:[["app-person-list"]],decls:2,vars:3,consts:[[4,"ngIf"],[4,"ngFor","ngForOf"],["routerLinkActive","active",3,"routerLink"]],template:function(t,r){1&t&&(m.YNc(0,XV,2,1,"ul",0),m.ALo(1,"async")),2&t&&m.Q6J("ngIf",m.lcZ(1,1,r.persons$))},directives:[oi,Pr,Vg,ow],pipes:[Qp],styles:["[_nghost-%COMP%]{display:flex}ul[_ngcontent-%COMP%]{display:flex;flex-direction:column;white-space:nowrap}ul[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{text-decoration:none;color:var(--theme-color);display:flex;align-items:center;font-weight:400;padding:10px;font-size:14px;border-radius:6px;transition:.3s;cursor:pointer}ul[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{background-color:var(--hover-menu-bg)}ul[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{width:16px;margin-right:8px}"]}),n})(),tB=(()=>{class n{constructor(t,r){this.contextQuery=t,this.personsService=r,this.title="family-tree-akita",this.unsubscriber=new Ir.x,this.lightMode=!1}ngOnInit(){this.contextQuery.isDarkMode$.pipe(yw(this.unsubscriber)).subscribe(t=>this.lightMode=!t)}ngOnDestroy(){this.unsubscriber.next(),this.unsubscriber.complete()}}return n.\u0275fac=function(t){return new(t||n)(m.Y36(vk),m.Y36(pk))},n.\u0275cmp=m.Xpm({type:n,selectors:[["app-root"]],hostVars:2,hostBindings:function(t,r){2&t&&m.ekj("light-mode",r.lightMode)},decls:5,vars:0,consts:[[1,"card"],[1,"left-side"]],template:function(t,r){1&t&&(m._UZ(0,"app-header"),m.TgZ(1,"main")(2,"div",0),m._UZ(3,"app-person-list",1)(4,"router-outlet"),m.qZA()())},directives:[YV,eB,Gl],styles:["[_nghost-%COMP%]{display:flex;flex-direction:column;align-items:center;width:100%;height:100vh}main[_ngcontent-%COMP%]{display:flex;align-items:stretch;padding:2rem;width:100%;height:100%}main[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]{width:100%;display:flex;flex-grow:1;overflow:hidden}"]}),n})();const Ek=new m.OlP("NgEntityServiceGlobalConfig");new m.OlP("DevtoolsOptions");const kC_firebase={projectId:"appinventorgenealopaco2",appId:"1:624884560123:web:3fbb4ab35c17fee1e4c05e",databaseURL:"https://appinventorgenealopaco2-default-rtdb.firebaseio.com",storageBucket:"appinventorgenealopaco2.appspot.com",locationId:"europe-west",apiKey:"AIzaSyDv-ie5uDdQcvhkIxmqUz6c22jKJWoCMFg",authDomain:"appinventorgenealopaco2.firebaseapp.com",messagingSenderId:"624884560123"};var _R=P(6148),Ik=P(4929);class OC{constructor(e){return e}}function mB(n){return(e,t)=>{const r=e.runOutsideAngular(()=>n(t));return new OC(r)}}const IB=(0,lt.u3)(Ik.n,!0);class KE{constructor(e){return e}}const CB=(0,lt.u3)(_R.IH,!0);function $B(n){return(e,t)=>{if(!lt.nk.sync())return null;const r=e.runOutsideAngular(()=>n(t));return new KE(r)}}const Rk="@firebase/database";let bR="";class KB{constructor(e){this.domStorage_=e,this.prefix_="firebase:"}set(e,t){null==t?this.domStorage_.removeItem(this.prefixedName_(e)):this.domStorage_.setItem(this.prefixedName_(e),(0,Z.Pz)(t))}get(e){const t=this.domStorage_.getItem(this.prefixedName_(e));return null==t?null:(0,Z.cI)(t)}remove(e){this.domStorage_.removeItem(this.prefixedName_(e))}prefixedName_(e){return this.prefix_+e}toString(){return this.domStorage_.toString()}}class ZB{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(e,t){null==t?delete this.cache_[e]:this.cache_[e]=t}get(e){return(0,Z.r3)(this.cache_,e)?this.cache_[e]:null}remove(e){delete this.cache_[e]}}const Pk=function(n){try{if("undefined"!=typeof window&&void 0!==window[n]){const e=window[n];return e.setItem("firebase:sentinel","cache"),e.removeItem("firebase:sentinel"),new KB(e)}}catch(e){}return new ZB},Up=Pk("localStorage"),CR=Pk("sessionStorage"),__=new no.Yd("@firebase/database"),Nk=function(){let n=1;return function(){return n++}}(),Mk=function(n){const e=(0,Z.dS)(n),t=new Z.gQ;t.update(e);const r=t.digest();return Z.US.encodeByteArray(r)},YE=function(...n){let e="";for(let t=0;t<n.length;t++){const r=n[t];Array.isArray(r)||r&&"object"==typeof r&&"number"==typeof r.length?e+=YE.apply(null,r):e+="object"==typeof r?(0,Z.Pz)(r):r,e+=" "}return e};let Vp=null,kk=!0;const xi=function(...n){if(!0===kk&&(kk=!1,null===Vp&&!0===CR.get("logging_enabled")&&function(n,e){(0,Z.hu)(!e||!0===n||!1===n,"Can't turn on custom loggers persistently."),!0===n?(__.logLevel=no.in.VERBOSE,Vp=__.log.bind(__),e&&CR.set("logging_enabled",!0)):"function"==typeof n?Vp=n:(Vp=null,CR.remove("logging_enabled"))}(!0)),Vp){const e=YE.apply(null,n);Vp(e)}},QE=function(n){return function(...e){xi(n,...e)}},TR=function(...n){const e="FIREBASE INTERNAL ERROR: "+YE(...n);__.error(e)},bu=function(...n){const e=`FIREBASE FATAL ERROR: ${YE(...n)}`;throw __.error(e),new Error(e)},ws=function(...n){const e="FIREBASE WARNING: "+YE(...n);__.warn(e)},FC=function(n){return"number"==typeof n&&(n!=n||n===Number.POSITIVE_INFINITY||n===Number.NEGATIVE_INFINITY)},tl="[MIN_NAME]",Cu="[MAX_NAME]",Bp=function(n,e){if(n===e)return 0;if(n===tl||e===Cu)return-1;if(e===tl||n===Cu)return 1;{const t=LC(n),r=LC(e);return null!==t?null!==r?t-r==0?n.length-e.length:t-r:-1:null!==r?1:n<e?-1:1}},JB=function(n,e){return n===e?0:n<e?-1:1},JE=function(n,e){if(e&&n in e)return e[n];throw new Error("Missing required key ("+n+") in object: "+(0,Z.Pz)(e))},DR=function(n){if("object"!=typeof n||null===n)return(0,Z.Pz)(n);const e=[];for(const r in n)e.push(r);e.sort();let t="{";for(let r=0;r<e.length;r++)0!==r&&(t+=","),t+=(0,Z.Pz)(e[r]),t+=":",t+=DR(n[e[r]]);return t+="}",t},Fk=function(n,e){const t=n.length;if(t<=e)return[n];const r=[];for(let i=0;i<t;i+=e)r.push(n.substring(i,i+e>t?t:i+e));return r};function Pi(n,e){for(const t in n)n.hasOwnProperty(t)&&e(t,n[t])}const Lk=function(n){(0,Z.hu)(!FC(n),"Invalid JSON number");const r=1023;let i,a,c,h,g;0===n?(a=0,c=0,i=1/n==-1/0?1:0):(i=n<0,(n=Math.abs(n))>=Math.pow(2,1-r)?(h=Math.min(Math.floor(Math.log(n)/Math.LN2),r),a=h+r,c=Math.round(n*Math.pow(2,52-h)-Math.pow(2,52))):(a=0,c=Math.round(n/Math.pow(2,-1074))));const v=[];for(g=52;g;g-=1)v.push(c%2?1:0),c=Math.floor(c/2);for(g=11;g;g-=1)v.push(a%2?1:0),a=Math.floor(a/2);v.push(i?1:0),v.reverse();const C=v.join("");let D="";for(g=0;g<64;g+=8){let x=parseInt(C.substr(g,8),2).toString(16);1===x.length&&(x="0"+x),D+=x}return D.toLowerCase()},n2=new RegExp("^-?(0*)\\d{1,10}$"),LC=function(n){if(n2.test(n)){const e=Number(n);if(e>=-2147483648&&e<=2147483647)return e}return null},y_=function(n){try{n()}catch(e){setTimeout(()=>{throw ws("Exception was thrown by user callback.",e.stack||""),e},Math.floor(0))}},XE=function(n,e){const t=setTimeout(n,e);return"object"==typeof t&&t.unref&&t.unref(),t};class i2{constructor(e,t){this.appName_=e,this.appCheckProvider=t,this.appCheck=null==t?void 0:t.getImmediate({optional:!0}),this.appCheck||null==t||t.get().then(r=>this.appCheck=r)}getToken(e){return this.appCheck?this.appCheck.getToken(e):new Promise((t,r)=>{setTimeout(()=>{this.appCheck?this.getToken(e).then(t,r):t(null)},0)})}addTokenChangeListener(e){var t;null===(t=this.appCheckProvider)||void 0===t||t.get().then(r=>r.addTokenListener(e))}notifyForInvalidToken(){ws(`Provided AppCheck credentials for the app named "${this.appName_}" are invalid. This usually indicates your app was not initialized correctly.`)}}class s2{constructor(e,t,r){this.appName_=e,this.firebaseOptions_=t,this.authProvider_=r,this.auth_=null,this.auth_=r.getImmediate({optional:!0}),this.auth_||r.onInit(i=>this.auth_=i)}getToken(e){return this.auth_?this.auth_.getToken(e).catch(t=>t&&"auth/token-not-initialized"===t.code?(xi("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(t)):new Promise((t,r)=>{setTimeout(()=>{this.auth_?this.getToken(e).then(t,r):t(null)},0)})}addTokenChangeListener(e){this.auth_?this.auth_.addAuthTokenListener(e):this.authProvider_.get().then(t=>t.addAuthTokenListener(e))}removeTokenChangeListener(e){this.authProvider_.get().then(t=>t.removeAuthTokenListener(e))}notifyForInvalidToken(){let e='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';e+="credential"in this.firebaseOptions_?'Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?'Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':'Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',ws(e)}}let e0=(()=>{class n{constructor(t){this.accessToken=t}getToken(t){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(t){t(this.accessToken)}removeTokenChangeListener(t){}notifyForInvalidToken(){}}return n.OWNER="owner",n})();const Hk=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,zk="websocket",Gk="long_polling";class RR{constructor(e,t,r,i,a=!1,c="",h=!1){this.secure=t,this.namespace=r,this.webSocketOnly=i,this.nodeAdmin=a,this.persistenceKey=c,this.includeNamespaceInQueryParams=h,this._host=e.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=Up.get("host:"+e)||this._host}isCacheableHost(){return"s-"===this.internalHost.substr(0,2)}isCustomHost(){return"firebaseio.com"!==this._domain&&"firebaseio-demo.com"!==this._domain}get host(){return this._host}set host(e){e!==this.internalHost&&(this.internalHost=e,this.isCacheableHost()&&Up.set("host:"+this._host,this.internalHost))}toString(){let e=this.toURLString();return this.persistenceKey&&(e+="<"+this.persistenceKey+">"),e}toURLString(){return`${this.secure?"https://":"http://"}${this.host}/${this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:""}`}}function qk(n,e,t){let r;if((0,Z.hu)("string"==typeof e,"typeof type must == string"),(0,Z.hu)("object"==typeof t,"typeof params must == object"),e===zk)r=(n.secure?"wss://":"ws://")+n.internalHost+"/.ws?";else{if(e!==Gk)throw new Error("Unknown connection type: "+e);r=(n.secure?"https://":"http://")+n.internalHost+"/.lp?"}(function a2(n){return n.host!==n.internalHost||n.isCustomHost()||n.includeNamespaceInQueryParams})(n)&&(t.ns=n.namespace);const i=[];return Pi(t,(a,c)=>{i.push(a+"="+c)}),r+i.join("&")}class u2{constructor(){this.counters_={}}incrementCounter(e,t=1){(0,Z.r3)(this.counters_,e)||(this.counters_[e]=0),this.counters_[e]+=t}get(){return(0,Z.p$)(this.counters_)}}const xR={},PR={};function NR(n){const e=n.toString();return xR[e]||(xR[e]=new u2),xR[e]}class l2{constructor(e){this.onMessage_=e,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(e,t){this.closeAfterResponse=e,this.onClose=t,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(e,t){for(this.pendingResponses[e]=t;this.pendingResponses[this.currentResponseNum];){const r=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let i=0;i<r.length;++i)r[i]&&y_(()=>{this.onMessage_(r[i])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}}class v_{constructor(e,t,r,i,a,c,h){this.connId=e,this.repoInfo=t,this.applicationId=r,this.appCheckToken=i,this.authToken=a,this.transportSessionId=c,this.lastSessionId=h,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=QE(e),this.stats_=NR(t),this.urlFn=g=>(this.appCheckToken&&(g.ac=this.appCheckToken),qk(t,Gk,g))}open(e,t){this.curSegmentNum=0,this.onDisconnect_=t,this.myPacketOrderer=new l2(e),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(3e4)),function(n){if((0,Z.Yr)()||"complete"===document.readyState)n();else{let e=!1;const t=function(){document.body?e||(e=!0,n()):setTimeout(t,Math.floor(10))};document.addEventListener?(document.addEventListener("DOMContentLoaded",t,!1),window.addEventListener("load",t,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{"complete"===document.readyState&&t()}),window.attachEvent("onload",t))}}(()=>{if(this.isClosed_)return;this.scriptTagHolder=new MR((...a)=>{const[c,h,g,v,C]=a;if(this.incrementIncomingBytes_(a),this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,"start"===c)this.id=h,this.password=g;else{if("close"!==c)throw new Error("Unrecognized command received: "+c);h?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(h,()=>{this.onClosed_()})):this.onClosed_()}},(...a)=>{const[c,h]=a;this.incrementIncomingBytes_(a),this.myPacketOrderer.handleResponse(c,h)},()=>{this.onClosed_()},this.urlFn);const r={start:"t"};r.ser=Math.floor(1e8*Math.random()),this.scriptTagHolder.uniqueCallbackIdentifier&&(r.cb=this.scriptTagHolder.uniqueCallbackIdentifier),r.v="5",this.transportSessionId&&(r.s=this.transportSessionId),this.lastSessionId&&(r.ls=this.lastSessionId),this.applicationId&&(r.p=this.applicationId),this.appCheckToken&&(r.ac=this.appCheckToken),"undefined"!=typeof location&&location.hostname&&Hk.test(location.hostname)&&(r.r="f");const i=this.urlFn(r);this.log_("Connecting via long-poll to "+i),this.scriptTagHolder.addTag(i,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){v_.forceAllow_=!0}static forceDisallow(){v_.forceDisallow_=!0}static isAvailable(){return!((0,Z.Yr)()||!v_.forceAllow_&&(v_.forceDisallow_||"undefined"==typeof document||null==document.createElement||"object"==typeof window&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href)||"object"==typeof Windows&&"object"==typeof Windows.UI))}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(e){const t=(0,Z.Pz)(e);this.bytesSent+=t.length,this.stats_.incrementCounter("bytes_sent",t.length);const r=(0,Z.h$)(t),i=Fk(r,1840);for(let a=0;a<i.length;a++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,i.length,i[a]),this.curSegmentNum++}addDisconnectPingFrame(e,t){if((0,Z.Yr)())return;this.myDisconnFrame=document.createElement("iframe");const r={dframe:"t"};r.id=e,r.pw=t,this.myDisconnFrame.src=this.urlFn(r),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(e){const t=(0,Z.Pz)(e).length;this.bytesReceived+=t,this.stats_.incrementCounter("bytes_received",t)}}class MR{constructor(e,t,r,i){if(this.onDisconnect=r,this.urlFn=i,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(1e8*Math.random()),this.sendNewPolls=!0,(0,Z.Yr)())this.commandCB=e,this.onMessageCB=t;else{this.uniqueCallbackIdentifier=Nk(),window["pLPCommand"+this.uniqueCallbackIdentifier]=e,window["pRTLPCB"+this.uniqueCallbackIdentifier]=t,this.myIFrame=MR.createIFrame_();let a="";this.myIFrame.src&&"javascript:"===this.myIFrame.src.substr(0,11)&&(a='<script>document.domain="'+document.domain+'";<\/script>');const c="<html><body>"+a+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(c),this.myIFrame.doc.close()}catch(h){xi("frame writing exception"),h.stack&&xi(h.stack),xi(h)}}}static createIFrame_(){const e=document.createElement("iframe");if(e.style.display="none",!document.body)throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";document.body.appendChild(e);try{e.contentWindow.document||xi("No IE domain setting required")}catch(t){const r=document.domain;e.src="javascript:void((function(){document.open();document.domain='"+r+"';document.close();})())"}return e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document),e}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.innerHTML="",setTimeout(()=>{null!==this.myIFrame&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));const e=this.onDisconnect;e&&(this.onDisconnect=null,e())}startLongPoll(e,t){for(this.myID=e,this.myPW=t,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;const e={};e.id=this.myID,e.pw=this.myPW,e.ser=this.currentSerial;let t=this.urlFn(e),r="",i=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+30+r.length<=1870;){const c=this.pendingSegs.shift();r=r+"&seg"+i+"="+c.seg+"&ts"+i+"="+c.ts+"&d"+i+"="+c.d,i++}return t+=r,this.addLongPollTag_(t,this.currentSerial),!0}return!1}enqueueSegment(e,t,r){this.pendingSegs.push({seg:e,ts:t,d:r}),this.alive&&this.newRequest_()}addLongPollTag_(e,t){this.outstandingRequests.add(t);const r=()=>{this.outstandingRequests.delete(t),this.newRequest_()},i=setTimeout(r,Math.floor(25e3));this.addTag(e,()=>{clearTimeout(i),r()})}addTag(e,t){(0,Z.Yr)()?this.doNodeLongPoll(e,t):setTimeout(()=>{try{if(!this.sendNewPolls)return;const r=this.myIFrame.doc.createElement("script");r.type="text/javascript",r.async=!0,r.src=e,r.onload=r.onreadystatechange=function(){const i=r.readyState;(!i||"loaded"===i||"complete"===i)&&(r.onload=r.onreadystatechange=null,r.parentNode&&r.parentNode.removeChild(r),t())},r.onerror=()=>{xi("Long-poll script failed to load: "+e),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(r)}catch(r){}},Math.floor(1))}}let t0=null;"undefined"!=typeof MozWebSocket?t0=MozWebSocket:"undefined"!=typeof WebSocket&&(t0=WebSocket);let n0=(()=>{class n{constructor(t,r,i,a,c,h,g){this.connId=t,this.applicationId=i,this.appCheckToken=a,this.authToken=c,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=QE(this.connId),this.stats_=NR(r),this.connURL=n.connectionURL_(r,h,g,a),this.nodeAdmin=r.nodeAdmin}static connectionURL_(t,r,i,a){const c={v:"5"};return!(0,Z.Yr)()&&"undefined"!=typeof location&&location.hostname&&Hk.test(location.hostname)&&(c.r="f"),r&&(c.s=r),i&&(c.ls=i),a&&(c.ac=a),qk(t,zk,c)}open(t,r){this.onDisconnect=r,this.onMessage=t,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,Up.set("previous_websocket_failure",!0);try{if((0,Z.Yr)()){const a={headers:{"User-Agent":`Firebase/5/${bR}/${process.platform}/${this.nodeAdmin?"AdminNode":"Node"}`,"X-Firebase-GMPID":this.applicationId||""}};this.authToken&&(a.headers.Authorization=`Bearer ${this.authToken}`),this.appCheckToken&&(a.headers["X-Firebase-AppCheck"]=this.appCheckToken);const c=process.env,h=0===this.connURL.indexOf("wss://")?c.HTTPS_PROXY||c.https_proxy:c.HTTP_PROXY||c.http_proxy;h&&(a.proxy={origin:h}),this.mySock=new t0(this.connURL,[],a)}else this.mySock=new t0(this.connURL,[],{headers:{"X-Firebase-GMPID":this.applicationId||"","X-Firebase-AppCheck":this.appCheckToken||""}})}catch(i){this.log_("Error instantiating WebSocket.");const a=i.message||i.data;return a&&this.log_(a),void this.onClosed_()}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=i=>{this.handleIncomingFrame(i)},this.mySock.onerror=i=>{this.log_("WebSocket error.  Closing connection.");const a=i.message||i.data;a&&this.log_(a),this.onClosed_()}}start(){}static forceDisallow(){n.forceDisallow_=!0}static isAvailable(){let t=!1;if("undefined"!=typeof navigator&&navigator.userAgent){const i=navigator.userAgent.match(/Android ([0-9]{0,}\.[0-9]{0,})/);i&&i.length>1&&parseFloat(i[1])<4.4&&(t=!0)}return!t&&null!==t0&&!n.forceDisallow_}static previouslyFailed(){return Up.isInMemoryStorage||!0===Up.get("previous_websocket_failure")}markConnectionHealthy(){Up.remove("previous_websocket_failure")}appendFrame_(t){if(this.frames.push(t),this.frames.length===this.totalFrames){const r=this.frames.join("");this.frames=null;const i=(0,Z.cI)(r);this.onMessage(i)}}handleNewFrameCount_(t){this.totalFrames=t,this.frames=[]}extractFrameCount_(t){if((0,Z.hu)(null===this.frames,"We already have a frame buffer"),t.length<=6){const r=Number(t);if(!isNaN(r))return this.handleNewFrameCount_(r),null}return this.handleNewFrameCount_(1),t}handleIncomingFrame(t){if(null===this.mySock)return;const r=t.data;if(this.bytesReceived+=r.length,this.stats_.incrementCounter("bytes_received",r.length),this.resetKeepAlive(),null!==this.frames)this.appendFrame_(r);else{const i=this.extractFrameCount_(r);null!==i&&this.appendFrame_(i)}}send(t){this.resetKeepAlive();const r=(0,Z.Pz)(t);this.bytesSent+=r.length,this.stats_.incrementCounter("bytes_sent",r.length);const i=Fk(r,16384);i.length>1&&this.sendString_(String(i.length));for(let a=0;a<i.length;a++)this.sendString_(i[a])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(45e3))}sendString_(t){try{this.mySock.send(t)}catch(r){this.log_("Exception thrown from WebSocket.send():",r.message||r.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}return n.responsesRequiredToBeHealthy=2,n.healthyTimeout=3e4,n})();class kR{constructor(e){this.initTransports_(e)}static get ALL_TRANSPORTS(){return[v_,n0]}initTransports_(e){const t=n0&&n0.isAvailable();let r=t&&!n0.previouslyFailed();if(e.webSocketOnly&&(t||ws("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),r=!0),r)this.transports_=[n0];else{const i=this.transports_=[];for(const a of kR.ALL_TRANSPORTS)a&&a.isAvailable()&&i.push(a)}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}class oO{constructor(e,t,r,i,a,c,h,g,v,C){this.id=e,this.repoInfo_=t,this.applicationId_=r,this.appCheckToken_=i,this.authToken_=a,this.onMessage_=c,this.onReady_=h,this.onDisconnect_=g,this.onKill_=v,this.lastSessionId=C,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=QE("c:"+this.id+":"),this.transportManager_=new kR(t),this.log_("Connection created"),this.start_()}start_(){const e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const t=this.connReceiver_(this.conn_),r=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(t,r)},Math.floor(0));const i=e.healthyTimeout||0;i>0&&(this.healthyTimeout_=XE(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>102400?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>10240?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(i)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(e){return t=>{e===this.conn_?this.onConnectionLost_(t):e===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(e){return t=>{2!==this.state_&&(e===this.rx_?this.onPrimaryMessageReceived_(t):e===this.secondaryConn_?this.onSecondaryMessageReceived_(t):this.log_("message on old connection"))}}sendRequest(e){this.sendData_({t:"d",d:e})}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(e){if("t"in e){const t=e.t;"a"===t?this.upgradeIfSecondaryHealthy_():"r"===t?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):"o"===t&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(e){const t=JE("t",e),r=JE("d",e);if("c"===t)this.onSecondaryControl_(r);else{if("d"!==t)throw new Error("Unknown protocol layer: "+t);this.pendingDataMessages.push(r)}}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:"p",d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:"a",d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:"n",d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(e){const t=JE("t",e),r=JE("d",e);"c"===t?this.onControl_(r):"d"===t&&this.onDataMessage_(r)}onDataMessage_(e){this.onPrimaryResponse_(),this.onMessage_(e)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(e){const t=JE("t",e);if("d"in e){const r=e.d;if("h"===t)this.onHandshake_(r);else if("n"===t){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let i=0;i<this.pendingDataMessages.length;++i)this.onDataMessage_(this.pendingDataMessages[i]);this.pendingDataMessages=[],this.tryCleanupConnection()}else"s"===t?this.onConnectionShutdown_(r):"r"===t?this.onReset_(r):"e"===t?TR("Server Error: "+r):"o"===t?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):TR("Unknown control packet command: "+t)}}onHandshake_(e){const t=e.ts,r=e.v,i=e.h;this.sessionId=e.s,this.repoInfo_.host=i,0===this.state_&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,t),"5"!==r&&ws("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){const e=this.transportManager_.upgradeTransport();e&&this.startUpgrade_(e)}startUpgrade_(e){this.secondaryConn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const t=this.connReceiver_(this.secondaryConn_),r=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(t,r),XE(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(6e4))}onReset_(e){this.log_("Reset packet received.  New host: "+e),this.repoInfo_.host=e,1===this.state_?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(e,t){this.log_("Realtime connection established."),this.conn_=e,this.state_=1,this.onReady_&&(this.onReady_(t,this.sessionId),this.onReady_=null),0===this.primaryResponsesRequired_?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):XE(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(5e3))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&1===this.state_&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:"p",d:{}}}))}onSecondaryConnectionLost_(){const e=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===e||this.rx_===e)&&this.close()}onConnectionLost_(e){this.conn_=null,e||0!==this.state_?1===this.state_&&this.log_("Realtime connection lost."):(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(Up.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)),this.close()}onConnectionShutdown_(e){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(e),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(e){if(1!==this.state_)throw"Connection is not connected";this.tx_.send(e)}close(){2!==this.state_&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}class aO{put(e,t,r,i){}merge(e,t,r,i){}refreshAuthToken(e){}refreshAppCheckToken(e){}onDisconnectPut(e,t,r){}onDisconnectMerge(e,t,r){}onDisconnectCancel(e,t){}reportStats(e){}}class uO{constructor(e){this.allowedEvents_=e,this.listeners_={},(0,Z.hu)(Array.isArray(e)&&e.length>0,"Requires a non-empty array")}trigger(e,...t){if(Array.isArray(this.listeners_[e])){const r=[...this.listeners_[e]];for(let i=0;i<r.length;i++)r[i].callback.apply(r[i].context,t)}}on(e,t,r){this.validateEventType_(e),this.listeners_[e]=this.listeners_[e]||[],this.listeners_[e].push({callback:t,context:r});const i=this.getInitialEvent(e);i&&t.apply(r,i)}off(e,t,r){this.validateEventType_(e);const i=this.listeners_[e]||[];for(let a=0;a<i.length;a++)if(i[a].callback===t&&(!r||r===i[a].context))return void i.splice(a,1)}validateEventType_(e){(0,Z.hu)(this.allowedEvents_.find(t=>t===e),"Unknown event: "+e)}}class VC extends uO{constructor(){super(["online"]),this.online_=!0,"undefined"!=typeof window&&void 0!==window.addEventListener&&!(0,Z.uI)()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}static getInstance(){return new VC}getInitialEvent(e){return(0,Z.hu)("online"===e,"Unknown event type: "+e),[this.online_]}currentlyOnline(){return this.online_}}class $n{constructor(e,t){if(void 0===t){this.pieces_=e.split("/");let r=0;for(let i=0;i<this.pieces_.length;i++)this.pieces_[i].length>0&&(this.pieces_[r]=this.pieces_[i],r++);this.pieces_.length=r,this.pieceNum_=0}else this.pieces_=e,this.pieceNum_=t}toString(){let e="";for(let t=this.pieceNum_;t<this.pieces_.length;t++)""!==this.pieces_[t]&&(e+="/"+this.pieces_[t]);return e||"/"}}function Un(){return new $n("")}function yn(n){return n.pieceNum_>=n.pieces_.length?null:n.pieces_[n.pieceNum_]}function Jd(n){return n.pieces_.length-n.pieceNum_}function or(n){let e=n.pieceNum_;return e<n.pieces_.length&&e++,new $n(n.pieces_,e)}function FR(n){return n.pieceNum_<n.pieces_.length?n.pieces_[n.pieces_.length-1]:null}function r0(n,e=0){return n.pieces_.slice(n.pieceNum_+e)}function dO(n){if(n.pieceNum_>=n.pieces_.length)return null;const e=[];for(let t=n.pieceNum_;t<n.pieces_.length-1;t++)e.push(n.pieces_[t]);return new $n(e,0)}function Ar(n,e){const t=[];for(let r=n.pieceNum_;r<n.pieces_.length;r++)t.push(n.pieces_[r]);if(e instanceof $n)for(let r=e.pieceNum_;r<e.pieces_.length;r++)t.push(e.pieces_[r]);else{const r=e.split("/");for(let i=0;i<r.length;i++)r[i].length>0&&t.push(r[i])}return new $n(t,0)}function vn(n){return n.pieceNum_>=n.pieces_.length}function Is(n,e){const t=yn(n),r=yn(e);if(null===t)return e;if(t===r)return Is(or(n),or(e));throw new Error("INTERNAL ERROR: innerPath ("+e+") is not within outerPath ("+n+")")}function LR(n,e){if(Jd(n)!==Jd(e))return!1;for(let t=n.pieceNum_,r=e.pieceNum_;t<=n.pieces_.length;t++,r++)if(n.pieces_[t]!==e.pieces_[r])return!1;return!0}function zo(n,e){let t=n.pieceNum_,r=e.pieceNum_;if(Jd(n)>Jd(e))return!1;for(;t<n.pieces_.length;){if(n.pieces_[t]!==e.pieces_[r])return!1;++t,++r}return!0}class M2{constructor(e,t){this.errorPrefix_=t,this.parts_=r0(e,0),this.byteLength_=Math.max(1,this.parts_.length);for(let r=0;r<this.parts_.length;r++)this.byteLength_+=(0,Z.ug)(this.parts_[r]);hO(this)}}function hO(n){if(n.byteLength_>768)throw new Error(n.errorPrefix_+"has a key path longer than 768 bytes ("+n.byteLength_+").");if(n.parts_.length>32)throw new Error(n.errorPrefix_+"path specified exceeds the maximum depth that can be written (32) or object contains a cycle "+jp(n))}function jp(n){return 0===n.parts_.length?"":"in property '"+n.parts_.join(".")+"'"}class UR extends uO{constructor(){let e,t;super(["visible"]),"undefined"!=typeof document&&void 0!==document.addEventListener&&(void 0!==document.hidden?(t="visibilitychange",e="hidden"):void 0!==document.mozHidden?(t="mozvisibilitychange",e="mozHidden"):void 0!==document.msHidden?(t="msvisibilitychange",e="msHidden"):void 0!==document.webkitHidden&&(t="webkitvisibilitychange",e="webkitHidden")),this.visible_=!0,t&&document.addEventListener(t,()=>{const r=!document[e];r!==this.visible_&&(this.visible_=r,this.trigger("visible",r))},!1)}static getInstance(){return new UR}getInitialEvent(e){return(0,Z.hu)("visible"===e,"Unknown event type: "+e),[this.visible_]}}const s0=1e3;let jC,$p=(()=>{class n extends aO{constructor(t,r,i,a,c,h,g,v){if(super(),this.repoInfo_=t,this.applicationId_=r,this.onDataUpdate_=i,this.onConnectStatus_=a,this.onServerInfoUpdate_=c,this.authTokenProvider_=h,this.appCheckTokenProvider_=g,this.authOverride_=v,this.id=n.nextPersistentConnectionId_++,this.log_=QE("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=s0,this.maxReconnectDelay_=3e5,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,v&&!(0,Z.Yr)())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");UR.getInstance().on("visible",this.onVisible_,this),-1===t.host.indexOf("fblocal")&&VC.getInstance().on("online",this.onOnline_,this)}sendRequest(t,r,i){const a=++this.requestNumber_,c={r:a,a:t,b:r};this.log_((0,Z.Pz)(c)),(0,Z.hu)(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(c),i&&(this.requestCBHash_[a]=i)}get(t){this.initConnection_();const r=new Z.BH,i={p:t._path.toString(),q:t._queryObject},a={action:"g",request:i,onComplete:h=>{const g=h.d;"ok"===h.s?(this.onDataUpdate_(i.p,g,!1,null),r.resolve(g)):r.reject(g)}};this.outstandingGets_.push(a),this.outstandingGetCount_++;const c=this.outstandingGets_.length-1;return this.connected_||setTimeout(()=>{const h=this.outstandingGets_[c];void 0===h||a!==h||(delete this.outstandingGets_[c],this.outstandingGetCount_--,0===this.outstandingGetCount_&&(this.outstandingGets_=[]),this.log_("get "+c+" timed out on connection"),r.reject(new Error("Client is offline.")))},3e3),this.connected_&&this.sendGet_(c),r.promise}listen(t,r,i,a){this.initConnection_();const c=t._queryIdentifier,h=t._path.toString();this.log_("Listen called for "+h+" "+c),this.listens.has(h)||this.listens.set(h,new Map),(0,Z.hu)(t._queryParams.isDefault()||!t._queryParams.loadsAllData(),"listen() called for non-default but complete query"),(0,Z.hu)(!this.listens.get(h).has(c),"listen() called twice for same path/queryId.");const g={onComplete:a,hashFn:r,query:t,tag:i};this.listens.get(h).set(c,g),this.connected_&&this.sendListen_(g)}sendGet_(t){const r=this.outstandingGets_[t];this.sendRequest("g",r.request,i=>{delete this.outstandingGets_[t],this.outstandingGetCount_--,0===this.outstandingGetCount_&&(this.outstandingGets_=[]),r.onComplete&&r.onComplete(i)})}sendListen_(t){const r=t.query,i=r._path.toString(),a=r._queryIdentifier;this.log_("Listen on "+i+" for "+a);const c={p:i};t.tag&&(c.q=r._queryObject,c.t=t.tag),c.h=t.hashFn(),this.sendRequest("q",c,g=>{const v=g.d,C=g.s;n.warnOnListenWarnings_(v,r),(this.listens.get(i)&&this.listens.get(i).get(a))===t&&(this.log_("listen response",g),"ok"!==C&&this.removeListen_(i,a),t.onComplete&&t.onComplete(C,v))})}static warnOnListenWarnings_(t,r){if(t&&"object"==typeof t&&(0,Z.r3)(t,"w")){const i=(0,Z.DV)(t,"w");if(Array.isArray(i)&&~i.indexOf("no_index")){const a='".indexOn": "'+r._queryParams.getIndex().toString()+'"',c=r._path.toString();ws(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${a} at ${c} to your security rules for better performance.`)}}}refreshAuthToken(t){this.authToken_=t,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(t)}reduceReconnectDelayIfAdminCredential_(t){(t&&40===t.length||(0,Z.GJ)(t))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=3e4)}refreshAppCheckToken(t){this.appCheckToken_=t,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){const t=this.authToken_,r=(0,Z.w9)(t)?"auth":"gauth",i={cred:t};null===this.authOverride_?i.noauth=!0:"object"==typeof this.authOverride_&&(i.authvar=this.authOverride_),this.sendRequest(r,i,a=>{const c=a.s,h=a.d||"error";this.authToken_===t&&("ok"===c?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(c,h))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},t=>{const r=t.s,i=t.d||"error";"ok"===r?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(r,i)})}unlisten(t,r){const i=t._path.toString(),a=t._queryIdentifier;this.log_("Unlisten called for "+i+" "+a),(0,Z.hu)(t._queryParams.isDefault()||!t._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(i,a)&&this.connected_&&this.sendUnlisten_(i,a,t._queryObject,r)}sendUnlisten_(t,r,i,a){this.log_("Unlisten on "+t+" for "+r);const c={p:t};a&&(c.q=i,c.t=a),this.sendRequest("n",c)}onDisconnectPut(t,r,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",t,r,i):this.onDisconnectRequestQueue_.push({pathString:t,action:"o",data:r,onComplete:i})}onDisconnectMerge(t,r,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",t,r,i):this.onDisconnectRequestQueue_.push({pathString:t,action:"om",data:r,onComplete:i})}onDisconnectCancel(t,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",t,null,r):this.onDisconnectRequestQueue_.push({pathString:t,action:"oc",data:null,onComplete:r})}sendOnDisconnect_(t,r,i,a){const c={p:r,d:i};this.log_("onDisconnect "+t,c),this.sendRequest(t,c,h=>{a&&setTimeout(()=>{a(h.s,h.d)},Math.floor(0))})}put(t,r,i,a){this.putInternal("p",t,r,i,a)}merge(t,r,i,a){this.putInternal("m",t,r,i,a)}putInternal(t,r,i,a,c){this.initConnection_();const h={p:r,d:i};void 0!==c&&(h.h=c),this.outstandingPuts_.push({action:t,request:h,onComplete:a}),this.outstandingPutCount_++,this.connected_?this.sendPut_(this.outstandingPuts_.length-1):this.log_("Buffering put: "+r)}sendPut_(t){const r=this.outstandingPuts_[t].action,i=this.outstandingPuts_[t].request,a=this.outstandingPuts_[t].onComplete;this.outstandingPuts_[t].queued=this.connected_,this.sendRequest(r,i,c=>{this.log_(r+" response",c),delete this.outstandingPuts_[t],this.outstandingPutCount_--,0===this.outstandingPutCount_&&(this.outstandingPuts_=[]),a&&a(c.s,c.d)})}reportStats(t){if(this.connected_){const r={c:t};this.log_("reportStats",r),this.sendRequest("s",r,i=>{"ok"!==i.s&&this.log_("reportStats","Error sending stats: "+i.d)})}}onDataMessage_(t){if("r"in t){this.log_("from server: "+(0,Z.Pz)(t));const r=t.r,i=this.requestCBHash_[r];i&&(delete this.requestCBHash_[r],i(t.b))}else{if("error"in t)throw"A server-side error has occurred: "+t.error;"a"in t&&this.onDataPush_(t.a,t.b)}}onDataPush_(t,r){this.log_("handleServerMessage",t,r),"d"===t?this.onDataUpdate_(r.p,r.d,!1,r.t):"m"===t?this.onDataUpdate_(r.p,r.d,!0,r.t):"c"===t?this.onListenRevoked_(r.p,r.q):"ac"===t?this.onAuthRevoked_(r.s,r.d):"apc"===t?this.onAppCheckRevoked_(r.s,r.d):"sd"===t?this.onSecurityDebugPacket_(r):TR("Unrecognized action received from server: "+(0,Z.Pz)(t)+"\nAre you using the latest client?")}onReady_(t,r){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=(new Date).getTime(),this.handleTimestamp_(t),this.lastSessionId=r,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(t){(0,Z.hu)(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(t))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(t){t&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=s0,this.realtime_||this.scheduleConnect_(0)),this.visible_=t}onOnline_(t){t?(this.log_("Browser went online."),this.reconnectDelay_=s0,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&((new Date).getTime()-this.lastConnectionEstablishedTime_>3e4&&(this.reconnectDelay_=s0),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=(new Date).getTime());const t=(new Date).getTime()-this.lastConnectionAttemptTime_;let r=Math.max(0,this.reconnectDelay_-t);r=Math.random()*r,this.log_("Trying to reconnect in "+r+"ms"),this.scheduleConnect_(r),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,1.3*this.reconnectDelay_)}this.onConnectStatus_(!1)}establishConnection_(){var t=this;return(0,Ce.Z)(function*(){if(t.shouldReconnect_()){t.log_("Making a connection attempt"),t.lastConnectionAttemptTime_=(new Date).getTime(),t.lastConnectionEstablishedTime_=null;const r=t.onDataMessage_.bind(t),i=t.onReady_.bind(t),a=t.onRealtimeDisconnect_.bind(t),c=t.id+":"+n.nextConnectionId_++,h=t.lastSessionId;let g=!1,v=null;const C=function(){v?v.close():(g=!0,a())};t.realtime_={close:C,sendRequest:function(k){(0,Z.hu)(v,"sendRequest call when we're not connected not allowed."),v.sendRequest(k)}};const x=t.forceTokenRefresh_;t.forceTokenRefresh_=!1;try{const[k,B]=yield Promise.all([t.authTokenProvider_.getToken(x),t.appCheckTokenProvider_.getToken(x)]);g?xi("getToken() completed but was canceled"):(xi("getToken() completed. Creating connection."),t.authToken_=k&&k.accessToken,t.appCheckToken_=B&&B.token,v=new oO(c,t.repoInfo_,t.applicationId_,t.appCheckToken_,t.authToken_,r,i,a,ge=>{ws(ge+" ("+t.repoInfo_.toString()+")"),t.interrupt("server_kill")},h))}catch(k){t.log_("Failed to get token: "+k),g||(t.repoInfo_.nodeAdmin&&ws(k),C())}}})()}interrupt(t){xi("Interrupting connection for reason: "+t),this.interruptReasons_[t]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(t){xi("Resuming connection for reason: "+t),delete this.interruptReasons_[t],(0,Z.xb)(this.interruptReasons_)&&(this.reconnectDelay_=s0,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(t){const r=t-(new Date).getTime();this.onServerInfoUpdate_({serverTimeOffset:r})}cancelSentTransactions_(){for(let t=0;t<this.outstandingPuts_.length;t++){const r=this.outstandingPuts_[t];r&&"h"in r.request&&r.queued&&(r.onComplete&&r.onComplete("disconnect"),delete this.outstandingPuts_[t],this.outstandingPutCount_--)}0===this.outstandingPutCount_&&(this.outstandingPuts_=[])}onListenRevoked_(t,r){let i;i=r?r.map(c=>DR(c)).join("$"):"default";const a=this.removeListen_(t,i);a&&a.onComplete&&a.onComplete("permission_denied")}removeListen_(t,r){const i=new $n(t).toString();let a;if(this.listens.has(i)){const c=this.listens.get(i);a=c.get(r),c.delete(r),0===c.size&&this.listens.delete(i)}else a=void 0;return a}onAuthRevoked_(t,r){xi("Auth token revoked: "+t+"/"+r),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),("invalid_token"===t||"permission_denied"===t)&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=3&&(this.reconnectDelay_=3e4,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(t,r){xi("App check token revoked: "+t+"/"+r),this.appCheckToken_=null,this.forceTokenRefresh_=!0,("invalid_token"===t||"permission_denied"===t)&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=3&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(t){this.securityDebugCallback_?this.securityDebugCallback_(t):"msg"in t&&console.log("FIREBASE: "+t.msg.replace("\n","\nFIREBASE: "))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(const t of this.listens.values())for(const r of t.values())this.sendListen_(r);for(let t=0;t<this.outstandingPuts_.length;t++)this.outstandingPuts_[t]&&this.sendPut_(t);for(;this.onDisconnectRequestQueue_.length;){const t=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(t.action,t.pathString,t.data,t.onComplete)}for(let t=0;t<this.outstandingGets_.length;t++)this.outstandingGets_[t]&&this.sendGet_(t)}sendConnectStats_(){const t={};let r="js";(0,Z.Yr)()&&(r=this.repoInfo_.nodeAdmin?"admin_node":"node"),t["sdk."+r+"."+bR.replace(/\./g,"-")]=1,(0,Z.uI)()?t["framework.cordova"]=1:(0,Z.b$)()&&(t["framework.reactnative"]=1),this.reportStats(t)}shouldReconnect_(){const t=VC.getInstance().currentlyOnline();return(0,Z.xb)(this.interruptReasons_)&&t}}return n.nextPersistentConnectionId_=0,n.nextConnectionId_=0,n})();class Cn{constructor(e,t){this.name=e,this.node=t}static Wrap(e,t){return new Cn(e,t)}}class BC{getCompare(){return this.compare.bind(this)}indexedValueChanged(e,t){const r=new Cn(tl,e),i=new Cn(tl,t);return 0!==this.compare(r,i)}minPost(){return Cn.MIN}}class gO extends BC{static get __EMPTY_NODE(){return jC}static set __EMPTY_NODE(e){jC=e}compare(e,t){return Bp(e.name,t.name)}isDefinedOn(e){throw(0,Z.g5)("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(e,t){return!1}minPost(){return Cn.MIN}maxPost(){return new Cn(Cu,jC)}makePost(e,t){return(0,Z.hu)("string"==typeof e,"KeyIndex indexValue must always be a string."),new Cn(e,jC)}toString(){return".key"}}const Tu=new gO;class $C{constructor(e,t,r,i,a=null){this.isReverse_=i,this.resultGenerator_=a,this.nodeStack_=[];let c=1;for(;!e.isEmpty();)if(e=e,c=t?r(e.key,t):1,i&&(c*=-1),c<0)e=this.isReverse_?e.left:e.right;else{if(0===c){this.nodeStack_.push(e);break}this.nodeStack_.push(e),e=this.isReverse_?e.right:e.left}}getNext(){if(0===this.nodeStack_.length)return null;let t,e=this.nodeStack_.pop();if(t=this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value},this.isReverse_)for(e=e.left;!e.isEmpty();)this.nodeStack_.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack_.push(e),e=e.left;return t}hasNext(){return this.nodeStack_.length>0}peek(){if(0===this.nodeStack_.length)return null;const e=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value}}}let BR,ba=(()=>{class n{constructor(t,r,i,a,c){this.key=t,this.value=r,this.color=null!=i?i:n.RED,this.left=null!=a?a:$s.EMPTY_NODE,this.right=null!=c?c:$s.EMPTY_NODE}copy(t,r,i,a,c){return new n(null!=t?t:this.key,null!=r?r:this.value,null!=i?i:this.color,null!=a?a:this.left,null!=c?c:this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||!!t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,r,i){let a=this;const c=i(t,a.key);return a=c<0?a.copy(null,null,null,a.left.insert(t,r,i),null):0===c?a.copy(null,r,null,null,null):a.copy(null,null,null,null,a.right.insert(t,r,i)),a.fixUp_()}removeMin_(){if(this.left.isEmpty())return $s.EMPTY_NODE;let t=this;return!t.left.isRed_()&&!t.left.left.isRed_()&&(t=t.moveRedLeft_()),t=t.copy(null,null,null,t.left.removeMin_(),null),t.fixUp_()}remove(t,r){let i,a;if(i=this,r(t,i.key)<0)!i.left.isEmpty()&&!i.left.isRed_()&&!i.left.left.isRed_()&&(i=i.moveRedLeft_()),i=i.copy(null,null,null,i.left.remove(t,r),null);else{if(i.left.isRed_()&&(i=i.rotateRight_()),!i.right.isEmpty()&&!i.right.isRed_()&&!i.right.left.isRed_()&&(i=i.moveRedRight_()),0===r(t,i.key)){if(i.right.isEmpty())return $s.EMPTY_NODE;a=i.right.min_(),i=i.copy(a.key,a.value,null,null,i.right.removeMin_())}i=i.copy(null,null,null,null,i.right.remove(t,r))}return i.fixUp_()}isRed_(){return this.color}fixUp_(){let t=this;return t.right.isRed_()&&!t.left.isRed_()&&(t=t.rotateLeft_()),t.left.isRed_()&&t.left.left.isRed_()&&(t=t.rotateRight_()),t.left.isRed_()&&t.right.isRed_()&&(t=t.colorFlip_()),t}moveRedLeft_(){let t=this.colorFlip_();return t.right.left.isRed_()&&(t=t.copy(null,null,null,null,t.right.rotateRight_()),t=t.rotateLeft_(),t=t.colorFlip_()),t}moveRedRight_(){let t=this.colorFlip_();return t.left.left.isRed_()&&(t=t.rotateRight_(),t=t.colorFlip_()),t}rotateLeft_(){const t=this.copy(null,null,n.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight_(){const t=this.copy(null,null,n.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip_(){const t=this.left.copy(null,null,!this.left.color,null,null),r=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,r)}checkMaxDepth_(){const t=this.check_();return Math.pow(2,t)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");const t=this.left.check_();if(t!==this.right.check_())throw new Error("Black depths differ");return t+(this.isRed_()?0:1)}}return n.RED=!0,n.BLACK=!1,n})();class $s{constructor(e,t=$s.EMPTY_NODE){this.comparator_=e,this.root_=t}insert(e,t){return new $s(this.comparator_,this.root_.insert(e,t,this.comparator_).copy(null,null,ba.BLACK,null,null))}remove(e){return new $s(this.comparator_,this.root_.remove(e,this.comparator_).copy(null,null,ba.BLACK,null,null))}get(e){let t,r=this.root_;for(;!r.isEmpty();){if(t=this.comparator_(e,r.key),0===t)return r.value;t<0?r=r.left:t>0&&(r=r.right)}return null}getPredecessorKey(e){let t,r=this.root_,i=null;for(;!r.isEmpty();){if(t=this.comparator_(e,r.key),0===t){if(r.left.isEmpty())return i?i.key:null;for(r=r.left;!r.right.isEmpty();)r=r.right;return r.key}t<0?r=r.left:t>0&&(i=r,r=r.right)}throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(e){return this.root_.inorderTraversal(e)}reverseTraversal(e){return this.root_.reverseTraversal(e)}getIterator(e){return new $C(this.root_,null,this.comparator_,!1,e)}getIteratorFrom(e,t){return new $C(this.root_,e,this.comparator_,!1,t)}getReverseIteratorFrom(e,t){return new $C(this.root_,e,this.comparator_,!0,t)}getReverseIterator(e){return new $C(this.root_,null,this.comparator_,!0,e)}}function $2(n,e){return Bp(n.name,e.name)}function VR(n,e){return Bp(n,e)}$s.EMPTY_NODE=new class j2{copy(e,t,r,i,a){return this}insert(e,t,r){return new ba(e,t,null)}remove(e,t){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}};const mO=function(n){return"number"==typeof n?"number:"+Lk(n):"string:"+n},_O=function(n){if(n.isLeafNode()){const e=n.val();(0,Z.hu)("string"==typeof e||"number"==typeof e||"object"==typeof e&&(0,Z.r3)(e,".sv"),"Priority must be a string or number.")}else(0,Z.hu)(n===BR||n.isEmpty(),"priority of unexpected type.");(0,Z.hu)(n===BR||n.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};let yO,vO,EO,E_=(()=>{class n{constructor(t,r=n.__childrenNodeConstructor.EMPTY_NODE){this.value_=t,this.priorityNode_=r,this.lazyHash_=null,(0,Z.hu)(null!=this.value_,"LeafNode shouldn't be created with null/undefined value."),_O(this.priorityNode_)}static set __childrenNodeConstructor(t){yO=t}static get __childrenNodeConstructor(){return yO}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(t){return new n(this.value_,t)}getImmediateChild(t){return".priority"===t?this.priorityNode_:n.__childrenNodeConstructor.EMPTY_NODE}getChild(t){return vn(t)?this:".priority"===yn(t)?this.priorityNode_:n.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(t,r){return null}updateImmediateChild(t,r){return".priority"===t?this.updatePriority(r):r.isEmpty()&&".priority"!==t?this:n.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(t,r).updatePriority(this.priorityNode_)}updateChild(t,r){const i=yn(t);return null===i?r:r.isEmpty()&&".priority"!==i?this:((0,Z.hu)(".priority"!==i||1===Jd(t),".priority must be the last token in a path"),this.updateImmediateChild(i,n.__childrenNodeConstructor.EMPTY_NODE.updateChild(or(t),r)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(t,r){return!1}val(t){return t&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(null===this.lazyHash_){let t="";this.priorityNode_.isEmpty()||(t+="priority:"+mO(this.priorityNode_.val())+":");const r=typeof this.value_;t+=r+":",t+="number"===r?Lk(this.value_):this.value_,this.lazyHash_=Mk(t)}return this.lazyHash_}getValue(){return this.value_}compareTo(t){return t===n.__childrenNodeConstructor.EMPTY_NODE?1:t instanceof n.__childrenNodeConstructor?-1:((0,Z.hu)(t.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(t))}compareToLeafNode_(t){const r=typeof t.value_,i=typeof this.value_,a=n.VALUE_TYPE_ORDER.indexOf(r),c=n.VALUE_TYPE_ORDER.indexOf(i);return(0,Z.hu)(a>=0,"Unknown leaf type: "+r),(0,Z.hu)(c>=0,"Unknown leaf type: "+i),a===c?"object"===i?0:this.value_<t.value_?-1:this.value_===t.value_?0:1:c-a}withIndex(){return this}isIndexed(){return!0}equals(t){if(t===this)return!0;if(t.isLeafNode()){const r=t;return this.value_===r.value_&&this.priorityNode_.equals(r.priorityNode_)}return!1}}return n.VALUE_TYPE_ORDER=["object","boolean","number","string"],n})();const pr=new class G2 extends BC{compare(e,t){const r=e.node.getPriority(),i=t.node.getPriority(),a=r.compareTo(i);return 0===a?Bp(e.name,t.name):a}isDefinedOn(e){return!e.getPriority().isEmpty()}indexedValueChanged(e,t){return!e.getPriority().equals(t.getPriority())}minPost(){return Cn.MIN}maxPost(){return new Cn(Cu,new E_("[PRIORITY-POST]",EO))}makePost(e,t){const r=vO(e);return new Cn(t,new E_("[PRIORITY-POST]",r))}toString(){return".priority"}},q2=Math.log(2);class K2{constructor(e){this.count=parseInt(Math.log(e+1)/q2,10),this.current_=this.count-1;const i=(a=>parseInt(Array(this.count+1).join("1"),2))();this.bits_=e+1&i}nextBitIsOne(){const e=!(this.bits_&1<<this.current_);return this.current_--,e}}const HC=function(n,e,t,r){n.sort(e);const i=function(g,v){const C=v-g;let D,x;if(0===C)return null;if(1===C)return D=n[g],x=t?t(D):D,new ba(x,D.node,ba.BLACK,null,null);{const k=parseInt(C/2,10)+g,B=i(g,k),ge=i(k+1,v);return D=n[k],x=t?t(D):D,new ba(x,D.node,ba.BLACK,B,ge)}},h=function(g){let v=null,C=null,D=n.length;const x=function(B,ge){const xe=D-B,bt=D;D-=B;const Tt=i(xe+1,bt),Wt=n[xe],Rt=t?t(Wt):Wt;k(new ba(Rt,Wt.node,ge,null,Tt))},k=function(B){v?(v.left=B,v=B):(C=B,v=B)};for(let B=0;B<g.count;++B){const ge=g.nextBitIsOne(),xe=Math.pow(2,g.count-(B+1));ge?x(xe,ba.BLACK):(x(xe,ba.BLACK),x(xe,ba.RED))}return C}(new K2(n.length));return new $s(r||e,h)};let jR;const w_={};class nl{constructor(e,t){this.indexes_=e,this.indexSet_=t}static get Default(){return(0,Z.hu)(w_&&pr,"ChildrenNode.ts has not been loaded"),jR=jR||new nl({".priority":w_},{".priority":pr}),jR}get(e){const t=(0,Z.DV)(this.indexes_,e);if(!t)throw new Error("No index defined for "+e);return t instanceof $s?t:null}hasIndex(e){return(0,Z.r3)(this.indexSet_,e.toString())}addIndex(e,t){(0,Z.hu)(e!==Tu,"KeyIndex always exists and isn't meant to be added to the IndexMap.");const r=[];let i=!1;const a=t.getIterator(Cn.Wrap);let h,c=a.getNext();for(;c;)i=i||e.isDefinedOn(c.node),r.push(c),c=a.getNext();h=i?HC(r,e.getCompare()):w_;const g=e.toString(),v=Object.assign({},this.indexSet_);v[g]=e;const C=Object.assign({},this.indexes_);return C[g]=h,new nl(C,v)}addToIndexes(e,t){const r=(0,Z.UI)(this.indexes_,(i,a)=>{const c=(0,Z.DV)(this.indexSet_,a);if((0,Z.hu)(c,"Missing index implementation for "+a),i===w_){if(c.isDefinedOn(e.node)){const h=[],g=t.getIterator(Cn.Wrap);let v=g.getNext();for(;v;)v.name!==e.name&&h.push(v),v=g.getNext();return h.push(e),HC(h,c.getCompare())}return w_}{const h=t.get(e.name);let g=i;return h&&(g=g.remove(new Cn(e.name,h))),g.insert(e,e.node)}});return new nl(r,this.indexSet_)}removeFromIndexes(e,t){const r=(0,Z.UI)(this.indexes_,i=>{if(i===w_)return i;{const a=t.get(e.name);return a?i.remove(new Cn(e.name,a)):i}});return new nl(r,this.indexSet_)}}let o0,fn=(()=>{class n{constructor(t,r,i){this.children_=t,this.priorityNode_=r,this.indexMap_=i,this.lazyHash_=null,this.priorityNode_&&_O(this.priorityNode_),this.children_.isEmpty()&&(0,Z.hu)(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}static get EMPTY_NODE(){return o0||(o0=new n(new $s(VR),null,nl.Default))}isLeafNode(){return!1}getPriority(){return this.priorityNode_||o0}updatePriority(t){return this.children_.isEmpty()?this:new n(this.children_,t,this.indexMap_)}getImmediateChild(t){if(".priority"===t)return this.getPriority();{const r=this.children_.get(t);return null===r?o0:r}}getChild(t){const r=yn(t);return null===r?this:this.getImmediateChild(r).getChild(or(t))}hasChild(t){return null!==this.children_.get(t)}updateImmediateChild(t,r){if((0,Z.hu)(r,"We should always be passing snapshot nodes"),".priority"===t)return this.updatePriority(r);{const i=new Cn(t,r);let a,c;r.isEmpty()?(a=this.children_.remove(t),c=this.indexMap_.removeFromIndexes(i,this.children_)):(a=this.children_.insert(t,r),c=this.indexMap_.addToIndexes(i,this.children_));const h=a.isEmpty()?o0:this.priorityNode_;return new n(a,h,c)}}updateChild(t,r){const i=yn(t);if(null===i)return r;{(0,Z.hu)(".priority"!==yn(t)||1===Jd(t),".priority must be the last token in a path");const a=this.getImmediateChild(i).updateChild(or(t),r);return this.updateImmediateChild(i,a)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(t){if(this.isEmpty())return null;const r={};let i=0,a=0,c=!0;if(this.forEachChild(pr,(h,g)=>{r[h]=g.val(t),i++,c&&n.INTEGER_REGEXP_.test(h)?a=Math.max(a,Number(h)):c=!1}),!t&&c&&a<2*i){const h=[];for(const g in r)h[g]=r[g];return h}return t&&!this.getPriority().isEmpty()&&(r[".priority"]=this.getPriority().val()),r}hash(){if(null===this.lazyHash_){let t="";this.getPriority().isEmpty()||(t+="priority:"+mO(this.getPriority().val())+":"),this.forEachChild(pr,(r,i)=>{const a=i.hash();""!==a&&(t+=":"+r+":"+a)}),this.lazyHash_=""===t?"":Mk(t)}return this.lazyHash_}getPredecessorChildName(t,r,i){const a=this.resolveIndex_(i);if(a){const c=a.getPredecessorKey(new Cn(t,r));return c?c.name:null}return this.children_.getPredecessorKey(t)}getFirstChildName(t){const r=this.resolveIndex_(t);if(r){const i=r.minKey();return i&&i.name}return this.children_.minKey()}getFirstChild(t){const r=this.getFirstChildName(t);return r?new Cn(r,this.children_.get(r)):null}getLastChildName(t){const r=this.resolveIndex_(t);if(r){const i=r.maxKey();return i&&i.name}return this.children_.maxKey()}getLastChild(t){const r=this.getLastChildName(t);return r?new Cn(r,this.children_.get(r)):null}forEachChild(t,r){const i=this.resolveIndex_(t);return i?i.inorderTraversal(a=>r(a.name,a.node)):this.children_.inorderTraversal(r)}getIterator(t){return this.getIteratorFrom(t.minPost(),t)}getIteratorFrom(t,r){const i=this.resolveIndex_(r);if(i)return i.getIteratorFrom(t,a=>a);{const a=this.children_.getIteratorFrom(t.name,Cn.Wrap);let c=a.peek();for(;null!=c&&r.compare(c,t)<0;)a.getNext(),c=a.peek();return a}}getReverseIterator(t){return this.getReverseIteratorFrom(t.maxPost(),t)}getReverseIteratorFrom(t,r){const i=this.resolveIndex_(r);if(i)return i.getReverseIteratorFrom(t,a=>a);{const a=this.children_.getReverseIteratorFrom(t.name,Cn.Wrap);let c=a.peek();for(;null!=c&&r.compare(c,t)>0;)a.getNext(),c=a.peek();return a}}compareTo(t){return this.isEmpty()?t.isEmpty()?0:-1:t.isLeafNode()||t.isEmpty()?1:t===a0?-1:0}withIndex(t){if(t===Tu||this.indexMap_.hasIndex(t))return this;{const r=this.indexMap_.addIndex(t,this.children_);return new n(this.children_,this.priorityNode_,r)}}isIndexed(t){return t===Tu||this.indexMap_.hasIndex(t)}equals(t){if(t===this)return!0;if(t.isLeafNode())return!1;{const r=t;if(this.getPriority().equals(r.getPriority())){if(this.children_.count()===r.children_.count()){const i=this.getIterator(pr),a=r.getIterator(pr);let c=i.getNext(),h=a.getNext();for(;c&&h;){if(c.name!==h.name||!c.node.equals(h.node))return!1;c=i.getNext(),h=a.getNext()}return null===c&&null===h}return!1}return!1}}resolveIndex_(t){return t===Tu?null:this.indexMap_.get(t.toString())}}return n.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/,n})();const a0=new class Z2 extends fn{constructor(){super(new $s(VR),fn.EMPTY_NODE,nl.Default)}compareTo(e){return e===this?0:1}equals(e){return e===this}getPriority(){return this}getImmediateChild(e){return fn.EMPTY_NODE}isEmpty(){return!1}};function Lr(n,e=null){if(null===n)return fn.EMPTY_NODE;if("object"==typeof n&&".priority"in n&&(e=n[".priority"]),(0,Z.hu)(null===e||"string"==typeof e||"number"==typeof e||"object"==typeof e&&".sv"in e,"Invalid priority type found: "+typeof e),"object"==typeof n&&".value"in n&&null!==n[".value"]&&(n=n[".value"]),"object"!=typeof n||".sv"in n)return new E_(n,Lr(e));if(n instanceof Array){let t=fn.EMPTY_NODE;return Pi(n,(r,i)=>{if((0,Z.r3)(n,r)&&"."!==r.substring(0,1)){const a=Lr(i);(a.isLeafNode()||!a.isEmpty())&&(t=t.updateImmediateChild(r,a))}}),t.updatePriority(Lr(e))}{const t=[];let r=!1;if(Pi(n,(c,h)=>{if("."!==c.substring(0,1)){const g=Lr(h);g.isEmpty()||(r=r||!g.getPriority().isEmpty(),t.push(new Cn(c,g)))}}),0===t.length)return fn.EMPTY_NODE;const a=HC(t,$2,c=>c.name,VR);if(r){const c=HC(t,pr.getCompare());return new fn(a,Lr(e),new nl({".priority":c},{".priority":pr}))}return new fn(a,Lr(e),nl.Default)}}Object.defineProperties(Cn,{MIN:{value:new Cn(tl,fn.EMPTY_NODE)},MAX:{value:new Cn(Cu,a0)}}),gO.__EMPTY_NODE=fn.EMPTY_NODE,E_.__childrenNodeConstructor=fn,function H2(n){BR=n}(a0),function z2(n){EO=n}(a0),function W2(n){vO=n}(Lr);class $R extends BC{constructor(e){super(),this.indexPath_=e,(0,Z.hu)(!vn(e)&&".priority"!==yn(e),"Can't create PathIndex with empty path or .priority key")}extractChild(e){return e.getChild(this.indexPath_)}isDefinedOn(e){return!e.getChild(this.indexPath_).isEmpty()}compare(e,t){const r=this.extractChild(e.node),i=this.extractChild(t.node),a=r.compareTo(i);return 0===a?Bp(e.name,t.name):a}makePost(e,t){const r=Lr(e),i=fn.EMPTY_NODE.updateChild(this.indexPath_,r);return new Cn(t,i)}maxPost(){const e=fn.EMPTY_NODE.updateChild(this.indexPath_,a0);return new Cn(Cu,e)}toString(){return r0(this.indexPath_,0).join("/")}}const HR=new class Q2 extends BC{compare(e,t){const r=e.node.compareTo(t.node);return 0===r?Bp(e.name,t.name):r}isDefinedOn(e){return!0}indexedValueChanged(e,t){return!e.equals(t)}minPost(){return Cn.MIN}maxPost(){return Cn.MAX}makePost(e,t){const r=Lr(e);return new Cn(t,r)}toString(){return".value"}};function c0(n,e,t){return{type:"child_changed",snapshotNode:e,childName:n,oldSnap:t}}class GR{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=pr}hasStart(){return this.startSet_}hasStartAfter(){return this.startAfterSet_}hasEndBefore(){return this.endBeforeSet_}isViewFromLeft(){return""===this.viewFrom_?this.startSet_:"l"===this.viewFrom_}getIndexStartValue(){return(0,Z.hu)(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return(0,Z.hu)(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:tl}hasEnd(){return this.endSet_}getIndexEndValue(){return(0,Z.hu)(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return(0,Z.hu)(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:Cu}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&""!==this.viewFrom_}getLimit(){return(0,Z.hu)(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===pr}copy(){const e=new GR;return e.limitSet_=this.limitSet_,e.limit_=this.limit_,e.startSet_=this.startSet_,e.indexStartValue_=this.indexStartValue_,e.startNameSet_=this.startNameSet_,e.indexStartName_=this.indexStartName_,e.endSet_=this.endSet_,e.indexEndValue_=this.indexEndValue_,e.endNameSet_=this.endNameSet_,e.indexEndName_=this.indexEndName_,e.index_=this.index_,e.viewFrom_=this.viewFrom_,e}}function DO(n){const e={};if(n.isDefault())return e;let t;return n.index_===pr?t="$priority":n.index_===HR?t="$value":n.index_===Tu?t="$key":((0,Z.hu)(n.index_ instanceof $R,"Unrecognized index type!"),t=n.index_.toString()),e.orderBy=(0,Z.Pz)(t),n.startSet_&&(e.startAt=(0,Z.Pz)(n.indexStartValue_),n.startNameSet_&&(e.startAt+=","+(0,Z.Pz)(n.indexStartName_))),n.endSet_&&(e.endAt=(0,Z.Pz)(n.indexEndValue_),n.endNameSet_&&(e.endAt+=","+(0,Z.Pz)(n.indexEndName_))),n.limitSet_&&(n.isViewFromLeft()?e.limitToFirst=n.limit_:e.limitToLast=n.limit_),e}function SO(n){const e={};if(n.startSet_&&(e.sp=n.indexStartValue_,n.startNameSet_&&(e.sn=n.indexStartName_)),n.endSet_&&(e.ep=n.indexEndValue_,n.endNameSet_&&(e.en=n.indexEndName_)),n.limitSet_){e.l=n.limit_;let t=n.viewFrom_;""===t&&(t=n.isViewFromLeft()?"l":"r"),e.vf=t}return n.index_!==pr&&(e.i=n.index_.toString()),e}class zC extends aO{constructor(e,t,r,i){super(),this.repoInfo_=e,this.onDataUpdate_=t,this.authTokenProvider_=r,this.appCheckTokenProvider_=i,this.log_=QE("p:rest:"),this.listens_={}}reportStats(e){throw new Error("Method not implemented.")}static getListenId_(e,t){return void 0!==t?"tag$"+t:((0,Z.hu)(e._queryParams.isDefault(),"should have a tag if it's not a default query."),e._path.toString())}listen(e,t,r,i){const a=e._path.toString();this.log_("Listen called for "+a+" "+e._queryIdentifier);const c=zC.getListenId_(e,r),h={};this.listens_[c]=h;const g=DO(e._queryParams);this.restRequest_(a+".json",g,(v,C)=>{let D=C;if(404===v&&(D=null,v=null),null===v&&this.onDataUpdate_(a,D,!1,r),(0,Z.DV)(this.listens_,c)===h){let x;x=v?401===v?"permission_denied":"rest_error:"+v:"ok",i(x,null)}})}unlisten(e,t){const r=zC.getListenId_(e,t);delete this.listens_[r]}get(e){const t=DO(e._queryParams),r=e._path.toString(),i=new Z.BH;return this.restRequest_(r+".json",t,(a,c)=>{let h=c;404===a&&(h=null,a=null),null===a?(this.onDataUpdate_(r,h,!1,null),i.resolve(h)):i.reject(new Error(h))}),i.promise}refreshAuthToken(e){}restRequest_(e,t={},r){return t.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([i,a])=>{i&&i.accessToken&&(t.auth=i.accessToken),a&&a.token&&(t.ac=a.token);const c=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+e+"?ns="+this.repoInfo_.namespace+(0,Z.xO)(t);this.log_("Sending REST request for "+c);const h=new XMLHttpRequest;h.onreadystatechange=()=>{if(r&&4===h.readyState){this.log_("REST Response for "+c+" received. status:",h.status,"response:",h.responseText);let g=null;if(h.status>=200&&h.status<300){try{g=(0,Z.cI)(h.responseText)}catch(v){ws("Failed to parse JSON response for "+c+": "+h.responseText)}r(null,g)}else 401!==h.status&&404!==h.status&&ws("Got unsuccessful REST response for "+c+" Status: "+h.status),r(h.status);r=null}},h.open("GET",c,!0),h.send()})}}class oj{constructor(){this.rootNode_=fn.EMPTY_NODE}getNode(e){return this.rootNode_.getChild(e)}updateSnapshot(e,t){this.rootNode_=this.rootNode_.updateChild(e,t)}}function GC(){return{value:null,children:new Map}}function C_(n,e,t){if(vn(e))n.value=t,n.children.clear();else if(null!==n.value)n.value=n.value.updateChild(e,t);else{const r=yn(e);n.children.has(r)||n.children.set(r,GC()),C_(n.children.get(r),e=or(e),t)}}function YR(n,e,t){null!==n.value?t(e,n.value):function aj(n,e){n.children.forEach((t,r)=>{e(r,t)})}(n,(r,i)=>{YR(i,new $n(e.toString()+"/"+r),t)})}class uj{constructor(e){this.collection_=e,this.last_=null}get(){const e=this.collection_.get(),t=Object.assign({},e);return this.last_&&Pi(this.last_,(r,i)=>{t[r]=t[r]-i}),this.last_=e,t}}class dj{constructor(e,t){this.server_=t,this.statsToReport_={},this.statsListener_=new uj(e);const r=1e4+2e4*Math.random();XE(this.reportStats_.bind(this),Math.floor(r))}reportStats_(){const e=this.statsListener_.get(),t={};let r=!1;Pi(e,(i,a)=>{a>0&&(0,Z.r3)(this.statsToReport_,i)&&(t[i]=a,r=!0)}),r&&this.server_.reportStats(t),XE(this.reportStats_.bind(this),Math.floor(2*Math.random()*3e5))}}var Go=(()=>(function(n){n[n.OVERWRITE=0]="OVERWRITE",n[n.MERGE=1]="MERGE",n[n.ACK_USER_WRITE=2]="ACK_USER_WRITE",n[n.LISTEN_COMPLETE=3]="LISTEN_COMPLETE"}(Go||(Go={})),Go))();function XR(n){return{fromUser:!1,fromServer:!0,queryId:n,tagged:!0}}class qC{constructor(e,t,r){this.path=e,this.affectedTree=t,this.revert=r,this.type=Go.ACK_USER_WRITE,this.source={fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}operationForChild(e){if(vn(this.path)){if(null!=this.affectedTree.value)return(0,Z.hu)(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{const t=this.affectedTree.subtree(new $n(e));return new qC(Un(),t,this.revert)}}return(0,Z.hu)(yn(this.path)===e,"operationForChild called for unrelated child."),new qC(or(this.path),this.affectedTree,this.revert)}}class Hp{constructor(e,t,r){this.source=e,this.path=t,this.snap=r,this.type=Go.OVERWRITE}operationForChild(e){return vn(this.path)?new Hp(this.source,Un(),this.snap.getImmediateChild(e)):new Hp(this.source,or(this.path),this.snap)}}class T_{constructor(e,t,r){this.source=e,this.path=t,this.children=r,this.type=Go.MERGE}operationForChild(e){if(vn(this.path)){const t=this.children.subtree(new $n(e));return t.isEmpty()?null:t.value?new Hp(this.source,Un(),t.value):new T_(this.source,Un(),t)}return(0,Z.hu)(yn(this.path)===e,"Can't get a merge for a child not on the path of the operation"),new T_(this.source,or(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}class Xd{constructor(e,t,r){this.node_=e,this.fullyInitialized_=t,this.filtered_=r}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(e){if(vn(e))return this.isFullyInitialized()&&!this.filtered_;const t=yn(e);return this.isCompleteForChild(t)}isCompleteForChild(e){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(e)}getNode(){return this.node_}}function h0(n,e,t,r,i,a){const c=r.filter(h=>h.type===t);c.sort((h,g)=>function gj(n,e,t){if(null==e.childName||null==t.childName)throw(0,Z.g5)("Should only compare child_ events.");const r=new Cn(e.childName,e.snapshotNode),i=new Cn(t.childName,t.snapshotNode);return n.index_.compare(r,i)}(n,h,g)),c.forEach(h=>{const g=function pj(n,e,t){return"value"===e.type||"child_removed"===e.type||(e.prevName=t.getPredecessorChildName(e.childName,e.snapshotNode,n.index_)),e}(n,h,a);i.forEach(v=>{v.respondsTo(h.type)&&e.push(v.createEvent(g,n.query_))})})}function KC(n,e){return{eventCache:n,serverCache:e}}function f0(n,e,t,r){return KC(new Xd(e,t,r),n.serverCache)}function RO(n,e,t,r){return KC(n.eventCache,new Xd(e,t,r))}function ZC(n){return n.eventCache.isFullyInitialized()?n.eventCache.getNode():null}function Wp(n){return n.serverCache.isFullyInitialized()?n.serverCache.getNode():null}let ex;class gr{constructor(e,t=(()=>(ex||(ex=new $s(JB)),ex))()){this.value=e,this.children=t}static fromObject(e){let t=new gr(null);return Pi(e,(r,i)=>{t=t.set(new $n(r),i)}),t}isEmpty(){return null===this.value&&this.children.isEmpty()}findRootMostMatchingPathAndValue(e,t){if(null!=this.value&&t(this.value))return{path:Un(),value:this.value};if(vn(e))return null;{const r=yn(e),i=this.children.get(r);if(null!==i){const a=i.findRootMostMatchingPathAndValue(or(e),t);return null!=a?{path:Ar(new $n(r),a.path),value:a.value}:null}return null}}findRootMostValueAndPath(e){return this.findRootMostMatchingPathAndValue(e,()=>!0)}subtree(e){if(vn(e))return this;{const t=yn(e),r=this.children.get(t);return null!==r?r.subtree(or(e)):new gr(null)}}set(e,t){if(vn(e))return new gr(t,this.children);{const r=yn(e),a=(this.children.get(r)||new gr(null)).set(or(e),t),c=this.children.insert(r,a);return new gr(this.value,c)}}remove(e){if(vn(e))return this.children.isEmpty()?new gr(null):new gr(null,this.children);{const t=yn(e),r=this.children.get(t);if(r){const i=r.remove(or(e));let a;return a=i.isEmpty()?this.children.remove(t):this.children.insert(t,i),null===this.value&&a.isEmpty()?new gr(null):new gr(this.value,a)}return this}}get(e){if(vn(e))return this.value;{const t=yn(e),r=this.children.get(t);return r?r.get(or(e)):null}}setTree(e,t){if(vn(e))return t;{const r=yn(e),a=(this.children.get(r)||new gr(null)).setTree(or(e),t);let c;return c=a.isEmpty()?this.children.remove(r):this.children.insert(r,a),new gr(this.value,c)}}fold(e){return this.fold_(Un(),e)}fold_(e,t){const r={};return this.children.inorderTraversal((i,a)=>{r[i]=a.fold_(Ar(e,i),t)}),t(e,this.value,r)}findOnPath(e,t){return this.findOnPath_(e,Un(),t)}findOnPath_(e,t,r){const i=!!this.value&&r(t,this.value);if(i)return i;if(vn(e))return null;{const a=yn(e),c=this.children.get(a);return c?c.findOnPath_(or(e),Ar(t,a),r):null}}foreachOnPath(e,t){return this.foreachOnPath_(e,Un(),t)}foreachOnPath_(e,t,r){if(vn(e))return this;{this.value&&r(t,this.value);const i=yn(e),a=this.children.get(i);return a?a.foreachOnPath_(or(e),Ar(t,i),r):new gr(null)}}foreach(e){this.foreach_(Un(),e)}foreach_(e,t){this.children.inorderTraversal((r,i)=>{i.foreach_(Ar(e,r),t)}),this.value&&t(e,this.value)}foreachChild(e){this.children.inorderTraversal((t,r)=>{r.value&&e(t,r.value)})}}class Ca{constructor(e){this.writeTree_=e}static empty(){return new Ca(new gr(null))}}function p0(n,e,t){if(vn(e))return new Ca(new gr(t));{const r=n.writeTree_.findRootMostValueAndPath(e);if(null!=r){const i=r.path;let a=r.value;const c=Is(i,e);return a=a.updateChild(c,t),new Ca(n.writeTree_.set(i,a))}{const i=new gr(t),a=n.writeTree_.setTree(e,i);return new Ca(a)}}}function tx(n,e,t){let r=n;return Pi(t,(i,a)=>{r=p0(r,Ar(e,i),a)}),r}function xO(n,e){if(vn(e))return Ca.empty();{const t=n.writeTree_.setTree(e,new gr(null));return new Ca(t)}}function nx(n,e){return null!=zp(n,e)}function zp(n,e){const t=n.writeTree_.findRootMostValueAndPath(e);return null!=t?n.writeTree_.get(t.path).getChild(Is(t.path,e)):null}function PO(n){const e=[],t=n.writeTree_.value;return null!=t?t.isLeafNode()||t.forEachChild(pr,(r,i)=>{e.push(new Cn(r,i))}):n.writeTree_.children.inorderTraversal((r,i)=>{null!=i.value&&e.push(new Cn(r,i.value))}),e}function eh(n,e){if(vn(e))return n;{const t=zp(n,e);return new Ca(null!=t?new gr(t):n.writeTree_.subtree(e))}}function rx(n){return n.writeTree_.isEmpty()}function D_(n,e){return NO(Un(),n.writeTree_,e)}function NO(n,e,t){if(null!=e.value)return t.updateChild(n,e.value);{let r=null;return e.children.inorderTraversal((i,a)=>{".priority"===i?((0,Z.hu)(null!==a.value,"Priority writes must always be leaf nodes"),r=a.value):t=NO(Ar(n,i),a,t)}),!t.getChild(n).isEmpty()&&null!==r&&(t=t.updateChild(Ar(n,".priority"),r)),t}}function YC(n,e){return LO(e,n)}function wj(n,e){if(n.snap)return zo(n.path,e);for(const t in n.children)if(n.children.hasOwnProperty(t)&&zo(Ar(n.path,t),e))return!0;return!1}function bj(n){return n.visible}function MO(n,e,t){let r=Ca.empty();for(let i=0;i<n.length;++i){const a=n[i];if(e(a)){const c=a.path;let h;if(a.snap)zo(t,c)?(h=Is(t,c),r=p0(r,h,a.snap)):zo(c,t)&&(h=Is(c,t),r=p0(r,Un(),a.snap.getChild(h)));else{if(!a.children)throw(0,Z.g5)("WriteRecord should have .snap or .children");if(zo(t,c))h=Is(t,c),r=tx(r,h,a.children);else if(zo(c,t))if(h=Is(c,t),vn(h))r=tx(r,Un(),a.children);else{const g=(0,Z.DV)(a.children,yn(h));if(g){const v=g.getChild(or(h));r=p0(r,Un(),v)}}}}}return r}function kO(n,e,t,r,i){if(r||i){const a=eh(n.visibleWrites,e);return!i&&rx(a)?t:i||null!=t||nx(a,Un())?D_(MO(n.allWrites,function(v){return(v.visible||i)&&(!r||!~r.indexOf(v.writeId))&&(zo(v.path,e)||zo(e,v.path))},e),t||fn.EMPTY_NODE):null}{const a=zp(n.visibleWrites,e);if(null!=a)return a;{const c=eh(n.visibleWrites,e);return rx(c)?t:null!=t||nx(c,Un())?D_(c,t||fn.EMPTY_NODE):null}}}function QC(n,e,t,r){return kO(n.writeTree,n.treePath,e,t,r)}function ix(n,e){return function Cj(n,e,t){let r=fn.EMPTY_NODE;const i=zp(n.visibleWrites,e);if(i)return i.isLeafNode()||i.forEachChild(pr,(a,c)=>{r=r.updateImmediateChild(a,c)}),r;if(t){const a=eh(n.visibleWrites,e);return t.forEachChild(pr,(c,h)=>{const g=D_(eh(a,new $n(c)),h);r=r.updateImmediateChild(c,g)}),PO(a).forEach(c=>{r=r.updateImmediateChild(c.name,c.node)}),r}return PO(eh(n.visibleWrites,e)).forEach(c=>{r=r.updateImmediateChild(c.name,c.node)}),r}(n.writeTree,n.treePath,e)}function OO(n,e,t,r){return function Tj(n,e,t,r,i){(0,Z.hu)(r||i,"Either existingEventSnap or existingServerSnap must exist");const a=Ar(e,t);if(nx(n.visibleWrites,a))return null;{const c=eh(n.visibleWrites,a);return rx(c)?i.getChild(t):D_(c,i.getChild(t))}}(n.writeTree,n.treePath,e,t,r)}function JC(n,e){return function Sj(n,e){return zp(n.visibleWrites,e)}(n.writeTree,Ar(n.treePath,e))}function sx(n,e,t){return function Dj(n,e,t,r){const i=Ar(e,t),a=zp(n.visibleWrites,i);return null!=a?a:r.isCompleteForChild(t)?D_(eh(n.visibleWrites,i),r.getNode().getImmediateChild(t)):null}(n.writeTree,n.treePath,e,t)}function FO(n,e){return LO(Ar(n.treePath,e),n.writeTree)}function LO(n,e){return{treePath:n,writeTree:e}}class Pj{constructor(){this.changeMap=new Map}trackChildChange(e){const t=e.type,r=e.childName;(0,Z.hu)("child_added"===t||"child_changed"===t||"child_removed"===t,"Only child changes supported for tracking"),(0,Z.hu)(".priority"!==r,"Only non-priority child changes can be tracked.");const i=this.changeMap.get(r);if(i){const a=i.type;if("child_added"===t&&"child_removed"===a)this.changeMap.set(r,c0(r,e.snapshotNode,i.snapshotNode));else if("child_removed"===t&&"child_added"===a)this.changeMap.delete(r);else if("child_removed"===t&&"child_changed"===a)this.changeMap.set(r,function u0(n,e){return{type:"child_removed",snapshotNode:e,childName:n}}(r,i.oldSnap));else if("child_changed"===t&&"child_added"===a)this.changeMap.set(r,function b_(n,e){return{type:"child_added",snapshotNode:e,childName:n}}(r,e.snapshotNode));else{if("child_changed"!==t||"child_changed"!==a)throw(0,Z.g5)("Illegal combination of changes: "+e+" occurred after "+i);this.changeMap.set(r,c0(r,e.snapshotNode,i.oldSnap))}}else this.changeMap.set(r,e)}getChanges(){return Array.from(this.changeMap.values())}}const UO=new class Nj{getCompleteChild(e){return null}getChildAfterChild(e,t,r){return null}};class ox{constructor(e,t,r=null){this.writes_=e,this.viewCache_=t,this.optCompleteServerCache_=r}getCompleteChild(e){const t=this.viewCache_.eventCache;if(t.isCompleteForChild(e))return t.getNode().getImmediateChild(e);{const r=null!=this.optCompleteServerCache_?new Xd(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return sx(this.writes_,e,r)}}getChildAfterChild(e,t,r){const i=null!=this.optCompleteServerCache_?this.optCompleteServerCache_:Wp(this.viewCache_),a=function xj(n,e,t,r,i,a){return function Aj(n,e,t,r,i,a,c){let h;const g=eh(n.visibleWrites,e),v=zp(g,Un());if(null!=v)h=v;else{if(null==t)return[];h=D_(g,t)}if(h=h.withIndex(c),h.isEmpty()||h.isLeafNode())return[];{const C=[],D=c.getCompare(),x=a?h.getReverseIteratorFrom(r,c):h.getIteratorFrom(r,c);let k=x.getNext();for(;k&&C.length<i;)0!==D(k,r)&&C.push(k),k=x.getNext();return C}}(n.writeTree,n.treePath,e,t,r,i,a)}(this.writes_,i,t,1,r,e);return 0===a.length?null:a[0]}}function VO(n,e,t,r,i,a){const c=e.eventCache;if(null!=JC(r,t))return e;{let h,g;if(vn(t))if((0,Z.hu)(e.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),e.serverCache.isFiltered()){const v=Wp(e),D=ix(r,v instanceof fn?v:fn.EMPTY_NODE);h=n.filter.updateFullNode(e.eventCache.getNode(),D,a)}else{const v=QC(r,Wp(e));h=n.filter.updateFullNode(e.eventCache.getNode(),v,a)}else{const v=yn(t);if(".priority"===v){(0,Z.hu)(1===Jd(t),"Can't have a priority with additional path components");const C=c.getNode();g=e.serverCache.getNode();const D=OO(r,t,C,g);h=null!=D?n.filter.updatePriority(C,D):c.getNode()}else{const C=or(t);let D;if(c.isCompleteForChild(v)){g=e.serverCache.getNode();const x=OO(r,t,c.getNode(),g);D=null!=x?c.getNode().getImmediateChild(v).updateChild(C,x):c.getNode().getImmediateChild(v)}else D=sx(r,v,e.serverCache);h=null!=D?n.filter.updateChild(c.getNode(),v,D,C,i,a):c.getNode()}}return f0(e,h,c.isFullyInitialized()||vn(t),n.filter.filtersNodes())}}function XC(n,e,t,r,i,a,c,h){const g=e.serverCache;let v;const C=c?n.filter:n.filter.getIndexedFilter();if(vn(t))v=C.updateFullNode(g.getNode(),r,null);else if(C.filtersNodes()&&!g.isFiltered()){const k=g.getNode().updateChild(t,r);v=C.updateFullNode(g.getNode(),k,null)}else{const k=yn(t);if(!g.isCompleteForPath(t)&&Jd(t)>1)return e;const B=or(t),xe=g.getNode().getImmediateChild(k).updateChild(B,r);v=".priority"===k?C.updatePriority(g.getNode(),xe):C.updateChild(g.getNode(),k,xe,B,UO,null)}const D=RO(e,v,g.isFullyInitialized()||vn(t),C.filtersNodes());return VO(n,D,t,i,new ox(i,D,a),h)}function ax(n,e,t,r,i,a,c){const h=e.eventCache;let g,v;const C=new ox(i,e,a);if(vn(t))v=n.filter.updateFullNode(e.eventCache.getNode(),r,c),g=f0(e,v,!0,n.filter.filtersNodes());else{const D=yn(t);if(".priority"===D)v=n.filter.updatePriority(e.eventCache.getNode(),r),g=f0(e,v,h.isFullyInitialized(),h.isFiltered());else{const x=or(t),k=h.getNode().getImmediateChild(D);let B;if(vn(x))B=r;else{const ge=C.getCompleteChild(D);B=null!=ge?".priority"===FR(x)&&ge.getChild(dO(x)).isEmpty()?ge:ge.updateChild(x,r):fn.EMPTY_NODE}g=k.equals(B)?e:f0(e,n.filter.updateChild(h.getNode(),D,B,x,C,c),h.isFullyInitialized(),n.filter.filtersNodes())}}return g}function BO(n,e){return n.eventCache.isCompleteForChild(e)}function jO(n,e,t){return t.foreach((r,i)=>{e=e.updateChild(r,i)}),e}function ux(n,e,t,r,i,a,c,h){if(e.serverCache.getNode().isEmpty()&&!e.serverCache.isFullyInitialized())return e;let v,g=e;v=vn(t)?r:new gr(null).setTree(t,r);const C=e.serverCache.getNode();return v.children.inorderTraversal((D,x)=>{if(C.hasChild(D)){const B=jO(0,e.serverCache.getNode().getImmediateChild(D),x);g=XC(n,g,new $n(D),B,i,a,c,h)}}),v.children.inorderTraversal((D,x)=>{const k=!e.serverCache.isCompleteForChild(D)&&void 0===x.value;if(!C.hasChild(D)&&!k){const ge=jO(0,e.serverCache.getNode().getImmediateChild(D),x);g=XC(n,g,new $n(D),ge,i,a,c,h)}}),g}function Wj(n,e){const t=Wp(n.viewCache_);return t&&(n.query._queryParams.loadsAllData()||!vn(e)&&!t.getImmediateChild(yn(e)).isEmpty())?t.getChild(e):null}function WO(n,e,t,r){e.type===Go.MERGE&&null!==e.source.queryId&&((0,Z.hu)(Wp(n.viewCache_),"We should always have a full cache before handling merges"),(0,Z.hu)(ZC(n.viewCache_),"Missing event cache, even though we have a server cache"));const i=n.viewCache_,a=function Oj(n,e,t,r,i){const a=new Pj;let c,h;if(t.type===Go.OVERWRITE){const v=t;v.source.fromUser?c=ax(n,e,v.path,v.snap,r,i,a):((0,Z.hu)(v.source.fromServer,"Unknown source."),h=v.source.tagged||e.serverCache.isFiltered()&&!vn(v.path),c=XC(n,e,v.path,v.snap,r,i,h,a))}else if(t.type===Go.MERGE){const v=t;v.source.fromUser?c=function Lj(n,e,t,r,i,a,c){let h=e;return r.foreach((g,v)=>{const C=Ar(t,g);BO(e,yn(C))&&(h=ax(n,h,C,v,i,a,c))}),r.foreach((g,v)=>{const C=Ar(t,g);BO(e,yn(C))||(h=ax(n,h,C,v,i,a,c))}),h}(n,e,v.path,v.children,r,i,a):((0,Z.hu)(v.source.fromServer,"Unknown source."),h=v.source.tagged||e.serverCache.isFiltered(),c=ux(n,e,v.path,v.children,r,i,h,a))}else if(t.type===Go.ACK_USER_WRITE){const v=t;c=v.revert?function Bj(n,e,t,r,i,a){let c;if(null!=JC(r,t))return e;{const h=new ox(r,e,i),g=e.eventCache.getNode();let v;if(vn(t)||".priority"===yn(t)){let C;if(e.serverCache.isFullyInitialized())C=QC(r,Wp(e));else{const D=e.serverCache.getNode();(0,Z.hu)(D instanceof fn,"serverChildren would be complete if leaf node"),C=ix(r,D)}C=C,v=n.filter.updateFullNode(g,C,a)}else{const C=yn(t);let D=sx(r,C,e.serverCache);null==D&&e.serverCache.isCompleteForChild(C)&&(D=g.getImmediateChild(C)),v=null!=D?n.filter.updateChild(g,C,D,or(t),h,a):e.eventCache.getNode().hasChild(C)?n.filter.updateChild(g,C,fn.EMPTY_NODE,or(t),h,a):g,v.isEmpty()&&e.serverCache.isFullyInitialized()&&(c=QC(r,Wp(e)),c.isLeafNode()&&(v=n.filter.updateFullNode(v,c,a)))}return c=e.serverCache.isFullyInitialized()||null!=JC(r,Un()),f0(e,v,c,n.filter.filtersNodes())}}(n,e,v.path,r,i,a):function Uj(n,e,t,r,i,a,c){if(null!=JC(i,t))return e;const h=e.serverCache.isFiltered(),g=e.serverCache;if(null!=r.value){if(vn(t)&&g.isFullyInitialized()||g.isCompleteForPath(t))return XC(n,e,t,g.getNode().getChild(t),i,a,h,c);if(vn(t)){let v=new gr(null);return g.getNode().forEachChild(Tu,(C,D)=>{v=v.set(new $n(C),D)}),ux(n,e,t,v,i,a,h,c)}return e}{let v=new gr(null);return r.foreach((C,D)=>{const x=Ar(t,C);g.isCompleteForPath(x)&&(v=v.set(C,g.getNode().getChild(x)))}),ux(n,e,t,v,i,a,h,c)}}(n,e,v.path,v.affectedTree,r,i,a)}else{if(t.type!==Go.LISTEN_COMPLETE)throw(0,Z.g5)("Unknown operation type: "+t.type);c=function Vj(n,e,t,r,i){const a=e.serverCache;return VO(n,RO(e,a.getNode(),a.isFullyInitialized()||vn(t),a.isFiltered()),t,r,UO,i)}(n,e,t.path,r,a)}const g=a.getChanges();return function Fj(n,e,t){const r=e.eventCache;if(r.isFullyInitialized()){const i=r.getNode().isLeafNode()||r.getNode().isEmpty(),a=ZC(n);(t.length>0||!n.eventCache.isFullyInitialized()||i&&!r.getNode().equals(a)||!r.getNode().getPriority().equals(a.getPriority()))&&t.push(function TO(n){return{type:"value",snapshotNode:n}}(ZC(e)))}}(e,c,g),{viewCache:c,changes:g}}(n.processor_,i,e,t,r);return function kj(n,e){(0,Z.hu)(e.eventCache.getNode().isIndexed(n.filter.getIndex()),"Event snap not indexed"),(0,Z.hu)(e.serverCache.getNode().isIndexed(n.filter.getIndex()),"Server snap not indexed")}(n.processor_,a.viewCache),(0,Z.hu)(a.viewCache.serverCache.isFullyInitialized()||!i.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),n.viewCache_=a.viewCache,function zO(n,e,t,r){return function fj(n,e,t,r){const i=[],a=[];return e.forEach(c=>{"child_changed"===c.type&&n.index_.indexedValueChanged(c.oldSnap,c.snapshotNode)&&a.push(function X2(n,e){return{type:"child_moved",snapshotNode:e,childName:n}}(c.childName,c.snapshotNode))}),h0(n,i,"child_removed",e,r,t),h0(n,i,"child_added",e,r,t),h0(n,i,"child_moved",a,r,t),h0(n,i,"child_changed",e,r,t),h0(n,i,"value",e,r,t),i}(n.eventGenerator_,e,t,r?[r]:n.eventRegistrations_)}(n,a.changes,a.viewCache.eventCache.getNode(),null)}let eT,nT;function cx(n,e,t,r){const i=e.source.queryId;if(null!==i){const a=n.views.get(i);return(0,Z.hu)(null!=a,"SyncTree gave us an op for an invalid query."),WO(a,e,t,r)}{let a=[];for(const c of n.views.values())a=a.concat(WO(c,e,t,r));return a}}function th(n,e){let t=null;for(const r of n.views.values())t=t||Wj(r,e);return t}class QO{constructor(e){this.listenProvider_=e,this.syncPointTree_=new gr(null),this.pendingWriteTree_=function Rj(){return{visibleWrites:Ca.empty(),allWrites:[],lastWriteId:-1}}(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}function lx(n,e,t,r,i){return function _j(n,e,t,r,i){(0,Z.hu)(r>n.lastWriteId,"Stacking an older write on top of newer ones"),void 0===i&&(i=!0),n.allWrites.push({path:e,snap:t,writeId:r,visible:i}),i&&(n.visibleWrites=p0(n.visibleWrites,e,t)),n.lastWriteId=r}(n.pendingWriteTree_,e,t,r,i),i?S_(n,new Hp({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},e,t)):[]}function rh(n,e,t=!1){const r=function vj(n,e){for(let t=0;t<n.allWrites.length;t++){const r=n.allWrites[t];if(r.writeId===e)return r}return null}(n.pendingWriteTree_,e);if(function Ej(n,e){const t=n.allWrites.findIndex(h=>h.writeId===e);(0,Z.hu)(t>=0,"removeWrite called with nonexistent writeId.");const r=n.allWrites[t];n.allWrites.splice(t,1);let i=r.visible,a=!1,c=n.allWrites.length-1;for(;i&&c>=0;){const h=n.allWrites[c];h.visible&&(c>=t&&wj(h,r.path)?i=!1:zo(r.path,h.path)&&(a=!0)),c--}return!!i&&(a?(function Ij(n){n.visibleWrites=MO(n.allWrites,bj,Un()),n.lastWriteId=n.allWrites.length>0?n.allWrites[n.allWrites.length-1].writeId:-1}(n),!0):(r.snap?n.visibleWrites=xO(n.visibleWrites,r.path):Pi(r.children,g=>{n.visibleWrites=xO(n.visibleWrites,Ar(r.path,g))}),!0))}(n.pendingWriteTree_,e)){let a=new gr(null);return null!=r.snap?a=a.set(Un(),!0):Pi(r.children,c=>{a=a.set(new $n(c),!0)}),S_(n,new qC(r.path,a,t))}return[]}function g0(n,e,t){return S_(n,new Hp({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},e,t))}function rT(n,e,t){const i=n.pendingWriteTree_,a=n.syncPointTree_.findOnPath(e,(c,h)=>{const v=th(h,Is(c,e));if(v)return v});return kO(i,e,a,t,!0)}function S_(n,e){return XO(e,n.syncPointTree_,null,YC(n.pendingWriteTree_,Un()))}function XO(n,e,t,r){if(vn(n.path))return e1(n,e,t,r);{const i=e.get(Un());null==t&&null!=i&&(t=th(i,Un()));let a=[];const c=yn(n.path),h=n.operationForChild(c),g=e.children.get(c);if(g&&h){const v=t?t.getImmediateChild(c):null,C=FO(r,c);a=a.concat(XO(h,g,v,C))}return i&&(a=a.concat(cx(i,n,r,t))),a}}function e1(n,e,t,r){const i=e.get(Un());null==t&&null!=i&&(t=th(i,Un()));let a=[];return e.children.inorderTraversal((c,h)=>{const g=t?t.getImmediateChild(c):null,v=FO(r,c),C=n.operationForChild(c);C&&(a=a.concat(e1(C,h,g,v)))}),i&&(a=a.concat(cx(i,n,r,t))),a}function hx(n,e){return n.tagToQueryMap.get(e)}function fx(n){const e=n.indexOf("$");return(0,Z.hu)(-1!==e&&e<n.length-1,"Bad queryKey."),{queryId:n.substr(e+1),path:new $n(n.substr(0,e))}}function px(n,e,t){const r=n.syncPointTree_.get(e);return(0,Z.hu)(r,"Missing sync point for query tag that we're tracking"),cx(r,t,YC(n.pendingWriteTree_,e),null)}class gx{constructor(e){this.node_=e}getImmediateChild(e){const t=this.node_.getImmediateChild(e);return new gx(t)}node(){return this.node_}}class mx{constructor(e,t){this.syncTree_=e,this.path_=t}getImmediateChild(e){const t=Ar(this.path_,e);return new mx(this.syncTree_,t)}node(){return rT(this.syncTree_,this.path_)}}const n1=function(n,e,t){return n&&"object"==typeof n?((0,Z.hu)(".sv"in n,"Unexpected leaf node or priority contents"),"string"==typeof n[".sv"]?f$(n[".sv"],e,t):"object"==typeof n[".sv"]?p$(n[".sv"],e):void(0,Z.hu)(!1,"Unexpected server value: "+JSON.stringify(n,null,2))):n},f$=function(n,e,t){if("timestamp"===n)return t.timestamp;(0,Z.hu)(!1,"Unexpected server value: "+n)},p$=function(n,e,t){n.hasOwnProperty("increment")||(0,Z.hu)(!1,"Unexpected server value: "+JSON.stringify(n,null,2));const r=n.increment;"number"!=typeof r&&(0,Z.hu)(!1,"Unexpected increment value: "+r);const i=e.node();if((0,Z.hu)(null!=i,"Expected ChildrenNode.EMPTY_NODE for nulls"),!i.isLeafNode())return r;const c=i.getValue();return"number"!=typeof c?r:c+r},_x=function(n,e,t){return yx(n,new gx(e),t)};function yx(n,e,t){const r=n.getPriority().val(),i=n1(r,e.getImmediateChild(".priority"),t);let a;if(n.isLeafNode()){const c=n,h=n1(c.getValue(),e,t);return h!==c.getValue()||i!==c.getPriority().val()?new E_(h,Lr(i)):n}{const c=n;return a=c,i!==c.getPriority().val()&&(a=a.updatePriority(new E_(i))),c.forEachChild(pr,(h,g)=>{const v=yx(g,e.getImmediateChild(h),t);v!==g&&(a=a.updateImmediateChild(h,v))}),a}}class vx{constructor(e="",t=null,r={children:{},childCount:0}){this.name=e,this.parent=t,this.node=r}}function oT(n,e){let t=e instanceof $n?e:new $n(e),r=n,i=yn(t);for(;null!==i;){const a=(0,Z.DV)(r.node.children,i)||{children:{},childCount:0};r=new vx(i,r,a),t=or(t),i=yn(t)}return r}function Gp(n){return n.node.value}function Ex(n,e){n.node.value=e,wx(n)}function i1(n){return n.node.childCount>0}function aT(n,e){Pi(n.node.children,(t,r)=>{e(new vx(t,n,r))})}function s1(n,e,t,r){t&&!r&&e(n),aT(n,i=>{s1(i,e,!0,r)}),t&&r&&e(n)}function _0(n){return new $n(null===n.parent?n.name:_0(n.parent)+"/"+n.name)}function wx(n){null!==n.parent&&function _$(n,e,t){const r=function g$(n){return void 0===Gp(n)&&!i1(n)}(t),i=(0,Z.r3)(n.node.children,e);r&&i?(delete n.node.children[e],n.node.childCount--,wx(n)):!r&&!i&&(n.node.children[e]=t.node,n.node.childCount++,wx(n))}(n.parent,n.name,n)}const y$=/[\[\].#$\/\u0000-\u001F\u007F]/,v$=/[\[\].#$\u0000-\u001F\u007F]/,Ix=10485760,uT=function(n){return"string"==typeof n&&0!==n.length&&!y$.test(n)},v0=function(n,e,t){const r=t instanceof $n?new M2(t,n):t;if(void 0===e)throw new Error(n+"contains undefined "+jp(r));if("function"==typeof e)throw new Error(n+"contains a function "+jp(r)+" with contents = "+e.toString());if(FC(e))throw new Error(n+"contains "+e.toString()+" "+jp(r));if("string"==typeof e&&e.length>Ix/3&&(0,Z.ug)(e)>Ix)throw new Error(n+"contains a string greater than "+Ix+" utf8 bytes "+jp(r)+" ('"+e.substring(0,50)+"...')");if(e&&"object"==typeof e){let i=!1,a=!1;if(Pi(e,(c,h)=>{if(".value"===c)i=!0;else if(".priority"!==c&&".sv"!==c&&(a=!0,!uT(c)))throw new Error(n+" contains an invalid key ("+c+") "+jp(r)+'.  Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');(function k2(n,e){n.parts_.length>0&&(n.byteLength_+=1),n.parts_.push(e),n.byteLength_+=(0,Z.ug)(e),hO(n)})(r,c),v0(n,h,r),function O2(n){const e=n.parts_.pop();n.byteLength_-=(0,Z.ug)(e),n.parts_.length>0&&(n.byteLength_-=1)}(r)}),i&&a)throw new Error(n+' contains ".value" child '+jp(r)+" in addition to actual children.")}},u1=function(n,e){const t=e.path.toString();if("string"!=typeof e.repoInfo.host||0===e.repoInfo.host.length||!uT(e.repoInfo.namespace)&&"localhost"!==e.repoInfo.host.split(":")[0]||0!==t.length&&!function(n){return n&&(n=n.replace(/^\/*\.info(\/|$)/,"/")),function(n){return"string"==typeof n&&0!==n.length&&!v$.test(n)}(n)}(t))throw new Error((0,Z.gK)(n,"url")+'must be a valid firebase URL and the path can\'t contain ".", "#", "$", "[", or "]".')};class b${constructor(){this.eventLists_=[],this.recursionDepth_=0}}function qo(n,e,t){(function cT(n,e){let t=null;for(let r=0;r<e.length;r++){const i=e[r],a=i.getPath();null!==t&&!LR(a,t.path)&&(n.eventLists_.push(t),t=null),null===t&&(t={events:[],path:a}),t.events.push(i)}t&&n.eventLists_.push(t)})(n,t),function c1(n,e){n.recursionDepth_++;let t=!0;for(let r=0;r<n.eventLists_.length;r++){const i=n.eventLists_[r];i&&(e(i.path)?(C$(n.eventLists_[r]),n.eventLists_[r]=null):t=!1)}t&&(n.eventLists_=[]),n.recursionDepth_--}(n,r=>zo(r,e)||zo(e,r))}function C$(n){for(let e=0;e<n.events.length;e++){const t=n.events[e];if(null!==t){n.events[e]=null;const r=t.getEventRunner();Vp&&xi("event: "+t.toString()),y_(r)}}}class D${constructor(e,t,r,i){this.repoInfo_=e,this.forceRestClient_=t,this.authTokenProvider_=r,this.appCheckProvider_=i,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new b$,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=GC(),this.transactionQueueTree_=new vx,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}function d1(n){const t=n.infoData_.getNode(new $n(".info/serverTimeOffset")).val()||0;return(new Date).getTime()+t}function w0(n){return function(n){return(n=n||{}).timestamp=n.timestamp||(new Date).getTime(),n}({timestamp:d1(n)})}function h1(n,e,t,r,i){n.dataUpdateCount++;const a=new $n(e);t=n.interceptServerDataCallback_?n.interceptServerDataCallback_(e,t):t;let c=[];if(i)if(r){const g=(0,Z.UI)(t,v=>Lr(v));c=function o$(n,e,t,r){const i=hx(n,r);if(i){const a=fx(i),c=a.path,h=a.queryId,g=Is(c,e),v=gr.fromObject(t);return px(n,c,new T_(XR(h),g,v))}return[]}(n.serverSyncTree_,a,g,i)}else{const g=Lr(t);c=function s$(n,e,t,r){const i=hx(n,r);if(null!=i){const a=fx(i),c=a.path,h=a.queryId,g=Is(c,e);return px(n,c,new Hp(XR(h),g,t))}return[]}(n.serverSyncTree_,a,g,i)}else if(r){const g=(0,Z.UI)(t,v=>Lr(v));c=function n$(n,e,t){const r=gr.fromObject(t);return S_(n,new T_({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},e,r))}(n.serverSyncTree_,a,g)}else{const g=Lr(t);c=g0(n.serverSyncTree_,a,g)}let h=a;c.length>0&&(h=R_(n,a)),qo(n.eventQueue_,h,c)}function f1(n,e){Dx(n,"connected",e),!1===e&&function P$(n){A_(n,"onDisconnectEvents");const e=w0(n),t=GC();YR(n.onDisconnect_,Un(),(i,a)=>{const c=function(n,e,t,r){return yx(e,new mx(t,n),r)}(i,a,n.serverSyncTree_,e);C_(t,i,c)});let r=[];YR(t,Un(),(i,a)=>{r=r.concat(g0(n.serverSyncTree_,i,a));const c=function xx(n,e){const t=_0(m1(n,e)),r=oT(n.transactionQueueTree_,e);return function m$(n,e,t){let r=t?n:n.parent;for(;null!==r;){if(e(r))return!0;r=r.parent}}(r,i=>{Px(n,i)}),Px(n,r),s1(r,i=>{Px(n,i)}),t}(n,i);R_(n,c)}),n.onDisconnect_=GC(),qo(n.eventQueue_,Un(),r)}(n)}function Dx(n,e,t){const r=new $n("/.info/"+e),i=Lr(t);n.infoData_.updateSnapshot(r,i);const a=g0(n.infoSyncTree_,r,i);qo(n.eventQueue_,r,a)}function lT(n){return n.nextWriteId_++}function A_(n,...e){let t="";n.persistentConnection_&&(t=n.persistentConnection_.id+":"),xi(t,...e)}function Rx(n,e,t){return rT(n.serverSyncTree_,e,t)||fn.EMPTY_NODE}function dT(n,e=n.transactionQueueTree_){if(e||hT(n,e),Gp(e)){const t=_1(n,e);(0,Z.hu)(t.length>0,"Sending zero length transaction queue"),t.every(i=>0===i.status)&&function U$(n,e,t){const r=t.map(v=>v.currentWriteId),i=Rx(n,e,r);let a=i;const c=i.hash();for(let v=0;v<t.length;v++){const C=t[v];(0,Z.hu)(0===C.status,"tryToSendTransactionQueue_: items in queue should all be run."),C.status=1,C.retryCount++;const D=Is(e,C.path);a=a.updateChild(D,C.currentOutputSnapshotRaw)}const h=a.val(!0),g=e;n.server_.put(g.toString(),h,v=>{A_(n,"transaction put response",{path:g.toString(),status:v});let C=[];if("ok"===v){const D=[];for(let x=0;x<t.length;x++)t[x].status=2,C=C.concat(rh(n.serverSyncTree_,t[x].currentWriteId)),t[x].onComplete&&D.push(()=>t[x].onComplete(null,!0,t[x].currentOutputSnapshotResolved)),t[x].unwatcher();hT(n,oT(n.transactionQueueTree_,e)),dT(n,n.transactionQueueTree_),qo(n.eventQueue_,e,C);for(let x=0;x<D.length;x++)y_(D[x])}else{if("datastale"===v)for(let D=0;D<t.length;D++)t[D].status=3===t[D].status?4:0;else{ws("transaction at "+g.toString()+" failed: "+v);for(let D=0;D<t.length;D++)t[D].status=4,t[D].abortReason=v}R_(n,e)}},c)}(n,_0(e),t)}else i1(e)&&aT(e,t=>{dT(n,t)})}function R_(n,e){const t=m1(n,e),r=_0(t);return function V$(n,e,t){if(0===e.length)return;const r=[];let i=[];const c=e.filter(h=>0===h.status).map(h=>h.currentWriteId);for(let h=0;h<e.length;h++){const g=e[h],v=Is(t,g.path);let D,C=!1;if((0,Z.hu)(null!==v,"rerunTransactionsUnderNode_: relativePath should not be null."),4===g.status)C=!0,D=g.abortReason,i=i.concat(rh(n.serverSyncTree_,g.currentWriteId,!0));else if(0===g.status)if(g.retryCount>=25)C=!0,D="maxretry",i=i.concat(rh(n.serverSyncTree_,g.currentWriteId,!0));else{const x=Rx(n,g.path,c);g.currentInputSnapshot=x;const k=e[h].update(x.val());if(void 0!==k){v0("transaction failed: Data returned ",k,g.path);let B=Lr(k);"object"==typeof k&&null!=k&&(0,Z.r3)(k,".priority")||(B=B.updatePriority(x.getPriority()));const xe=g.currentWriteId,bt=w0(n),Tt=_x(B,x,bt);g.currentOutputSnapshotRaw=B,g.currentOutputSnapshotResolved=Tt,g.currentWriteId=lT(n),c.splice(c.indexOf(xe),1),i=i.concat(lx(n.serverSyncTree_,g.path,Tt,g.currentWriteId,g.applyLocally)),i=i.concat(rh(n.serverSyncTree_,xe,!0))}else C=!0,D="nodata",i=i.concat(rh(n.serverSyncTree_,g.currentWriteId,!0))}qo(n.eventQueue_,t,i),i=[],C&&(e[h].status=2,setTimeout(e[h].unwatcher,Math.floor(0)),e[h].onComplete&&r.push("nodata"===D?()=>e[h].onComplete(null,!1,e[h].currentInputSnapshot):()=>e[h].onComplete(new Error(D),!1,null)))}hT(n,n.transactionQueueTree_);for(let h=0;h<r.length;h++)y_(r[h]);dT(n,n.transactionQueueTree_)}(n,_1(n,t),r),r}function m1(n,e){let t,r=n.transactionQueueTree_;for(t=yn(e);null!==t&&void 0===Gp(r);)r=oT(r,t),t=yn(e=or(e));return r}function _1(n,e){const t=[];return y1(n,e,t),t.sort((r,i)=>r.order-i.order),t}function y1(n,e,t){const r=Gp(e);if(r)for(let i=0;i<r.length;i++)t.push(r[i]);aT(e,i=>{y1(n,i,t)})}function hT(n,e){const t=Gp(e);if(t){let r=0;for(let i=0;i<t.length;i++)2!==t[i].status&&(t[r]=t[i],r++);t.length=r,Ex(e,t.length>0?t:void 0)}aT(e,r=>{hT(n,r)})}function Px(n,e){const t=Gp(e);if(t){const r=[];let i=[],a=-1;for(let c=0;c<t.length;c++)3===t[c].status||(1===t[c].status?((0,Z.hu)(a===c-1,"All SENT items should be at beginning of queue."),a=c,t[c].status=3,t[c].abortReason="set"):((0,Z.hu)(0===t[c].status,"Unexpected transaction status in abort"),t[c].unwatcher(),i=i.concat(rh(n.serverSyncTree_,t[c].currentWriteId,!0)),t[c].onComplete&&r.push(t[c].onComplete.bind(null,new Error("set"),!1,null))));-1===a?Ex(e,void 0):t.length=a+1,qo(n.eventQueue_,_0(e),i);for(let c=0;c<r.length;c++)y_(r[c])}}const Nx=function(n,e){const t=$$(n),r=t.namespace;return"firebase.com"===t.domain&&bu(t.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!r||"undefined"===r)&&"localhost"!==t.domain&&bu("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),t.secure||"undefined"!=typeof window&&window.location&&window.location.protocol&&-1!==window.location.protocol.indexOf("https:")&&ws("Insecure Firebase access from a secure page. Please use https in calls to new Firebase()."),{repoInfo:new RR(t.host,t.secure,r,e,"ws"===t.scheme||"wss"===t.scheme,"",r!==t.subdomain),path:new $n(t.pathString)}},$$=function(n){let e="",t="",r="",i="",a="",c=!0,h="https",g=443;if("string"==typeof n){let v=n.indexOf("//");v>=0&&(h=n.substring(0,v-1),n=n.substring(v+2));let C=n.indexOf("/");-1===C&&(C=n.length);let D=n.indexOf("?");-1===D&&(D=n.length),e=n.substring(0,Math.min(C,D)),C<D&&(i=function B$(n){let e="";const t=n.split("/");for(let r=0;r<t.length;r++)if(t[r].length>0){let i=t[r];try{i=decodeURIComponent(i.replace(/\+/g," "))}catch(a){}e+="/"+i}return e}(n.substring(C,D)));const x=function j$(n){const e={};"?"===n.charAt(0)&&(n=n.substring(1));for(const t of n.split("&")){if(0===t.length)continue;const r=t.split("=");2===r.length?e[decodeURIComponent(r[0])]=decodeURIComponent(r[1]):ws(`Invalid query segment '${t}' in query '${n}'`)}return e}(n.substring(Math.min(n.length,D)));v=e.indexOf(":"),v>=0?(c="https"===h||"wss"===h,g=parseInt(e.substring(v+1),10)):v=e.length;const k=e.slice(0,v);if("localhost"===k.toLowerCase())t="localhost";else if(k.split(".").length<=2)t=k;else{const B=e.indexOf(".");r=e.substring(0,B).toLowerCase(),t=e.substring(B+1),a=r}"ns"in x&&(a=x.ns)}return{host:e,port:g,domain:t,subdomain:r,secure:c,scheme:h,pathString:i,namespace:a}};class po{constructor(e,t,r,i){this._repo=e,this._path=t,this._queryParams=r,this._orderByCalled=i}get key(){return vn(this._path)?null:FR(this._path)}get ref(){return new Ta(this._repo,this._path)}get _queryIdentifier(){const e=SO(this._queryParams),t=DR(e);return"{}"===t?"default":t}get _queryObject(){return SO(this._queryParams)}isEqual(e){if(!((e=(0,Z.m9)(e))instanceof po))return!1;const t=this._repo===e._repo,r=LR(this._path,e._path);return t&&r&&this._queryIdentifier===e._queryIdentifier}toJSON(){return this.toString()}toString(){return this._repo.toString()+function P2(n){let e="";for(let t=n.pieceNum_;t<n.pieces_.length;t++)""!==n.pieces_[t]&&(e+="/"+encodeURIComponent(String(n.pieces_[t])));return e||"/"}(this._path)}}class Ta extends po{constructor(e,t){super(e,t,new GR,!1)}get parent(){const e=dO(this._path);return null===e?null:new Ta(this._repo,e)}get root(){let e=this;for(;null!==e.parent;)e=e.parent;return e}}(function qj(n){(0,Z.hu)(!eT,"__referenceConstructor has already been defined"),eT=n})(Ta),function Jj(n){(0,Z.hu)(!nT,"__referenceConstructor has already been defined"),nT=n}(Ta);const Mx={};class aH{constructor(e,t){this._repoInternal=e,this.app=t,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(function S$(n,e,t){if(n.stats_=NR(n.repoInfo_),n.forceRestClient_||("object"==typeof window&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0)n.server_=new zC(n.repoInfo_,(r,i,a,c)=>{h1(n,r,i,a,c)},n.authTokenProvider_,n.appCheckProvider_),setTimeout(()=>f1(n,!0),0);else{if(null!=t){if("object"!=typeof t)throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{(0,Z.Pz)(t)}catch(r){throw new Error("Invalid authOverride provided: "+r)}}n.persistentConnection_=new $p(n.repoInfo_,e,(r,i,a,c)=>{h1(n,r,i,a,c)},r=>{f1(n,r)},r=>{!function A$(n,e){Pi(e,(t,r)=>{Dx(n,t,r)})}(n,r)},n.authTokenProvider_,n.appCheckProvider_,t),n.server_=n.persistentConnection_}n.authTokenProvider_.addTokenChangeListener(r=>{n.server_.refreshAuthToken(r)}),n.appCheckProvider_.addTokenChangeListener(r=>{n.server_.refreshAppCheckToken(r.token)}),n.statsReporter_=function c2(n,e){const t=n.toString();return PR[t]||(PR[t]=e()),PR[t]}(n.repoInfo_,()=>new dj(n.stats_,n.server_)),n.infoData_=new oj,n.infoSyncTree_=new QO({startListening:(r,i,a,c)=>{let h=[];const g=n.infoData_.getNode(r._path);return g.isEmpty()||(h=g0(n.infoSyncTree_,r._path,g),setTimeout(()=>{c("ok")},0)),h},stopListening:()=>{}}),Dx(n,"connected",!1),n.serverSyncTree_=new QO({startListening:(r,i,a,c)=>(n.server_.listen(r,a,i,(h,g)=>{const v=c(h,g);qo(n.eventQueue_,r._path,v)}),[]),stopListening:(r,i)=>{n.server_.unlisten(r,i)}})}(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new Ta(this._repo,Un())),this._rootInternal}_delete(){return null!==this._rootInternal&&(function iH(n,e){const t=Mx[e];(!t||t[n.key]!==n)&&bu(`Database ${e}(${n.repoInfo_}) has already been deleted.`),function g1(n){n.persistentConnection_&&n.persistentConnection_.interrupt("repo_interrupt")}(n),delete t[n.key]}(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(e){null===this._rootInternal&&bu("Cannot call "+e+" on a deleted database.")}}function uH(n=(0,Nn.getApp)(),e){return(0,Nn._getProvider)(n,"database").getImmediate({identifier:e})}$p.prototype.simpleListen=function(n,e){this.sendRequest("q",{p:n},e)},$p.prototype.echo=function(n,e){this.sendRequest("echo",{d:n},e)},function cH(n){(function qB(n){bR=n})(Nn.SDK_VERSION),(0,Nn._registerComponent)(new nu.wA("database",(e,{instanceIdentifier:t})=>function rH(n,e,t,r,i){let a=r||n.options.databaseURL;void 0===a&&(n.options.projectId||bu("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),xi("Using default host for project ",n.options.projectId),a=`${n.options.projectId}-default-rtdb.firebaseio.com`);let g,v,c=Nx(a,i),h=c.repoInfo;"undefined"!=typeof process&&(v=process.env.FIREBASE_DATABASE_EMULATOR_HOST),v?(g=!0,a=`http://${v}?ns=${h.namespace}`,c=Nx(a,i),h=c.repoInfo):g=!c.repoInfo.secure;const C=i&&g?new e0(e0.OWNER):new s2(n.name,n.options,e);u1("Invalid Firebase Database URL",c),vn(c.path)||bu("Database URL must point to the root of a Firebase Database (not including a child path).");const D=function sH(n,e,t,r){let i=Mx[e.name];i||(i={},Mx[e.name]=i);let a=i[n.toURLString()];return a&&bu("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),a=new D$(n,!1,t,r),i[n.toURLString()]=a,a}(h,n,C,new i2(n.name,t));return new aH(D,n)}(e.getProvider("app").getImmediate(),e.getProvider("auth-internal"),e.getProvider("app-check-internal"),t),"PUBLIC").setMultipleInstances(!0)),(0,Nn.registerVersion)(Rk,"0.12.5",n),(0,Nn.registerVersion)(Rk,"0.12.5","esm2017")}();class kx{constructor(e){return e}}function pH(n){return(e,t)=>{const r=e.runOutsideAngular(()=>n(t));return new kx(r)}}const vH=(0,lt.u3)(uH,!0);class Fx{constructor(e){return e}}function IH(n){return(e,t)=>{const r=e.runOutsideAngular(()=>n(t));return new Fx(r)}}const SH=(0,lt.u3)(xL,!0),Vx="functions";class NH{constructor(e,t,r){this.auth=null,this.messaging=null,this.appCheck=null,this.auth=e.getImmediate({optional:!0}),this.messaging=t.getImmediate({optional:!0}),this.auth||e.get().then(i=>this.auth=i,()=>{}),this.messaging||t.get().then(i=>this.messaging=i,()=>{}),this.appCheck||r.get().then(i=>this.appCheck=i,()=>{})}getAuthToken(){var e=this;return(0,Ce.Z)(function*(){if(e.auth)try{const t=yield e.auth.getToken();return null==t?void 0:t.accessToken}catch(t){return}})()}getMessagingToken(){var e=this;return(0,Ce.Z)(function*(){if(e.messaging&&"Notification"in self&&"granted"===Notification.permission)try{return yield e.messaging.getToken()}catch(t){return}})()}getAppCheckToken(){var e=this;return(0,Ce.Z)(function*(){if(e.appCheck){const t=yield e.appCheck.getToken();return t.error?null:t.token}return null})()}getContext(){var e=this;return(0,Ce.Z)(function*(){return{authToken:yield e.getAuthToken(),messagingToken:yield e.getMessagingToken(),appCheckToken:yield e.getAppCheckToken()}})()}}const Bx="us-central1";class kH{constructor(e,t,r,i,a=Bx,c){this.app=e,this.fetchImpl=c,this.emulatorOrigin=null,this.contextProvider=new NH(t,r,i),this.cancelAllRequests=new Promise(h=>{this.deleteService=()=>Promise.resolve(h())});try{const h=new URL(a);this.customDomain=h.origin,this.region=Bx}catch(h){this.customDomain=null,this.region=a}}_delete(){return this.deleteService()}_url(e){const t=this.app.options.projectId;return null!==this.emulatorOrigin?`${this.emulatorOrigin}/${t}/${this.region}/${e}`:null!==this.customDomain?`${this.customDomain}/${e}`:`https://${this.region}-${t}.cloudfunctions.net/${e}`}}const x1="@firebase/functions";function HH(n=(0,Nn.getApp)(),e=Bx){return(0,Nn._getProvider)((0,Z.m9)(n),Vx).getImmediate({identifier:e})}!function $H(n,e){(0,Nn._registerComponent)(new nu.wA(Vx,(r,{instanceIdentifier:i})=>{const a=r.getProvider("app").getImmediate(),c=r.getProvider("auth-internal"),h=r.getProvider("messaging-internal"),g=r.getProvider("app-check-internal");return new kH(a,c,h,g,i,n)},"PUBLIC").setMultipleInstances(!0)),(0,Nn.registerVersion)(x1,"0.7.8",e),(0,Nn.registerVersion)(x1,"0.7.8","esm2017")}(fetch.bind(self));class Hx{constructor(e){return e}}function GH(n){return(e,t)=>{const r=e.runOutsideAngular(()=>n(t));return new Hx(r)}}const QH=(0,lt.u3)(HH,!0);var JH=P(2375);class zx{constructor(e){return e}}function tW(n){return(e,t)=>{if(!lt.n1.sync())return null;const r=e.runOutsideAngular(()=>n(t));return new zx(r)}}const oW=(0,lt.u3)(JH.KL,!0);P(2833);const k1="@firebase/performance",qx="0.5.5",Kx="FB-PERF-TRACE-MEASURE",B1="@firebase/performance/config",j1="@firebase/performance/configexpire",$1="Performance",Bi=new Z.LL("performance",$1,{"trace started":"Trace {$traceName} was started before.","trace stopped":"Trace {$traceName} is not running.","nonpositive trace startTime":"Trace {$traceName} startTime should be positive.","nonpositive trace duration":"Trace {$traceName} duration should be positive.","no window":"Window is not available.","no app id":"App id is not available.","no project id":"Project id is not available.","no api key":"Api key is not available.","invalid cc log":"Attempted to queue invalid cc event","FB not default":"Performance can only start when Firebase app instance is the default one.","RC response not ok":"RC response is not ok","invalid attribute name":"Attribute name {$attributeName} is invalid.","invalid attribute value":"Attribute value {$attributeValue} is invalid.","invalid custom metric name":"Custom metric name {$customMetricName} is invalid","invalid String merger input":"Input for String merger is invalid, contact support team to resolve.","already initialized":"initializePerformance() has already been called with different options. To avoid this error, call initializePerformance() with the same options as when it was originally called, or call getPerformance() to return the already initialized instance."}),Au=new no.Yd($1);let Zx,H1,W1,Qx;Au.logLevel=no.in.INFO;class Ni{constructor(e){if(this.window=e,!e)throw Bi.create("no window");this.performance=e.performance,this.PerformanceObserver=e.PerformanceObserver,this.windowLocation=e.location,this.navigator=e.navigator,this.document=e.document,this.navigator&&this.navigator.cookieEnabled&&(this.localStorage=e.localStorage),e.perfMetrics&&e.perfMetrics.onFirstInputDelay&&(this.onFirstInputDelay=e.perfMetrics.onFirstInputDelay)}getUrl(){return this.windowLocation.href.split("?")[0]}mark(e){!this.performance||!this.performance.mark||this.performance.mark(e)}measure(e,t,r){!this.performance||!this.performance.measure||this.performance.measure(e,t,r)}getEntriesByType(e){return this.performance&&this.performance.getEntriesByType?this.performance.getEntriesByType(e):[]}getEntriesByName(e){return this.performance&&this.performance.getEntriesByName?this.performance.getEntriesByName(e):[]}getTimeOrigin(){return this.performance&&(this.performance.timeOrigin||this.performance.timing.navigationStart)}requiredApisAvailable(){return fetch&&Promise&&(0,Z.zI)()?!!(0,Z.hl)()||(Au.info("IndexedDB is not supported by current browswer"),!1):(Au.info("Firebase Performance cannot start if browser does not support fetch and Promise or cookie is disabled."),!1)}setupObserver(e,t){this.PerformanceObserver&&new this.PerformanceObserver(i=>{for(const a of i.getEntries())t(a)}).observe({entryTypes:[e]})}static getInstance(){return void 0===Zx&&(Zx=new Ni(H1)),Zx}}function Yx(){return W1}function z1(n,e){const t=n.length-e.length;if(t<0||t>1)throw Bi.create("invalid String merger input");const r=[];for(let i=0;i<n.length;i++)r.push(n.charAt(i)),e.length>i&&r.push(e.charAt(i));return r.join("")}class go{constructor(){this.instrumentationEnabled=!0,this.dataCollectionEnabled=!0,this.loggingEnabled=!1,this.tracesSamplingRate=1,this.networkRequestsSamplingRate=1,this.logEndPointUrl="https://firebaselogging.googleapis.com/v0cc/log?format=json_proto",this.flTransportEndpointUrl=z1("hts/frbslgigp.ogepscmv/ieo/eaylg","tp:/ieaeogn-agolai.o/1frlglgc/o"),this.transportKey=z1("AzSC8r6ReiGqFMyfvgow","Iayx0u-XT3vksVM-pIV"),this.logSource=462,this.logTraceAfterSampling=!1,this.logNetworkAfterSampling=!1,this.configTimeToLive=12}getFlTransportFullUrl(){return this.flTransportEndpointUrl.concat("?key=",this.transportKey)}static getInstance(){return void 0===Qx&&(Qx=new go),Qx}}var Kp=(()=>(function(n){n[n.UNKNOWN=0]="UNKNOWN",n[n.VISIBLE=1]="VISIBLE",n[n.HIDDEN=2]="HIDDEN"}(Kp||(Kp={})),Kp))();const pW=["firebase_","google_","ga_"],gW=new RegExp("^[a-zA-Z]\\w*$");function yW(){const n=Ni.getInstance().navigator;return"serviceWorker"in n?n.serviceWorker.controller?2:3:1}function G1(){switch(Ni.getInstance().document.visibilityState){case"visible":return Kp.VISIBLE;case"hidden":return Kp.HIDDEN;default:return Kp.UNKNOWN}}function vW(){const e=Ni.getInstance().navigator.connection;switch(e&&e.effectiveType){case"slow-2g":return 1;case"2g":return 2;case"3g":return 3;case"4g":return 4;default:return 0}}function q1(n){var e;const t=null===(e=n.options)||void 0===e?void 0:e.appId;if(!t)throw Bi.create("no app id");return t}const xW="Could not fetch config, will use default configs";function K1(n){if(!n)return n;const e=go.getInstance(),t=n.entries||{};return e.loggingEnabled=void 0===t.fpr_enabled||"true"===String(t.fpr_enabled),t.fpr_log_source&&(e.logSource=Number(t.fpr_log_source)),t.fpr_log_endpoint_url&&(e.logEndPointUrl=t.fpr_log_endpoint_url),t.fpr_log_transport_key&&(e.transportKey=t.fpr_log_transport_key),void 0!==t.fpr_vc_network_request_sampling_rate&&(e.networkRequestsSamplingRate=Number(t.fpr_vc_network_request_sampling_rate)),void 0!==t.fpr_vc_trace_sampling_rate&&(e.tracesSamplingRate=Number(t.fpr_vc_trace_sampling_rate)),e.logTraceAfterSampling=Z1(e.tracesSamplingRate),e.logNetworkAfterSampling=Z1(e.networkRequestsSamplingRate),n}function Z1(n){return Math.random()<=n}let Xx,Jx=1;function Y1(n){return Jx=2,Xx=Xx||function kW(n){return function OW(){const n=Ni.getInstance().document;return new Promise(e=>{if(n&&"complete"!==n.readyState){const t=()=>{"complete"===n.readyState&&(n.removeEventListener("readystatechange",t),e())};n.addEventListener("readystatechange",t)}else e()})}().then(()=>function hW(n){const e=n.getId();return e.then(t=>{W1=t}),e}(n.installations)).then(e=>function SW(n,e){const t=function AW(){const n=Ni.getInstance().localStorage;if(!n)return;const e=n.getItem(j1);if(!e||!function NW(n){return Number(n)>Date.now()}(e))return;const t=n.getItem(B1);if(t)try{return JSON.parse(t)}catch(r){return}}();return t?(K1(t),Promise.resolve()):function PW(n,e){return function fW(n){const e=n.getToken();return e.then(t=>{}),e}(n.installations).then(t=>{const r=function IW(n){var e;const t=null===(e=n.options)||void 0===e?void 0:e.projectId;if(!t)throw Bi.create("no project id");return t}(n.app),i=function bW(n){var e;const t=null===(e=n.options)||void 0===e?void 0:e.apiKey;if(!t)throw Bi.create("no api key");return t}(n.app),c=new Request(`https://firebaseremoteconfig.googleapis.com/v1/projects/${r}/namespaces/fireperf:fetch?key=${i}`,{method:"POST",headers:{Authorization:`FIREBASE_INSTALLATIONS_AUTH ${t}`},body:JSON.stringify({app_instance_id:e,app_instance_id_token:t,app_id:q1(n.app),app_version:"0.5.5",sdk_version:"0.0.1"})});return fetch(c).then(h=>{if(h.ok)return h.json();throw Bi.create("RC response not ok")})}).catch(()=>{Au.info(xW)})}(n,e).then(K1).then(r=>function RW(n){const e=Ni.getInstance().localStorage;!n||!e||(e.setItem(B1,JSON.stringify(n)),e.setItem(j1,String(Date.now()+60*go.getInstance().configTimeToLive*60*1e3)))}(r),()=>{})}(n,e)).then(()=>Q1(),()=>Q1())}(n),Xx}function Q1(){Jx=3}let tP,yT=3,oh=[],X1=!1;function vT(n){setTimeout(()=>{if(0!==yT){if(!oh.length)return vT(1e4);!function VW(){const n=oh.splice(0,1e3),e=n.map(r=>({source_extension_json_proto3:r.message,event_time_ms:String(r.eventTime)}));(function BW(n,e){return function jW(n){const e=go.getInstance().getFlTransportFullUrl();return fetch(e,{method:"POST",body:JSON.stringify(n)})}(n).then(t=>(t.ok||Au.info("Call to Firebase backend failed."),t.json())).then(t=>{const r=Number(t.nextRequestWaitMillis);let i=1e4;isNaN(r)||(i=Math.max(r,i));const a=t.logResponseDetails;Array.isArray(a)&&a.length>0&&"RETRY_REQUEST_LATER"===a[0].responseAction&&(oh=[...e,...oh],Au.info("Retry transport request later.")),yT=3,vT(i)})})({request_time_ms:String(Date.now()),client_info:{client_type:1,js_client_info:{}},log_source:go.getInstance().logSource,log_event:e},n).catch(()=>{oh=[...n,...oh],yT--,Au.info(`Tries left: ${yT}.`),vT(1e4)})}()}},n)}function eF(n,e){tP||(tP=function HW(n){return(...e)=>{!function $W(n){if(!n.eventTime||!n.message)throw Bi.create("invalid cc log");oh=[...oh,n]}({message:n(...e),eventTime:Date.now()})}}(zW)),tP(n,e)}function ET(n){const e=go.getInstance();!e.instrumentationEnabled&&n.isAuto||!e.dataCollectionEnabled&&!n.isAuto||!Ni.getInstance().requiredApisAvailable()||n.isAuto&&G1()!==Kp.VISIBLE||(function MW(){return 3===Jx}()?nP(n):Y1(n.performanceController).then(()=>nP(n),()=>nP(n)))}function nP(n){if(!Yx())return;const e=go.getInstance();!e.loggingEnabled||!e.logTraceAfterSampling||setTimeout(()=>eF(n,1),0)}function zW(n,e){return 0===e?function GW(n){const e={url:n.url,http_method:n.httpMethod||0,http_response_code:200,response_payload_bytes:n.responsePayloadBytes,client_start_time_us:n.startTimeUs,time_to_response_initiated_us:n.timeToResponseInitiatedUs,time_to_response_completed_us:n.timeToResponseCompletedUs},t={application_info:tF(n.performanceController.app),network_request_metric:e};return JSON.stringify(t)}(n):function qW(n){const e={name:n.name,is_auto:n.isAuto,client_start_time_us:n.startTimeUs,duration_us:n.durationUs};0!==Object.keys(n.counters).length&&(e.counters=n.counters);const t=n.getAttributes();0!==Object.keys(t).length&&(e.custom_attributes=t);const r={application_info:tF(n.performanceController.app),trace_metric:e};return JSON.stringify(r)}(n)}function tF(n){return{google_app_id:q1(n),app_instance_id:Yx(),web_app_info:{sdk_version:"0.5.5",page_url:Ni.getInstance().getUrl(),service_worker_status:yW(),visibility_state:G1(),effective_connection_type:vW()},application_process_state:0}}const YW=["_fp","_fcp","_fid"];class ah{constructor(e,t,r=!1,i){this.performanceController=e,this.name=t,this.isAuto=r,this.state=1,this.customAttributes={},this.counters={},this.api=Ni.getInstance(),this.randomId=Math.floor(1e6*Math.random()),this.isAuto||(this.traceStartMark=`FB-PERF-TRACE-START-${this.randomId}-${this.name}`,this.traceStopMark=`FB-PERF-TRACE-STOP-${this.randomId}-${this.name}`,this.traceMeasure=i||`${Kx}-${this.randomId}-${this.name}`,i&&this.calculateTraceMetrics())}start(){if(1!==this.state)throw Bi.create("trace started",{traceName:this.name});this.api.mark(this.traceStartMark),this.state=2}stop(){if(2!==this.state)throw Bi.create("trace stopped",{traceName:this.name});this.state=3,this.api.mark(this.traceStopMark),this.api.measure(this.traceMeasure,this.traceStartMark,this.traceStopMark),this.calculateTraceMetrics(),ET(this)}record(e,t,r){if(e<=0)throw Bi.create("nonpositive trace startTime",{traceName:this.name});if(t<=0)throw Bi.create("nonpositive trace duration",{traceName:this.name});if(this.durationUs=Math.floor(1e3*t),this.startTimeUs=Math.floor(1e3*e),r&&r.attributes&&(this.customAttributes=Object.assign({},r.attributes)),r&&r.metrics)for(const i of Object.keys(r.metrics))isNaN(Number(r.metrics[i]))||(this.counters[i]=Number(Math.floor(r.metrics[i])));ET(this)}incrementMetric(e,t=1){this.putMetric(e,void 0===this.counters[e]?t:this.counters[e]+t)}putMetric(e,t){if(!function QW(n,e){return!(0===n.length||n.length>100)&&(e&&e.startsWith("_wt_")&&YW.indexOf(n)>-1||!n.startsWith("_"))}(e,this.name))throw Bi.create("invalid custom metric name",{customMetricName:e});this.counters[e]=function JW(n){const e=Math.floor(n);return e<n&&Au.info(`Metric value should be an Integer, setting the value as : ${e}.`),e}(t)}getMetric(e){return this.counters[e]||0}putAttribute(e,t){const r=function EW(n){return!(0===n.length||n.length>40||pW.some(t=>n.startsWith(t))||!n.match(gW))}(e),i=function wW(n){return 0!==n.length&&n.length<=100}(t);if(r&&i)this.customAttributes[e]=t;else{if(!r)throw Bi.create("invalid attribute name",{attributeName:e});if(!i)throw Bi.create("invalid attribute value",{attributeValue:t})}}getAttribute(e){return this.customAttributes[e]}removeAttribute(e){void 0!==this.customAttributes[e]&&delete this.customAttributes[e]}getAttributes(){return Object.assign({},this.customAttributes)}setStartTime(e){this.startTimeUs=e}setDuration(e){this.durationUs=e}calculateTraceMetrics(){const e=this.api.getEntriesByName(this.traceMeasure),t=e&&e[0];t&&(this.durationUs=Math.floor(1e3*t.duration),this.startTimeUs=Math.floor(1e3*(t.startTime+this.api.getTimeOrigin())))}static createOobTrace(e,t,r,i){const a=Ni.getInstance().getUrl();if(!a)return;const c=new ah(e,"_wt_"+a,!0),h=Math.floor(1e3*Ni.getInstance().getTimeOrigin());if(c.setStartTime(h),t&&t[0]&&(c.setDuration(Math.floor(1e3*t[0].duration)),c.putMetric("domInteractive",Math.floor(1e3*t[0].domInteractive)),c.putMetric("domContentLoadedEventEnd",Math.floor(1e3*t[0].domContentLoadedEventEnd)),c.putMetric("loadEventEnd",Math.floor(1e3*t[0].loadEventEnd))),r){const C=r.find(x=>"first-paint"===x.name);C&&C.startTime&&c.putMetric("_fp",Math.floor(1e3*C.startTime));const D=r.find(x=>"first-contentful-paint"===x.name);D&&D.startTime&&c.putMetric("_fcp",Math.floor(1e3*D.startTime)),i&&c.putMetric("_fid",Math.floor(1e3*i))}ET(c)}static createUserTimingTrace(e,t){ET(new ah(e,t,!1,t))}}function nF(n,e){const t=e;if(!t||void 0===t.responseStart)return;const r=Ni.getInstance().getTimeOrigin(),i=Math.floor(1e3*(t.startTime+r)),a=t.responseStart?Math.floor(1e3*(t.responseStart-t.startTime)):void 0,c=Math.floor(1e3*(t.responseEnd-t.startTime));!function WW(n){const e=go.getInstance();if(!e.instrumentationEnabled)return;const t=n.url,r=e.logEndPointUrl.split("?")[0],i=e.flTransportEndpointUrl.split("?")[0];t===r||t===i||!e.loggingEnabled||!e.logNetworkAfterSampling||setTimeout(()=>eF(n,0),0)}({performanceController:n,url:t.name&&t.name.split("?")[0],responsePayloadBytes:t.transferSize,startTimeUs:i,timeToResponseInitiatedUs:a,timeToResponseCompletedUs:c})}function rF(n){!Yx()||(setTimeout(()=>function tz(n){const e=Ni.getInstance(),t=e.getEntriesByType("navigation"),r=e.getEntriesByType("paint");if(e.onFirstInputDelay){let i=setTimeout(()=>{ah.createOobTrace(n,t,r),i=void 0},5e3);e.onFirstInputDelay(a=>{i&&(clearTimeout(i),ah.createOobTrace(n,t,r,a))})}else ah.createOobTrace(n,t,r)}(n),0),setTimeout(()=>function ez(n){const e=Ni.getInstance(),t=e.getEntriesByType("resource");for(const r of t)nF(n,r);e.setupObserver("resource",r=>nF(n,r))}(n),0),setTimeout(()=>function nz(n){const e=Ni.getInstance(),t=e.getEntriesByType("measure");for(const r of t)iF(n,r);e.setupObserver("measure",r=>iF(n,r))}(n),0))}function iF(n,e){const t=e.name;t.substring(0,Kx.length)!==Kx&&ah.createUserTimingTrace(n,t)}class rz{constructor(e,t){this.app=e,this.installations=t,this.initialized=!1}_init(e){this.initialized||(void 0!==(null==e?void 0:e.dataCollectionEnabled)&&(this.dataCollectionEnabled=e.dataCollectionEnabled),void 0!==(null==e?void 0:e.instrumentationEnabled)&&(this.instrumentationEnabled=e.instrumentationEnabled),Ni.getInstance().requiredApisAvailable()?(0,Z.eu)().then(t=>{t&&(function UW(){X1||(vT(5500),X1=!0)}(),Y1(this).then(()=>rF(this),()=>rF(this)),this.initialized=!0)}).catch(t=>{Au.info(`Environment doesn't support IndexedDB: ${t}`)}):Au.info('Firebase Performance cannot start if the browser does not support "Fetch" and "Promise", or cookies are disabled.'))}set instrumentationEnabled(e){go.getInstance().instrumentationEnabled=e}get instrumentationEnabled(){return go.getInstance().instrumentationEnabled}set dataCollectionEnabled(e){go.getInstance().dataCollectionEnabled=e}get dataCollectionEnabled(){return go.getInstance().dataCollectionEnabled}}function sz(n=(0,Nn.getApp)()){return n=(0,Z.m9)(n),(0,Nn._getProvider)(n,"performance").getImmediate()}const oz=(n,{options:e})=>{const t=n.getProvider("app").getImmediate(),r=n.getProvider("installations-internal").getImmediate();if("[DEFAULT]"!==t.name)throw Bi.create("FB not default");if("undefined"==typeof window)throw Bi.create("no window");!function dW(n){H1=n}(window);const i=new rz(t,r);return i._init(e),i};!function az(){(0,Nn._registerComponent)(new nu.wA("performance",oz,"PUBLIC")),(0,Nn.registerVersion)(k1,qx),(0,Nn.registerVersion)(k1,qx,"esm2017")}();class rP{constructor(e){return e}}function lz(n){return(e,t,r)=>{if(!Zn(t))return null;const i=e.runOutsideAngular(()=>n(r));return new rP(i)}}const gz=(0,lt.u3)(sz,!0);var mz=P(3226);class sP{constructor(e){return e}}function vz(n){return(e,t)=>{if(!lt._J.sync())return null;const r=e.runOutsideAngular(()=>n(t));return new sP(r)}}const Cz=(0,lt.u3)(mz.sN,!0),aF="firebasestorage.googleapis.com";class Hr extends Z.ZR{constructor(e,t){super(aP(e),`Firebase Storage: ${t} (${aP(e)})`),this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,Hr.prototype)}_codeEquals(e){return aP(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.message=this.customData.serverResponse?`${this._baseMessage}\n${this.customData.serverResponse}`:this._baseMessage}}function aP(n){return"storage/"+n}function cP(n){return new Hr("invalid-argument",n)}function dF(){return new Hr("app-deleted","The Firebase app was deleted.")}class bs{constructor(e,t){this.bucket=e,this.path_=t}get path(){return this.path_}get isRoot(){return 0===this.path.length}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,t){let r;try{r=bs.makeFromUrl(e,t)}catch(i){return new bs(e,"")}if(""===r.path)return r;throw function kz(n){return new Hr("invalid-default-bucket","Invalid default bucket '"+n+"'.")}(e)}static makeFromUrl(e,t){let r=null;const i="([A-Za-z0-9.\\-_]+)",h=new RegExp("^gs://"+i+"(/(.*))?$","i");function v(Rt){Rt.path_=decodeURIComponent(Rt.path)}const D=t.replace(/[.]/g,"\\."),Wt=[{regex:h,indices:{bucket:1,path:3},postModify:function a(Rt){"/"===Rt.path.charAt(Rt.path.length-1)&&(Rt.path_=Rt.path_.slice(0,-1))}},{regex:new RegExp(`^https?://${D}/v[A-Za-z0-9_]+/b/${i}/o(/([^?#]*).*)?$`,"i"),indices:{bucket:1,path:3},postModify:v},{regex:new RegExp(`^https?://${t===aF?"(?:storage.googleapis.com|storage.cloud.google.com)":t}/${i}/([^?#]*)`,"i"),indices:{bucket:1,path:2},postModify:v}];for(let Rt=0;Rt<Wt.length;Rt++){const En=Wt[Rt],Rr=En.regex.exec(e);if(Rr){let Vn=Rr[En.indices.path];Vn||(Vn=""),r=new bs(Rr[En.indices.bucket],Vn),En.postModify(r);break}}if(null==r)throw function Mz(n){return new Hr("invalid-url","Invalid URL '"+n+"'.")}(e);return r}}class Vz{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}function dP(n,e,t,r){if(r<e)throw cP(`Invalid value for '${n}'. Expected ${e} or greater.`);if(r>t)throw cP(`Invalid value for '${n}'. Expected ${t} or less.`)}var uh=(()=>(function(n){n[n.NO_ERROR=0]="NO_ERROR",n[n.NETWORK_ERROR=1]="NETWORK_ERROR",n[n.ABORT=2]="ABORT"}(uh||(uh={})),uh))();class zz{constructor(e,t,r,i,a,c,h,g,v,C,D){this.url_=e,this.method_=t,this.headers_=r,this.body_=i,this.successCodes_=a,this.additionalRetryCodes_=c,this.callback_=h,this.errorCallback_=g,this.timeout_=v,this.progressCallback_=C,this.connectionFactory_=D,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((x,k)=>{this.resolve_=x,this.reject_=k,this.start_()})}start_(){const t=(r,i)=>{const a=this.resolve_,c=this.reject_,h=i.connection;if(i.wasSuccessCode)try{const g=this.callback_(h,h.getResponse());!function $z(n){return void 0!==n}(g)?a():a(g)}catch(g){c(g)}else if(null!==h){const g=function uP(){return new Hr("unknown","An unknown error occurred, please check the error payload for server response.")}();g.serverResponse=h.getErrorText(),c(this.errorCallback_?this.errorCallback_(h,g):g)}else c(i.canceled?this.appDelete_?dF():function cF(){return new Hr("canceled","User canceled the upload/download.")}():function Nz(){return new Hr("retry-limit-exceeded","Max retry time for operation exceeded, please try again.")}())};this.canceled_?t(0,new IT(!1,null,!0)):this.backoffId_=function Bz(n,e,t){let r=1,i=null,a=null,c=!1,h=0;function g(){return 2===h}let v=!1;function C(...xe){v||(v=!0,e.apply(null,xe))}function D(xe){i=setTimeout(()=>{i=null,n(k,g())},xe)}function x(){a&&clearTimeout(a)}function k(xe,...bt){if(v)return void x();if(xe)return x(),void C.call(null,xe,...bt);if(g()||c)return x(),void C.call(null,xe,...bt);let Wt;r<64&&(r*=2),1===h?(h=2,Wt=0):Wt=1e3*(r+Math.random()),D(Wt)}let B=!1;function ge(xe){B||(B=!0,x(),!v&&(null!==i?(xe||(h=2),clearTimeout(i),D(0)):xe||(h=1)))}return D(0),a=setTimeout(()=>{c=!0,ge(!0)},t),ge}((r,i)=>{if(i)return void r(!1,new IT(!1,null,!0));const a=this.connectionFactory_();this.pendingConnection_=a;const c=h=>{null!==this.progressCallback_&&this.progressCallback_(h.loaded,h.lengthComputable?h.total:-1)};null!==this.progressCallback_&&a.addUploadProgressListener(c),a.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{null!==this.progressCallback_&&a.removeUploadProgressListener(c),this.pendingConnection_=null;const h=a.getErrorCode()===uh.NO_ERROR,g=a.getStatus();if(!h||this.isRetryStatusCode_(g)){const C=a.getErrorCode()===uh.ABORT;return void r(!1,new IT(!1,null,C))}const v=-1!==this.successCodes_.indexOf(g);r(!0,new IT(v,a))})},t,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,null!==this.backoffId_&&function jz(n){n(!1)}(this.backoffId_),null!==this.pendingConnection_&&this.pendingConnection_.abort()}isRetryStatusCode_(e){const t=e>=500&&e<600,i=-1!==[408,429].indexOf(e),a=-1!==this.additionalRetryCodes_.indexOf(e);return t||i||a}}class IT{constructor(e,t,r){this.wasSuccessCode=e,this.connection=t,this.canceled=!!r}}class Zp{constructor(e,t){this._service=e,this._location=t instanceof bs?t:bs.makeFromUrl(t,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,t){return new Zp(e,t)}get root(){const e=new bs(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return function yF(n){const e=n.lastIndexOf("/",n.length-2);return-1===e?n:n.slice(e+1)}(this._location.path)}get storage(){return this._service}get parent(){const e=function sG(n){if(0===n.length)return null;const e=n.lastIndexOf("/");return-1===e?"":n.slice(0,e)}(this._location.path);if(null===e)return null;const t=new bs(this._location.bucket,e);return new Zp(this._service,t)}_throwIfRoot(e){if(""===this._location.path)throw function Uz(n){return new Hr("invalid-root-operation","The operation '"+n+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}(e)}}function MF(n,e){const t=null==e?void 0:e.storageBucket;return null==t?null:bs.makeFromBucketSpec(t,n)}class yP{constructor(e,t,r,i,a){this.app=e,this._authProvider=t,this._appCheckProvider=r,this._url=i,this._firebaseVersion=a,this._bucket=null,this._host=aF,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=12e4,this._maxUploadRetryTime=6e5,this._requests=new Set,this._bucket=null!=i?bs.makeFromBucketSpec(i,this._host):MF(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._bucket=null!=this._url?bs.makeFromBucketSpec(this._url,e):MF(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){dP("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){dP("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}_getAuthToken(){var e=this;return(0,Ce.Z)(function*(){if(e._overrideAuthToken)return e._overrideAuthToken;const t=e._authProvider.getImmediate({optional:!0});if(t){const r=yield t.getToken();if(null!==r)return r.accessToken}return null})()}_getAppCheckToken(){var e=this;return(0,Ce.Z)(function*(){const t=e._appCheckProvider.getImmediate({optional:!0});return t?(yield t.getToken()).token:null})()}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new Zp(this,e)}_makeRequest(e,t,r,i){if(this._deleted)return new Vz(dF());{const a=function Yz(n,e,t,r,i,a){const c=function fF(n){const e=encodeURIComponent;let t="?";for(const r in n)n.hasOwnProperty(r)&&(t=t+(e(r)+"=")+e(n[r])+"&");return t=t.slice(0,-1),t}(n.urlParams),h=n.url+c,g=Object.assign({},n.headers);return function Kz(n,e){e&&(n["X-Firebase-GMPID"]=e)}(g,e),function Gz(n,e){null!==e&&e.length>0&&(n.Authorization="Firebase "+e)}(g,t),function qz(n,e){n["X-Firebase-Storage-Version"]="webjs/"+(null!=e?e:"AppManager")}(g,a),function Zz(n,e){null!==e&&(n["X-Firebase-AppCheck"]=e)}(g,r),new zz(h,n.method,g,n.body,n.successCodes,n.additionalRetryCodes,n.handler,n.errorHandler,n.timeout,n.progressCallback,i)}(e,this._appId,r,i,t,this._firebaseVersion);return this._requests.add(a),a.getPromise().then(()=>this._requests.delete(a),()=>this._requests.delete(a)),a}}makeRequestWithTokens(e,t){var r=this;return(0,Ce.Z)(function*(){const[i,a]=yield Promise.all([r._getAuthToken(),r._getAppCheckToken()]);return r._makeRequest(e,t,i,a).getPromise()})()}}const kF="@firebase/storage",FF="storage";function WG(n=(0,Nn.getApp)(),e){return n=(0,Z.m9)(n),(0,Nn._getProvider)(n,FF).getImmediate({identifier:e})}function zG(n,{instanceIdentifier:e}){const t=n.getProvider("app").getImmediate(),r=n.getProvider("auth-internal"),i=n.getProvider("app-check-internal");return new yP(t,r,i,e,Nn.SDK_VERSION)}!function GG(){(0,Nn._registerComponent)(new nu.wA(FF,zG,"PUBLIC").setMultipleInstances(!0)),(0,Nn.registerVersion)(kF,"0.9.2",""),(0,Nn.registerVersion)(kF,"0.9.2","esm2017")}();class vP{constructor(e){return e}}function ZG(n){return(e,t)=>{const r=e.runOutsideAngular(()=>n(t));return new vP(r)}}const eq=(0,lt.u3)(WG,!0);let tq=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=m.oAB({type:n}),n.\u0275inj=m.cJS({imports:[[Uu]]}),n})(),nq=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=m.oAB({type:n}),n.\u0275inj=m.cJS({imports:[[Uu]]}),n})(),rq=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=m.oAB({type:n}),n.\u0275inj=m.cJS({imports:[[Uu,yy]]}),n})();(function LU(n,...e){OU(n)})(()=>UU(kC_firebase)),function GB(n,...e){$B(n)}(()=>CB()),function EB(n,...e){mB(n),new m.FiY}(()=>IB()),function yH(n,...e){pH(n),new m.FiY,new m.FiY}(()=>vH()),function DH(n,...e){IH(n),new m.FiY,new m.FiY}(()=>SH()),function YH(n,...e){GH(n),new m.FiY,new m.FiY}(()=>QH()),function sW(n,...e){tW(n)}(()=>oW()),function pz(n,...e){lz(n)}(()=>gz()),function bz(n,...e){vz(n)}(()=>Cz()),function XG(n,...e){ZG(n),new m.FiY,new m.FiY}(()=>eq());let iq=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=m.oAB({type:n,bootstrap:[tB]}),n.\u0275inj=m.cJS({providers:[{provide:Ek,useValue:{baseUrl:"https://jsonplaceholder.typicode.com"}}],imports:[[zu,qV,[],HV,Os.hO.initializeApp(kC_firebase),tq,nq,rq]]}),n})();(0,m.G48)(),vh().bootstrapModule(iq).catch(n=>console.error(n))},6148:(nt,Ie,P)=>{"use strict";P.d(Ie,{IH:()=>Hn,Gb:()=>qt,Kz:()=>G,Iv:()=>rn});var m=P(5861),F=P(9681),N=P(1877),oe=P(2090),ye=P(4859);P(2833);const ae="analytics",de="firebase_id",V="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",Q="https://www.googletagmanager.com/gtag/js",Ve=new N.Yd("@firebase/analytics");function Me(ee){return Promise.all(ee.map(be=>be.catch(Be=>Be)))}function $e(ee,be){const Be=document.createElement("script");Be.src=`${Q}?l=${ee}&id=${be}`,Be.async=!0,document.head.appendChild(Be)}function q(ee,be,Be,ut,ot,tt){return se.apply(this,arguments)}function se(){return(se=(0,m.Z)(function*(ee,be,Be,ut,ot,tt){const At=ut[ot];try{if(At)yield be[At];else{const $=(yield Me(Be)).find(H=>H.measurementId===ot);$&&(yield be[$.appId])}}catch(J){Ve.error(J)}ee("config",ot,tt)})).apply(this,arguments)}function Le(ee,be,Be,ut,ot){return Ne.apply(this,arguments)}function Ne(){return(Ne=(0,m.Z)(function*(ee,be,Be,ut,ot){try{let tt=[];if(ot&&ot.send_to){let At=ot.send_to;Array.isArray(At)||(At=[At]);const J=yield Me(Be);for(const $ of At){const H=J.find(it=>it.measurementId===$),Re=H&&be[H.appId];if(!Re){tt=[];break}tt.push(Re)}}0===tt.length&&(tt=Object.values(be)),yield Promise.all(tt),ee("event",ut,ot||{})}catch(tt){Ve.error(tt)}})).apply(this,arguments)}function we(){const ee=window.document.getElementsByTagName("script");for(const be of Object.values(ee))if(be.src&&be.src.includes(Q))return be;return null}const X=new oe.LL("analytics","Analytics",{"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-intialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.'}),ue=new class me{constructor(be={},Be=1e3){this.throttleMetadata=be,this.intervalMillis=Be}getThrottleMetadata(be){return this.throttleMetadata[be]}setThrottleMetadata(be,Be){this.throttleMetadata[be]=Be}deleteThrottleMetadata(be){delete this.throttleMetadata[be]}};function pe(ee){return new Headers({Accept:"application/json","x-goog-api-key":ee})}function He(ee){return le.apply(this,arguments)}function le(){return(le=(0,m.Z)(function*(ee){var be;const{appId:Be,apiKey:ut}=ee,ot={method:"GET",headers:pe(ut)},tt=V.replace("{app-id}",Be),At=yield fetch(tt,ot);if(200!==At.status&&304!==At.status){let J="";try{const $=yield At.json();(null===(be=$.error)||void 0===be?void 0:be.message)&&(J=$.error.message)}catch($){}throw X.create("config-fetch-failed",{httpStatus:At.status,responseMessage:J})}return At.json()})).apply(this,arguments)}function Pt(ee){return Ht.apply(this,arguments)}function Ht(){return(Ht=(0,m.Z)(function*(ee,be=ue,Be){const{appId:ut,apiKey:ot,measurementId:tt}=ee.options;if(!ut)throw X.create("no-app-id");if(!ot){if(tt)return{measurementId:tt,appId:ut};throw X.create("no-api-key")}const At=be.getThrottleMetadata(ut)||{backoffCount:0,throttleEndTimeMillis:Date.now()},J=new In;return setTimeout((0,m.Z)(function*(){J.abort()}),void 0!==Be?Be:6e4),wn({appId:ut,apiKey:ot,measurementId:tt},At,J,be)})).apply(this,arguments)}function wn(ee,be,Be){return ct.apply(this,arguments)}function ct(){return(ct=(0,m.Z)(function*(ee,{throttleEndTimeMillis:be,backoffCount:Be},ut,ot=ue){const{appId:tt,measurementId:At}=ee;try{yield mt(ut,be)}catch(J){if(At)return Ve.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${At} provided in the "measurementId" field in the local Firebase config. [${J.message}]`),{appId:tt,measurementId:At};throw J}try{const J=yield He(ee);return ot.deleteThrottleMetadata(tt),J}catch(J){if(!Xt(J)){if(ot.deleteThrottleMetadata(tt),At)return Ve.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${At} provided in the "measurementId" field in the local Firebase config. [${J.message}]`),{appId:tt,measurementId:At};throw J}const $=503===Number(J.customData.httpStatus)?(0,oe.$s)(Be,ot.intervalMillis,30):(0,oe.$s)(Be,ot.intervalMillis),H={throttleEndTimeMillis:Date.now()+$,backoffCount:Be+1};return ot.setThrottleMetadata(tt,H),Ve.debug(`Calling attemptFetch again in ${$} millis`),wn(ee,H,ut,ot)}})).apply(this,arguments)}function mt(ee,be){return new Promise((Be,ut)=>{const ot=Math.max(be-Date.now(),0),tt=setTimeout(Be,ot);ee.addEventListener(()=>{clearTimeout(tt),ut(X.create("fetch-throttle",{throttleEndTimeMillis:be}))})})}function Xt(ee){if(!(ee instanceof oe.ZR&&ee.customData))return!1;const be=Number(ee.customData.httpStatus);return 429===be||500===be||503===be||504===be}class In{constructor(){this.listeners=[]}addEventListener(be){this.listeners.push(be)}abort(){this.listeners.forEach(be=>be())}}function qn(){return Gt.apply(this,arguments)}function Gt(){return(Gt=(0,m.Z)(function*(){if(!(0,oe.hl)())return Ve.warn(X.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;try{yield(0,oe.eu)()}catch(ee){return Ve.warn(X.create("indexeddb-unavailable",{errorInfo:ee}).message),!1}return!0})).apply(this,arguments)}function Ge(){return(Ge=(0,m.Z)(function*(ee,be,Be,ut,ot,tt,At){var J;const $=Pt(ee);$.then(Ot=>{Be[Ot.measurementId]=Ot.appId,ee.options.measurementId&&Ot.measurementId!==ee.options.measurementId&&Ve.warn(`The measurement ID in the local Firebase config (${ee.options.measurementId}) does not match the measurement ID fetched from the server (${Ot.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(Ot=>Ve.error(Ot)),be.push($);const H=qn().then(Ot=>{if(Ot)return ut.getId()}),[Re,it]=yield Promise.all([$,H]);we()||$e(tt,Re.measurementId),ot("js",new Date);const vt=null!==(J=null==At?void 0:At.config)&&void 0!==J?J:{};return vt.origin="firebase",vt.update=!0,null!=it&&(vt[de]=it),ot("config",Re.measurementId,vt),Re.measurementId})).apply(this,arguments)}class _t{constructor(be){this.app=be}_delete(){return delete yt[this.app.options.appId],Promise.resolve()}}let yt={},zt=[];const nn={};let On,An,en="dataLayer",Jn=!1;function ke(ee,be,Be){!function fe(){const ee=[];if((0,oe.ru)()&&ee.push("This is a browser extension environment."),(0,oe.zI)()||ee.push("Cookies are not available."),ee.length>0){const be=ee.map((ut,ot)=>`(${ot+1}) ${ut}`).join(" "),Be=X.create("invalid-analytics-context",{errorInfo:be});Ve.warn(Be.message)}}();const ut=ee.options.appId;if(!ut)throw X.create("no-app-id");if(!ee.options.apiKey){if(!ee.options.measurementId)throw X.create("no-api-key");Ve.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${ee.options.measurementId} provided in the "measurementId" field in the local Firebase config.`)}if(null!=yt[ut])throw X.create("already-exists",{id:ut});if(!Jn){!function Ue(ee){let be=[];Array.isArray(window[ee])?be=window[ee]:window[ee]=be}(en);const{wrappedGtag:tt,gtagCore:At}=function De(ee,be,Be,ut,ot){let tt=function(...At){window[ut].push(arguments)};return window[ot]&&"function"==typeof window[ot]&&(tt=window[ot]),window[ot]=function ce(ee,be,Be,ut){function tt(){return(tt=(0,m.Z)(function*(At,J,$){try{"event"===At?yield Le(ee,be,Be,J,$):"config"===At?yield q(ee,be,Be,ut,J,$):ee("set",J)}catch(H){Ve.error(H)}})).apply(this,arguments)}return function ot(At,J,$){return tt.apply(this,arguments)}}(tt,ee,be,Be),{gtagCore:tt,wrappedGtag:window[ot]}}(yt,zt,nn,en,"gtag");An=tt,On=At,Jn=!0}return yt[ut]=function Ut(ee,be,Be,ut,ot,tt,At){return Ge.apply(this,arguments)}(ee,zt,nn,be,On,en,Be),new _t(ee)}function Dt(){return(Dt=(0,m.Z)(function*(ee,be,Be,ut,ot){if(ot&&ot.global)ee("event",Be,ut);else{const tt=yield be;ee("event",Be,Object.assign(Object.assign({},ut),{send_to:tt}))}})).apply(this,arguments)}function Bt(){return(Bt=(0,m.Z)(function*(ee,be,Be,ut){if(ut&&ut.global)return ee("set",{user_id:Be}),Promise.resolve();ee("config",yield be,{update:!0,user_id:Be})})).apply(this,arguments)}function Hn(ee=(0,F.getApp)()){ee=(0,oe.m9)(ee);const be=(0,F._getProvider)(ee,ae);return be.isInitialized()?be.getImmediate():function Ur(ee,be={}){const Be=(0,F._getProvider)(ee,ae);if(Be.isInitialized()){const ot=Be.getImmediate();if((0,oe.vZ)(be,Be.getOptions()))return ot;throw X.create("already-initialized")}return Be.initialize({options:be})}(ee)}function qt(){return Xn.apply(this,arguments)}function Xn(){return(Xn=(0,m.Z)(function*(){if((0,oe.ru)()||!(0,oe.zI)()||!(0,oe.hl)())return!1;try{return yield(0,oe.eu)()}catch(ee){return!1}})).apply(this,arguments)}function rn(ee,be,Be){ee=(0,oe.m9)(ee),function Nt(ee,be,Be,ut){return Bt.apply(this,arguments)}(An,yt[ee.app.options.appId],be,Be).catch(ut=>Ve.error(ut))}function G(ee,be,Be,ut){ee=(0,oe.m9)(ee),function Ze(ee,be,Be,ut,ot){return Dt.apply(this,arguments)}(An,yt[ee.app.options.appId],be,Be,ut).catch(ot=>Ve.error(ot))}const Te="@firebase/analytics";!function at(){(0,F._registerComponent)(new ye.wA(ae,(be,{options:Be})=>ke(be.getProvider("app").getImmediate(),be.getProvider("installations-internal").getImmediate(),Be),"PUBLIC")),(0,F._registerComponent)(new ye.wA("analytics-internal",function ee(be){try{const Be=be.getProvider(ae).getImmediate();return{logEvent:(ut,ot,tt)=>G(Be,ut,ot,tt)}}catch(Be){throw X.create("interop-component-reg-failed",{reason:Be})}},"PRIVATE")),(0,F.registerVersion)(Te,"0.7.5"),(0,F.registerVersion)(Te,"0.7.5","esm2017")}()},5867:(nt,Ie,P)=>{"use strict";P.d(Ie,{Mq:()=>m.getApp,C6:()=>m.getApps,ZF:()=>m.initializeApp,KN:()=>m.registerVersion});var m=P(9681);(0,m.registerVersion)("firebase","9.6.7","app")},127:(nt,Ie,P)=>{"use strict";P.d(Ie,{Z:()=>m.Z});var m=P(3942);m.Z.registerVersion("firebase","9.6.7","app-compat")},5881:(nt,Ie,P)=>{"use strict";P.r(Ie);var m=P(5861),F=P(3942),N=P(4929),oe=P(2090),ae=(P(9681),P(1877),P(4859));function de(){return window}function V(){return(V=(0,m.Z)(function*(J,$,H){var Re;const{BuildInfo:it}=de();(0,N.ap)($.sessionId,"AuthEvent did not contain a session ID");const vt=yield se($.sessionId),Ot={};return(0,N.aq)()?Ot.ibi=it.packageName:(0,N.ar)()?Ot.apn=it.packageName:(0,N.as)(J,"operation-not-supported-in-this-environment"),it.displayName&&(Ot.appDisplayName=it.displayName),Ot.sessionId=vt,(0,N.at)(J,H,$.type,void 0,null!==(Re=$.eventId)&&void 0!==Re?Re:void 0,Ot)})).apply(this,arguments)}function Ve(){return(Ve=(0,m.Z)(function*(J){const{BuildInfo:$}=de(),H={};(0,N.aq)()?H.iosBundleId=$.packageName:(0,N.ar)()?H.androidPackageName=$.packageName:(0,N.as)(J,"operation-not-supported-in-this-environment"),yield(0,N.au)(J,H)})).apply(this,arguments)}function Ue(){return(Ue=(0,m.Z)(function*(J,$,H){const{cordova:Re}=de();let it=()=>{};try{yield new Promise((vt,Ot)=>{let cn=null;function sn(){var ln;vt();const mr=null===(ln=Re.plugins.browsertab)||void 0===ln?void 0:ln.close;"function"==typeof mr&&mr(),"function"==typeof(null==H?void 0:H.close)&&H.close()}function ar(){cn||(cn=window.setTimeout(()=>{Ot((0,N.av)(J,"redirect-cancelled-by-user"))},2e3))}function xr(){"visible"===(null==document?void 0:document.visibilityState)&&ar()}$.addPassiveListener(sn),document.addEventListener("resume",ar,!1),(0,N.ar)()&&document.addEventListener("visibilitychange",xr,!1),it=()=>{$.removePassiveListener(sn),document.removeEventListener("resume",ar,!1),document.removeEventListener("visibilitychange",xr,!1),cn&&window.clearTimeout(cn)}})}finally{it()}})).apply(this,arguments)}function se(J){return Le.apply(this,arguments)}function Le(){return(Le=(0,m.Z)(function*(J){const $=Ne(J),H=yield crypto.subtle.digest("SHA-256",$);return Array.from(new Uint8Array(H)).map(it=>it.toString(16).padStart(2,"0")).join("")})).apply(this,arguments)}function Ne(J){if((0,N.ap)(/[0-9a-zA-Z]+/.test(J),"Can only convert alpha-numeric strings"),"undefined"!=typeof TextEncoder)return(new TextEncoder).encode(J);const $=new ArrayBuffer(J.length),H=new Uint8Array($);for(let Re=0;Re<J.length;Re++)H[Re]=J.charCodeAt(Re);return H}class De extends N.az{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise($=>{this.resolveInialized=$})}addPassiveListener($){this.passiveListeners.add($)}removePassiveListener($){this.passiveListeners.delete($)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent($){return this.resolveInialized(),this.passiveListeners.forEach(H=>H($)),super.onEvent($)}initialized(){var $=this;return(0,m.Z)(function*(){yield $.initPromise})()}}function X(J){return ht.apply(this,arguments)}function ht(){return(ht=(0,m.Z)(function*(J){const $=yield ue()._get(pe(J));return $&&(yield ue()._remove(pe(J))),$})).apply(this,arguments)}function me(){const J=[],$="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let H=0;H<20;H++){const Re=Math.floor(Math.random()*$.length);J.push($.charAt(Re))}return J.join("")}function ue(){return(0,N.ax)(N.b)}function pe(J){return(0,N.ay)("authEvent",J.config.apiKey,J.name)}function Pt(J){if(!(null==J?void 0:J.includes("?")))return{};const[$,...H]=J.split("?");return(0,oe.zd)(H.join("?"))}function mt(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:(0,N.av)("no-auth-event")}}function Ut(){var J;return(null===(J=null==self?void 0:self.location)||void 0===J?void 0:J.protocol)||null}function _t(J=(0,oe.z$)()){return!("file:"!==Ut()&&"ionic:"!==Ut()||!J.toLowerCase().match(/iphone|ipad|ipod|android/))}function Sn(){try{const J=self.localStorage,$=N.aG();if(J)return J.setItem($,"1"),J.removeItem($),!function en(J=(0,oe.z$)()){return function zt(){return(0,oe.w1)()&&11===(null==document?void 0:document.documentMode)}()||function nn(J=(0,oe.z$)()){return/Edge\/\d+/.test(J)}(J)}()||(0,oe.hl)()}catch(J){return On()&&(0,oe.hl)()}return!1}function On(){return"undefined"!=typeof global&&"WorkerGlobalScope"in global&&"importScripts"in global}function An(){return(function Ge(){return"http:"===Ut()||"https:"===Ut()}()||(0,oe.ru)()||_t())&&!function yt(){return(0,oe.b$)()||(0,oe.UG)()}()&&Sn()&&!On()}function Jn(){return _t()&&"undefined"!=typeof document}function fe(){return(fe=(0,m.Z)(function*(){return!!Jn()&&new Promise(J=>{const $=setTimeout(()=>{J(!1)},1e3);document.addEventListener("deviceready",()=>{clearTimeout($),J(!0)})})})).apply(this,arguments)}const Ze={LOCAL:"local",NONE:"none",SESSION:"session"},Dt=N.aw,et="persistence";function Nt(J){return Bt.apply(this,arguments)}function Bt(){return(Bt=(0,m.Z)(function*(J){yield J._initializationPromise;const $=Et(),H=N.ay(et,J.config.apiKey,J.name);$&&$.setItem(H,J._getPersistence())})).apply(this,arguments)}function Et(){var J;try{return(null===(J=function ke(){return"undefined"!=typeof window?window:null}())||void 0===J?void 0:J.sessionStorage)||null}catch($){return null}}const ft=N.aw;class st{constructor(){this.browserResolver=N.ax(N.k),this.cordovaResolver=N.ax(class wn{constructor(){this._redirectPersistence=N.a,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=N.aA}_initialize($){var H=this;return(0,m.Z)(function*(){const Re=$._key();let it=H.eventManagers.get(Re);return it||(it=new De($),H.eventManagers.set(Re,it),H.attachCallbackListeners($,it)),it})()}_openPopup($){(0,N.as)($,"operation-not-supported-in-this-environment")}_openRedirect($,H,Re,it){var vt=this;return(0,m.Z)(function*(){!function q(J){var $,H,Re,it,vt,Ot,cn,sn,ar,xr;const ln=de();(0,N.aw)("function"==typeof(null===($=null==ln?void 0:ln.universalLinks)||void 0===$?void 0:$.subscribe),J,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),(0,N.aw)(void 0!==(null===(H=null==ln?void 0:ln.BuildInfo)||void 0===H?void 0:H.packageName),J,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),(0,N.aw)("function"==typeof(null===(vt=null===(it=null===(Re=null==ln?void 0:ln.cordova)||void 0===Re?void 0:Re.plugins)||void 0===it?void 0:it.browsertab)||void 0===vt?void 0:vt.openUrl),J,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),(0,N.aw)("function"==typeof(null===(sn=null===(cn=null===(Ot=null==ln?void 0:ln.cordova)||void 0===Ot?void 0:Ot.plugins)||void 0===cn?void 0:cn.browsertab)||void 0===sn?void 0:sn.isAvailable),J,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),(0,N.aw)("function"==typeof(null===(xr=null===(ar=null==ln?void 0:ln.cordova)||void 0===ar?void 0:ar.InAppBrowser)||void 0===xr?void 0:xr.open),J,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}($);const Ot=yield vt._initialize($);yield Ot.initialized(),Ot.resetRedirect(),(0,N.aB)(),yield vt._originValidation($);const cn=function we(J,$,H=null){return{type:$,eventId:H,urlResponse:null,sessionId:me(),postBody:null,tenantId:J.tenantId,error:(0,N.av)(J,"no-auth-event")}}($,Re,it);yield function Xe(J,$){return ue()._set(pe(J),$)}($,cn);const sn=yield function j(J,$,H){return V.apply(this,arguments)}($,cn,H),ar=yield function Me(J){const{cordova:$}=de();return new Promise(H=>{$.plugins.browsertab.isAvailable(Re=>{let it=null;Re?$.plugins.browsertab.openUrl(J):it=$.InAppBrowser.open(J,(0,N.ao)()?"_blank":"_system","location=yes"),H(it)})})}(sn);return function $e(J,$,H){return Ue.apply(this,arguments)}($,Ot,ar)})()}_isIframeWebStorageSupported($,H){throw new Error("Method not implemented.")}_originValidation($){const H=$._key();return this.originValidationPromises[H]||(this.originValidationPromises[H]=function Q(J){return Ve.apply(this,arguments)}($)),this.originValidationPromises[H]}attachCallbackListeners($,H){const{universalLinks:Re,handleOpenURL:it,BuildInfo:vt}=de(),Ot=setTimeout((0,m.Z)(function*(){yield X($),H.onEvent(mt())}),500),cn=function(){var xr=(0,m.Z)(function*(ln){clearTimeout(Ot);const mr=yield X($);let K=null;mr&&(null==ln?void 0:ln.url)&&(K=function Y(J,$){var H,Re;const it=function le(J){const $=Pt(J),H=$.link?decodeURIComponent($.link):void 0,Re=Pt(H).link,it=$.deep_link_id?decodeURIComponent($.deep_link_id):void 0;return Pt(it).link||it||Re||H||J}($);if(it.includes("/__/auth/callback")){const vt=Pt(it),Ot=vt.firebaseError?function He(J){try{return JSON.parse(J)}catch($){return null}}(decodeURIComponent(vt.firebaseError)):null,cn=null===(Re=null===(H=null==Ot?void 0:Ot.code)||void 0===H?void 0:H.split("auth/"))||void 0===Re?void 0:Re[1],sn=cn?(0,N.av)(cn):null;return sn?{type:J.type,eventId:J.eventId,tenantId:J.tenantId,error:sn,urlResponse:null,sessionId:null,postBody:null}:{type:J.type,eventId:J.eventId,tenantId:J.tenantId,sessionId:J.sessionId,urlResponse:it,postBody:null}}return null}(mr,ln.url)),H.onEvent(K||mt())});return function(mr){return xr.apply(this,arguments)}}();void 0!==Re&&"function"==typeof Re.subscribe&&Re.subscribe(null,cn);const sn=it,ar=`${vt.packageName.toLowerCase()}://`;de().handleOpenURL=function(){var xr=(0,m.Z)(function*(ln){if(ln.toLowerCase().startsWith(ar)&&cn({url:ln}),"function"==typeof sn)try{sn(ln)}catch(mr){console.error(mr)}});return function(ln){return xr.apply(this,arguments)}}()}}),this.underlyingResolver=null,this._redirectPersistence=N.a,this._completeRedirectFn=N.aA}_initialize($){var H=this;return(0,m.Z)(function*(){return yield H.selectUnderlyingResolver(),H.assertedUnderlyingResolver._initialize($)})()}_openPopup($,H,Re,it){var vt=this;return(0,m.Z)(function*(){return yield vt.selectUnderlyingResolver(),vt.assertedUnderlyingResolver._openPopup($,H,Re,it)})()}_openRedirect($,H,Re,it){var vt=this;return(0,m.Z)(function*(){return yield vt.selectUnderlyingResolver(),vt.assertedUnderlyingResolver._openRedirect($,H,Re,it)})()}_isIframeWebStorageSupported($,H){this.assertedUnderlyingResolver._isIframeWebStorageSupported($,H)}_originValidation($){return this.assertedUnderlyingResolver._originValidation($)}get _shouldInitProactively(){return Jn()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return ft(this.underlyingResolver,"internal-error"),this.underlyingResolver}selectUnderlyingResolver(){var $=this;return(0,m.Z)(function*(){if($.underlyingResolver)return;const H=yield function Pe(){return fe.apply(this,arguments)}();$.underlyingResolver=H?$.cordovaResolver:$.browserResolver})()}}function Hn(J){return J.unwrap()}function qt(J){return Tn(J)}function Tn(J){const{_tokenResponse:$}=J instanceof oe.ZR?J.customData:J;if(!$)return null;if(!(J instanceof oe.ZR)&&"temporaryProof"in $&&"phoneNumber"in $)return N.P.credentialFromResult(J);const H=$.providerId;if(!H||H===N.o.PASSWORD)return null;let Re;switch(H){case N.o.GOOGLE:Re=N.N;break;case N.o.FACEBOOK:Re=N.M;break;case N.o.GITHUB:Re=N.Q;break;case N.o.TWITTER:Re=N.V;break;default:const{oauthIdToken:it,oauthAccessToken:vt,oauthTokenSecret:Ot,pendingToken:cn,nonce:sn}=$;return vt||Ot||it||cn?cn?H.startsWith("saml.")?N.aJ._create(H,cn):N.I._fromParams({providerId:H,signInMethod:H,pendingToken:cn,idToken:it,accessToken:vt}):new N.T(H).credential({idToken:it,accessToken:vt,rawNonce:sn}):null}return J instanceof oe.ZR?Re.credentialFromError(J):Re.credentialFromResult(J)}function rn(J,$){return $.catch(H=>{throw H instanceof oe.ZR&&function Xn(J,$){var H;const Re=null===(H=$.customData)||void 0===H?void 0:H._tokenResponse;if("auth/multi-factor-auth-required"===$.code)$.resolver=new G(J,N.am(J,$));else if(Re){const it=Tn($),vt=$;it&&(vt.credential=it,vt.tenantId=Re.tenantId||void 0,vt.email=Re.email||void 0,vt.phoneNumber=Re.phoneNumber||void 0)}}(J,H),H}).then(H=>{const it=H.user;return{operationType:H.operationType,credential:qt(H),additionalUserInfo:N.ak(H),user:Te.getOrCreate(it)}})}function L(J,$){return z.apply(this,arguments)}function z(){return(z=(0,m.Z)(function*(J,$){const H=yield $;return{verificationId:H.verificationId,confirm:Re=>rn(J,H.confirm(Re))}})).apply(this,arguments)}class G{constructor($,H){this.resolver=H,this.auth=function Ur(J){return J.wrapped()}($)}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn($){return rn(Hn(this.auth),this.resolver.resolveSignIn($))}}class Te{constructor($){this._delegate=$,this.multiFactor=N.an($)}static getOrCreate($){return Te.USER_MAP.has($)||Te.USER_MAP.set($,new Te($)),Te.USER_MAP.get($)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult($){return this._delegate.getIdTokenResult($)}getIdToken($){return this._delegate.getIdToken($)}linkAndRetrieveDataWithCredential($){return this.linkWithCredential($)}linkWithCredential($){var H=this;return(0,m.Z)(function*(){return rn(H.auth,N.Y(H._delegate,$))})()}linkWithPhoneNumber($,H){var Re=this;return(0,m.Z)(function*(){return L(Re.auth,N.l(Re._delegate,$,H))})()}linkWithPopup($){var H=this;return(0,m.Z)(function*(){return rn(H.auth,N.d(H._delegate,$,st))})()}linkWithRedirect($){var H=this;return(0,m.Z)(function*(){return yield Nt(N.aC(H.auth)),N.g(H._delegate,$,st)})()}reauthenticateAndRetrieveDataWithCredential($){return this.reauthenticateWithCredential($)}reauthenticateWithCredential($){var H=this;return(0,m.Z)(function*(){return rn(H.auth,N.Z(H._delegate,$))})()}reauthenticateWithPhoneNumber($,H){return L(this.auth,N.r(this._delegate,$,H))}reauthenticateWithPopup($){return rn(this.auth,N.e(this._delegate,$,st))}reauthenticateWithRedirect($){var H=this;return(0,m.Z)(function*(){return yield Nt(N.aC(H.auth)),N.h(H._delegate,$,st)})()}sendEmailVerification($){return N.aa(this._delegate,$)}unlink($){var H=this;return(0,m.Z)(function*(){return yield N.aj(H._delegate,$),H})()}updateEmail($){return N.af(this._delegate,$)}updatePassword($){return N.ag(this._delegate,$)}updatePhoneNumber($){return N.u(this._delegate,$)}updateProfile($){return N.ae(this._delegate,$)}verifyBeforeUpdateEmail($,H){return N.ab(this._delegate,$,H)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}}Te.USER_MAP=new WeakMap;const re=N.aw;let at=(()=>{class J{constructor(H,Re){if(this.app=H,Re.isInitialized())return this._delegate=Re.getImmediate(),void this.linkUnderlyingAuth();const{apiKey:it}=H.options;re(it,"invalid-api-key",{appName:H.name}),re(it,"invalid-api-key",{appName:H.name});const vt="undefined"!=typeof window?st:void 0;this._delegate=Re.initialize({options:{persistence:be(it,H.name),popupRedirectResolver:vt}}),this._delegate._updateErrorMap(N.z),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?Te.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(H){this._delegate.languageCode=H}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(H){this._delegate.tenantId=H}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(H,Re){N.E(this._delegate,H,Re)}applyActionCode(H){return N.a1(this._delegate,H)}checkActionCode(H){return N.a2(this._delegate,H)}confirmPasswordReset(H,Re){return N.a0(this._delegate,H,Re)}createUserWithEmailAndPassword(H,Re){var it=this;return(0,m.Z)(function*(){return rn(it._delegate,N.a4(it._delegate,H,Re))})()}fetchProvidersForEmail(H){return this.fetchSignInMethodsForEmail(H)}fetchSignInMethodsForEmail(H){return N.a9(this._delegate,H)}isSignInWithEmailLink(H){return N.a7(this._delegate,H)}getRedirectResult(){var H=this;return(0,m.Z)(function*(){re(An(),H._delegate,"operation-not-supported-in-this-environment");const Re=yield N.j(H._delegate,st);return Re?rn(H._delegate,Promise.resolve(Re)):{credential:null,user:null}})()}addFrameworkForLogging(H){!function Xt(J,$){(0,N.aC)(J)._logFramework($)}(this._delegate,H)}onAuthStateChanged(H,Re,it){const{next:vt,error:Ot,complete:cn}=ee(H,Re,it);return this._delegate.onAuthStateChanged(vt,Ot,cn)}onIdTokenChanged(H,Re,it){const{next:vt,error:Ot,complete:cn}=ee(H,Re,it);return this._delegate.onIdTokenChanged(vt,Ot,cn)}sendSignInLinkToEmail(H,Re){return N.a6(this._delegate,H,Re)}sendPasswordResetEmail(H,Re){return N.$(this._delegate,H,Re||void 0)}setPersistence(H){var Re=this;return(0,m.Z)(function*(){let it;switch(function rt(J,$){Dt(Object.values(Ze).includes($),J,"invalid-persistence-type"),(0,oe.b$)()?Dt($!==Ze.SESSION,J,"unsupported-persistence-type"):(0,oe.UG)()?Dt($===Ze.NONE,J,"unsupported-persistence-type"):On()?Dt($===Ze.NONE||$===Ze.LOCAL&&(0,oe.hl)(),J,"unsupported-persistence-type"):Dt($===Ze.NONE||Sn(),J,"unsupported-persistence-type")}(Re._delegate,H),H){case Ze.SESSION:it=N.a;break;case Ze.LOCAL:it=(yield N.ax(N.i)._isAvailable())?N.i:N.b;break;case Ze.NONE:it=N.K;break;default:return N.as("argument-error",{appName:Re._delegate.name})}return Re._delegate.setPersistence(it)})()}signInAndRetrieveDataWithCredential(H){return this.signInWithCredential(H)}signInAnonymously(){return rn(this._delegate,N.W(this._delegate))}signInWithCredential(H){return rn(this._delegate,N.X(this._delegate,H))}signInWithCustomToken(H){return rn(this._delegate,N._(this._delegate,H))}signInWithEmailAndPassword(H,Re){return rn(this._delegate,N.a5(this._delegate,H,Re))}signInWithEmailLink(H,Re){return rn(this._delegate,N.a8(this._delegate,H,Re))}signInWithPhoneNumber(H,Re){return L(this._delegate,N.s(this._delegate,H,Re))}signInWithPopup(H){var Re=this;return(0,m.Z)(function*(){return re(An(),Re._delegate,"operation-not-supported-in-this-environment"),rn(Re._delegate,N.c(Re._delegate,H,st))})()}signInWithRedirect(H){var Re=this;return(0,m.Z)(function*(){return re(An(),Re._delegate,"operation-not-supported-in-this-environment"),yield Nt(Re._delegate),N.f(Re._delegate,H,st)})()}updateCurrentUser(H){return this._delegate.updateCurrentUser(H)}verifyPasswordResetCode(H){return N.a3(this._delegate,H)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}return J.Persistence=Ze,J})();function ee(J,$,H){let Re=J;"function"!=typeof J&&({next:Re,error:$,complete:H}=J);const it=Re;return{next:Ot=>it(Ot&&Te.getOrCreate(Ot)),error:$,complete:H}}function be(J,$){const H=function Yt(J,$){const H=Et();if(!H)return[];const Re=N.ay(et,J,$);switch(H.getItem(Re)){case Ze.NONE:return[N.K];case Ze.LOCAL:return[N.i,N.a];case Ze.SESSION:return[N.a];default:return[]}}(J,$);if("undefined"!=typeof self&&!H.includes(N.i)&&H.push(N.i),"undefined"!=typeof window)for(const Re of[N.b,N.a])H.includes(Re)||H.push(Re);return H.includes(N.K)||H.push(N.K),H}class Be{constructor(){this.providerId="phone",this._delegate=new N.P(Hn(F.Z.auth()))}static credential($,H){return N.P.credential($,H)}verifyPhoneNumber($,H){return this._delegate.verifyPhoneNumber($,H)}unwrap(){return this._delegate}}Be.PHONE_SIGN_IN_METHOD=N.P.PHONE_SIGN_IN_METHOD,Be.PROVIDER_ID=N.P.PROVIDER_ID;const ut=N.aw;class ot{constructor($,H,Re=F.Z.app()){var it;ut(null===(it=Re.options)||void 0===it?void 0:it.apiKey,"invalid-api-key",{appName:Re.name}),this._delegate=new N.R($,H,Re.auth()),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}!function At(J){J.INTERNAL.registerComponent(new ae.wA("auth-compat",$=>{const H=$.getProvider("app-compat").getImmediate(),Re=$.getProvider("auth");return new at(H,Re)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:N.A.EMAIL_SIGNIN,PASSWORD_RESET:N.A.PASSWORD_RESET,RECOVER_EMAIL:N.A.RECOVER_EMAIL,REVERT_SECOND_FACTOR_ADDITION:N.A.REVERT_SECOND_FACTOR_ADDITION,VERIFY_AND_CHANGE_EMAIL:N.A.VERIFY_AND_CHANGE_EMAIL,VERIFY_EMAIL:N.A.VERIFY_EMAIL}},EmailAuthProvider:N.L,FacebookAuthProvider:N.M,GithubAuthProvider:N.Q,GoogleAuthProvider:N.N,OAuthProvider:N.T,SAMLAuthProvider:N.U,PhoneAuthProvider:Be,PhoneMultiFactorGenerator:N.m,RecaptchaVerifier:ot,TwitterAuthProvider:N.V,Auth:at,AuthCredential:N.G,Error:oe.ZR}).setInstantiationMode("LAZY").setMultipleInstances(!1)),J.registerVersion("@firebase/auth-compat","0.2.9")}(F.Z)},2375:(nt,Ie,P)=>{"use strict";P.d(Ie,{KL:()=>sn,Gb:()=>Re});var m=P(5861),N=(P(2833),P(4859)),oe=P(2940),ye=P(2090),Ee=P(9681);const ae="/firebase-messaging-sw.js",de="/firebase-cloud-messaging-push-scope",_e="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",V="google.c.a.c_id",Q="google.c.a.c_l",Ve="google.c.a.ts",Me="google.c.a.e";var Ue=(()=>{return(K=Ue||(Ue={})).PUSH_RECEIVED="push-received",K.NOTIFICATION_CLICKED="notification-clicked",Ue;var K})();function q(K){const he=new Uint8Array(K);return btoa(String.fromCharCode(...he)).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function se(K){const gt=(K+"=".repeat((4-K.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),Ye=atob(gt),Oe=new Uint8Array(Ye.length);for(let U=0;U<Ye.length;++U)Oe[U]=Ye.charCodeAt(U);return Oe}const Le="fcm_token_details_db",ce="fcm_token_object_Store";function De(K){return we.apply(this,arguments)}function we(){return we=(0,m.Z)(function*(K){if("databases"in indexedDB&&!(yield indexedDB.databases()).map(U=>U.name).includes(Le))return null;let he=null;return(yield(0,oe.openDb)(Le,5,function(){var Ye=(0,m.Z)(function*(Oe){var U;if(Oe.oldVersion<2||!Oe.objectStoreNames.contains(ce))return;const ie=Oe.transaction.objectStore(ce),je=yield ie.index("fcmSenderId").get(K);if(yield ie.clear(),je)if(2===Oe.oldVersion){const Qe=je;if(!Qe.auth||!Qe.p256dh||!Qe.endpoint)return;he={token:Qe.fcmToken,createTime:null!==(U=Qe.createTime)&&void 0!==U?U:Date.now(),subscriptionOptions:{auth:Qe.auth,p256dh:Qe.p256dh,endpoint:Qe.endpoint,swScope:Qe.swScope,vapidKey:"string"==typeof Qe.vapidKey?Qe.vapidKey:q(Qe.vapidKey)}}}else if(3===Oe.oldVersion){const Qe=je;he={token:Qe.fcmToken,createTime:Qe.createTime,subscriptionOptions:{auth:q(Qe.auth),p256dh:q(Qe.p256dh),endpoint:Qe.endpoint,swScope:Qe.swScope,vapidKey:q(Qe.vapidKey)}}}else if(4===Oe.oldVersion){const Qe=je;he={token:Qe.fcmToken,createTime:Qe.createTime,subscriptionOptions:{auth:q(Qe.auth),p256dh:q(Qe.p256dh),endpoint:Qe.endpoint,swScope:Qe.swScope,vapidKey:q(Qe.vapidKey)}}}});return function(Oe){return Ye.apply(this,arguments)}}())).close(),yield(0,oe.deleteDb)(Le),yield(0,oe.deleteDb)("fcm_vapid_details_db"),yield(0,oe.deleteDb)("undefined"),Xe(he)?he:null}),we.apply(this,arguments)}function Xe(K){if(!K||!K.subscriptionOptions)return!1;const{subscriptionOptions:he}=K;return"number"==typeof K.createTime&&K.createTime>0&&"string"==typeof K.token&&K.token.length>0&&"string"==typeof he.auth&&he.auth.length>0&&"string"==typeof he.p256dh&&he.p256dh.length>0&&"string"==typeof he.endpoint&&he.endpoint.length>0&&"string"==typeof he.swScope&&he.swScope.length>0&&"string"==typeof he.vapidKey&&he.vapidKey.length>0}const Y="firebase-messaging-store";let me=null;function ue(){return me||(me=(0,oe.openDb)("firebase-messaging-database",1,K=>{0===K.oldVersion&&K.createObjectStore(Y)})),me}function pe(K){return He.apply(this,arguments)}function He(){return(He=(0,m.Z)(function*(K){const he=ct(K),Ye=yield(yield ue()).transaction(Y).objectStore(Y).get(he);if(Ye)return Ye;{const Oe=yield De(K.appConfig.senderId);if(Oe)return yield le(K,Oe),Oe}})).apply(this,arguments)}function le(K,he){return Pt.apply(this,arguments)}function Pt(){return(Pt=(0,m.Z)(function*(K,he){const gt=ct(K),Oe=(yield ue()).transaction(Y,"readwrite");return yield Oe.objectStore(Y).put(he,gt),yield Oe.complete,he})).apply(this,arguments)}function Ht(K){return wn.apply(this,arguments)}function wn(){return(wn=(0,m.Z)(function*(K){const he=ct(K),Ye=(yield ue()).transaction(Y,"readwrite");yield Ye.objectStore(Y).delete(he),yield Ye.complete})).apply(this,arguments)}function ct({appConfig:K}){return K.appId}const Xt=new ye.LL("messaging","Messaging",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"only-available-in-window":"This method is available in a Window context.","only-available-in-sw":"This method is available in a service worker context.","permission-default":"The notification permission was not granted and dismissed instead.","permission-blocked":"The notification permission was not granted and blocked instead.","unsupported-browser":"This browser doesn't support the API's required to use the Firebase SDK.","indexed-db-unsupported":"This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)","failed-service-worker-registration":"We are unable to register the default service worker. {$browserErrorMessage}","token-subscribe-failed":"A problem occurred while subscribing the user to FCM: {$errorInfo}","token-subscribe-no-token":"FCM returned no token when subscribing the user to push.","token-unsubscribe-failed":"A problem occurred while unsubscribing the user from FCM: {$errorInfo}","token-update-failed":"A problem occurred while updating the user from FCM: {$errorInfo}","token-update-no-token":"FCM returned no token when updating the user to push.","use-sw-after-get-token":"The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.","invalid-sw-registration":"The input to useServiceWorker() must be a ServiceWorkerRegistration.","invalid-bg-handler":"The input to setBackgroundMessageHandler() must be a function.","invalid-vapid-key":"The public VAPID key must be a string.","use-vapid-key-after-get-token":"The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used."});function In(K,he){return qn.apply(this,arguments)}function qn(){return(qn=(0,m.Z)(function*(K,he){const gt=yield zt(K),Ye=en(he),Oe={method:"POST",headers:gt,body:JSON.stringify(Ye)};let U;try{U=yield(yield fetch(yt(K.appConfig),Oe)).json()}catch(ie){throw Xt.create("token-subscribe-failed",{errorInfo:ie})}if(U.error)throw Xt.create("token-subscribe-failed",{errorInfo:U.error.message});if(!U.token)throw Xt.create("token-subscribe-no-token");return U.token})).apply(this,arguments)}function Gt(K,he){return Ut.apply(this,arguments)}function Ut(){return(Ut=(0,m.Z)(function*(K,he){const gt=yield zt(K),Ye=en(he.subscriptionOptions),Oe={method:"PATCH",headers:gt,body:JSON.stringify(Ye)};let U;try{U=yield(yield fetch(`${yt(K.appConfig)}/${he.token}`,Oe)).json()}catch(ie){throw Xt.create("token-update-failed",{errorInfo:ie})}if(U.error)throw Xt.create("token-update-failed",{errorInfo:U.error.message});if(!U.token)throw Xt.create("token-update-no-token");return U.token})).apply(this,arguments)}function Ge(K,he){return _t.apply(this,arguments)}function _t(){return(_t=(0,m.Z)(function*(K,he){const Ye={method:"DELETE",headers:yield zt(K)};try{const U=yield(yield fetch(`${yt(K.appConfig)}/${he}`,Ye)).json();if(U.error)throw Xt.create("token-unsubscribe-failed",{errorInfo:U.error.message})}catch(Oe){throw Xt.create("token-unsubscribe-failed",{errorInfo:Oe})}})).apply(this,arguments)}function yt({projectId:K}){return`https://fcmregistrations.googleapis.com/v1/projects/${K}/registrations`}function zt(K){return nn.apply(this,arguments)}function nn(){return(nn=(0,m.Z)(function*({appConfig:K,installations:he}){const gt=yield he.getToken();return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":K.apiKey,"x-goog-firebase-installations-auth":`FIS ${gt}`})})).apply(this,arguments)}function en({p256dh:K,auth:he,endpoint:gt,vapidKey:Ye}){const Oe={web:{endpoint:gt,auth:he,p256dh:K}};return Ye!==_e&&(Oe.web.applicationPubKey=Ye),Oe}const Sn=6048e5;function On(K){return An.apply(this,arguments)}function An(){return(An=(0,m.Z)(function*(K){const he=yield et(K.swRegistration,K.vapidKey),gt={vapidKey:K.vapidKey,swScope:K.swRegistration.scope,endpoint:he.endpoint,auth:q(he.getKey("auth")),p256dh:q(he.getKey("p256dh"))},Ye=yield pe(K.firebaseDependencies);if(Ye){if(Nt(Ye.subscriptionOptions,gt))return Date.now()>=Ye.createTime+Sn?fe(K,{token:Ye.token,createTime:Date.now(),subscriptionOptions:gt}):Ye.token;try{yield Ge(K.firebaseDependencies,Ye.token)}catch(Oe){console.warn(Oe)}return Ze(K.firebaseDependencies,gt)}return Ze(K.firebaseDependencies,gt)})).apply(this,arguments)}function Jn(K){return Pe.apply(this,arguments)}function Pe(){return(Pe=(0,m.Z)(function*(K){const he=yield pe(K.firebaseDependencies);he&&(yield Ge(K.firebaseDependencies,he.token),yield Ht(K.firebaseDependencies));const gt=yield K.swRegistration.pushManager.getSubscription();return!gt||gt.unsubscribe()})).apply(this,arguments)}function fe(K,he){return ke.apply(this,arguments)}function ke(){return(ke=(0,m.Z)(function*(K,he){try{const gt=yield Gt(K.firebaseDependencies,he),Ye=Object.assign(Object.assign({},he),{token:gt,createTime:Date.now()});return yield le(K.firebaseDependencies,Ye),gt}catch(gt){throw yield Jn(K),gt}})).apply(this,arguments)}function Ze(K,he){return Dt.apply(this,arguments)}function Dt(){return(Dt=(0,m.Z)(function*(K,he){const Ye={token:yield In(K,he),createTime:Date.now(),subscriptionOptions:he};return yield le(K,Ye),Ye.token})).apply(this,arguments)}function et(K,he){return rt.apply(this,arguments)}function rt(){return(rt=(0,m.Z)(function*(K,he){return(yield K.pushManager.getSubscription())||K.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:se(he)})})).apply(this,arguments)}function Nt(K,he){return he.vapidKey===K.vapidKey&&he.endpoint===K.endpoint&&he.auth===K.auth&&he.p256dh===K.p256dh}function Bt(K){const he={from:K.from,collapseKey:K.collapse_key,messageId:K.fcmMessageId};return function Yt(K,he){if(!he.notification)return;K.notification={};const gt=he.notification.title;gt&&(K.notification.title=gt);const Ye=he.notification.body;Ye&&(K.notification.body=Ye);const Oe=he.notification.image;Oe&&(K.notification.image=Oe)}(he,K),function Et(K,he){!he.data||(K.data=he.data)}(he,K),function ft(K,he){if(!he.fcmOptions)return;K.fcmOptions={};const gt=he.fcmOptions.link;gt&&(K.fcmOptions.link=gt);const Ye=he.fcmOptions.analytics_label;Ye&&(K.fcmOptions.analyticsLabel=Ye)}(he,K),he}function st(K){return"object"==typeof K&&!!K&&V in K}function Hn(K,he){const gt=[];for(let Ye=0;Ye<K.length;Ye++)gt.push(K.charAt(Ye)),Ye<he.length&&gt.push(he.charAt(Ye));return gt.join("")}function qt(K){return Xt.create("missing-app-config-values",{valueName:K})}Hn("hts/frbslgigp.ogepscmv/ieo/eaylg","tp:/ieaeogn-agolai.o/1frlglgc/o"),Hn("AzSCbw63g1R0nCw85jG8","Iaya3yLKwmgvh7cF0q4");class Xn{constructor(he,gt,Ye){this.deliveryMetricsExportedToBigQueryEnabled=!1,this.onBackgroundMessageHandler=null,this.onMessageHandler=null,this.logEvents=[],this.isLogServiceStarted=!1;const Oe=function Ur(K){if(!K||!K.options)throw qt("App Configuration Object");if(!K.name)throw qt("App Name");const he=["projectId","apiKey","appId","messagingSenderId"],{options:gt}=K;for(const Ye of he)if(!gt[Ye])throw qt(Ye);return{appName:K.name,projectId:gt.projectId,apiKey:gt.apiKey,appId:gt.appId,senderId:gt.messagingSenderId}}(he);this.firebaseDependencies={app:he,appConfig:Oe,installations:gt,analyticsProvider:Ye}}_delete(){return Promise.resolve()}}function Tn(K){return rn.apply(this,arguments)}function rn(){return(rn=(0,m.Z)(function*(K){try{K.swRegistration=yield navigator.serviceWorker.register(ae,{scope:de}),K.swRegistration.update().catch(()=>{})}catch(he){throw Xt.create("failed-service-worker-registration",{browserErrorMessage:he.message})}})).apply(this,arguments)}function L(K,he){return z.apply(this,arguments)}function z(){return(z=(0,m.Z)(function*(K,he){if(!he&&!K.swRegistration&&(yield Tn(K)),he||!K.swRegistration){if(!(he instanceof ServiceWorkerRegistration))throw Xt.create("invalid-sw-registration");K.swRegistration=he}})).apply(this,arguments)}function G(K,he){return Te.apply(this,arguments)}function Te(){return(Te=(0,m.Z)(function*(K,he){he?K.vapidKey=he:K.vapidKey||(K.vapidKey=_e)})).apply(this,arguments)}function at(){return(at=(0,m.Z)(function*(K,he){if(!navigator)throw Xt.create("only-available-in-window");if("default"===Notification.permission&&(yield Notification.requestPermission()),"granted"!==Notification.permission)throw Xt.create("permission-blocked");return yield G(K,null==he?void 0:he.vapidKey),yield L(K,null==he?void 0:he.serviceWorkerRegistration),On(K)})).apply(this,arguments)}function ee(K,he,gt){return be.apply(this,arguments)}function be(){return(be=(0,m.Z)(function*(K,he,gt){const Ye=Be(he);(yield K.firebaseDependencies.analyticsProvider.get()).logEvent(Ye,{message_id:gt[V],message_name:gt[Q],message_time:gt[Ve],message_device_time:Math.floor(Date.now()/1e3)})})).apply(this,arguments)}function Be(K){switch(K){case Ue.NOTIFICATION_CLICKED:return"notification_open";case Ue.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}function ot(){return(ot=(0,m.Z)(function*(K,he){const gt=he.data;if(!gt.isFirebaseMessaging)return;K.onMessageHandler&&gt.messageType===Ue.PUSH_RECEIVED&&("function"==typeof K.onMessageHandler?K.onMessageHandler(Bt(gt)):K.onMessageHandler.next(Bt(gt)));const Ye=gt.data;st(Ye)&&"1"===Ye[Me]&&(yield ee(K,gt.messageType,Ye))})).apply(this,arguments)}const tt="@firebase/messaging",J=K=>{const he=new Xn(K.getProvider("app").getImmediate(),K.getProvider("installations-internal").getImmediate(),K.getProvider("analytics-internal"));return navigator.serviceWorker.addEventListener("message",gt=>function ut(K,he){return ot.apply(this,arguments)}(he,gt)),he},$=K=>{const he=K.getProvider("messaging").getImmediate();return{getToken:Ye=>function re(K,he){return at.apply(this,arguments)}(he,Ye)}};function Re(){return it.apply(this,arguments)}function it(){return(it=(0,m.Z)(function*(){try{yield(0,ye.eu)()}catch(K){return!1}return"undefined"!=typeof window&&(0,ye.hl)()&&(0,ye.zI)()&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")})).apply(this,arguments)}function sn(K=(0,Ee.getApp)()){return Re().then(he=>{if(!he)throw Xt.create("unsupported-browser")},he=>{throw Xt.create("indexed-db-unsupported")}),(0,Ee._getProvider)((0,ye.m9)(K),"messaging").getImmediate()}!function H(){(0,Ee._registerComponent)(new N.wA("messaging",J,"PUBLIC")),(0,Ee._registerComponent)(new N.wA("messaging-internal",$,"PRIVATE")),(0,Ee.registerVersion)(tt,"0.9.8"),(0,Ee.registerVersion)(tt,"0.9.8","esm2017")}()},3226:(nt,Ie,P)=>{"use strict";P.d(Ie,{sN:()=>Le,Gb:()=>An});var m=P(5861),F=P(9681),N=P(2090),oe=P(4859),ye=P(1877);P(2833);const ae="@firebase/remote-config",j="remote-config",Q=new N.LL("remoteconfig","Remote Config",{"registration-window":"Undefined window object. This SDK only supports usage in a browser environment.","registration-project-id":"Undefined project identifier. Check Firebase app initialization.","registration-api-key":"Undefined API key. Check Firebase app initialization.","registration-app-id":"Undefined app identifier. Check Firebase app initialization.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}.","fetch-client-network":"Fetch client failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-timeout":'The config fetch request timed out.  Configure timeout using "fetchTimeoutMillis" SDK setting.',"fetch-throttle":'The config fetch request timed out while in an exponential backoff state. Configure timeout using "fetchTimeoutMillis" SDK setting. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.',"fetch-client-parse":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","indexed-db-unavailable":"Indexed DB is not supported by current browser"});function Le(Pe=(0,F.getApp)()){return Pe=(0,N.m9)(Pe),(0,F._getProvider)(Pe,j).getImmediate()}class le{constructor(fe,ke,Ze,Dt){this.client=fe,this.storage=ke,this.storageCache=Ze,this.logger=Dt}isCachedDataFresh(fe,ke){if(!ke)return this.logger.debug("Config fetch cache check. Cache unpopulated."),!1;const Ze=Date.now()-ke,Dt=Ze<=fe;return this.logger.debug(`Config fetch cache check. Cache age millis: ${Ze}. Cache max age millis (minimumFetchIntervalMillis setting): ${fe}. Is cache hit: ${Dt}.`),Dt}fetch(fe){var ke=this;return(0,m.Z)(function*(){const[Ze,Dt]=yield Promise.all([ke.storage.getLastSuccessfulFetchTimestampMillis(),ke.storage.getLastSuccessfulFetchResponse()]);if(Dt&&ke.isCachedDataFresh(fe.cacheMaxAgeMillis,Ze))return Dt;fe.eTag=Dt&&Dt.eTag;const et=yield ke.client.fetch(fe),rt=[ke.storageCache.setLastSuccessfulFetchTimestampMillis(Date.now())];return 200===et.status&&rt.push(ke.storage.setLastSuccessfulFetchResponse(et)),yield Promise.all(rt),et})()}}function Pt(Pe=navigator){return Pe.languages&&Pe.languages[0]||Pe.language}class Ht{constructor(fe,ke,Ze,Dt,et,rt){this.firebaseInstallations=fe,this.sdkVersion=ke,this.namespace=Ze,this.projectId=Dt,this.apiKey=et,this.appId=rt}fetch(fe){var ke=this;return(0,m.Z)(function*(){const[Ze,Dt]=yield Promise.all([ke.firebaseInstallations.getId(),ke.firebaseInstallations.getToken()]),rt=`${window.FIREBASE_REMOTE_CONFIG_URL_BASE||"https://firebaseremoteconfig.googleapis.com"}/v1/projects/${ke.projectId}/namespaces/${ke.namespace}:fetch?key=${ke.apiKey}`,Nt={"Content-Type":"application/json","Content-Encoding":"gzip","If-None-Match":fe.eTag||"*"},Bt={sdk_version:ke.sdkVersion,app_instance_id:Ze,app_instance_id_token:Dt,app_id:ke.appId,language_code:Pt()},Yt={method:"POST",headers:Nt,body:JSON.stringify(Bt)},Et=fetch(rt,Yt),ft=new Promise((Tn,rn)=>{fe.signal.addEventListener(()=>{const L=new Error("The operation was aborted.");L.name="AbortError",rn(L)})});let st;try{yield Promise.race([Et,ft]),st=yield Et}catch(Tn){let rn="fetch-client-network";throw"AbortError"===Tn.name&&(rn="fetch-timeout"),Q.create(rn,{originalErrorMessage:Tn.message})}let Hn=st.status;const Ur=st.headers.get("ETag")||void 0;let qt,Xn;if(200===st.status){let Tn;try{Tn=yield st.json()}catch(rn){throw Q.create("fetch-client-parse",{originalErrorMessage:rn.message})}qt=Tn.entries,Xn=Tn.state}if("INSTANCE_STATE_UNSPECIFIED"===Xn?Hn=500:"NO_CHANGE"===Xn?Hn=304:("NO_TEMPLATE"===Xn||"EMPTY_CONFIG"===Xn)&&(qt={}),304!==Hn&&200!==Hn)throw Q.create("fetch-status",{httpStatus:Hn});return{status:Hn,eTag:Ur,config:qt}})()}}class mt{constructor(fe,ke){this.client=fe,this.storage=ke}fetch(fe){var ke=this;return(0,m.Z)(function*(){const Ze=(yield ke.storage.getThrottleMetadata())||{backoffCount:0,throttleEndTimeMillis:Date.now()};return ke.attemptFetch(fe,Ze)})()}attemptFetch(fe,{throttleEndTimeMillis:ke,backoffCount:Ze}){var Dt=this;return(0,m.Z)(function*(){yield function wn(Pe,fe){return new Promise((ke,Ze)=>{const Dt=Math.max(fe-Date.now(),0),et=setTimeout(ke,Dt);Pe.addEventListener(()=>{clearTimeout(et),Ze(Q.create("fetch-throttle",{throttleEndTimeMillis:fe}))})})}(fe.signal,ke);try{const et=yield Dt.client.fetch(fe);return yield Dt.storage.deleteThrottleMetadata(),et}catch(et){if(!function ct(Pe){if(!(Pe instanceof N.ZR&&Pe.customData))return!1;const fe=Number(Pe.customData.httpStatus);return 429===fe||500===fe||503===fe||504===fe}(et))throw et;const rt={throttleEndTimeMillis:Date.now()+(0,N.$s)(Ze),backoffCount:Ze+1};return yield Dt.storage.setThrottleMetadata(rt),Dt.attemptFetch(fe,rt)}})()}}class qn{constructor(fe,ke,Ze,Dt,et){this.app=fe,this._client=ke,this._storageCache=Ze,this._storage=Dt,this._logger=et,this._isInitializationComplete=!1,this.settings={fetchTimeoutMillis:6e4,minimumFetchIntervalMillis:432e5},this.defaultConfig={}}get fetchTimeMillis(){return this._storageCache.getLastSuccessfulFetchTimestampMillis()||-1}get lastFetchStatus(){return this._storageCache.getLastFetchStatus()||"no-fetch-yet"}}function Gt(Pe,fe){const ke=Pe.target.error||void 0;return Q.create(fe,{originalErrorMessage:ke&&ke.message})}const Ut="app_namespace_store";class zt{constructor(fe,ke,Ze,Dt=function yt(){return new Promise((Pe,fe)=>{try{const ke=indexedDB.open("firebase_remote_config",1);ke.onerror=Ze=>{fe(Gt(Ze,"storage-open"))},ke.onsuccess=Ze=>{Pe(Ze.target.result)},ke.onupgradeneeded=Ze=>{0===Ze.oldVersion&&Ze.target.result.createObjectStore(Ut,{keyPath:"compositeKey"})}}catch(ke){fe(Q.create("storage-open",{originalErrorMessage:ke}))}})}()){this.appId=fe,this.appName=ke,this.namespace=Ze,this.openDbPromise=Dt}getLastFetchStatus(){return this.get("last_fetch_status")}setLastFetchStatus(fe){return this.set("last_fetch_status",fe)}getLastSuccessfulFetchTimestampMillis(){return this.get("last_successful_fetch_timestamp_millis")}setLastSuccessfulFetchTimestampMillis(fe){return this.set("last_successful_fetch_timestamp_millis",fe)}getLastSuccessfulFetchResponse(){return this.get("last_successful_fetch_response")}setLastSuccessfulFetchResponse(fe){return this.set("last_successful_fetch_response",fe)}getActiveConfig(){return this.get("active_config")}setActiveConfig(fe){return this.set("active_config",fe)}getActiveConfigEtag(){return this.get("active_config_etag")}setActiveConfigEtag(fe){return this.set("active_config_etag",fe)}getThrottleMetadata(){return this.get("throttle_metadata")}setThrottleMetadata(fe){return this.set("throttle_metadata",fe)}deleteThrottleMetadata(){return this.delete("throttle_metadata")}get(fe){var ke=this;return(0,m.Z)(function*(){const Ze=yield ke.openDbPromise;return new Promise((Dt,et)=>{const Nt=Ze.transaction([Ut],"readonly").objectStore(Ut),Bt=ke.createCompositeKey(fe);try{const Yt=Nt.get(Bt);Yt.onerror=Et=>{et(Gt(Et,"storage-get"))},Yt.onsuccess=Et=>{const ft=Et.target.result;Dt(ft?ft.value:void 0)}}catch(Yt){et(Q.create("storage-get",{originalErrorMessage:Yt&&Yt.message}))}})})()}set(fe,ke){var Ze=this;return(0,m.Z)(function*(){const Dt=yield Ze.openDbPromise;return new Promise((et,rt)=>{const Bt=Dt.transaction([Ut],"readwrite").objectStore(Ut),Yt=Ze.createCompositeKey(fe);try{const Et=Bt.put({compositeKey:Yt,value:ke});Et.onerror=ft=>{rt(Gt(ft,"storage-set"))},Et.onsuccess=()=>{et()}}catch(Et){rt(Q.create("storage-set",{originalErrorMessage:Et&&Et.message}))}})})()}delete(fe){var ke=this;return(0,m.Z)(function*(){const Ze=yield ke.openDbPromise;return new Promise((Dt,et)=>{const Nt=Ze.transaction([Ut],"readwrite").objectStore(Ut),Bt=ke.createCompositeKey(fe);try{const Yt=Nt.delete(Bt);Yt.onerror=Et=>{et(Gt(Et,"storage-delete"))},Yt.onsuccess=()=>{Dt()}}catch(Yt){et(Q.create("storage-delete",{originalErrorMessage:Yt&&Yt.message}))}})})()}createCompositeKey(fe){return[this.appId,this.appName,this.namespace,fe].join()}}class nn{constructor(fe){this.storage=fe}getLastFetchStatus(){return this.lastFetchStatus}getLastSuccessfulFetchTimestampMillis(){return this.lastSuccessfulFetchTimestampMillis}getActiveConfig(){return this.activeConfig}loadFromStorage(){var fe=this;return(0,m.Z)(function*(){const ke=fe.storage.getLastFetchStatus(),Ze=fe.storage.getLastSuccessfulFetchTimestampMillis(),Dt=fe.storage.getActiveConfig(),et=yield ke;et&&(fe.lastFetchStatus=et);const rt=yield Ze;rt&&(fe.lastSuccessfulFetchTimestampMillis=rt);const Nt=yield Dt;Nt&&(fe.activeConfig=Nt)})()}setLastFetchStatus(fe){return this.lastFetchStatus=fe,this.storage.setLastFetchStatus(fe)}setLastSuccessfulFetchTimestampMillis(fe){return this.lastSuccessfulFetchTimestampMillis=fe,this.storage.setLastSuccessfulFetchTimestampMillis(fe)}setActiveConfig(fe){return this.activeConfig=fe,this.storage.setActiveConfig(fe)}}function An(){return Jn.apply(this,arguments)}function Jn(){return(Jn=(0,m.Z)(function*(){if(!(0,N.hl)())return!1;try{return yield(0,N.eu)()}catch(Pe){return!1}})).apply(this,arguments)}!function en(){(0,F._registerComponent)(new oe.wA(j,function Pe(fe,{instanceIdentifier:ke}){const Ze=fe.getProvider("app").getImmediate(),Dt=fe.getProvider("installations-internal").getImmediate();if("undefined"==typeof window)throw Q.create("registration-window");if(!(0,N.hl)())throw Q.create("indexed-db-unavailable");const{projectId:et,apiKey:rt,appId:Nt}=Ze.options;if(!et)throw Q.create("registration-project-id");if(!rt)throw Q.create("registration-api-key");if(!Nt)throw Q.create("registration-app-id");const Bt=new zt(Nt,Ze.name,ke=ke||"firebase"),Yt=new nn(Bt),Et=new ye.Yd(ae);Et.logLevel=ye.in.ERROR;const ft=new Ht(Dt,F.SDK_VERSION,ke,et,rt,Nt),st=new mt(ft,Bt),Hn=new le(st,Bt,Yt,Et),Ur=new qn(Ze,Hn,Yt,Bt,Et);return function De(Pe){const fe=(0,N.m9)(Pe);fe._initializePromise||(fe._initializePromise=fe._storageCache.loadFromStorage().then(()=>{fe._isInitializationComplete=!0}))}(Ur),Ur},"PUBLIC").setMultipleInstances(!0)),(0,F.registerVersion)(ae,"0.3.4"),(0,F.registerVersion)(ae,"0.3.4","esm2017")}()},2940:function(nt,Ie){!function(P){"use strict";function m(q){return Array.prototype.slice.call(q)}function F(q){return new Promise(function(se,Le){q.onsuccess=function(){se(q.result)},q.onerror=function(){Le(q.error)}})}function N(q,se,Le){var Ne,ce=new Promise(function(De,we){F(Ne=q[se].apply(q,Le)).then(De,we)});return ce.request=Ne,ce}function oe(q,se,Le){var Ne=N(q,se,Le);return Ne.then(function(ce){if(ce)return new j(ce,Ne.request)})}function ye(q,se,Le){Le.forEach(function(Ne){Object.defineProperty(q.prototype,Ne,{get:function(){return this[se][Ne]},set:function(ce){this[se][Ne]=ce}})})}function Ee(q,se,Le,Ne){Ne.forEach(function(ce){ce in Le.prototype&&(q.prototype[ce]=function(){return N(this[se],ce,arguments)})})}function ae(q,se,Le,Ne){Ne.forEach(function(ce){ce in Le.prototype&&(q.prototype[ce]=function(){return this[se][ce].apply(this[se],arguments)})})}function de(q,se,Le,Ne){Ne.forEach(function(ce){ce in Le.prototype&&(q.prototype[ce]=function(){return oe(this[se],ce,arguments)})})}function _e(q){this._index=q}function j(q,se){this._cursor=q,this._request=se}function V(q){this._store=q}function Q(q){this._tx=q,this.complete=new Promise(function(se,Le){q.oncomplete=function(){se()},q.onerror=function(){Le(q.error)},q.onabort=function(){Le(q.error)}})}function Ve(q,se,Le){this._db=q,this.oldVersion=se,this.transaction=new Q(Le)}function Me(q){this._db=q}ye(_e,"_index",["name","keyPath","multiEntry","unique"]),Ee(_e,"_index",IDBIndex,["get","getKey","getAll","getAllKeys","count"]),de(_e,"_index",IDBIndex,["openCursor","openKeyCursor"]),ye(j,"_cursor",["direction","key","primaryKey","value"]),Ee(j,"_cursor",IDBCursor,["update","delete"]),["advance","continue","continuePrimaryKey"].forEach(function(q){q in IDBCursor.prototype&&(j.prototype[q]=function(){var se=this,Le=arguments;return Promise.resolve().then(function(){return se._cursor[q].apply(se._cursor,Le),F(se._request).then(function(Ne){if(Ne)return new j(Ne,se._request)})})})}),V.prototype.createIndex=function(){return new _e(this._store.createIndex.apply(this._store,arguments))},V.prototype.index=function(){return new _e(this._store.index.apply(this._store,arguments))},ye(V,"_store",["name","keyPath","indexNames","autoIncrement"]),Ee(V,"_store",IDBObjectStore,["put","add","delete","clear","get","getAll","getKey","getAllKeys","count"]),de(V,"_store",IDBObjectStore,["openCursor","openKeyCursor"]),ae(V,"_store",IDBObjectStore,["deleteIndex"]),Q.prototype.objectStore=function(){return new V(this._tx.objectStore.apply(this._tx,arguments))},ye(Q,"_tx",["objectStoreNames","mode"]),ae(Q,"_tx",IDBTransaction,["abort"]),Ve.prototype.createObjectStore=function(){return new V(this._db.createObjectStore.apply(this._db,arguments))},ye(Ve,"_db",["name","version","objectStoreNames"]),ae(Ve,"_db",IDBDatabase,["deleteObjectStore","close"]),Me.prototype.transaction=function(){return new Q(this._db.transaction.apply(this._db,arguments))},ye(Me,"_db",["name","version","objectStoreNames"]),ae(Me,"_db",IDBDatabase,["close"]),["openCursor","openKeyCursor"].forEach(function(q){[V,_e].forEach(function(se){q in se.prototype&&(se.prototype[q.replace("open","iterate")]=function(){var Le=m(arguments),Ne=Le[Le.length-1],ce=this._store||this._index,De=ce[q].apply(ce,Le.slice(0,-1));De.onsuccess=function(){Ne(De.result)}})})}),[_e,V].forEach(function(q){q.prototype.getAll||(q.prototype.getAll=function(se,Le){var Ne=this,ce=[];return new Promise(function(De){Ne.iterateCursor(se,function(we){we?(ce.push(we.value),void 0===Le||ce.length!=Le?we.continue():De(ce)):De(ce)})})})}),P.openDb=function $e(q,se,Le){var Ne=N(indexedDB,"open",[q,se]),ce=Ne.request;return ce&&(ce.onupgradeneeded=function(De){Le&&Le(new Ve(ce.result,De.oldVersion,ce.transaction))}),Ne.then(function(De){return new Me(De)})},P.deleteDb=function Ue(q){return N(indexedDB,"deleteDatabase",[q])},Object.defineProperty(P,"__esModule",{value:!0})}(Ie)},8306:(nt,Ie,P)=>{"use strict";P.d(Ie,{y:()=>j});var m=P(930),F=P(727),N=P(8822),oe=P(4671);var ae=P(2416),de=P(576),_e=P(2806);let j=(()=>{class Me{constructor(Ue){Ue&&(this._subscribe=Ue)}lift(Ue){const q=new Me;return q.source=this,q.operator=Ue,q}subscribe(Ue,q,se){const Le=function Ve(Me){return Me&&Me instanceof m.Lv||function Q(Me){return Me&&(0,de.m)(Me.next)&&(0,de.m)(Me.error)&&(0,de.m)(Me.complete)}(Me)&&(0,F.Nn)(Me)}(Ue)?Ue:new m.Hp(Ue,q,se);return(0,_e.x)(()=>{const{operator:Ne,source:ce}=this;Le.add(Ne?Ne.call(Le,ce):ce?this._subscribe(Le):this._trySubscribe(Le))}),Le}_trySubscribe(Ue){try{return this._subscribe(Ue)}catch(q){Ue.error(q)}}forEach(Ue,q){return new(q=V(q))((se,Le)=>{const Ne=new m.Hp({next:ce=>{try{Ue(ce)}catch(De){Le(De),Ne.unsubscribe()}},error:Le,complete:se});this.subscribe(Ne)})}_subscribe(Ue){var q;return null===(q=this.source)||void 0===q?void 0:q.subscribe(Ue)}[N.L](){return this}pipe(...Ue){return function Ee(Me){return 0===Me.length?oe.y:1===Me.length?Me[0]:function(Ue){return Me.reduce((q,se)=>se(q),Ue)}}(Ue)(this)}toPromise(Ue){return new(Ue=V(Ue))((q,se)=>{let Le;this.subscribe(Ne=>Le=Ne,Ne=>se(Ne),()=>q(Le))})}}return Me.create=$e=>new Me($e),Me})();function V(Me){var $e;return null!==($e=null!=Me?Me:ae.v.Promise)&&void 0!==$e?$e:Promise}},7579:(nt,Ie,P)=>{"use strict";P.d(Ie,{x:()=>ae});var m=P(8306),F=P(727);const oe=(0,P(3888).d)(_e=>function(){_e(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var ye=P(8737),Ee=P(2806);let ae=(()=>{class _e extends m.y{constructor(){super(),this.closed=!1,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(V){const Q=new de(this,this);return Q.operator=V,Q}_throwIfClosed(){if(this.closed)throw new oe}next(V){(0,Ee.x)(()=>{if(this._throwIfClosed(),!this.isStopped){const Q=this.observers.slice();for(const Ve of Q)Ve.next(V)}})}error(V){(0,Ee.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=V;const{observers:Q}=this;for(;Q.length;)Q.shift().error(V)}})}complete(){(0,Ee.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:V}=this;for(;V.length;)V.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=null}get observed(){var V;return(null===(V=this.observers)||void 0===V?void 0:V.length)>0}_trySubscribe(V){return this._throwIfClosed(),super._trySubscribe(V)}_subscribe(V){return this._throwIfClosed(),this._checkFinalizedStatuses(V),this._innerSubscribe(V)}_innerSubscribe(V){const{hasError:Q,isStopped:Ve,observers:Me}=this;return Q||Ve?F.Lc:(Me.push(V),new F.w0(()=>(0,ye.P)(Me,V)))}_checkFinalizedStatuses(V){const{hasError:Q,thrownError:Ve,isStopped:Me}=this;Q?V.error(Ve):Me&&V.complete()}asObservable(){const V=new m.y;return V.source=this,V}}return _e.create=(j,V)=>new de(j,V),_e})();class de extends ae{constructor(j,V){super(),this.destination=j,this.source=V}next(j){var V,Q;null===(Q=null===(V=this.destination)||void 0===V?void 0:V.next)||void 0===Q||Q.call(V,j)}error(j){var V,Q;null===(Q=null===(V=this.destination)||void 0===V?void 0:V.error)||void 0===Q||Q.call(V,j)}complete(){var j,V;null===(V=null===(j=this.destination)||void 0===j?void 0:j.complete)||void 0===V||V.call(j)}_subscribe(j){var V,Q;return null!==(Q=null===(V=this.source)||void 0===V?void 0:V.subscribe(j))&&void 0!==Q?Q:F.Lc}}},930:(nt,Ie,P)=>{"use strict";P.d(Ie,{Hp:()=>Ue,Lv:()=>Q});var m=P(576),F=P(727),N=P(2416),oe=P(7849),ye=P(5032);const Ee=_e("C",void 0,void 0);function _e(ce,De,we){return{kind:ce,value:De,error:we}}var j=P(3410),V=P(2806);class Q extends F.w0{constructor(De){super(),this.isStopped=!1,De?(this.destination=De,(0,F.Nn)(De)&&De.add(this)):this.destination=Ne}static create(De,we,Xe){return new Ue(De,we,Xe)}next(De){this.isStopped?Le(function de(ce){return _e("N",ce,void 0)}(De),this):this._next(De)}error(De){this.isStopped?Le(function ae(ce){return _e("E",void 0,ce)}(De),this):(this.isStopped=!0,this._error(De))}complete(){this.isStopped?Le(Ee,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(De){this.destination.next(De)}_error(De){try{this.destination.error(De)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const Ve=Function.prototype.bind;function Me(ce,De){return Ve.call(ce,De)}class $e{constructor(De){this.partialObserver=De}next(De){const{partialObserver:we}=this;if(we.next)try{we.next(De)}catch(Xe){q(Xe)}}error(De){const{partialObserver:we}=this;if(we.error)try{we.error(De)}catch(Xe){q(Xe)}else q(De)}complete(){const{partialObserver:De}=this;if(De.complete)try{De.complete()}catch(we){q(we)}}}class Ue extends Q{constructor(De,we,Xe){let X;if(super(),(0,m.m)(De)||!De)X={next:null!=De?De:void 0,error:null!=we?we:void 0,complete:null!=Xe?Xe:void 0};else{let ht;this&&N.v.useDeprecatedNextContext?(ht=Object.create(De),ht.unsubscribe=()=>this.unsubscribe(),X={next:De.next&&Me(De.next,ht),error:De.error&&Me(De.error,ht),complete:De.complete&&Me(De.complete,ht)}):X=De}this.destination=new $e(X)}}function q(ce){N.v.useDeprecatedSynchronousErrorHandling?(0,V.O)(ce):(0,oe.h)(ce)}function Le(ce,De){const{onStoppedNotification:we}=N.v;we&&j.z.setTimeout(()=>we(ce,De))}const Ne={closed:!0,next:ye.Z,error:function se(ce){throw ce},complete:ye.Z}},727:(nt,Ie,P)=>{"use strict";P.d(Ie,{Lc:()=>Ee,w0:()=>ye,Nn:()=>ae});var m=P(576);const N=(0,P(3888).d)(_e=>function(V){_e(this),this.message=V?`${V.length} errors occurred during unsubscription:\n${V.map((Q,Ve)=>`${Ve+1}) ${Q.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=V});var oe=P(8737);class ye{constructor(j){this.initialTeardown=j,this.closed=!1,this._parentage=null,this._teardowns=null}unsubscribe(){let j;if(!this.closed){this.closed=!0;const{_parentage:V}=this;if(V)if(this._parentage=null,Array.isArray(V))for(const Me of V)Me.remove(this);else V.remove(this);const{initialTeardown:Q}=this;if((0,m.m)(Q))try{Q()}catch(Me){j=Me instanceof N?Me.errors:[Me]}const{_teardowns:Ve}=this;if(Ve){this._teardowns=null;for(const Me of Ve)try{de(Me)}catch($e){j=null!=j?j:[],$e instanceof N?j=[...j,...$e.errors]:j.push($e)}}if(j)throw new N(j)}}add(j){var V;if(j&&j!==this)if(this.closed)de(j);else{if(j instanceof ye){if(j.closed||j._hasParent(this))return;j._addParent(this)}(this._teardowns=null!==(V=this._teardowns)&&void 0!==V?V:[]).push(j)}}_hasParent(j){const{_parentage:V}=this;return V===j||Array.isArray(V)&&V.includes(j)}_addParent(j){const{_parentage:V}=this;this._parentage=Array.isArray(V)?(V.push(j),V):V?[V,j]:j}_removeParent(j){const{_parentage:V}=this;V===j?this._parentage=null:Array.isArray(V)&&(0,oe.P)(V,j)}remove(j){const{_teardowns:V}=this;V&&(0,oe.P)(V,j),j instanceof ye&&j._removeParent(this)}}ye.EMPTY=(()=>{const _e=new ye;return _e.closed=!0,_e})();const Ee=ye.EMPTY;function ae(_e){return _e instanceof ye||_e&&"closed"in _e&&(0,m.m)(_e.remove)&&(0,m.m)(_e.add)&&(0,m.m)(_e.unsubscribe)}function de(_e){(0,m.m)(_e)?_e():_e.unsubscribe()}},2416:(nt,Ie,P)=>{"use strict";P.d(Ie,{v:()=>m});const m={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1}},515:(nt,Ie,P)=>{"use strict";P.d(Ie,{E:()=>F});const F=new(P(8306).y)(ye=>ye.complete())},8996:(nt,Ie,P)=>{"use strict";P.d(Ie,{D:()=>De});var m=P(8421),F=P(5363),N=P(9468),Ee=P(8306),de=P(2202),_e=P(576),j=P(9672);function Q(we,Xe){if(!we)throw new Error("Iterable cannot be null");return new Ee.y(X=>{(0,j.f)(X,Xe,()=>{const ht=we[Symbol.asyncIterator]();(0,j.f)(X,Xe,()=>{ht.next().then(Y=>{Y.done?X.complete():X.next(Y.value)})},0,!0)})})}var Ve=P(3670),Me=P(8239),$e=P(1144),Ue=P(6495),q=P(2206),se=P(4532),Le=P(3260);function De(we,Xe){return Xe?function ce(we,Xe){if(null!=we){if((0,Ve.c)(we))return function oe(we,Xe){return(0,m.Xf)(we).pipe((0,N.R)(Xe),(0,F.Q)(Xe))}(we,Xe);if((0,$e.z)(we))return function ae(we,Xe){return new Ee.y(X=>{let ht=0;return Xe.schedule(function(){ht===we.length?X.complete():(X.next(we[ht++]),X.closed||this.schedule())})})}(we,Xe);if((0,Me.t)(we))return function ye(we,Xe){return(0,m.Xf)(we).pipe((0,N.R)(Xe),(0,F.Q)(Xe))}(we,Xe);if((0,q.D)(we))return Q(we,Xe);if((0,Ue.T)(we))return function V(we,Xe){return new Ee.y(X=>{let ht;return(0,j.f)(X,Xe,()=>{ht=we[de.h](),(0,j.f)(X,Xe,()=>{let Y,me;try{({value:Y,done:me}=ht.next())}catch(ue){return void X.error(ue)}me?X.complete():X.next(Y)},0,!0)}),()=>(0,_e.m)(null==ht?void 0:ht.return)&&ht.return()})}(we,Xe);if((0,Le.L)(we))return function Ne(we,Xe){return Q((0,Le.Q)(we),Xe)}(we,Xe)}throw(0,se.z)(we)}(we,Xe):(0,m.Xf)(we)}},8421:(nt,Ie,P)=>{"use strict";P.d(Ie,{Xf:()=>Ve});var m=P(655),F=P(1144),N=P(8239),oe=P(8306),ye=P(3670),Ee=P(2206),ae=P(4532),de=P(6495),_e=P(3260),j=P(576),V=P(7849),Q=P(8822);function Ve(ce){if(ce instanceof oe.y)return ce;if(null!=ce){if((0,ye.c)(ce))return function Me(ce){return new oe.y(De=>{const we=ce[Q.L]();if((0,j.m)(we.subscribe))return we.subscribe(De);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(ce);if((0,F.z)(ce))return function $e(ce){return new oe.y(De=>{for(let we=0;we<ce.length&&!De.closed;we++)De.next(ce[we]);De.complete()})}(ce);if((0,N.t)(ce))return function Ue(ce){return new oe.y(De=>{ce.then(we=>{De.closed||(De.next(we),De.complete())},we=>De.error(we)).then(null,V.h)})}(ce);if((0,Ee.D)(ce))return se(ce);if((0,de.T)(ce))return function q(ce){return new oe.y(De=>{for(const we of ce)if(De.next(we),De.closed)return;De.complete()})}(ce);if((0,_e.L)(ce))return function Le(ce){return se((0,_e.Q)(ce))}(ce)}throw(0,ae.z)(ce)}function se(ce){return new oe.y(De=>{(function Ne(ce,De){var we,Xe,X,ht;return(0,m.mG)(this,void 0,void 0,function*(){try{for(we=(0,m.KL)(ce);!(Xe=yield we.next()).done;)if(De.next(Xe.value),De.closed)return}catch(Y){X={error:Y}}finally{try{Xe&&!Xe.done&&(ht=we.return)&&(yield ht.call(we))}finally{if(X)throw X.error}}De.complete()})})(ce,De).catch(we=>De.error(we))})}},6451:(nt,Ie,P)=>{"use strict";P.d(Ie,{T:()=>Ee});var m=P(8189),F=P(8421),N=P(515),oe=P(3269),ye=P(8996);function Ee(...ae){const de=(0,oe.yG)(ae),_e=(0,oe._6)(ae,1/0),j=ae;return j.length?1===j.length?(0,F.Xf)(j[0]):(0,m.J)(_e)((0,ye.D)(j,de)):N.E}},5403:(nt,Ie,P)=>{"use strict";P.d(Ie,{x:()=>F,Q:()=>N});var m=P(930);function F(oe,ye,Ee,ae,de){return new N(oe,ye,Ee,ae,de)}class N extends m.Lv{constructor(ye,Ee,ae,de,_e,j){super(ye),this.onFinalize=_e,this.shouldUnsubscribe=j,this._next=Ee?function(V){try{Ee(V)}catch(Q){ye.error(Q)}}:super._next,this._error=de?function(V){try{de(V)}catch(Q){ye.error(Q)}finally{this.unsubscribe()}}:super._error,this._complete=ae?function(){try{ae()}catch(V){ye.error(V)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var ye;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:Ee}=this;super.unsubscribe(),!Ee&&(null===(ye=this.onFinalize)||void 0===ye||ye.call(this))}}}},4004:(nt,Ie,P)=>{"use strict";P.d(Ie,{U:()=>N});var m=P(4482),F=P(5403);function N(oe,ye){return(0,m.e)((Ee,ae)=>{let de=0;Ee.subscribe((0,F.x)(ae,_e=>{ae.next(oe.call(ye,_e,de++))}))})}},8189:(nt,Ie,P)=>{"use strict";P.d(Ie,{J:()=>N});var m=P(5577),F=P(4671);function N(oe=1/0){return(0,m.z)(F.y,oe)}},5577:(nt,Ie,P)=>{"use strict";P.d(Ie,{z:()=>de});var m=P(4004),F=P(8421),N=P(4482),oe=P(9672),ye=P(5403),ae=P(576);function de(_e,j,V=1/0){return(0,ae.m)(j)?de((Q,Ve)=>(0,m.U)((Me,$e)=>j(Q,Me,Ve,$e))((0,F.Xf)(_e(Q,Ve))),V):("number"==typeof j&&(V=j),(0,N.e)((Q,Ve)=>function Ee(_e,j,V,Q,Ve,Me,$e,Ue){const q=[];let se=0,Le=0,Ne=!1;const ce=()=>{Ne&&!q.length&&!se&&j.complete()},De=Xe=>se<Q?we(Xe):q.push(Xe),we=Xe=>{Me&&j.next(Xe),se++;let X=!1;(0,F.Xf)(V(Xe,Le++)).subscribe((0,ye.x)(j,ht=>{null==Ve||Ve(ht),Me?De(ht):j.next(ht)},()=>{X=!0},void 0,()=>{if(X)try{for(se--;q.length&&se<Q;){const ht=q.shift();$e?(0,oe.f)(j,$e,()=>we(ht)):we(ht)}ce()}catch(ht){j.error(ht)}}))};return _e.subscribe((0,ye.x)(j,De,()=>{Ne=!0,ce()})),()=>{null==Ue||Ue()}}(Q,Ve,_e,V)))}},5363:(nt,Ie,P)=>{"use strict";P.d(Ie,{Q:()=>oe});var m=P(9672),F=P(4482),N=P(5403);function oe(ye,Ee=0){return(0,F.e)((ae,de)=>{ae.subscribe((0,N.x)(de,_e=>(0,m.f)(de,ye,()=>de.next(_e),Ee),()=>(0,m.f)(de,ye,()=>de.complete(),Ee),_e=>(0,m.f)(de,ye,()=>de.error(_e),Ee)))})}},3099:(nt,Ie,P)=>{"use strict";P.d(Ie,{B:()=>Ee});var m=P(8996),F=P(5698),N=P(7579),oe=P(930),ye=P(4482);function Ee(de={}){const{connector:_e=(()=>new N.x),resetOnError:j=!0,resetOnComplete:V=!0,resetOnRefCountZero:Q=!0}=de;return Ve=>{let Me=null,$e=null,Ue=null,q=0,se=!1,Le=!1;const Ne=()=>{null==$e||$e.unsubscribe(),$e=null},ce=()=>{Ne(),Me=Ue=null,se=Le=!1},De=()=>{const we=Me;ce(),null==we||we.unsubscribe()};return(0,ye.e)((we,Xe)=>{q++,!Le&&!se&&Ne();const X=Ue=null!=Ue?Ue:_e();Xe.add(()=>{q--,0===q&&!Le&&!se&&($e=ae(De,Q))}),X.subscribe(Xe),Me||(Me=new oe.Hp({next:ht=>X.next(ht),error:ht=>{Le=!0,Ne(),$e=ae(ce,j,ht),X.error(ht)},complete:()=>{se=!0,Ne(),$e=ae(ce,V),X.complete()}}),(0,m.D)(we).subscribe(Me))})(Ve)}}function ae(de,_e,...j){return!0===_e?(de(),null):!1===_e?null:_e(...j).pipe((0,F.q)(1)).subscribe(()=>de())}},9468:(nt,Ie,P)=>{"use strict";P.d(Ie,{R:()=>F});var m=P(4482);function F(N,oe=0){return(0,m.e)((ye,Ee)=>{Ee.add(N.schedule(()=>ye.subscribe(Ee),oe))})}},5698:(nt,Ie,P)=>{"use strict";P.d(Ie,{q:()=>oe});var m=P(515),F=P(4482),N=P(5403);function oe(ye){return ye<=0?()=>m.E:(0,F.e)((Ee,ae)=>{let de=0;Ee.subscribe((0,N.x)(ae,_e=>{++de<=ye&&(ae.next(_e),ye<=de&&ae.complete())}))})}},8505:(nt,Ie,P)=>{"use strict";P.d(Ie,{b:()=>ye});var m=P(576),F=P(4482),N=P(5403),oe=P(4671);function ye(Ee,ae,de){const _e=(0,m.m)(Ee)||ae||de?{next:Ee,error:ae,complete:de}:Ee;return _e?(0,F.e)((j,V)=>{var Q;null===(Q=_e.subscribe)||void 0===Q||Q.call(_e);let Ve=!0;j.subscribe((0,N.x)(V,Me=>{var $e;null===($e=_e.next)||void 0===$e||$e.call(_e,Me),V.next(Me)},()=>{var Me;Ve=!1,null===(Me=_e.complete)||void 0===Me||Me.call(_e),V.complete()},Me=>{var $e;Ve=!1,null===($e=_e.error)||void 0===$e||$e.call(_e,Me),V.error(Me)},()=>{var Me,$e;Ve&&(null===(Me=_e.unsubscribe)||void 0===Me||Me.call(_e)),null===($e=_e.finalize)||void 0===$e||$e.call(_e)}))}):oe.y}},4408:(nt,Ie,P)=>{"use strict";P.d(Ie,{o:()=>ye});var m=P(727);class F extends m.w0{constructor(ae,de){super()}schedule(ae,de=0){return this}}const N={setInterval(...Ee){const{delegate:ae}=N;return((null==ae?void 0:ae.setInterval)||setInterval)(...Ee)},clearInterval(Ee){const{delegate:ae}=N;return((null==ae?void 0:ae.clearInterval)||clearInterval)(Ee)},delegate:void 0};var oe=P(8737);class ye extends F{constructor(ae,de){super(ae,de),this.scheduler=ae,this.work=de,this.pending=!1}schedule(ae,de=0){if(this.closed)return this;this.state=ae;const _e=this.id,j=this.scheduler;return null!=_e&&(this.id=this.recycleAsyncId(j,_e,de)),this.pending=!0,this.delay=de,this.id=this.id||this.requestAsyncId(j,this.id,de),this}requestAsyncId(ae,de,_e=0){return N.setInterval(ae.flush.bind(ae,this),_e)}recycleAsyncId(ae,de,_e=0){if(null!=_e&&this.delay===_e&&!1===this.pending)return de;N.clearInterval(de)}execute(ae,de){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const _e=this._execute(ae,de);if(_e)return _e;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(ae,de){let j,_e=!1;try{this.work(ae)}catch(V){_e=!0,j=V||new Error("Scheduled action threw falsy error")}if(_e)return this.unsubscribe(),j}unsubscribe(){if(!this.closed){const{id:ae,scheduler:de}=this,{actions:_e}=de;this.work=this.state=this.scheduler=null,this.pending=!1,(0,oe.P)(_e,this),null!=ae&&(this.id=this.recycleAsyncId(de,ae,null)),this.delay=null,super.unsubscribe()}}}},7565:(nt,Ie,P)=>{"use strict";P.d(Ie,{v:()=>N});var m=P(6063);class F{constructor(ye,Ee=F.now){this.schedulerActionCtor=ye,this.now=Ee}schedule(ye,Ee=0,ae){return new this.schedulerActionCtor(this,ye).schedule(ae,Ee)}}F.now=m.l.now;class N extends F{constructor(ye,Ee=F.now){super(ye,Ee),this.actions=[],this._active=!1,this._scheduled=void 0}flush(ye){const{actions:Ee}=this;if(this._active)return void Ee.push(ye);let ae;this._active=!0;do{if(ae=ye.execute(ye.state,ye.delay))break}while(ye=Ee.shift());if(this._active=!1,ae){for(;ye=Ee.shift();)ye.unsubscribe();throw ae}}}},4986:(nt,Ie,P)=>{"use strict";P.d(Ie,{z:()=>N,P:()=>oe});var m=P(4408);const N=new(P(7565).v)(m.o),oe=N},6063:(nt,Ie,P)=>{"use strict";P.d(Ie,{l:()=>m});const m={now:()=>(m.delegate||Date).now(),delegate:void 0}},3410:(nt,Ie,P)=>{"use strict";P.d(Ie,{z:()=>m});const m={setTimeout(...F){const{delegate:N}=m;return((null==N?void 0:N.setTimeout)||setTimeout)(...F)},clearTimeout(F){const{delegate:N}=m;return((null==N?void 0:N.clearTimeout)||clearTimeout)(F)},delegate:void 0}},2202:(nt,Ie,P)=>{"use strict";P.d(Ie,{h:()=>F});const F=function m(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}()},8822:(nt,Ie,P)=>{"use strict";P.d(Ie,{L:()=>m});const m="function"==typeof Symbol&&Symbol.observable||"@@observable"},3269:(nt,Ie,P)=>{"use strict";P.d(Ie,{jO:()=>oe,yG:()=>ye,_6:()=>Ee});var m=P(576),F=P(3532);function N(ae){return ae[ae.length-1]}function oe(ae){return(0,m.m)(N(ae))?ae.pop():void 0}function ye(ae){return(0,F.K)(N(ae))?ae.pop():void 0}function Ee(ae,de){return"number"==typeof N(ae)?ae.pop():de}},8737:(nt,Ie,P)=>{"use strict";function m(F,N){if(F){const oe=F.indexOf(N);0<=oe&&F.splice(oe,1)}}P.d(Ie,{P:()=>m})},3888:(nt,Ie,P)=>{"use strict";function m(F){const oe=F(ye=>{Error.call(ye),ye.stack=(new Error).stack});return oe.prototype=Object.create(Error.prototype),oe.prototype.constructor=oe,oe}P.d(Ie,{d:()=>m})},2806:(nt,Ie,P)=>{"use strict";P.d(Ie,{x:()=>N,O:()=>oe});var m=P(2416);let F=null;function N(ye){if(m.v.useDeprecatedSynchronousErrorHandling){const Ee=!F;if(Ee&&(F={errorThrown:!1,error:null}),ye(),Ee){const{errorThrown:ae,error:de}=F;if(F=null,ae)throw de}}else ye()}function oe(ye){m.v.useDeprecatedSynchronousErrorHandling&&F&&(F.errorThrown=!0,F.error=ye)}},9672:(nt,Ie,P)=>{"use strict";function m(F,N,oe,ye=0,Ee=!1){const ae=N.schedule(function(){oe(),Ee?F.add(this.schedule(null,ye)):this.unsubscribe()},ye);if(F.add(ae),!Ee)return ae}P.d(Ie,{f:()=>m})},4671:(nt,Ie,P)=>{"use strict";function m(F){return F}P.d(Ie,{y:()=>m})},1144:(nt,Ie,P)=>{"use strict";P.d(Ie,{z:()=>m});const m=F=>F&&"number"==typeof F.length&&"function"!=typeof F},2206:(nt,Ie,P)=>{"use strict";P.d(Ie,{D:()=>F});var m=P(576);function F(N){return Symbol.asyncIterator&&(0,m.m)(null==N?void 0:N[Symbol.asyncIterator])}},576:(nt,Ie,P)=>{"use strict";function m(F){return"function"==typeof F}P.d(Ie,{m:()=>m})},3670:(nt,Ie,P)=>{"use strict";P.d(Ie,{c:()=>N});var m=P(8822),F=P(576);function N(oe){return(0,F.m)(oe[m.L])}},6495:(nt,Ie,P)=>{"use strict";P.d(Ie,{T:()=>N});var m=P(2202),F=P(576);function N(oe){return(0,F.m)(null==oe?void 0:oe[m.h])}},8239:(nt,Ie,P)=>{"use strict";P.d(Ie,{t:()=>F});var m=P(576);function F(N){return(0,m.m)(null==N?void 0:N.then)}},3260:(nt,Ie,P)=>{"use strict";P.d(Ie,{Q:()=>N,L:()=>oe});var m=P(655),F=P(576);function N(ye){return(0,m.FC)(this,arguments,function*(){const ae=ye.getReader();try{for(;;){const{value:de,done:_e}=yield(0,m.qq)(ae.read());if(_e)return yield(0,m.qq)(void 0);yield yield(0,m.qq)(de)}}finally{ae.releaseLock()}})}function oe(ye){return(0,F.m)(null==ye?void 0:ye.getReader)}},3532:(nt,Ie,P)=>{"use strict";P.d(Ie,{K:()=>F});var m=P(576);function F(N){return N&&(0,m.m)(N.schedule)}},4482:(nt,Ie,P)=>{"use strict";P.d(Ie,{A:()=>F,e:()=>N});var m=P(576);function F(oe){return(0,m.m)(null==oe?void 0:oe.lift)}function N(oe){return ye=>{if(F(ye))return ye.lift(function(Ee){try{return oe(Ee,this)}catch(ae){this.error(ae)}});throw new TypeError("Unable to lift unknown Observable type")}}},5032:(nt,Ie,P)=>{"use strict";function m(){}P.d(Ie,{Z:()=>m})},7849:(nt,Ie,P)=>{"use strict";P.d(Ie,{h:()=>N});var m=P(2416),F=P(3410);function N(oe){F.z.setTimeout(()=>{const{onUnhandledError:ye}=m.v;if(!ye)throw oe;ye(oe)})}},4532:(nt,Ie,P)=>{"use strict";function m(F){return new TypeError(`You provided ${null!==F&&"object"==typeof F?"an invalid object":`'${F}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}P.d(Ie,{z:()=>m})},655:(nt,Ie,P)=>{"use strict";function oe(Y,me){var ue={};for(var pe in Y)Object.prototype.hasOwnProperty.call(Y,pe)&&me.indexOf(pe)<0&&(ue[pe]=Y[pe]);if(null!=Y&&"function"==typeof Object.getOwnPropertySymbols){var He=0;for(pe=Object.getOwnPropertySymbols(Y);He<pe.length;He++)me.indexOf(pe[He])<0&&Object.prototype.propertyIsEnumerable.call(Y,pe[He])&&(ue[pe[He]]=Y[pe[He]])}return ue}function ye(Y,me,ue,pe){var Pt,He=arguments.length,le=He<3?me:null===pe?pe=Object.getOwnPropertyDescriptor(me,ue):pe;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)le=Reflect.decorate(Y,me,ue,pe);else for(var Ht=Y.length-1;Ht>=0;Ht--)(Pt=Y[Ht])&&(le=(He<3?Pt(le):He>3?Pt(me,ue,le):Pt(me,ue))||le);return He>3&&le&&Object.defineProperty(me,ue,le),le}function ae(Y,me){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(Y,me)}function de(Y,me,ue,pe){return new(ue||(ue=Promise))(function(le,Pt){function Ht(mt){try{ct(pe.next(mt))}catch(Xt){Pt(Xt)}}function wn(mt){try{ct(pe.throw(mt))}catch(Xt){Pt(Xt)}}function ct(mt){mt.done?le(mt.value):function He(le){return le instanceof ue?le:new ue(function(Pt){Pt(le)})}(mt.value).then(Ht,wn)}ct((pe=pe.apply(Y,me||[])).next())})}function q(Y){return this instanceof q?(this.v=Y,this):new q(Y)}function se(Y,me,ue){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var He,pe=ue.apply(Y,me||[]),le=[];return He={},Pt("next"),Pt("throw"),Pt("return"),He[Symbol.asyncIterator]=function(){return this},He;function Pt(In){pe[In]&&(He[In]=function(qn){return new Promise(function(Gt,Ut){le.push([In,qn,Gt,Ut])>1||Ht(In,qn)})})}function Ht(In,qn){try{!function wn(In){In.value instanceof q?Promise.resolve(In.value.v).then(ct,mt):Xt(le[0][2],In)}(pe[In](qn))}catch(Gt){Xt(le[0][3],Gt)}}function ct(In){Ht("next",In)}function mt(In){Ht("throw",In)}function Xt(In,qn){In(qn),le.shift(),le.length&&Ht(le[0][0],le[0][1])}}function Ne(Y){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var ue,me=Y[Symbol.asyncIterator];return me?me.call(Y):(Y=function Q(Y){var me="function"==typeof Symbol&&Symbol.iterator,ue=me&&Y[me],pe=0;if(ue)return ue.call(Y);if(Y&&"number"==typeof Y.length)return{next:function(){return Y&&pe>=Y.length&&(Y=void 0),{value:Y&&Y[pe++],done:!Y}}};throw new TypeError(me?"Object is not iterable.":"Symbol.iterator is not defined.")}(Y),ue={},pe("next"),pe("throw"),pe("return"),ue[Symbol.asyncIterator]=function(){return this},ue);function pe(le){ue[le]=Y[le]&&function(Pt){return new Promise(function(Ht,wn){!function He(le,Pt,Ht,wn){Promise.resolve(wn).then(function(ct){le({value:ct,done:Ht})},Pt)}(Ht,wn,(Pt=Y[le](Pt)).done,Pt.value)})}}}P.d(Ie,{_T:()=>oe,gn:()=>ye,w6:()=>ae,mG:()=>de,qq:()=>q,FC:()=>se,KL:()=>Ne})},5e3:(nt,Ie,P)=>{"use strict";P.d(Ie,{deG:()=>gg,tb:()=>ya,AFp:()=>hE,ip1:()=>Hd,CZH:()=>_a,hGG:()=>nA,z2F:()=>$o,sBO:()=>KS,Sil:()=>hp,_Vd:()=>zf,EJc:()=>$b,SBq:()=>pu,qLn:()=>Jh,vpe:()=>Vo,tBr:()=>Wa,XFs:()=>Pe,OlP:()=>dr,zs3:()=>fs,ZZ4:()=>Kc,aQg:()=>Ip,soG:()=>jo,YKP:()=>db,h0i:()=>uo,PXZ:()=>zS,R0b:()=>Ai,FiY:()=>ls,Lbi:()=>fE,g9A:()=>i_,Qsj:()=>CS,FYo:()=>zm,JOm:()=>Po,tp0:()=>Qs,Rgc:()=>np,dDg:()=>mE,q4F:()=>Qv,GfV:()=>gu,s_b:()=>rp,ifc:()=>Et,eFA:()=>EE,G48:()=>qS,X6Q:()=>CE,_c5:()=>PE,VLi:()=>pp,c2e:()=>pE,zSh:()=>ro,wAp:()=>$t,vHH:()=>$e,cg1:()=>Rv,kL8:()=>WI,dqk:()=>qt,sIi:()=>Ic,CqO:()=>Sf,QGY:()=>Cm,F4k:()=>rr,RDi:()=>ig,AaK:()=>de,TTD:()=>Fu,xp6:()=>oD,uIk:()=>yf,ekj:()=>gv,Suo:()=>ii,Xpm:()=>Be,lG2:()=>Re,Yz7:()=>Gt,cJS:()=>Ge,oAB:()=>J,Yjl:()=>it,Y36:()=>so,_UZ:()=>Im,BQk:()=>Dc,ynx:()=>Fs,qZA:()=>Oo,TgZ:()=>md,LFG:()=>zr,$8M:()=>Mh,$Z:()=>wm,NdJ:()=>cv,CRH:()=>Ji,O4$:()=>L0,ALo:()=>eE,lcZ:()=>co,Q6J:()=>uv,VKq:()=>Yf,iGM:()=>ho,LSH:()=>Kl,YNc:()=>Xy,_uU:()=>wv,Oqu:()=>Of,hij:()=>wd});var m=P(7579),F=P(727),N=P(8306),oe=P(6451),ye=P(3099);function Ee(s){for(let o in s)if(s[o]===Ee)return o;throw Error("Could not find renamed property on target object.")}function de(s){if("string"==typeof s)return s;if(Array.isArray(s))return"["+s.map(de).join(", ")+"]";if(null==s)return""+s;if(s.overriddenName)return`${s.overriddenName}`;if(s.name)return`${s.name}`;const o=s.toString();if(null==o)return""+o;const u=o.indexOf("\n");return-1===u?o:o.substring(0,u)}function _e(s,o){return null==s||""===s?null===o?"":o:null==o||""===o?s:s+" "+o}const j=Ee({__forward_ref__:Ee});function V(s){return s.__forward_ref__=V,s.toString=function(){return de(this())},s}function Q(s){return function Ve(s){return"function"==typeof s&&s.hasOwnProperty(j)&&s.__forward_ref__===V}(s)?s():s}class $e extends Error{constructor(o,u){super(function Ue(s,o){return`NG0${Math.abs(s)}${o?": "+o:""}`}(o,u)),this.code=o}}function q(s){return"string"==typeof s?s:null==s?"":String(s)}function se(s){return"function"==typeof s?s.name||s.toString():"object"==typeof s&&null!=s&&"function"==typeof s.type?s.type.name||s.type.toString():q(s)}function De(s,o){const u=o?` in ${o}`:"";throw new $e(-201,`No provider for ${se(s)} found${u}`)}function ct(s,o){null==s&&function mt(s,o,u,l){throw new Error(`ASSERTION ERROR: ${s}`+(null==l?"":` [Expected=> ${u} ${l} ${o} <=Actual]`))}(o,s,null,"!=")}function Gt(s){return{token:s.token,providedIn:s.providedIn||null,factory:s.factory,value:void 0}}function Ge(s){return{providers:s.providers||[],imports:s.imports||[]}}function _t(s){return yt(s,Sn)||yt(s,An)}function yt(s,o){return s.hasOwnProperty(o)?s[o]:null}function en(s){return s&&(s.hasOwnProperty(On)||s.hasOwnProperty(Jn))?s[On]:null}const Sn=Ee({\u0275prov:Ee}),On=Ee({\u0275inj:Ee}),An=Ee({ngInjectableDef:Ee}),Jn=Ee({ngInjectorDef:Ee});var Pe=(()=>((Pe=Pe||{})[Pe.Default=0]="Default",Pe[Pe.Host=1]="Host",Pe[Pe.Self=2]="Self",Pe[Pe.SkipSelf=4]="SkipSelf",Pe[Pe.Optional=8]="Optional",Pe))();let fe;function Ze(s){const o=fe;return fe=s,o}function Dt(s,o,u){const l=_t(s);return l&&"root"==l.providedIn?void 0===l.value?l.value=l.factory():l.value:u&Pe.Optional?null:void 0!==o?o:void De(de(s),"Injector")}function rt(s){return{toString:s}.toString()}var Nt=(()=>((Nt=Nt||{})[Nt.OnPush=0]="OnPush",Nt[Nt.Default=1]="Default",Nt))(),Et=(()=>{return(s=Et||(Et={}))[s.Emulated=0]="Emulated",s[s.None=2]="None",s[s.ShadowDom=3]="ShadowDom",Et;var s})();const ft="undefined"!=typeof globalThis&&globalThis,st="undefined"!=typeof window&&window,Hn="undefined"!=typeof self&&"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&self,qt=ft||"undefined"!=typeof global&&global||st||Hn,rn={},L=[],z=Ee({\u0275cmp:Ee}),G=Ee({\u0275dir:Ee}),Te=Ee({\u0275pipe:Ee}),re=Ee({\u0275mod:Ee}),at=Ee({\u0275fac:Ee}),ee=Ee({__NG_ELEMENT_ID__:Ee});let be=0;function Be(s){return rt(()=>{const u={},l={type:s.type,providersResolver:null,decls:s.decls,vars:s.vars,factory:null,template:s.template||null,consts:s.consts||null,ngContentSelectors:s.ngContentSelectors,hostBindings:s.hostBindings||null,hostVars:s.hostVars||0,hostAttrs:s.hostAttrs||null,contentQueries:s.contentQueries||null,declaredInputs:u,inputs:null,outputs:null,exportAs:s.exportAs||null,onPush:s.changeDetection===Nt.OnPush,directiveDefs:null,pipeDefs:null,selectors:s.selectors||L,viewQuery:s.viewQuery||null,features:s.features||null,data:s.data||{},encapsulation:s.encapsulation||Et.Emulated,id:"c",styles:s.styles||L,_:null,setInput:null,schemas:s.schemas||null,tView:null},d=s.directives,f=s.features,y=s.pipes;return l.id+=be++,l.inputs=H(s.inputs,u),l.outputs=H(s.outputs),f&&f.forEach(w=>w(l)),l.directiveDefs=d?()=>("function"==typeof d?d():d).map(ot):null,l.pipeDefs=y?()=>("function"==typeof y?y():y).map(tt):null,l})}function ot(s){return vt(s)||function Ot(s){return s[G]||null}(s)}function tt(s){return function cn(s){return s[Te]||null}(s)}const At={};function J(s){return rt(()=>{const o={type:s.type,bootstrap:s.bootstrap||L,declarations:s.declarations||L,imports:s.imports||L,exports:s.exports||L,transitiveCompileScopes:null,schemas:s.schemas||null,id:s.id||null};return null!=s.id&&(At[s.id]=s.type),o})}function H(s,o){if(null==s)return rn;const u={};for(const l in s)if(s.hasOwnProperty(l)){let d=s[l],f=d;Array.isArray(d)&&(f=d[1],d=d[0]),u[d]=l,o&&(o[d]=f)}return u}const Re=Be;function it(s){return{type:s.type,name:s.name,factory:null,pure:!1!==s.pure,onDestroy:s.type.prototype.ngOnDestroy||null}}function vt(s){return s[z]||null}function sn(s,o){const u=s[re]||null;if(!u&&!0===o)throw new Error(`Type ${de(s)} does not have '\u0275mod' property.`);return u}function mi(s){return Array.isArray(s)&&"object"==typeof s[1]}function ns(s){return Array.isArray(s)&&!0===s[1]}function ku(s){return 0!=(8&s.flags)}function dh(s){return 2==(2&s.flags)}function Ko(s){return 1==(1&s.flags)}function rs(s){return null!==s.template}function hh(s){return 0!=(512&s[2])}function is(s,o){return s.hasOwnProperty(at)?s[at]:null}class F_{constructor(o,u,l){this.previousValue=o,this.currentValue=u,this.firstChange=l}isFirstChange(){return this.firstChange}}function Fu(){return ul}function ul(s){return s.type.prototype.ngOnChanges&&(s.setInput=Lu),L_}function L_(){const s=Ra(this),o=null==s?void 0:s.current;if(o){const u=s.previous;if(u===rn)s.previous=o;else for(let l in o)u[l]=o[l];s.current=null,this.ngOnChanges(o)}}function Lu(s,o,u,l){const d=Ra(s)||function U_(s,o){return s[Uu]=o}(s,{previous:rn,current:null}),f=d.current||(d.current={}),y=d.previous,w=this.declaredInputs[u],b=y[w];f[w]=new F_(b&&b.currentValue,o,y===rn),s[l]=o}Fu.ngInherit=!0;const Uu="__ngSimpleChanges__";function Ra(s){return s[Uu]||null}let dl;function ig(s){dl=s}function Yn(s){return!!s.listen}const ju={createRenderer:(s,o)=>function Bu(){return void 0!==dl?dl:"undefined"!=typeof document?document:void 0}()};function Wn(s){for(;Array.isArray(s);)s=s[0];return s}function xa(s,o){return Wn(o[s])}function Xr(s,o){return Wn(o[s.index])}function fl(s,o){return s.data[o]}function _i(s,o){const u=o[s];return mi(u)?u:u[0]}function Yo(s){return 4==(4&s[2])}function Pa(s){return 128==(128&s[2])}function Gs(s,o){return null==o?null:s[o]}function wo(s){s[18]=0}function Qo(s,o){s[5]+=o;let u=s,l=s[3];for(;null!==l&&(1===o&&1===u[5]||-1===o&&0===u[5]);)l[5]+=o,u=l,l=l[3]}const jt={lFrame:Ih(null),bindingsEnabled:!0,isInCheckNoChangesMode:!1};function ml(){return jt.bindingsEnabled}function We(){return jt.lFrame.lView}function gn(){return jt.lFrame.tView}function er(){let s=_l();for(;null!==s&&64===s.type;)s=s.parent;return s}function _l(){return jt.lFrame.currentTNode}function ss(s,o){const u=jt.lFrame;u.currentTNode=s,u.isParent=o}function yh(){return jt.lFrame.isParent}function Wu(){jt.lFrame.isParent=!1}function Na(){return jt.isInCheckNoChangesMode}function yl(s){jt.isInCheckNoChangesMode=s}function Vr(){const s=jt.lFrame;let o=s.bindingRootIndex;return-1===o&&(o=s.bindingRootIndex=s.tView.bindingStartIndex),o}function Ma(){return jt.lFrame.bindingIndex++}function H_(s,o){const u=jt.lFrame;u.bindingIndex=u.bindingRootIndex=s,Eh(o)}function Eh(s){jt.lFrame.currentDirectiveIndex=s}function W_(){return jt.lFrame.currentQueryIndex}function wh(s){jt.lFrame.currentQueryIndex=s}function z_(s){const o=s[1];return 2===o.type?o.declTNode:1===o.type?s[6]:null}function wl(s,o,u){if(u&Pe.SkipSelf){let d=o,f=s;for(;!(d=d.parent,null!==d||u&Pe.Host||(d=z_(f),null===d||(f=f[15],10&d.type))););if(null===d)return!1;o=d,s=f}const l=jt.lFrame=Xo();return l.currentTNode=o,l.lView=s,!0}function Gu(s){const o=Xo(),u=s[1];jt.lFrame=o,o.currentTNode=u.firstChild,o.lView=s,o.tView=u,o.contextLView=s,o.bindingIndex=u.bindingStartIndex,o.inI18n=!1}function Xo(){const s=jt.lFrame,o=null===s?null:s.child;return null===o?Ih(s):o}function Ih(s){const o={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:s,child:null,inI18n:!1};return null!==s&&(s.child=o),o}function G_(){const s=jt.lFrame;return jt.lFrame=s.parent,s.currentTNode=null,s.lView=null,s}const q_=G_;function qu(){const s=G_();s.isParent=!0,s.tView=null,s.selectedIndex=-1,s.contextLView=null,s.elementDepthCount=0,s.currentDirectiveIndex=-1,s.currentNamespace=null,s.bindingRootIndex=-1,s.bindingIndex=-1,s.currentQueryIndex=0}function yi(){return jt.lFrame.selectedIndex}function Ks(s){jt.lFrame.selectedIndex=s}function tr(){const s=jt.lFrame;return fl(s.tView,s.selectedIndex)}function L0(){jt.lFrame.currentNamespace="svg"}function Ku(s,o){for(let u=o.directiveStart,l=o.directiveEnd;u<l;u++){const f=s.data[u].type.prototype,{ngAfterContentInit:y,ngAfterContentChecked:w,ngAfterViewInit:b,ngAfterViewChecked:S,ngOnDestroy:R}=f;y&&(s.contentHooks||(s.contentHooks=[])).push(-u,y),w&&((s.contentHooks||(s.contentHooks=[])).push(u,w),(s.contentCheckHooks||(s.contentCheckHooks=[])).push(u,w)),b&&(s.viewHooks||(s.viewHooks=[])).push(-u,b),S&&((s.viewHooks||(s.viewHooks=[])).push(u,S),(s.viewCheckHooks||(s.viewCheckHooks=[])).push(u,S)),null!=R&&(s.destroyHooks||(s.destroyHooks=[])).push(u,R)}}function bh(s,o,u){Z_(s,o,3,u)}function Ch(s,o,u,l){(3&s[2])===u&&Z_(s,o,u,l)}function Th(s,o){let u=s[2];(3&u)===o&&(u&=2047,u+=1,s[2]=u)}function Z_(s,o,u,l){const f=null!=l?l:-1,y=o.length-1;let w=0;for(let b=void 0!==l?65535&s[18]:0;b<y;b++)if("number"==typeof o[b+1]){if(w=o[b],null!=l&&w>=l)break}else o[b]<0&&(s[18]+=65536),(w<f||-1==f)&&(ug(s,u,o,b),s[18]=(4294901760&s[18])+b+2),b++}function ug(s,o,u,l){const d=u[l]<0,f=u[l+1],w=s[d?-u[l]:u[l]];if(d){if(s[2]>>11<s[18]>>16&&(3&s[2])===o){s[2]+=2048;try{f.call(w)}finally{}}}else try{f.call(w)}finally{}}class Il{constructor(o,u,l){this.factory=o,this.resolving=!1,this.canSeeViewProviders=u,this.injectImpl=l}}function kt(s,o,u){const l=Yn(s);let d=0;for(;d<u.length;){const f=u[d];if("number"==typeof f){if(0!==f)break;d++;const y=u[d++],w=u[d++],b=u[d++];l?s.setAttribute(o,w,b,y):o.setAttributeNS(y,w,b)}else{const y=f,w=u[++d];Wr(y)?l&&s.setProperty(o,y,w):l?s.setAttribute(o,y,w):o.setAttribute(y,w),d++}}return d}function Ir(s){return 3===s||4===s||6===s}function Wr(s){return 64===s.charCodeAt(0)}function cr(s,o){if(null!==o&&0!==o.length)if(null===s||0===s.length)s=o.slice();else{let u=-1;for(let l=0;l<o.length;l++){const d=o[l];"number"==typeof d?u=d:0===u||lg(s,u,d,null,-1===u||2===u?o[++l]:null)}}return s}function lg(s,o,u,l,d){let f=0,y=s.length;if(-1===o)y=-1;else for(;f<s.length;){const w=s[f++];if("number"==typeof w){if(w===o){y=-1;break}if(w>o){y=f-1;break}}}for(;f<s.length;){const w=s[f];if("number"==typeof w)break;if(w===u){if(null===l)return void(null!==d&&(s[f+1]=d));if(l===s[f+1])return void(s[f+2]=d)}f++,null!==l&&f++,null!==d&&f++}-1!==y&&(s.splice(y,0,o),f=y+1),s.splice(f++,0,u),null!==l&&s.splice(f++,0,l),null!==d&&s.splice(f++,0,d)}function br(s){return-1!==s}function ka(s){return 32767&s}function Oa(s,o){let u=function Ah(s){return s>>16}(s),l=o;for(;u>0;)l=l[15],u--;return l}let Zu=!0;function bo(s){const o=Zu;return Zu=s,o}let Cl=0;function zn(s,o){const u=Yu(s,o);if(-1!==u)return u;const l=o[1];l.firstCreatePass&&(s.injectorIndex=o.length,Fa(l.data,s),Fa(o,null),Fa(l.blueprint,null));const d=La(s,o),f=s.injectorIndex;if(br(d)){const y=ka(d),w=Oa(d,o),b=w[1].data;for(let S=0;S<8;S++)o[f+S]=w[y+S]|b[y+S]}return o[f+8]=d,f}function Fa(s,o){s.push(0,0,0,0,0,0,0,0,o)}function Yu(s,o){return-1===s.injectorIndex||s.parent&&s.parent.injectorIndex===s.injectorIndex||null===o[s.injectorIndex+8]?-1:s.injectorIndex}function La(s,o){if(s.parent&&-1!==s.parent.injectorIndex)return s.parent.injectorIndex;let u=0,l=null,d=o;for(;null!==d;){const f=d[1],y=f.type;if(l=2===y?f.declTNode:1===y?d[6]:null,null===l)return-1;if(u++,d=d[15],-1!==l.injectorIndex)return l.injectorIndex|u<<16}return-1}function Ua(s,o,u){!function hg(s,o,u){let l;"string"==typeof u?l=u.charCodeAt(0)||0:u.hasOwnProperty(ee)&&(l=u[ee]),null==l&&(l=u[ee]=Cl++);const d=255&l;o.data[s+(d>>5)]|=1<<d}(s,o,u)}function Qu(s,o,u){if(u&Pe.Optional)return s;De(o,"NodeInjector")}function ta(s,o,u,l){if(u&Pe.Optional&&void 0===l&&(l=null),0==(u&(Pe.Self|Pe.Host))){const d=s[9],f=Ze(void 0);try{return d?d.get(o,l,u&Pe.Optional):Dt(o,l,u&Pe.Optional)}finally{Ze(f)}}return Qu(l,o,u)}function Ph(s,o,u,l=Pe.Default,d){if(null!==s){const f=function ei(s){if("string"==typeof s)return s.charCodeAt(0)||0;const o=s.hasOwnProperty(ee)?s[ee]:void 0;return"number"==typeof o?o>=0?255&o:Xu:o}(u);if("function"==typeof f){if(!wl(o,s,l))return l&Pe.Host?Qu(d,u,l):ta(o,u,l,d);try{const y=f(l);if(null!=y||l&Pe.Optional)return y;De(u)}finally{q_()}}else if("number"==typeof f){let y=null,w=Yu(s,o),b=-1,S=l&Pe.Host?o[16][6]:null;for((-1===w||l&Pe.SkipSelf)&&(b=-1===w?La(s,o):o[w+8],-1!==b&&Tl(l,!1)?(y=o[1],w=ka(b),o=Oa(b,o)):w=-1);-1!==w;){const R=o[1];if(Nh(f,w,R.data)){const O=J_(w,o,u,y,l,S);if(O!==Ju)return O}b=o[w+8],-1!==b&&Tl(l,o[1].data[w+8]===S)&&Nh(f,w,o)?(y=R,w=ka(b),o=Oa(b,o)):w=-1}}}return ta(o,u,l,d)}const Ju={};function Xu(){return new jn(er(),We())}function J_(s,o,u,l,d,f){const y=o[1],w=y.data[s+8],R=Ds(w,y,u,null==l?dh(w)&&Zu:l!=y&&0!=(3&w.type),d&Pe.Host&&f===w);return null!==R?Va(o,y,R,w):Ju}function Ds(s,o,u,l,d){const f=s.providerIndexes,y=o.data,w=1048575&f,b=s.directiveStart,R=f>>20,W=d?w+R:s.directiveEnd;for(let te=l?w:w+R;te<W;te++){const Ae=y[te];if(te<b&&u===Ae||te>=b&&Ae.type===u)return te}if(d){const te=y[b];if(te&&rs(te)&&te.type===u)return b}return null}function Va(s,o,u,l){let d=s[u];const f=o.data;if(function Dh(s){return s instanceof Il}(d)){const y=d;y.resolving&&function Le(s,o){const u=o?`. Dependency path: ${o.join(" > ")} > ${s}`:"";throw new $e(-200,`Circular dependency in DI detected for ${s}${u}`)}(se(f[u]));const w=bo(y.canSeeViewProviders);y.resolving=!0;const b=y.injectImpl?Ze(y.injectImpl):null;wl(s,l,Pe.Default);try{d=s[u]=y.factory(void 0,f,s,l),o.firstCreatePass&&u>=l.directiveStart&&function ea(s,o,u){const{ngOnChanges:l,ngOnInit:d,ngDoCheck:f}=o.type.prototype;if(l){const y=ul(o);(u.preOrderHooks||(u.preOrderHooks=[])).push(s,y),(u.preOrderCheckHooks||(u.preOrderCheckHooks=[])).push(s,y)}d&&(u.preOrderHooks||(u.preOrderHooks=[])).push(0-s,d),f&&((u.preOrderHooks||(u.preOrderHooks=[])).push(s,f),(u.preOrderCheckHooks||(u.preOrderCheckHooks=[])).push(s,f))}(u,f[u],o)}finally{null!==b&&Ze(b),bo(w),y.resolving=!1,q_()}}return d}function Nh(s,o,u){return!!(u[o+(s>>5)]&1<<s)}function Tl(s,o){return!(s&Pe.Self||s&Pe.Host&&o)}class jn{constructor(o,u){this._tNode=o,this._lView=u}get(o,u,l){return Ph(this._tNode,this._lView,o,l,u)}}function Mh(s){return function xh(s,o){if("class"===o)return s.classes;if("style"===o)return s.styles;const u=s.attrs;if(u){const l=u.length;let d=0;for(;d<l;){const f=u[d];if(Ir(f))break;if(0===f)d+=2;else if("number"==typeof f)for(d++;d<l&&"string"==typeof u[d];)d++;else{if(f===o)return u[d+1];d+=2}}}return null}(er(),s)}const lr="__parameters__";function $i(s,o,u){return rt(()=>{const l=function Ba(s){return function(...u){if(s){const l=s(...u);for(const d in l)this[d]=l[d]}}}(o);function d(...f){if(this instanceof d)return l.apply(this,f),this;const y=new d(...f);return w.annotation=y,w;function w(b,S,R){const O=b.hasOwnProperty(lr)?b[lr]:Object.defineProperty(b,lr,{value:[]})[lr];for(;O.length<=R;)O.push(null);return(O[R]=O[R]||[]).push(y),b}}return u&&(d.prototype=Object.create(u.prototype)),d.prototype.ngMetadataName=s,d.annotationCls=d,d})}class dr{constructor(o,u){this._desc=o,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof u?this.__NG_ELEMENT_ID__=u:void 0!==u&&(this.\u0275prov=Gt({token:this,providedIn:u.providedIn||"root",factory:u.factory}))}toString(){return`InjectionToken ${this._desc}`}}const gg=new dr("AnalyzeForEntryComponents");function ai(s,o){void 0===o&&(o=s);for(let u=0;u<s.length;u++){let l=s[u];Array.isArray(l)?(o===s&&(o=s.slice(0,u)),ai(l,o)):o!==s&&o.push(l)}return o}function as(s,o){s.forEach(u=>Array.isArray(u)?as(u,o):o(u))}function nc(s,o,u){o>=s.length?s.push(u):s.splice(o,0,u)}function Al(s,o){return o>=s.length-1?s.pop():s.splice(o,1)[0]}function vi(s,o,u){let l=So(s,o);return l>=0?s[1|l]=u:(l=~l,function _g(s,o,u,l){let d=s.length;if(d==o)s.push(u,l);else if(1===d)s.push(l,s[0]),s[0]=u;else{for(d--,s.push(s[d-1],s[d]);d>o;)s[d]=s[d-2],d--;s[o]=u,s[o+1]=l}}(s,l,o,u)),l}function rc(s,o){const u=So(s,o);if(u>=0)return s[1|u]}function So(s,o){return function xl(s,o,u){let l=0,d=s.length>>u;for(;d!==l;){const f=l+(d-l>>1),y=s[f<<u];if(o===y)return f<<u;y>o?d=f:l=f+1}return~(d<<u)}(s,o,1)}const Ao={},Ml="__NG_DI_FLAG__",ic="ngTempTokenPath",X_=/\n/gm,sc="__source",kl=Ee({provide:String,useValue:Ee});let cs;function hn(s){const o=cs;return cs=s,o}function oc(s,o=Pe.Default){if(void 0===cs)throw new $e(203,"");return null===cs?Dt(s,void 0,o):cs.get(s,o&Pe.Optional?null:void 0,o)}function zr(s,o=Pe.Default){return(function ke(){return fe}()||oc)(Q(s),o)}function Ha(s){const o=[];for(let u=0;u<s.length;u++){const l=Q(s[u]);if(Array.isArray(l)){if(0===l.length)throw new $e(900,"");let d,f=Pe.Default;for(let y=0;y<l.length;y++){const w=l[y],b=Lh(w);"number"==typeof b?-1===b?d=w.token:f|=b:d=w}o.push(zr(d,f))}else o.push(zr(l))}return o}function Ro(s,o){return s[Ml]=o,s.prototype[Ml]=o,s}function Lh(s){return s[Ml]}const Wa=Ro($i("Inject",s=>({token:s})),-1),ls=Ro($i("Optional"),8),Qs=Ro($i("SkipSelf"),4);class Hl{constructor(o){this.changingThisBreaksApplicationSecurity=o}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see https://g.co/ng/security#xss)`}}function ds(s){return s instanceof Hl?s.changingThisBreaksApplicationSecurity:s}const p=/^(?:(?:https?|mailto|ftp|tel|file|sms):|[^&:/?#]*(?:[/?#]|$))/gi,I=/^data:(?:image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp)|video\/(?:mpeg|mp4|ogg|webm)|audio\/(?:mp3|oga|ogg|opus));base64,[a-z0-9+\/]+=*$/i;var Mr=(()=>((Mr=Mr||{})[Mr.NONE=0]="NONE",Mr[Mr.HTML=1]="HTML",Mr[Mr.STYLE=2]="STYLE",Mr[Mr.SCRIPT=3]="SCRIPT",Mr[Mr.URL=4]="URL",Mr[Mr.RESOURCE_URL=5]="RESOURCE_URL",Mr))();function Kl(s){const o=function Zl(){const s=We();return s&&s[12]}();return o?o.sanitize(Mr.URL,s)||"":function Ps(s,o){const u=function $h(s){return s instanceof Hl&&s.getTypeName()||null}(s);if(null!=u&&u!==o){if("ResourceURL"===u&&"URL"===o)return!0;throw new Error(`Required a safe ${o}, got a ${u} (see https://g.co/ng/security#xss)`)}return u===o}(s,"URL")?ds(s):function A(s){return(s=String(s)).match(p)||s.match(I)?s:"unsafe:"+s}(q(s))}const Y0="__ngContext__";function Ei(s,o){s[Y0]=o}function ay(s){const o=function Kh(s){return s[Y0]||null}(s);return o?Array.isArray(o)?o:o.lView:null}function dy(s){return s.ngOriginalError}function BT(s,...o){s.error(...o)}class Jh{constructor(){this._console=console}handleError(o){const u=this._findOriginalError(o),l=function VT(s){return s&&s.ngErrorLogger||BT}(o);l(this._console,"ERROR",o),u&&l(this._console,"ORIGINAL ERROR",u)}_findOriginalError(o){let u=o&&dy(o);for(;u&&dy(u);)u=dy(u);return u||null}}const J0=(()=>("undefined"!=typeof requestAnimationFrame&&requestAnimationFrame||setTimeout).bind(qt))();function Xs(s){return s instanceof Function?s():s}var Po=(()=>((Po=Po||{})[Po.Important=1]="Important",Po[Po.DashCase=2]="DashCase",Po))();function fy(s,o){return undefined(s,o)}function Xh(s){const o=s[3];return ns(o)?o[3]:o}function Fg(s){return iw(s[13])}function gy(s){return iw(s[4])}function iw(s){for(;null!==s&&!ns(s);)s=s[4];return s}function Yl(s,o,u,l,d){if(null!=l){let f,y=!1;ns(l)?f=l:mi(l)&&(y=!0,l=l[0]);const w=Wn(l);0===s&&null!==u?null==d?lw(o,u,w):eu(o,u,w,d||null,!0):1===s&&null!==u?eu(o,u,w,d||null,!0):2===s?function mw(s,o,u){const l=$g(s,o);l&&function yy(s,o,u,l){Yn(s)?s.removeChild(o,u,l):o.removeChild(u)}(s,l,o,u)}(o,w,y):3===s&&o.destroyNode(w),null!=f&&function ef(s,o,u,l,d){const f=u[7];f!==Wn(u)&&Yl(o,s,l,f,d);for(let w=10;w<u.length;w++){const b=u[w];Xl(b[1],b,s,o,l,f)}}(o,s,f,u,d)}}function ci(s,o,u){if(Yn(s))return s.createElement(o,u);{const l=null!==u?function rg(s){const o=s.toLowerCase();return"svg"===o?"http://www.w3.org/2000/svg":"math"===o?"http://www.w3.org/1998/MathML/":null}(u):null;return null===l?s.createElement(o):s.createElementNS(l,o)}}function aw(s,o){const u=s[9],l=u.indexOf(o),d=o[3];1024&o[2]&&(o[2]&=-1025,Qo(d,-1)),u.splice(l,1)}function Bg(s,o){if(s.length<=10)return;const u=10+o,l=s[u];if(l){const d=l[17];null!==d&&d!==s&&aw(d,l),o>0&&(s[u-1][4]=l[4]);const f=Al(s,10+o);!function JT(s,o){Xl(s,o,o[11],2,null,null),o[0]=null,o[6]=null}(l[1],l);const y=f[19];null!==y&&y.detachView(f[1]),l[3]=null,l[4]=null,l[2]&=-129}return l}function uw(s,o){if(!(256&o[2])){const u=o[11];Yn(u)&&u.destroyNode&&Xl(s,o,u,3,null,null),function Vg(s){let o=s[13];if(!o)return jg(s[1],s);for(;o;){let u=null;if(mi(o))u=o[13];else{const l=o[10];l&&(u=l)}if(!u){for(;o&&!o[4]&&o!==s;)mi(o)&&jg(o[1],o),o=o[3];null===o&&(o=s),mi(o)&&jg(o[1],o),u=o&&o[4]}o=u}}(o)}}function jg(s,o){if(!(256&o[2])){o[2]&=-129,o[2]|=256,function _y(s,o){let u;if(null!=s&&null!=(u=s.destroyHooks))for(let l=0;l<u.length;l+=2){const d=o[u[l]];if(!(d instanceof Il)){const f=u[l+1];if(Array.isArray(f))for(let y=0;y<f.length;y+=2){const w=d[f[y]],b=f[y+1];try{b.call(w)}finally{}}else try{f.call(d)}finally{}}}}(s,o),function cw(s,o){const u=s.cleanup,l=o[7];let d=-1;if(null!==u)for(let f=0;f<u.length-1;f+=2)if("string"==typeof u[f]){const y=u[f+1],w="function"==typeof y?y(o):Wn(o[y]),b=l[d=u[f+2]],S=u[f+3];"boolean"==typeof S?w.removeEventListener(u[f],b,S):S>=0?l[d=S]():l[d=-S].unsubscribe(),f+=2}else{const y=l[d=u[f+1]];u[f].call(y)}if(null!==l){for(let f=d+1;f<l.length;f++)l[f]();o[7]=null}}(s,o),1===o[1].type&&Yn(o[11])&&o[11].destroy();const u=o[17];if(null!==u&&ns(o[3])){u!==o[3]&&aw(u,o);const l=o[19];null!==l&&l.detachView(s)}}}function XT(s,o,u){return function Xa(s,o,u){let l=o;for(;null!==l&&40&l.type;)l=(o=l).parent;if(null===l)return u[0];if(2&l.flags){const d=s.data[l.directiveStart].encapsulation;if(d===Et.None||d===Et.Emulated)return null}return Xr(l,u)}(s,o.parent,u)}function eu(s,o,u,l,d){Yn(s)?s.insertBefore(o,u,l,d):o.insertBefore(u,l,d)}function lw(s,o,u){Yn(s)?s.appendChild(o,u):o.appendChild(u)}function dw(s,o,u,l,d){null!==l?eu(s,o,u,l,d):lw(s,o,u)}function $g(s,o){return Yn(s)?s.parentNode(o):o.parentNode}let fw=function vy(s,o,u){return 40&s.type?Xr(s,u):null};function Jl(s,o,u,l){const d=XT(s,l,o),f=o[11],w=function hw(s,o,u){return fw(s,o,u)}(l.parent||o[6],l,o);if(null!=d)if(Array.isArray(u))for(let b=0;b<u.length;b++)dw(f,d,u[b],w,!1);else dw(f,d,u,w,!1)}function Hg(s,o){if(null!==o){const u=o.type;if(3&u)return Xr(o,s);if(4&u)return Wg(-1,s[o.index]);if(8&u){const l=o.child;if(null!==l)return Hg(s,l);{const d=s[o.index];return ns(d)?Wg(-1,d):Wn(d)}}if(32&u)return fy(o,s)()||Wn(s[o.index]);{const l=gw(s,o);return null!==l?Array.isArray(l)?l[0]:Hg(Xh(s[16]),l):Hg(s,o.next)}}return null}function gw(s,o){return null!==o?s[16][6].projection[o.projection]:null}function Wg(s,o){const u=10+s+1;if(u<o.length){const l=o[u],d=l[1].firstChild;if(null!==d)return Hg(l,d)}return o[7]}function _w(s,o,u,l,d,f,y){for(;null!=u;){const w=l[u.index],b=u.type;if(y&&0===o&&(w&&Ei(Wn(w),l),u.flags|=4),64!=(64&u.flags))if(8&b)_w(s,o,u.child,l,d,f,!1),Yl(o,s,d,w,f);else if(32&b){const S=fy(u,l);let R;for(;R=S();)Yl(o,s,d,R,f);Yl(o,s,d,w,f)}else 16&b?Fn(s,o,l,u,d,f):Yl(o,s,d,w,f);u=y?u.projectionNext:u.next}}function Xl(s,o,u,l,d,f){_w(u,l,s.firstChild,o,d,f,!1)}function Fn(s,o,u,l,d,f){const y=u[16],b=y[6].projection[l.projection];if(Array.isArray(b))for(let S=0;S<b.length;S++)Yl(o,s,d,b[S],f);else _w(s,o,b,y[3],d,f,!0)}function vw(s,o,u){Yn(s)?s.setAttribute(o,"style",u):o.style.cssText=u}function tu(s,o,u){Yn(s)?""===u?s.removeAttribute(o,"class"):s.setAttribute(o,"class",u):o.className=u}function wi(s,o,u){let l=s.length;for(;;){const d=s.indexOf(o,u);if(-1===d)return d;if(0===d||s.charCodeAt(d-1)<=32){const f=o.length;if(d+f===l||s.charCodeAt(d+f)<=32)return d}u=d+1}}const tf="ng-template";function zg(s,o,u){let l=0;for(;l<s.length;){let d=s[l++];if(u&&"class"===d){if(d=s[l],-1!==wi(d.toLowerCase(),o,0))return!0}else if(1===d){for(;l<s.length&&"string"==typeof(d=s[l++]);)if(d.toLowerCase()===o)return!0;return!1}}return!1}function nD(s){return 4===s.type&&s.value!==tf}function Iy(s,o,u){return o===(4!==s.type||u?s.value:tf)}function rD(s,o,u){let l=4;const d=s.attrs||[],f=function ww(s){for(let o=0;o<s.length;o++)if(Ir(s[o]))return o;return s.length}(d);let y=!1;for(let w=0;w<o.length;w++){const b=o[w];if("number"!=typeof b){if(!y)if(4&l){if(l=2|1&l,""!==b&&!Iy(s,b,u)||""===b&&1===o.length){if(jr(l))return!1;y=!0}}else{const S=8&l?b:o[++w];if(8&l&&null!==s.attrs){if(!zg(s.attrs,S,u)){if(jr(l))return!1;y=!0}continue}const O=nf(8&l?"class":b,d,nD(s),u);if(-1===O){if(jr(l))return!1;y=!0;continue}if(""!==S){let W;W=O>f?"":d[O+1].toLowerCase();const te=8&l?W:null;if(te&&-1!==wi(te,S,0)||2&l&&S!==W){if(jr(l))return!1;y=!0}}}}else{if(!y&&!jr(l)&&!jr(b))return!1;if(y&&jr(b))continue;y=!1,l=b|1&l}}return jr(l)||y}function jr(s){return 0==(1&s)}function nf(s,o,u,l){if(null===o)return-1;let d=0;if(l||!u){let f=!1;for(;d<o.length;){const y=o[d];if(y===s)return d;if(3===y||6===y)f=!0;else{if(1===y||2===y){let w=o[++d];for(;"string"==typeof w;)w=o[++d];continue}if(4===y)break;if(0===y){d+=4;continue}}d+=f?1:2}return-1}return function Cy(s,o){let u=s.indexOf(4);if(u>-1)for(u++;u<s.length;){const l=s[u];if("number"==typeof l)return-1;if(l===o)return u;u++}return-1}(o,s)}function Ew(s,o,u=!1){for(let l=0;l<o.length;l++)if(rD(s,o[l],u))return!0;return!1}function bw(s,o){return s?":not("+o.trim()+")":o}function iD(s){let o=s[0],u=1,l=2,d="",f=!1;for(;u<s.length;){let y=s[u];if("string"==typeof y)if(2&l){const w=s[++u];d+="["+y+(w.length>0?'="'+w+'"':"")+"]"}else 8&l?d+="."+y:4&l&&(d+=" "+y);else""!==d&&!jr(y)&&(o+=bw(f,d),d=""),l=y,f=f||!jr(l);u++}return""!==d&&(o+=bw(f,d)),o}const on={};function oD(s){aD(gn(),We(),yi()+s,Na())}function aD(s,o,u,l){if(!l)if(3==(3&o[2])){const f=s.preOrderCheckHooks;null!==f&&bh(o,f,u)}else{const f=s.preOrderHooks;null!==f&&Ch(o,f,0,u)}Ks(u)}function rf(s,o){return s<<17|o<<2}function Ms(s){return s>>17&32767}function _c(s){return 2|s}function oa(s){return(131068&s)>>2}function Oi(s,o){return-131069&s|o<<2}function eo(s){return 1|s}function My(s,o){const u=s.contentQueries;if(null!==u)for(let l=0;l<u.length;l+=2){const d=u[l],f=u[l+1];if(-1!==f){const y=s.data[f];wh(d),y.contentQueries(2,o[f],f)}}}function vc(s,o,u,l,d,f,y,w,b,S){const R=o.blueprint.slice();return R[0]=d,R[2]=140|l,wo(R),R[3]=R[15]=s,R[8]=u,R[10]=y||s&&s[10],R[11]=w||s&&s[11],R[12]=b||s&&s[12]||null,R[9]=S||s&&s[9]||null,R[6]=f,R[16]=2==o.type?s[16]:R,R}function af(s,o,u,l,d){let f=s.data[o];if(null===f)f=function uf(s,o,u,l,d){const f=_l(),y=yh(),b=s.data[o]=function FP(s,o,u,l,d,f){return{type:u,index:l,insertBeforeIndex:null,injectorIndex:o?o.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,propertyBindings:null,flags:0,providerIndexes:0,value:d,attrs:f,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:o,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,y?f:f&&f.parent,u,o,l,d);return null===s.firstChild&&(s.firstChild=b),null!==f&&(y?null==f.child&&null!==b.parent&&(f.child=b):null===f.next&&(f.next=b)),b}(s,o,u,l,d),function $_(){return jt.lFrame.inI18n}()&&(f.flags|=64);else if(64&f.type){f.type=u,f.value=l,f.attrs=d;const y=function Jo(){const s=jt.lFrame,o=s.currentTNode;return s.isParent?o:o.parent}();f.injectorIndex=null===y?-1:y.injectorIndex}return ss(f,!0),f}function td(s,o,u,l){if(0===u)return-1;const d=o.length;for(let f=0;f<u;f++)o.push(l),s.blueprint.push(l),s.data.push(null);return d}function Ec(s,o,u){Gu(o);try{const l=s.viewQuery;null!==l&&Yw(1,l,u);const d=s.template;null!==d&&gD(s,o,d,1,u),s.firstCreatePass&&(s.firstCreatePass=!1),s.staticContentQueries&&My(s,o),s.staticViewQueries&&Yw(2,s.viewQuery,u);const f=s.components;null!==f&&function Ow(s,o){for(let u=0;u<o.length;u++)qP(s,o[u])}(o,f)}catch(l){throw s.firstCreatePass&&(s.incompleteFirstPass=!0,s.firstCreatePass=!1),l}finally{o[2]&=-5,qu()}}function nd(s,o,u,l){const d=o[2];if(256==(256&d))return;Gu(o);const f=Na();try{wo(o),function vl(s){return jt.lFrame.bindingIndex=s}(s.bindingStartIndex),null!==u&&gD(s,o,u,2,l);const y=3==(3&d);if(!f)if(y){const S=s.preOrderCheckHooks;null!==S&&bh(o,S,null)}else{const S=s.preOrderHooks;null!==S&&Ch(o,S,0,null),Th(o,0)}if(function zP(s){for(let o=Fg(s);null!==o;o=gy(o)){if(!o[2])continue;const u=o[9];for(let l=0;l<u.length;l++){const d=u[l],f=d[3];0==(1024&d[2])&&Qo(f,1),d[2]|=1024}}}(o),function WP(s){for(let o=Fg(s);null!==o;o=gy(o))for(let u=10;u<o.length;u++){const l=o[u],d=l[1];Pa(l)&&nd(d,l,d.template,l[8])}}(o),null!==s.contentQueries&&My(s,o),!f)if(y){const S=s.contentCheckHooks;null!==S&&bh(o,S)}else{const S=s.contentHooks;null!==S&&Ch(o,S,1),Th(o,1)}!function yc(s,o){const u=s.hostBindingOpCodes;if(null!==u)try{for(let l=0;l<u.length;l++){const d=u[l];if(d<0)Ks(~d);else{const f=d,y=u[++l],w=u[++l];H_(y,f),w(2,o[f])}}}finally{Ks(-1)}}(s,o);const w=s.components;null!==w&&function kP(s,o){for(let u=0;u<o.length;u++)GP(s,o[u])}(o,w);const b=s.viewQuery;if(null!==b&&Yw(2,b,l),!f)if(y){const S=s.viewCheckHooks;null!==S&&bh(o,S)}else{const S=s.viewHooks;null!==S&&Ch(o,S,2),Th(o,2)}!0===s.firstUpdatePass&&(s.firstUpdatePass=!1),f||(o[2]&=-73),1024&o[2]&&(o[2]&=-1025,Qo(o[3],-1))}finally{qu()}}function Fw(s,o,u,l){const d=o[10],f=!Na(),y=Yo(o);try{f&&!y&&d.begin&&d.begin(),y&&Ec(s,o,l),nd(s,o,u,l)}finally{f&&!y&&d.end&&d.end()}}function gD(s,o,u,l,d){const f=yi(),y=2&l;try{Ks(-1),y&&o.length>20&&aD(s,o,20,Na()),u(l,d)}finally{Ks(f)}}function rd(s,o,u){if(ku(o)){const d=o.directiveEnd;for(let f=o.directiveStart;f<d;f++){const y=s.data[f];y.contentQueries&&y.contentQueries(1,u[f],f)}}}function ky(s,o,u){!ml()||(function vD(s,o,u,l){const d=u.directiveStart,f=u.directiveEnd;s.firstCreatePass||zn(u,o),Ei(l,o);const y=u.initialInputs;for(let w=d;w<f;w++){const b=s.data[w],S=rs(b);S&&ID(o,u,b);const R=Va(o,s,w,u);Ei(R,o),null!==y&&bD(0,w-d,R,b,0,y),S&&(_i(u.index,o)[8]=R)}}(s,o,u,Xr(u,o)),128==(128&u.flags)&&function Ww(s,o,u){const l=u.directiveStart,d=u.directiveEnd,y=u.index,w=function vh(){return jt.lFrame.currentDirectiveIndex}();try{Ks(y);for(let b=l;b<d;b++){const S=s.data[b],R=o[b];Eh(b),(null!==S.hostBindings||0!==S.hostVars||null!==S.hostAttrs)&&ED(S,R)}}finally{Ks(-1),Eh(w)}}(s,o,u))}function Oy(s,o,u=Xr){const l=o.localNames;if(null!==l){let d=o.index+1;for(let f=0;f<l.length;f+=2){const y=l[f+1],w=-1===y?u(o,s):s[y];s[d++]=w}}}function Lw(s){const o=s.tView;return null===o||o.incompleteFirstPass?s.tView=Zg(1,null,s.template,s.decls,s.vars,s.directiveDefs,s.pipeDefs,s.viewQuery,s.schemas,s.consts):o}function Zg(s,o,u,l,d,f,y,w,b,S){const R=20+l,O=R+d,W=function Uw(s,o){const u=[];for(let l=0;l<o;l++)u.push(l<s?null:on);return u}(R,O),te="function"==typeof S?S():S;return W[1]={type:s,blueprint:W,template:u,queries:null,viewQuery:w,declTNode:o,data:W.slice().fill(null,R),bindingStartIndex:R,expandoStartIndex:O,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof f?f():f,pipeRegistry:"function"==typeof y?y():y,firstChild:null,schemas:b,consts:te,incompleteFirstPass:!1}}function Bw(s,o,u,l){const d=ko(o);null===u?d.push(l):(d.push(u),s.firstCreatePass&&lt(s).push(l,d.length-1))}function mD(s,o,u){for(let l in s)if(s.hasOwnProperty(l)){const d=s[l];(u=null===u?{}:u).hasOwnProperty(l)?u[l].push(o,d):u[l]=[o,d]}return u}function Qg(s,o,u,l){let d=!1;if(ml()){const f=function $P(s,o,u){const l=s.directiveRegistry;let d=null;if(l)for(let f=0;f<l.length;f++){const y=l[f];Ew(u,y.selectors,!1)&&(d||(d=[]),Ua(zn(u,o),s,y.type),rs(y)?(zw(s,u),d.unshift(y)):d.push(y))}return d}(s,o,u),y=null===l?null:{"":-1};if(null!==f){d=!0,Gw(u,s.data.length,f.length);for(let R=0;R<f.length;R++){const O=f[R];O.providersResolver&&O.providersResolver(O)}let w=!1,b=!1,S=td(s,o,f.length,null);for(let R=0;R<f.length;R++){const O=f[R];u.mergedAttrs=cr(u.mergedAttrs,O.hostAttrs),Uy(s,u,o,S,O),wD(S,O,y),null!==O.contentQueries&&(u.flags|=8),(null!==O.hostBindings||null!==O.hostAttrs||0!==O.hostVars)&&(u.flags|=128);const W=O.type.prototype;!w&&(W.ngOnChanges||W.ngOnInit||W.ngDoCheck)&&((s.preOrderHooks||(s.preOrderHooks=[])).push(u.index),w=!0),!b&&(W.ngOnChanges||W.ngDoCheck)&&((s.preOrderCheckHooks||(s.preOrderCheckHooks=[])).push(u.index),b=!0),S++}!function LP(s,o){const l=o.directiveEnd,d=s.data,f=o.attrs,y=[];let w=null,b=null;for(let S=o.directiveStart;S<l;S++){const R=d[S],O=R.inputs,W=null===f||nD(o)?null:CD(O,f);y.push(W),w=mD(O,S,w),b=mD(R.outputs,S,b)}null!==w&&(w.hasOwnProperty("class")&&(o.flags|=16),w.hasOwnProperty("style")&&(o.flags|=32)),o.initialInputs=y,o.inputs=w,o.outputs=b}(s,u)}y&&function Ly(s,o,u){if(o){const l=s.localNames=[];for(let d=0;d<o.length;d+=2){const f=u[o[d+1]];if(null==f)throw new $e(-301,!1);l.push(o[d],f)}}}(u,l,y)}return u.mergedAttrs=cr(u.mergedAttrs,u.attrs),d}function Hw(s,o,u,l,d,f){const y=f.hostBindings;if(y){let w=s.hostBindingOpCodes;null===w&&(w=s.hostBindingOpCodes=[]);const b=~o.index;(function yD(s){let o=s.length;for(;o>0;){const u=s[--o];if("number"==typeof u&&u<0)return u}return 0})(w)!=b&&w.push(b),w.push(l,d,y)}}function ED(s,o){null!==s.hostBindings&&s.hostBindings(1,o)}function zw(s,o){o.flags|=2,(s.components||(s.components=[])).push(o.index)}function wD(s,o,u){if(u){if(o.exportAs)for(let l=0;l<o.exportAs.length;l++)u[o.exportAs[l]]=s;rs(o)&&(u[""]=s)}}function Gw(s,o,u){s.flags|=1,s.directiveStart=o,s.directiveEnd=o+u,s.providerIndexes=o}function Uy(s,o,u,l,d){s.data[l]=d;const f=d.factory||(d.factory=is(d.type)),y=new Il(f,rs(d),null);s.blueprint[l]=y,u[l]=y,Hw(s,o,0,l,td(s,u,d.hostVars,on),d)}function ID(s,o,u){const l=Xr(o,s),d=Lw(u),f=s[10],y=Xg(s,vc(s,d,null,u.onPush?64:16,l,o,f,f.createRenderer(l,u),null,null));s[o.index]=y}function Mo(s,o,u,l,d,f){const y=Xr(s,o);!function Vy(s,o,u,l,d,f,y){if(null==f)Yn(s)?s.removeAttribute(o,d,u):o.removeAttribute(d);else{const w=null==y?q(f):y(f,l||"",d);Yn(s)?s.setAttribute(o,d,w,u):u?o.setAttributeNS(u,d,w):o.setAttribute(d,w)}}(o[11],y,f,s.value,u,l,d)}function bD(s,o,u,l,d,f){const y=f[o];if(null!==y){const w=l.setInput;for(let b=0;b<y.length;){const S=y[b++],R=y[b++],O=y[b++];null!==w?l.setInput(u,O,S,R):u[R]=O}}}function CD(s,o){let u=null,l=0;for(;l<o.length;){const d=o[l];if(0!==d)if(5!==d){if("number"==typeof d)break;s.hasOwnProperty(d)&&(null===u&&(u=[]),u.push(d,s[d],o[l+1])),l+=2}else l+=2;else l+=4}return u}function qw(s,o,u,l){return new Array(s,!0,!1,o,null,0,l,u,null,null)}function GP(s,o){const u=_i(o,s);if(Pa(u)){const l=u[1];80&u[2]?nd(l,u,l.template,u[8]):u[5]>0&&Kw(u)}}function Kw(s){for(let l=Fg(s);null!==l;l=gy(l))for(let d=10;d<l.length;d++){const f=l[d];if(1024&f[2]){const y=f[1];nd(y,f,y.template,f[8])}else f[5]>0&&Kw(f)}const u=s[1].components;if(null!==u)for(let l=0;l<u.length;l++){const d=_i(u[l],s);Pa(d)&&d[5]>0&&Kw(d)}}function qP(s,o){const u=_i(o,s),l=u[1];(function Jg(s,o){for(let u=o.length;u<s.blueprint.length;u++)o.push(s.blueprint[u])})(l,u),Ec(l,u,u[8])}function Xg(s,o){return s[13]?s[14][4]=o:s[13]=o,s[14]=o,o}function ks(s){for(;s;){s[2]|=64;const o=Xh(s);if(hh(s)&&!o)return s;s=o}return null}function cf(s,o,u){const l=o[10];l.begin&&l.begin();try{nd(s,o,s.template,u)}catch(d){throw Os(o,d),d}finally{l.end&&l.end()}}function Zw(s){!function em(s){for(let o=0;o<s.components.length;o++){const u=s.components[o],l=ay(u),d=l[1];Fw(d,l,d.template,u)}}(s[8])}function Yw(s,o,u){wh(0),o(s,u)}const YP=(()=>Promise.resolve(null))();function ko(s){return s[7]||(s[7]=[])}function lt(s){return s.cleanup||(s.cleanup=[])}function Os(s,o){const u=s[9],l=u?u.get(Jh,null):null;l&&l.handleError(o)}function SD(s,o,u,l,d){for(let f=0;f<u.length;){const y=u[f++],w=u[f++],b=o[y],S=s.data[y];null!==S.setInput?S.setInput(b,d,l,w):b[w]=d}}function aa(s,o,u){const l=xa(o,s);!function sw(s,o,u){Yn(s)?s.setValue(o,u):o.textContent=u}(s[11],l,u)}function Ce(s,o,u){let l=u?s.styles:null,d=u?s.classes:null,f=0;if(null!==o)for(let y=0;y<o.length;y++){const w=o[y];"number"==typeof w?f=w:1==f?d=_e(d,w):2==f&&(l=_e(l,w+": "+o[++y]+";"))}u?s.styles=l:s.stylesWithoutHost=l,u?s.classes=d:s.classesWithoutHost=d}const Z=new dr("INJECTOR",-1);class Qw{get(o,u=Ao){if(u===Ao){const l=new Error(`NullInjectorError: No provider for ${de(o)}!`);throw l.name="NullInjectorError",l}return u}}const ro=new dr("Set Injector scope."),It={},By={};let Jt;function df(){return void 0===Jt&&(Jt=new Qw),Jt}function tm(s,o=null,u=null,l){const d=id(s,o,u,l);return d._resolveInjectorDefTypes(),d}function id(s,o=null,u=null,l){return new AD(s,u,o||df(),l)}class AD{constructor(o,u,l,d=null){this.parent=l,this.records=new Map,this.injectorDefTypes=new Set,this.onDestroy=new Set,this._destroyed=!1;const f=[];u&&as(u,w=>this.processProvider(w,o,u)),as([o],w=>this.processInjectorType(w,[],f)),this.records.set(Z,Cr(void 0,this));const y=this.records.get(ro);this.scope=null!=y?y.value:null,this.source=d||("object"==typeof o?null:de(o))}get destroyed(){return this._destroyed}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{this.onDestroy.forEach(o=>o.ngOnDestroy())}finally{this.records.clear(),this.onDestroy.clear(),this.injectorDefTypes.clear()}}get(o,u=Ao,l=Pe.Default){this.assertNotDestroyed();const d=hn(this),f=Ze(void 0);try{if(!(l&Pe.SkipSelf)){let w=this.records.get(o);if(void 0===w){const b=function ND(s){return"function"==typeof s||"object"==typeof s&&s instanceof dr}(o)&&_t(o);w=b&&this.injectableDefInScope(b)?Cr(hf(o),It):null,this.records.set(o,w)}if(null!=w)return this.hydrate(o,w)}return(l&Pe.Self?df():this.parent).get(o,u=l&Pe.Optional&&u===Ao?null:u)}catch(y){if("NullInjectorError"===y.name){if((y[ic]=y[ic]||[]).unshift(de(o)),d)throw y;return function ac(s,o,u,l){const d=s[ic];throw o[sc]&&d.unshift(o[sc]),s.message=function ra(s,o,u,l=null){s=s&&"\n"===s.charAt(0)&&"\u0275"==s.charAt(1)?s.substr(2):s;let d=de(o);if(Array.isArray(o))d=o.map(de).join(" -> ");else if("object"==typeof o){let f=[];for(let y in o)if(o.hasOwnProperty(y)){let w=o[y];f.push(y+":"+("string"==typeof w?JSON.stringify(w):de(w)))}d=`{${f.join(", ")}}`}return`${u}${l?"("+l+")":""}[${d}]: ${s.replace(X_,"\n  ")}`}("\n"+s.message,d,u,l),s.ngTokenPath=d,s[ic]=null,s}(y,o,"R3InjectorError",this.source)}throw y}finally{Ze(f),hn(d)}}_resolveInjectorDefTypes(){this.injectorDefTypes.forEach(o=>this.get(o))}toString(){const o=[];return this.records.forEach((l,d)=>o.push(de(d))),`R3Injector[${o.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new $e(205,!1)}processInjectorType(o,u,l){if(!(o=Q(o)))return!1;let d=en(o);const f=null==d&&o.ngModule||void 0,y=void 0===f?o:f,w=-1!==l.indexOf(y);if(void 0!==f&&(d=en(f)),null==d)return!1;if(null!=d.imports&&!w){let R;l.push(y);try{as(d.imports,O=>{this.processInjectorType(O,u,l)&&(void 0===R&&(R=[]),R.push(O))})}finally{}if(void 0!==R)for(let O=0;O<R.length;O++){const{ngModule:W,providers:te}=R[O];as(te,Ae=>this.processProvider(Ae,W,te||L))}}this.injectorDefTypes.add(y);const b=is(y)||(()=>new y);this.records.set(y,Cr(b,It));const S=d.providers;if(null!=S&&!w){const R=o;as(S,O=>this.processProvider(O,R,S))}return void 0!==f&&void 0!==o.providers}processProvider(o,u,l){let d=sd(o=Q(o))?o:Q(o&&o.provide);const f=function xD(s,o,u){return ff(s)?Cr(void 0,s.useValue):Cr(function Jw(s,o,u){let l;if(sd(s)){const d=Q(s);return is(d)||hf(d)}if(ff(s))l=()=>Q(s.useValue);else if(function ru(s){return!(!s||!s.useFactory)}(s))l=()=>s.useFactory(...Ha(s.deps||[]));else if(function di(s){return!(!s||!s.useExisting)}(s))l=()=>zr(Q(s.useExisting));else{const d=Q(s&&(s.useClass||s.provide));if(!function Xw(s){return!!s.deps}(s))return is(d)||hf(d);l=()=>new d(...Ha(s.deps))}return l}(s),It)}(o);if(sd(o)||!0!==o.multi)this.records.get(d);else{let y=this.records.get(d);y||(y=Cr(void 0,It,!0),y.factory=()=>Ha(y.multi),this.records.set(d,y)),d=o,y.multi.push(o)}this.records.set(d,f)}hydrate(o,u){return u.value===It&&(u.value=By,u.value=u.factory()),"object"==typeof u.value&&u.value&&function eI(s){return null!==s&&"object"==typeof s&&"function"==typeof s.ngOnDestroy}(u.value)&&this.onDestroy.add(u.value),u.value}injectableDefInScope(o){if(!o.providedIn)return!1;const u=Q(o.providedIn);return"string"==typeof u?"any"===u||u===this.scope:this.injectorDefTypes.has(u)}}function hf(s){const o=_t(s),u=null!==o?o.factory:is(s);if(null!==u)return u;if(s instanceof dr)throw new $e(204,!1);if(s instanceof Function)return function RD(s){const o=s.length;if(o>0)throw function us(s,o){const u=[];for(let l=0;l<s;l++)u.push(o);return u}(o,"?"),new $e(204,!1);const u=function zt(s){const o=s&&(s[Sn]||s[An]);if(o){const u=function nn(s){if(s.hasOwnProperty("name"))return s.name;const o=(""+s).match(/^function\s*([^\s(]+)/);return null===o?"":o[1]}(s);return console.warn(`DEPRECATED: DI is instantiating a token "${u}" that inherits its @Injectable decorator but does not provide one itself.\nThis will become an error in a future version of Angular. Please add @Injectable() to the "${u}" class.`),o}return null}(s);return null!==u?()=>u.factory(s):()=>new s}(s);throw new $e(204,!1)}function Cr(s,o,u=!1){return{factory:s,value:o,multi:u?[]:void 0}}function ff(s){return null!==s&&"object"==typeof s&&kl in s}function sd(s){return"function"==typeof s}let fs=(()=>{class s{static create(u,l){var d;if(Array.isArray(u))return tm({name:""},l,u,"");{const f=null!==(d=u.name)&&void 0!==d?d:"";return tm({name:f},u.parent,u.providers,f)}}}return s.THROW_IF_NOT_FOUND=Ao,s.NULL=new Qw,s.\u0275prov=Gt({token:s,providedIn:"any",factory:()=>zr(Z)}),s.__NG_ELEMENT_ID__=-1,s})();function Ky(s,o){Ku(ay(s)[1],er())}let od=null;function iu(){if(!od){const s=qt.Symbol;if(s&&s.iterator)od=s.iterator;else{const o=Object.getOwnPropertyNames(Map.prototype);for(let u=0;u<o.length;++u){const l=o[u];"entries"!==l&&"size"!==l&&Map.prototype[l]===Map.prototype.entries&&(od=l)}}}return od}function Ic(s){return!!Yy(s)&&(Array.isArray(s)||!(s instanceof Map)&&iu()in s)}function Yy(s){return null!==s&&("function"==typeof s||"object"==typeof s)}function ni(s,o,u){return!Object.is(s[o],u)&&(s[o]=u,!0)}function yf(s,o,u,l){const d=We();return ni(d,Ma(),o)&&(gn(),Mo(tr(),d,s,o,u,l)),yf}function Xy(s,o,u,l,d,f,y,w){const b=We(),S=gn(),R=s+20,O=S.firstCreatePass?function Jy(s,o,u,l,d,f,y,w,b){const S=o.consts,R=af(o,s,4,y||null,Gs(S,w));Qg(o,u,R,Gs(S,b)),Ku(o,R);const O=R.tViews=Zg(2,R,l,d,f,o.directiveRegistry,o.pipeRegistry,null,o.schemas,S);return null!==o.queries&&(o.queries.template(o,R),O.queries=o.queries.embeddedTView(R)),R}(R,S,b,o,u,l,d,f,y):S.data[R];ss(O,!1);const W=b[11].createComment("");Jl(S,b,W,O),Ei(W,b),Xg(b,b[R]=qw(W,b,W,O)),Ko(O)&&ky(S,b,O),null!=y&&Oy(b,O,w)}function so(s,o=Pe.Default){const u=We();return null===u?zr(s,o):Ph(er(),u,Q(s),o)}function wm(){throw new Error("invalid")}function uv(s,o,u){const l=We();return ni(l,Ma(),o)&&function Gi(s,o,u,l,d,f,y,w){const b=Xr(o,u);let R,S=o.inputs;!w&&null!=S&&(R=S[l])?(SD(s,u,R,l,d),dh(o)&&function jw(s,o){const u=_i(o,s);16&u[2]||(u[2]|=64)}(u,o.index)):3&o.type&&(l=function UP(s){return"class"===s?"className":"for"===s?"htmlFor":"formaction"===s?"formAction":"innerHtml"===s?"innerHTML":"readonly"===s?"readOnly":"tabindex"===s?"tabIndex":s}(l),d=null!=y?y(d,o.value||"",l):d,Yn(f)?f.setProperty(b,l,d):Wr(l)||(b.setProperty?b.setProperty(l,d):b[l]=d))}(gn(),tr(),l,s,o,l[11],u,!1),uv}function Tf(s,o,u,l,d){const y=d?"class":"style";SD(s,u,o.inputs[y],y,l)}function md(s,o,u,l){const d=We(),f=gn(),y=20+s,w=d[11],b=d[y]=ci(w,o,function ag(){return jt.lFrame.currentNamespace}()),S=f.firstCreatePass?function gd(s,o,u,l,d,f,y){const w=o.consts,S=af(o,s,2,d,Gs(w,f));return Qg(o,u,S,Gs(w,y)),null!==S.attrs&&Ce(S,S.attrs,!1),null!==S.mergedAttrs&&Ce(S,S.mergedAttrs,!0),null!==o.queries&&o.queries.elementStart(o,S),S}(y,f,d,0,o,u,l):f.data[y];ss(S,!0);const R=S.mergedAttrs;null!==R&&kt(w,b,R);const O=S.classes;null!==O&&tu(w,b,O);const W=S.styles;return null!==W&&vw(w,b,W),64!=(64&S.flags)&&Jl(f,d,b,S),0===function sg(){return jt.lFrame.elementDepthCount}()&&Ei(b,d),function gl(){jt.lFrame.elementDepthCount++}(),Ko(S)&&(ky(f,d,S),rd(f,S,d)),null!==l&&Oy(d,S),md}function Oo(){let s=er();yh()?Wu():(s=s.parent,ss(s,!1));const o=s;!function B_(){jt.lFrame.elementDepthCount--}();const u=gn();return u.firstCreatePass&&(Ku(u,s),ku(s)&&u.queries.elementEnd(s)),null!=o.classesWithoutHost&&function Q_(s){return 0!=(16&s.flags)}(o)&&Tf(u,o,We(),o.classesWithoutHost,!0),null!=o.stylesWithoutHost&&function xT(s){return 0!=(32&s.flags)}(o)&&Tf(u,o,We(),o.stylesWithoutHost,!1),Oo}function Im(s,o,u,l){return md(s,o,u,l),Oo(),Im}function Fs(s,o,u){const l=We(),d=gn(),f=s+20,y=d.firstCreatePass?function Tc(s,o,u,l,d){const f=o.consts,y=Gs(f,l),w=af(o,s,8,"ng-container",y);return null!==y&&Ce(w,y,!0),Qg(o,u,w,Gs(f,d)),null!==o.queries&&o.queries.elementStart(o,w),w}(f,d,l,o,u):d.data[f];ss(y,!0);const w=l[f]=l[11].createComment("");return Jl(d,l,w,y),Ei(w,l),Ko(y)&&(ky(d,l,y),rd(d,y,l)),null!=u&&Oy(l,y),Fs}function Dc(){let s=er();const o=gn();return yh()?Wu():(s=s.parent,ss(s,!1)),o.firstCreatePass&&(Ku(o,s),ku(s)&&o.queries.elementEnd(s)),Dc}function Cm(s){return!!s&&"function"==typeof s.then}function rr(s){return!!s&&"function"==typeof s.subscribe}const Sf=rr;function cv(s,o,u,l){const d=We(),f=gn(),y=er();return function _d(s,o,u,l,d,f,y,w){const b=Ko(l),R=s.firstCreatePass&&lt(s),O=o[8],W=ko(o);let te=!0;if(3&l.type||w){const dt=Xr(l,o),wt=w?w(dt):dt,Fe=W.length,Ft=w?un=>w(Wn(un[l.index])):l.index;if(Yn(u)){let un=null;if(!w&&b&&(un=function Af(s,o,u,l){const d=s.cleanup;if(null!=d)for(let f=0;f<d.length-1;f+=2){const y=d[f];if(y===u&&d[f+1]===l){const w=o[7],b=d[f+2];return w.length>b?w[b]:null}"string"==typeof y&&(f+=2)}return null}(s,o,d,l.index)),null!==un)(un.__ngLastListenerFn__||un).__ngNextListenerFn__=f,un.__ngLastListenerFn__=f,te=!1;else{f=Tm(l,o,O,f,!1);const Ln=u.listen(wt,d,f);W.push(f,Ln),R&&R.push(d,Ft,Fe,Fe+1)}}else f=Tm(l,o,O,f,!0),wt.addEventListener(d,f,y),W.push(f),R&&R.push(d,Ft,Fe,y)}else f=Tm(l,o,O,f,!1);const Ae=l.outputs;let Ke;if(te&&null!==Ae&&(Ke=Ae[d])){const dt=Ke.length;if(dt)for(let wt=0;wt<dt;wt+=2){const _s=o[Ke[wt]][Ke[wt+1]].subscribe(f),wa=W.length;W.push(f,_s),R&&R.push(d,l.index,wa,-(wa+1))}}}(f,d,d[11],y,s,o,!!u,l),cv}function TI(s,o,u,l){try{return!1!==u(l)}catch(d){return Os(s,d),!1}}function Tm(s,o,u,l,d){return function f(y){if(y===Function)return l;const w=2&s.flags?_i(s.index,o):o;0==(32&o[2])&&ks(w);let b=TI(o,0,l,y),S=f.__ngNextListenerFn__;for(;S;)b=TI(o,0,S,y)&&b,S=S.__ngNextListenerFn__;return d&&!1===b&&(y.preventDefault(),y.returnValue=!1),b}}function Dm(s,o,u,l,d){const f=s[u+1],y=null===o;let w=l?Ms(f):oa(f),b=!1;for(;0!==w&&(!1===b||y);){const R=s[w+1];xI(s[w],o)&&(b=!0,s[w+1]=l?eo(R):_c(R)),w=l?Ms(R):oa(R)}b&&(s[u+1]=l?_c(f):eo(f))}function xI(s,o){return null===s||null==o||(Array.isArray(s)?s[1]:s)===o||!(!Array.isArray(s)||"string"!=typeof o)&&So(s,o)>=0}function gv(s,o){return function Ls(s,o,u,l){const d=We(),f=gn(),y=function os(s){const o=jt.lFrame,u=o.bindingIndex;return o.bindingIndex=o.bindingIndex+s,u}(2);f.firstUpdatePass&&function Uo(s,o,u,l){const d=s.data;if(null===d[u+1]){const f=d[yi()],y=function mv(s,o){return o>=s.expandoStartIndex}(s,u);(function Ev(s,o){return 0!=(s.flags&(o?16:32))})(f,l)&&null===o&&!y&&(o=!1),o=function OI(s,o,u,l){const d=function zu(s){const o=jt.lFrame.currentDirectiveIndex;return-1===o?null:s[o]}(s);let f=l?o.residualClasses:o.residualStyles;if(null===d)0===(l?o.classBindings:o.styleBindings)&&(u=Ac(u=Rm(null,s,o,u,l),o.attrs,l),f=null);else{const y=o.directiveStylingLast;if(-1===y||s[y]!==d)if(u=Rm(d,s,o,u,l),null===f){let b=function tS(s,o,u){const l=u?o.classBindings:o.styleBindings;if(0!==oa(l))return s[Ms(l)]}(s,o,l);void 0!==b&&Array.isArray(b)&&(b=Rm(null,s,o,b[1],l),b=Ac(b,o.attrs,l),function _v(s,o,u,l){s[Ms(u?o.classBindings:o.styleBindings)]=l}(s,o,l,b))}else f=function Pf(s,o,u){let l;const d=o.directiveEnd;for(let f=1+o.directiveStylingLast;f<d;f++)l=Ac(l,s[f].hostAttrs,u);return Ac(l,o.attrs,u)}(s,o,l)}return void 0!==f&&(l?o.residualClasses=f:o.residualStyles=f),u}(d,f,o,l),function RI(s,o,u,l,d,f){let y=f?o.classBindings:o.styleBindings,w=Ms(y),b=oa(y);s[l]=u;let R,S=!1;if(Array.isArray(u)){const O=u;R=O[1],(null===R||So(O,R)>0)&&(S=!0)}else R=u;if(d)if(0!==b){const W=Ms(s[w+1]);s[l+1]=rf(W,w),0!==W&&(s[W+1]=Oi(s[W+1],l)),s[w+1]=function uD(s,o){return 131071&s|o<<17}(s[w+1],l)}else s[l+1]=rf(w,0),0!==w&&(s[w+1]=Oi(s[w+1],l)),w=l;else s[l+1]=rf(b,0),0===w?w=l:s[b+1]=Oi(s[b+1],l),b=l;S&&(s[l+1]=_c(s[l+1])),Dm(s,R,l,!0),Dm(s,R,l,!1),function pv(s,o,u,l,d){const f=d?s.residualClasses:s.residualStyles;null!=f&&"string"==typeof o&&So(f,o)>=0&&(u[l+1]=eo(u[l+1]))}(o,R,s,l,f),y=rf(w,b),f?o.classBindings=y:o.styleBindings=y}(d,f,o,u,y,l)}}(f,s,y,l),o!==on&&ni(d,y,o)&&function Nf(s,o,u,l,d,f,y,w){if(!(3&o.type))return;const b=s.data,S=b[w+1];Mf(function Cw(s){return 1==(1&s)}(S)?FI(b,o,u,d,oa(S),y):void 0)||(Mf(f)||function mc(s){return 2==(2&s)}(S)&&(f=FI(b,null,u,d,w,y)),function wy(s,o,u,l,d){const f=Yn(s);if(o)d?f?s.addClass(u,l):u.classList.add(l):f?s.removeClass(u,l):u.classList.remove(l);else{let y=-1===l.indexOf("-")?void 0:Po.DashCase;if(null==d)f?s.removeStyle(u,l,y):u.style.removeProperty(l);else{const w="string"==typeof d&&d.endsWith("!important");w&&(d=d.slice(0,-10),y|=Po.Important),f?s.setStyle(u,l,d,y):u.style.setProperty(l,d,w?"important":"")}}}(l,y,xa(yi(),u),d,f))}(f,f.data[yi()],d,d[11],s,d[y+1]=function kf(s,o){return null==s||("string"==typeof o?s+=o:"object"==typeof s&&(s=de(ds(s)))),s}(o,u),l,y)}(s,o,null,!0),gv}function Rm(s,o,u,l,d){let f=null;const y=u.directiveEnd;let w=u.directiveStylingLast;for(-1===w?w=u.directiveStart:w++;w<y&&(f=o[w],l=Ac(l,f.hostAttrs,d),f!==s);)w++;return null!==s&&(u.directiveStylingLast=w),l}function Ac(s,o,u){const l=u?1:2;let d=-1;if(null!==o)for(let f=0;f<o.length;f++){const y=o[f];"number"==typeof y?d=y:d===l&&(Array.isArray(s)||(s=void 0===s?[]:["",s]),vi(s,y,!!u||o[++f]))}return void 0===s?null:s}function FI(s,o,u,l,d,f){const y=null===o;let w;for(;d>0;){const b=s[d],S=Array.isArray(b),R=S?b[1]:b,O=null===R;let W=u[d+1];W===on&&(W=O?L:void 0);let te=O?rc(W,l):R===l?W:void 0;if(S&&!Mf(te)&&(te=rc(b,l)),Mf(te)&&(w=te,y))return w;const Ae=s[d+1];d=y?Ms(Ae):oa(Ae)}if(null!==o){let b=f?o.residualClasses:o.residualStyles;null!=b&&(w=rc(b,l))}return w}function Mf(s){return void 0!==s}function wv(s,o=""){const u=We(),l=gn(),d=s+20,f=l.firstCreatePass?af(l,d,1,o,null):l.data[d],y=u[d]=function Lg(s,o){return Yn(s)?s.createText(o):s.createTextNode(o)}(u[11],o);Jl(l,u,y,f),ss(f,!1)}function Of(s){return wd("",s,""),Of}function wd(s,o,u){const l=We(),d=function yr(s,o,u,l){return ni(s,Ma(),u)?o+q(u)+l:on}(l,s,o,u);return d!==on&&aa(l,yi(),d),wd}const ve=void 0;var ri=["en",[["a","p"],["AM","PM"],ve],[["AM","PM"],ve,ve],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],ve,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],ve,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",ve,"{1} 'at' {0}",ve],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function qe(s){const u=Math.floor(Math.abs(s)),l=s.toString().replace(/^[^.]*\.?/,"").length;return 1===u&&0===l?1:5}];let Rc={};function Rv(s){const o=function nN(s){return s.toLowerCase().replace(/_/g,"-")}(s);let u=zI(o);if(u)return u;const l=o.split("-")[0];if(u=zI(l),u)return u;if("en"===l)return ri;throw new Error(`Missing locale data for the locale "${s}".`)}function WI(s){return Rv(s)[$t.PluralCase]}function zI(s){return s in Rc||(Rc[s]=qt.ng&&qt.ng.common&&qt.ng.common.locales&&qt.ng.common.locales[s]),Rc[s]}var $t=(()=>(($t=$t||{})[$t.LocaleId=0]="LocaleId",$t[$t.DayPeriodsFormat=1]="DayPeriodsFormat",$t[$t.DayPeriodsStandalone=2]="DayPeriodsStandalone",$t[$t.DaysFormat=3]="DaysFormat",$t[$t.DaysStandalone=4]="DaysStandalone",$t[$t.MonthsFormat=5]="MonthsFormat",$t[$t.MonthsStandalone=6]="MonthsStandalone",$t[$t.Eras=7]="Eras",$t[$t.FirstDayOfWeek=8]="FirstDayOfWeek",$t[$t.WeekendRange=9]="WeekendRange",$t[$t.DateFormat=10]="DateFormat",$t[$t.TimeFormat=11]="TimeFormat",$t[$t.DateTimeFormat=12]="DateTimeFormat",$t[$t.NumberSymbols=13]="NumberSymbols",$t[$t.NumberFormats=14]="NumberFormats",$t[$t.CurrencyCode=15]="CurrencyCode",$t[$t.CurrencySymbol=16]="CurrencySymbol",$t[$t.CurrencyName=17]="CurrencyName",$t[$t.Currencies=18]="Currencies",$t[$t.Directionality=19]="Directionality",$t[$t.PluralCase=20]="PluralCase",$t[$t.ExtraData=21]="ExtraData",$t))();const Lf="en-US";let xv=Lf;class Zv{}class Wf{resolveComponentFactory(o){throw function Fd(s){const o=Error(`No component factory found for ${de(s)}. Did you add it to @NgModule.entryComponents?`);return o.ngComponent=s,o}(o)}}let zf=(()=>{class s{}return s.NULL=new Wf,s})();function bS(){return ir(er(),We())}function ir(s,o){return new pu(Xr(s,o))}let pu=(()=>{class s{constructor(u){this.nativeElement=u}}return s.__NG_ELEMENT_ID__=bS,s})();function Wm(s){return s instanceof pu?s.nativeElement:s}class zm{}let CS=(()=>{class s{}return s.__NG_ELEMENT_ID__=()=>function ob(){const s=We(),u=_i(er().index,s);return function sb(s){return s[11]}(mi(u)?u:s)}(),s})(),Gf=(()=>{class s{}return s.\u0275prov=Gt({token:s,providedIn:"root",factory:()=>null}),s})();class gu{constructor(o){this.full=o,this.major=o.split(".")[0],this.minor=o.split(".")[1],this.patch=o.split(".").slice(2).join(".")}}const Qv=new gu("13.2.4"),Gm={};function qf(s,o,u,l,d=!1){for(;null!==u;){const f=o[u.index];if(null!==f&&l.push(Wn(f)),ns(f))for(let w=10;w<f.length;w++){const b=f[w],S=b[1].firstChild;null!==S&&qf(b[1],b,S,l)}const y=u.type;if(8&y)qf(s,o,u.child,l);else if(32&y){const w=fy(u,o);let b;for(;b=w();)l.push(b)}else if(16&y){const w=gw(o,u);if(Array.isArray(w))l.push(...w);else{const b=Xh(o[16]);qf(b[1],b,w,l,!0)}}u=d?u.projectionNext:u.next}return l}class pa{constructor(o,u){this._lView=o,this._cdRefInjectingView=u,this._appRef=null,this._attachedToViewContainer=!1}get rootNodes(){const o=this._lView,u=o[1];return qf(u,o,u.firstChild,[])}get context(){return this._lView[8]}set context(o){this._lView[8]=o}get destroyed(){return 256==(256&this._lView[2])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const o=this._lView[3];if(ns(o)){const u=o[8],l=u?u.indexOf(this):-1;l>-1&&(Bg(o,l),Al(u,l))}this._attachedToViewContainer=!1}uw(this._lView[1],this._lView)}onDestroy(o){Bw(this._lView[1],this._lView,null,o)}markForCheck(){ks(this._cdRefInjectingView||this._lView)}detach(){this._lView[2]&=-129}reattach(){this._lView[2]|=128}detectChanges(){cf(this._lView[1],this._lView,this.context)}checkNoChanges(){!function DD(s,o,u){yl(!0);try{cf(s,o,u)}finally{yl(!1)}}(this._lView[1],this._lView,this.context)}attachToViewContainerRef(){if(this._appRef)throw new $e(902,"");this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function my(s,o){Xl(s,o,o[11],2,null,null)}(this._lView[1],this._lView)}attachToAppRef(o){if(this._attachedToViewContainer)throw new $e(902,"");this._appRef=o}}class Jv extends pa{constructor(o){super(o),this._view=o}detectChanges(){Zw(this._view)}checkNoChanges(){!function KP(s){yl(!0);try{Zw(s)}finally{yl(!1)}}(this._view)}get context(){return null}}class ab extends zf{constructor(o){super(),this.ngModule=o}resolveComponentFactory(o){const u=vt(o);return new vr(u,this.ngModule)}}function Fr(s){const o=[];for(let u in s)s.hasOwnProperty(u)&&o.push({propName:s[u],templateName:u});return o}const ub=new dr("SCHEDULER_TOKEN",{providedIn:"root",factory:()=>J0});class vr extends Zv{constructor(o,u){super(),this.componentDef=o,this.ngModule=u,this.componentType=o.type,this.selector=function sD(s){return s.map(iD).join(",")}(o.selectors),this.ngContentSelectors=o.ngContentSelectors?o.ngContentSelectors:[],this.isBoundToModule=!!u}get inputs(){return Fr(this.componentDef.inputs)}get outputs(){return Fr(this.componentDef.outputs)}create(o,u,l,d){const f=(d=d||this.ngModule)?function cb(s,o){return{get:(u,l,d)=>{const f=s.get(u,Gm,d);return f!==Gm||l===Gm?f:o.get(u,l,d)}}}(o,d.injector):o,y=f.get(zm,ju),w=f.get(Gf,null),b=y.createRenderer(null,this.componentDef),S=this.componentDef.selectors[0][0]||"div",R=l?function Fy(s,o,u){if(Yn(s))return s.selectRootElement(o,u===Et.ShadowDom);let l="string"==typeof o?s.querySelector(o):o;return l.textContent="",l}(b,l,this.componentDef.encapsulation):ci(y.createRenderer(null,this.componentDef),S,function Dn(s){const o=s.toLowerCase();return"svg"===o?"svg":"math"===o?"math":null}(S)),O=this.componentDef.onPush?576:528,W=function aI(s,o){return{components:[],scheduler:s||J0,clean:YP,playerHandler:o||null,flags:0}}(),te=Zg(0,null,null,1,0,null,null,null,null,null),Ae=vc(null,te,W,O,null,null,y,b,w,f);let Ke,dt;Gu(Ae);try{const wt=function im(s,o,u,l,d,f){const y=u[1];u[20]=s;const b=af(y,20,2,"#host",null),S=b.mergedAttrs=o.hostAttrs;null!==S&&(Ce(b,S,!0),null!==s&&(kt(d,s,S),null!==b.classes&&tu(d,s,b.classes),null!==b.styles&&vw(d,s,b.styles)));const R=l.createRenderer(s,o),O=vc(u,Lw(o),null,o.onPush?64:16,u[20],b,l,R,f||null,null);return y.firstCreatePass&&(Ua(zn(b,u),y,o.type),zw(y,b),Gw(b,u.length,1)),Xg(u,O),u[20]=O}(R,this.componentDef,Ae,y,b);if(R)if(l)kt(b,R,["ng-version",Qv.full]);else{const{attrs:Fe,classes:Ft}=function Ty(s){const o=[],u=[];let l=1,d=2;for(;l<s.length;){let f=s[l];if("string"==typeof f)2===d?""!==f&&o.push(f,s[++l]):8===d&&u.push(f);else{if(!jr(d))break;d=f}l++}return{attrs:o,classes:u}}(this.componentDef.selectors[0]);Fe&&kt(b,R,Fe),Ft&&Ft.length>0&&tu(b,R,Ft.join(" "))}if(dt=fl(te,20),void 0!==u){const Fe=dt.projection=[];for(let Ft=0;Ft<this.ngContentSelectors.length;Ft++){const un=u[Ft];Fe.push(null!=un?Array.from(un):null)}}Ke=function oI(s,o,u,l,d){const f=u[1],y=function jP(s,o,u){const l=er();s.firstCreatePass&&(u.providersResolver&&u.providersResolver(u),Uy(s,l,o,td(s,o,1,null),u));const d=Va(o,s,l.directiveStart,l);Ei(d,o);const f=Xr(l,o);return f&&Ei(f,o),d}(f,u,o);if(l.components.push(y),s[8]=y,d&&d.forEach(b=>b(y,o)),o.contentQueries){const b=er();o.contentQueries(1,y,b.directiveStart)}const w=er();return!f.firstCreatePass||null===o.hostBindings&&null===o.hostAttrs||(Ks(w.index),Hw(u[1],w,0,w.directiveStart,w.directiveEnd,o),ED(o,y)),y}(wt,this.componentDef,Ae,W,[Ky]),Ec(te,Ae,null)}finally{qu()}return new hr(this.componentType,Ke,ir(dt,Ae),Ae,dt)}}class hr extends class Fc{}{constructor(o,u,l,d,f){super(),this.location=l,this._rootLView=d,this._tNode=f,this.instance=u,this.hostView=this.changeDetectorRef=new Jv(d),this.componentType=o}get injector(){return new jn(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(o){this.hostView.onDestroy(o)}}class uo{}class db{}const fi=new Map;class Kf extends uo{constructor(o,u){super(),this._parent=u,this._bootstrapComponents=[],this.injector=this,this.destroyCbs=[],this.componentFactoryResolver=new ab(this);const l=sn(o);this._bootstrapComponents=Xs(l.bootstrap),this._r3Injector=id(o,u,[{provide:uo,useValue:this},{provide:zf,useValue:this.componentFactoryResolver}],de(o)),this._r3Injector._resolveInjectorDefTypes(),this.instance=this.get(o)}get(o,u=fs.THROW_IF_NOT_FOUND,l=Pe.Default){return o===fs||o===uo||o===Z?this:this._r3Injector.get(o,u,l)}destroy(){const o=this._r3Injector;!o.destroyed&&o.destroy(),this.destroyCbs.forEach(u=>u()),this.destroyCbs=null}onDestroy(o){this.destroyCbs.push(o)}}class Lc extends db{constructor(o){super(),this.moduleType=o,null!==sn(o)&&function TS(s){const o=new Set;!function u(l){const d=sn(l,!0),f=d.id;null!==f&&(function Km(s,o,u){if(o&&o!==u)throw new Error(`Duplicate module registered for ${s} - ${de(o)} vs ${de(o.name)}`)}(f,fi.get(f),l),fi.set(f,l));const y=Xs(d.imports);for(const w of y)o.has(w)||(o.add(w),u(w))}(s)}(o)}create(o){return new Kf(this.moduleType,o)}}function Yf(s,o,u,l){return Ld(We(),Vr(),s,o,u,l)}function Ld(s,o,u,l,d,f){const y=o+u;return ni(s,y,d)?function io(s,o,u){return s[o]=u}(s,y+1,f?l.call(f,d):l(d)):function Qf(s,o){const u=s[o];return u===on?void 0:u}(s,y+1)}function eE(s,o){const u=gn();let l;const d=s+20;u.firstCreatePass?(l=function Jf(s,o){if(o)for(let u=o.length-1;u>=0;u--){const l=o[u];if(s===l.name)return l}}(o,u.pipeRegistry),u.data[d]=l,l.onDestroy&&(u.destroyHooks||(u.destroyHooks=[])).push(d,l.onDestroy)):l=u.data[d];const f=l.factory||(l.factory=is(l.type)),y=Ze(so);try{const w=bo(!1),b=f();return bo(w),function BD(s,o,u,l){u>=s.data.length&&(s.data[u]=null,s.blueprint[u]=null),o[u]=l}(u,We(),d,b),b}finally{Ze(y)}}function co(s,o,u){const l=s+20,d=We(),f=function Ts(s,o){return s[o]}(d,l);return function Ud(s,o){return s[1].data[o].pure}(d,l)?Ld(d,Vr(),o,f.transform,u,f):f.transform(u)}function nE(s){return o=>{setTimeout(s,void 0,o)}}const Vo=class Eb extends m.x{constructor(o=!1){super(),this.__isAsync=o}emit(o){super.next(o)}subscribe(o,u,l){var d,f,y;let w=o,b=u||(()=>null),S=l;if(o&&"object"==typeof o){const O=o;w=null===(d=O.next)||void 0===d?void 0:d.bind(O),b=null===(f=O.error)||void 0===f?void 0:f.bind(O),S=null===(y=O.complete)||void 0===y?void 0:y.bind(O)}this.__isAsync&&(b=nE(b),w&&(w=nE(w)),S&&(S=nE(S)));const R=super.subscribe({next:w,error:b,complete:S});return o instanceof F.w0&&o.add(R),R}};function ep(){return this._results[iu()]()}class tp{constructor(o=!1){this._emitDistinctChangesOnly=o,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const u=iu(),l=tp.prototype;l[u]||(l[u]=ep)}get changes(){return this._changes||(this._changes=new Vo)}get(o){return this._results[o]}map(o){return this._results.map(o)}filter(o){return this._results.filter(o)}find(o){return this._results.find(o)}reduce(o,u){return this._results.reduce(o,u)}forEach(o){this._results.forEach(o)}some(o){return this._results.some(o)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(o,u){const l=this;l.dirty=!1;const d=ai(o);(this._changesDetected=!function Sl(s,o,u){if(s.length!==o.length)return!1;for(let l=0;l<s.length;l++){let d=s[l],f=o[l];if(u&&(d=u(d),f=u(f)),f!==d)return!1}return!0}(l._results,d,u))&&(l._results=d,l.length=d.length,l.last=d[this.length-1],l.first=d[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}Symbol;let np=(()=>{class s{}return s.__NG_ELEMENT_ID__=bb,s})();const wb=np,Ib=class extends wb{constructor(o,u,l){super(),this._declarationLView=o,this._declarationTContainer=u,this.elementRef=l}createEmbeddedView(o){const u=this._declarationTContainer.tViews,l=vc(this._declarationLView,u,o,16,null,u.declTNode,null,null,null,null);l[17]=this._declarationLView[this._declarationTContainer.index];const f=this._declarationLView[19];return null!==f&&(l[19]=f.createEmbeddedView(u)),Ec(u,l,o),new pa(l)}};function bb(){return Ym(er(),We())}function Ym(s,o){return 4&s.type?new Ib(o,s,ir(s,o)):null}let rp=(()=>{class s{}return s.__NG_ELEMENT_ID__=RS,s})();function RS(){return Cb(er(),We())}const xS=rp,Uc=class extends xS{constructor(o,u,l){super(),this._lContainer=o,this._hostTNode=u,this._hostLView=l}get element(){return ir(this._hostTNode,this._hostLView)}get injector(){return new jn(this._hostTNode,this._hostLView)}get parentInjector(){const o=La(this._hostTNode,this._hostLView);if(br(o)){const u=Oa(o,this._hostLView),l=ka(o);return new jn(u[1].data[l+8],u)}return new jn(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(o){const u=Vc(this._lContainer);return null!==u&&u[o]||null}get length(){return this._lContainer.length-10}createEmbeddedView(o,u,l){const d=o.createEmbeddedView(u||{});return this.insert(d,l),d}createComponent(o,u,l,d,f){const y=o&&!function tc(s){return"function"==typeof s}(o);let w;if(y)w=u;else{const O=u||{};w=O.index,l=O.injector,d=O.projectableNodes,f=O.ngModuleRef}const b=y?o:new vr(vt(o)),S=l||this.parentInjector;if(!f&&null==b.ngModule){const W=(y?S:this.parentInjector).get(uo,null);W&&(f=W)}const R=b.create(S,d,void 0,f);return this.insert(R.hostView,w),R}insert(o,u){const l=o._lView,d=l[1];if(function pl(s){return ns(s[3])}(l)){const R=this.indexOf(o);if(-1!==R)this.detach(R);else{const O=l[3],W=new Uc(O,O[6],O[3]);W.detach(W.indexOf(o))}}const f=this._adjustIndex(u),y=this._lContainer;!function Ql(s,o,u,l){const d=10+l,f=u.length;l>0&&(u[d-1][4]=o),l<f-10?(o[4]=u[d],nc(u,10+l,o)):(u.push(o),o[4]=null),o[3]=u;const y=o[17];null!==y&&u!==y&&function ow(s,o){const u=s[9];o[16]!==o[3][3][16]&&(s[2]=!0),null===u?s[9]=[o]:u.push(o)}(y,o);const w=o[19];null!==w&&w.insertView(s),o[2]|=128}(d,l,y,f);const w=Wg(f,y),b=l[11],S=$g(b,y[7]);return null!==S&&function Ug(s,o,u,l,d,f){l[0]=d,l[6]=o,Xl(s,l,u,1,d,f)}(d,y[6],b,l,S,w),o.attachToViewContainerRef(),nc(rE(y),f,o),o}move(o,u){return this.insert(o,u)}indexOf(o){const u=Vc(this._lContainer);return null!==u?u.indexOf(o):-1}remove(o){const u=this._adjustIndex(o,-1),l=Bg(this._lContainer,u);l&&(Al(rE(this._lContainer),u),uw(l[1],l))}detach(o){const u=this._adjustIndex(o,-1),l=Bg(this._lContainer,u);return l&&null!=Al(rE(this._lContainer),u)?new pa(l):null}_adjustIndex(o,u=0){return null==o?this.length+u:o}};function Vc(s){return s[8]}function rE(s){return s[8]||(s[8]=[])}function Cb(s,o){let u;const l=o[s.index];if(ns(l))u=l;else{let d;if(8&s.type)d=Wn(l);else{const f=o[11];d=f.createComment("");const y=Xr(s,o);eu(f,$g(f,y),d,function eD(s,o){return Yn(s)?s.nextSibling(o):o.nextSibling}(f,y),!1)}o[s.index]=u=qw(l,o,d,s),Xg(o,u)}return new Uc(u,s,o)}class iE{constructor(o){this.queryList=o,this.matches=null}clone(){return new iE(this.queryList)}setDirty(){this.queryList.setDirty()}}class Qm{constructor(o=[]){this.queries=o}createEmbeddedView(o){const u=o.queries;if(null!==u){const l=null!==o.contentQueries?o.contentQueries[0]:u.length,d=[];for(let f=0;f<l;f++){const y=u.getByIndex(f);d.push(this.queries[y.indexInDeclarationView].clone())}return new Qm(d)}return null}insertView(o){this.dirtyQueriesWithMatches(o)}detachView(o){this.dirtyQueriesWithMatches(o)}dirtyQueriesWithMatches(o){for(let u=0;u<this.queries.length;u++)null!==Xi(o,u).matches&&this.queries[u].setDirty()}}class lo{constructor(o,u,l=null){this.predicate=o,this.flags=u,this.read=l}}class sE{constructor(o=[]){this.queries=o}elementStart(o,u){for(let l=0;l<this.queries.length;l++)this.queries[l].elementStart(o,u)}elementEnd(o){for(let u=0;u<this.queries.length;u++)this.queries[u].elementEnd(o)}embeddedTView(o){let u=null;for(let l=0;l<this.length;l++){const d=null!==u?u.length:0,f=this.getByIndex(l).embeddedTView(o,d);f&&(f.indexInDeclarationView=l,null!==u?u.push(f):u=[f])}return null!==u?new sE(u):null}template(o,u){for(let l=0;l<this.queries.length;l++)this.queries[l].template(o,u)}getByIndex(o){return this.queries[o]}get length(){return this.queries.length}track(o){this.queries.push(o)}}class Ui{constructor(o,u=-1){this.metadata=o,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=u}elementStart(o,u){this.isApplyingToNode(u)&&this.matchTNode(o,u)}elementEnd(o){this._declarationNodeIndex===o.index&&(this._appliesToNextNode=!1)}template(o,u){this.elementStart(o,u)}embeddedTView(o,u){return this.isApplyingToNode(o)?(this.crossesNgTemplate=!0,this.addMatch(-o.index,u),new Ui(this.metadata)):null}isApplyingToNode(o){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const u=this._declarationNodeIndex;let l=o.parent;for(;null!==l&&8&l.type&&l.index!==u;)l=l.parent;return u===(null!==l?l.index:-1)}return this._appliesToNextNode}matchTNode(o,u){const l=this.metadata.predicate;if(Array.isArray(l))for(let d=0;d<l.length;d++){const f=l[d];this.matchTNodeWithReadOption(o,u,mu(u,f)),this.matchTNodeWithReadOption(o,u,Ds(u,o,f,!1,!1))}else l===np?4&u.type&&this.matchTNodeWithReadOption(o,u,-1):this.matchTNodeWithReadOption(o,u,Ds(u,o,l,!1,!1))}matchTNodeWithReadOption(o,u,l){if(null!==l){const d=this.metadata.read;if(null!==d)if(d===pu||d===rp||d===np&&4&u.type)this.addMatch(u.index,-2);else{const f=Ds(u,o,d,!1,!1);null!==f&&this.addMatch(u.index,f)}else this.addMatch(u.index,l)}}addMatch(o,u){null===this.matches?this.matches=[o,u]:this.matches.push(o,u)}}function mu(s,o){const u=s.localNames;if(null!==u)for(let l=0;l<u.length;l+=2)if(u[l]===o)return u[l+1];return null}function Si(s,o,u,l){return-1===u?function sr(s,o){return 11&s.type?ir(s,o):4&s.type?Ym(s,o):null}(o,s):-2===u?function NS(s,o,u){return u===pu?ir(o,s):u===np?Ym(o,s):u===rp?Cb(o,s):void 0}(s,o,l):Va(s,s[1],u,o)}function Db(s,o,u,l){const d=o[19].queries[l];if(null===d.matches){const f=s.data,y=u.matches,w=[];for(let b=0;b<y.length;b+=2){const S=y[b];w.push(S<0?null:Si(o,f[S],y[b+1],u.metadata.read))}d.matches=w}return d.matches}function fr(s,o,u,l){const d=s.queries.getByIndex(u),f=d.matches;if(null!==f){const y=Db(s,o,d,u);for(let w=0;w<f.length;w+=2){const b=f[w];if(b>0)l.push(y[w/2]);else{const S=f[w+1],R=o[-b];for(let O=10;O<R.length;O++){const W=R[O];W[17]===W[3]&&fr(W[1],W,S,l)}if(null!==R[9]){const O=R[9];for(let W=0;W<O.length;W++){const te=O[W];fr(te[1],te,S,l)}}}}}return l}function ho(s){const o=We(),u=gn(),l=W_();wh(l+1);const d=Xi(u,l);if(s.dirty&&Yo(o)===(2==(2&d.metadata.flags))){if(null===d.matches)s.reset([]);else{const f=d.crossesNgTemplate?fr(u,o,l,[]):Db(u,o,d,l);s.reset(f,Wm),s.notifyOnChanges()}return!0}return!1}function ii(s,o,u,l){const d=gn();if(d.firstCreatePass){const f=er();(function jc(s,o,u){null===s.queries&&(s.queries=new sE),s.queries.track(new Ui(o,u))})(d,new lo(o,u,l),f.index),function Vd(s,o){const u=s.contentQueries||(s.contentQueries=[]);o!==(u.length?u[u.length-1]:-1)&&u.push(s.queries.length-1,o)}(d,s),2==(2&u)&&(d.staticContentQueries=!0)}!function Bo(s,o,u){const l=new tp(4==(4&u));Bw(s,o,l,l.destroy),null===o[19]&&(o[19]=new Qm),o[19].queries.push(new iE(l))}(d,We(),u)}function Ji(){return function Bc(s,o){return s[19].queries[o].queryList}(We(),W_())}function Xi(s,o){return s.queries.getByIndex(o)}function cp(...s){}const Hd=new dr("Application Initializer");let _a=(()=>{class s{constructor(u){this.appInits=u,this.resolve=cp,this.reject=cp,this.initialized=!1,this.done=!1,this.donePromise=new Promise((l,d)=>{this.resolve=l,this.reject=d})}runInitializers(){if(this.initialized)return;const u=[],l=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let d=0;d<this.appInits.length;d++){const f=this.appInits[d]();if(Cm(f))u.push(f);else if(Sf(f)){const y=new Promise((w,b)=>{f.subscribe({complete:w,error:b})});u.push(y)}}Promise.all(u).then(()=>{l()}).catch(d=>{this.reject(d)}),0===u.length&&l(),this.initialized=!0}}return s.\u0275fac=function(u){return new(u||s)(zr(Hd,8))},s.\u0275prov=Gt({token:s,factory:s.\u0275fac}),s})();const hE=new dr("AppId"),jb={provide:hE,useFactory:function es(){return`${Wd()}${Wd()}${Wd()}`},deps:[]};function Wd(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const i_=new dr("Platform Initializer"),fE=new dr("Platform ID"),ya=new dr("appBootstrapListener");let pE=(()=>{class s{log(u){console.log(u)}warn(u){console.warn(u)}}return s.\u0275fac=function(u){return new(u||s)},s.\u0275prov=Gt({token:s,factory:s.\u0275fac}),s})();const jo=new dr("LocaleId"),$b=new dr("DefaultCurrencyCode");class zc{constructor(o,u){this.ngModuleFactory=o,this.componentFactories=u}}let hp=(()=>{class s{compileModuleSync(u){return new Lc(u)}compileModuleAsync(u){return Promise.resolve(this.compileModuleSync(u))}compileModuleAndAllComponentsSync(u){const l=this.compileModuleSync(u),f=Xs(sn(u).declarations).reduce((y,w)=>{const b=vt(w);return b&&y.push(new vr(b)),y},[]);return new zc(l,f)}compileModuleAndAllComponentsAsync(u){return Promise.resolve(this.compileModuleAndAllComponentsSync(u))}clearCache(){}clearCacheFor(u){}getModuleId(u){}}return s.\u0275fac=function(u){return new(u||s)},s.\u0275prov=Gt({token:s,factory:s.\u0275fac}),s})();const VS=(()=>Promise.resolve(0))();function gE(s){"undefined"==typeof Zone?VS.then(()=>{s&&s.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",s)}class Ai{constructor({enableLongStackTrace:o=!1,shouldCoalesceEventChangeDetection:u=!1,shouldCoalesceRunChangeDetection:l=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new Vo(!1),this.onMicrotaskEmpty=new Vo(!1),this.onStable=new Vo(!1),this.onError=new Vo(!1),"undefined"==typeof Zone)throw new Error("In this configuration Angular requires Zone.js");Zone.assertZonePatched();const d=this;d._nesting=0,d._outer=d._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(d._inner=d._inner.fork(new Zone.TaskTrackingZoneSpec)),o&&Zone.longStackTraceZoneSpec&&(d._inner=d._inner.fork(Zone.longStackTraceZoneSpec)),d.shouldCoalesceEventChangeDetection=!l&&u,d.shouldCoalesceRunChangeDetection=l,d.lastRequestAnimationFrameId=-1,d.nativeRequestAnimationFrame=function BS(){let s=qt.requestAnimationFrame,o=qt.cancelAnimationFrame;if("undefined"!=typeof Zone&&s&&o){const u=s[Zone.__symbol__("OriginalDelegate")];u&&(s=u);const l=o[Zone.__symbol__("OriginalDelegate")];l&&(o=l)}return{nativeRequestAnimationFrame:s,nativeCancelAnimationFrame:o}}().nativeRequestAnimationFrame,function $S(s){const o=()=>{!function jS(s){s.isCheckStableRunning||-1!==s.lastRequestAnimationFrameId||(s.lastRequestAnimationFrameId=s.nativeRequestAnimationFrame.call(qt,()=>{s.fakeTopEventTask||(s.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{s.lastRequestAnimationFrameId=-1,o_(s),s.isCheckStableRunning=!0,s_(s),s.isCheckStableRunning=!1},void 0,()=>{},()=>{})),s.fakeTopEventTask.invoke()}),o_(s))}(s)};s._inner=s._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(u,l,d,f,y,w)=>{try{return va(s),u.invokeTask(d,f,y,w)}finally{(s.shouldCoalesceEventChangeDetection&&"eventTask"===f.type||s.shouldCoalesceRunChangeDetection)&&o(),fp(s)}},onInvoke:(u,l,d,f,y,w,b)=>{try{return va(s),u.invoke(d,f,y,w,b)}finally{s.shouldCoalesceRunChangeDetection&&o(),fp(s)}},onHasTask:(u,l,d,f)=>{u.hasTask(d,f),l===d&&("microTask"==f.change?(s._hasPendingMicrotasks=f.microTask,o_(s),s_(s)):"macroTask"==f.change&&(s.hasPendingMacrotasks=f.macroTask))},onHandleError:(u,l,d,f)=>(u.handleError(d,f),s.runOutsideAngular(()=>s.onError.emit(f)),!1)})}(d)}static isInAngularZone(){return"undefined"!=typeof Zone&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!Ai.isInAngularZone())throw new Error("Expected to be in Angular Zone, but it is not!")}static assertNotInAngularZone(){if(Ai.isInAngularZone())throw new Error("Expected to not be in Angular Zone, but it is!")}run(o,u,l){return this._inner.run(o,u,l)}runTask(o,u,l,d){const f=this._inner,y=f.scheduleEventTask("NgZoneEvent: "+d,o,zd,cp,cp);try{return f.runTask(y,u,l)}finally{f.cancelTask(y)}}runGuarded(o,u,l){return this._inner.runGuarded(o,u,l)}runOutsideAngular(o){return this._outer.run(o)}}const zd={};function s_(s){if(0==s._nesting&&!s.hasPendingMicrotasks&&!s.isStable)try{s._nesting++,s.onMicrotaskEmpty.emit(null)}finally{if(s._nesting--,!s.hasPendingMicrotasks)try{s.runOutsideAngular(()=>s.onStable.emit(null))}finally{s.isStable=!0}}}function o_(s){s.hasPendingMicrotasks=!!(s._hasPendingMicrotasks||(s.shouldCoalesceEventChangeDetection||s.shouldCoalesceRunChangeDetection)&&-1!==s.lastRequestAnimationFrameId)}function va(s){s._nesting++,s.isStable&&(s.isStable=!1,s.onUnstable.emit(null))}function fp(s){s._nesting--,s_(s)}class HS{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new Vo,this.onMicrotaskEmpty=new Vo,this.onStable=new Vo,this.onError=new Vo}run(o,u,l){return o.apply(u,l)}runGuarded(o,u,l){return o.apply(u,l)}runOutsideAngular(o){return o()}runTask(o,u,l,d){return o.apply(u,l)}}let mE=(()=>{class s{constructor(u){this._ngZone=u,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,this._watchAngularEvents(),u.run(()=>{this.taskTrackingZone="undefined"==typeof Zone?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{Ai.assertNotInAngularZone(),gE(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())gE(()=>{for(;0!==this._callbacks.length;){let u=this._callbacks.pop();clearTimeout(u.timeoutId),u.doneCb(this._didWork)}this._didWork=!1});else{let u=this.getPendingTasks();this._callbacks=this._callbacks.filter(l=>!l.updateCb||!l.updateCb(u)||(clearTimeout(l.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(u=>({source:u.source,creationLocation:u.creationLocation,data:u.data})):[]}addCallback(u,l,d){let f=-1;l&&l>0&&(f=setTimeout(()=>{this._callbacks=this._callbacks.filter(y=>y.timeoutId!==f),u(this._didWork,this.getPendingTasks())},l)),this._callbacks.push({doneCb:u,timeoutId:f,updateCb:d})}whenStable(u,l,d){if(d&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(u,l,d),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}findProviders(u,l,d){return[]}}return s.\u0275fac=function(u){return new(u||s)(zr(Ai))},s.\u0275prov=Gt({token:s,factory:s.\u0275fac}),s})(),a_=(()=>{class s{constructor(){this._applications=new Map,Gd.addToWindow(this)}registerApplication(u,l){this._applications.set(u,l)}unregisterApplication(u){this._applications.delete(u)}unregisterAllApplications(){this._applications.clear()}getTestability(u){return this._applications.get(u)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(u,l=!0){return Gd.findTestabilityInTree(this,u,l)}}return s.\u0275fac=function(u){return new(u||s)},s.\u0275prov=Gt({token:s,factory:s.\u0275fac}),s})();class _E{addToWindow(o){}findTestabilityInTree(o,u,l){return null}}function pp(s){Gd=s}let ms,Gd=new _E;const vE=new dr("AllowMultipleToken");class zS{constructor(o,u){this.name=o,this.token=u}}function EE(s,o,u=[]){const l=`Platform: ${o}`,d=new dr(l);return(f=[])=>{let y=IE();if(!y||y.injector.get(vE,!1))if(s)s(u.concat(f).concat({provide:d,useValue:!0}));else{const w=u.concat(f).concat({provide:d,useValue:!0},{provide:ro,useValue:"platform"});!function Wb(s){if(ms&&!ms.destroyed&&!ms.injector.get(vE,!1))throw new $e(400,"");ms=s.get(zb);const o=s.get(i_,null);o&&o.forEach(u=>u())}(fs.create({providers:w,name:l}))}return function wE(s){const o=IE();if(!o)throw new $e(401,"");return o}()}}function IE(){return ms&&!ms.destroyed?ms:null}let zb=(()=>{class s{constructor(u){this._injector=u,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(u,l){const w=function Gb(s,o){let u;return u="noop"===s?new HS:("zone.js"===s?void 0:s)||new Ai({enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:!!(null==o?void 0:o.ngZoneEventCoalescing),shouldCoalesceRunChangeDetection:!!(null==o?void 0:o.ngZoneRunCoalescing)}),u}(l?l.ngZone:void 0,{ngZoneEventCoalescing:l&&l.ngZoneEventCoalescing||!1,ngZoneRunCoalescing:l&&l.ngZoneRunCoalescing||!1}),b=[{provide:Ai,useValue:w}];return w.run(()=>{const S=fs.create({providers:b,parent:this.injector,name:u.moduleType.name}),R=u.create(S),O=R.injector.get(Jh,null);if(!O)throw new $e(402,"");return w.runOutsideAngular(()=>{const W=w.onError.subscribe({next:te=>{O.handleError(te)}});R.onDestroy(()=>{gp(this._modules,R),W.unsubscribe()})}),function GS(s,o,u){try{const l=u();return Cm(l)?l.catch(d=>{throw o.runOutsideAngular(()=>s.handleError(d)),d}):l}catch(l){throw o.runOutsideAngular(()=>s.handleError(l)),l}}(O,w,()=>{const W=R.injector.get(_a);return W.runInitializers(),W.donePromise.then(()=>(function xc(s){ct(s,"Expected localeId to be defined"),"string"==typeof s&&(xv=s.toLowerCase().replace(/_/g,"-"))}(R.injector.get(jo,Lf)||Lf),this._moduleDoBootstrap(R),R))})})}bootstrapModule(u,l=[]){const d=Gc({},l);return function WS(s,o,u){const l=new Lc(u);return Promise.resolve(l)}(0,0,u).then(f=>this.bootstrapModuleFactory(f,d))}_moduleDoBootstrap(u){const l=u.injector.get($o);if(u._bootstrapComponents.length>0)u._bootstrapComponents.forEach(d=>l.bootstrap(d));else{if(!u.instance.ngDoBootstrap)throw new $e(403,"");u.instance.ngDoBootstrap(l)}this._modules.push(u)}onDestroy(u){this._destroyListeners.push(u)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new $e(404,"");this._modules.slice().forEach(u=>u.destroy()),this._destroyListeners.forEach(u=>u()),this._destroyed=!0}get destroyed(){return this._destroyed}}return s.\u0275fac=function(u){return new(u||s)(zr(fs))},s.\u0275prov=Gt({token:s,factory:s.\u0275fac}),s})();function Gc(s,o){return Array.isArray(o)?o.reduce(Gc,s):Object.assign(Object.assign({},s),o)}let $o=(()=>{class s{constructor(u,l,d,f,y){this._zone=u,this._injector=l,this._exceptionHandler=d,this._componentFactoryResolver=f,this._initStatus=y,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const w=new N.y(S=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{S.next(this._stable),S.complete()})}),b=new N.y(S=>{let R;this._zone.runOutsideAngular(()=>{R=this._zone.onStable.subscribe(()=>{Ai.assertNotInAngularZone(),gE(()=>{!this._stable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks&&(this._stable=!0,S.next(!0))})})});const O=this._zone.onUnstable.subscribe(()=>{Ai.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{S.next(!1)}))});return()=>{R.unsubscribe(),O.unsubscribe()}});this.isStable=(0,oe.T)(w,b.pipe((0,ye.B)()))}bootstrap(u,l){if(!this._initStatus.done)throw new $e(405,"");let d;d=u instanceof Zv?u:this._componentFactoryResolver.resolveComponentFactory(u),this.componentTypes.push(d.componentType);const f=function yE(s){return s.isBoundToModule}(d)?void 0:this._injector.get(uo),w=d.create(fs.NULL,[],l||d.selector,f),b=w.location.nativeElement,S=w.injector.get(mE,null),R=S&&w.injector.get(a_);return S&&R&&R.registerApplication(b,S),w.onDestroy(()=>{this.detachView(w.hostView),gp(this.components,w),R&&R.unregisterApplication(b)}),this._loadComponent(w),w}tick(){if(this._runningTick)throw new $e(101,"");try{this._runningTick=!0;for(let u of this._views)u.detectChanges()}catch(u){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(u))}finally{this._runningTick=!1}}attachView(u){const l=u;this._views.push(l),l.attachToAppRef(this)}detachView(u){const l=u;gp(this._views,l),l.detachFromAppRef()}_loadComponent(u){this.attachView(u.hostView),this.tick(),this.components.push(u),this._injector.get(ya,[]).concat(this._bootstrapListeners).forEach(d=>d(u))}ngOnDestroy(){this._views.slice().forEach(u=>u.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}get viewCount(){return this._views.length}}return s.\u0275fac=function(u){return new(u||s)(zr(Ai),zr(fs),zr(Jh),zr(zf),zr(_a))},s.\u0275prov=Gt({token:s,factory:s.\u0275fac}),s})();function gp(s,o){const u=s.indexOf(o);u>-1&&s.splice(u,1)}let bE=!0,Kb=!1;function CE(){return Kb=!0,bE}function qS(){if(Kb)throw new Error("Cannot enable prod mode after platform setup.");bE=!1}let KS=(()=>{class s{}return s.__NG_ELEMENT_ID__=ZS,s})();function ZS(s){return function TE(s,o,u){if(dh(s)&&!u){const l=_i(s.index,o);return new pa(l,l)}return 47&s.type?new pa(o[16],o):null}(er(),We(),16==(16&s))}class Qb{constructor(){}supports(o){return Ic(o)}create(o){return new l_(o)}}const Jb=(s,o)=>o;class l_{constructor(o){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=o||Jb}forEachItem(o){let u;for(u=this._itHead;null!==u;u=u._next)o(u)}forEachOperation(o){let u=this._itHead,l=this._removalsHead,d=0,f=null;for(;u||l;){const y=!l||u&&u.currentIndex<Xb(l,d,f)?u:l,w=Xb(y,d,f),b=y.currentIndex;if(y===l)d--,l=l._nextRemoved;else if(u=u._next,null==y.previousIndex)d++;else{f||(f=[]);const S=w-d,R=b-d;if(S!=R){for(let W=0;W<S;W++){const te=W<f.length?f[W]:f[W]=0,Ae=te+W;R<=Ae&&Ae<S&&(f[W]=te+1)}f[y.previousIndex]=R-S}}w!==b&&o(y,w,b)}}forEachPreviousItem(o){let u;for(u=this._previousItHead;null!==u;u=u._nextPrevious)o(u)}forEachAddedItem(o){let u;for(u=this._additionsHead;null!==u;u=u._nextAdded)o(u)}forEachMovedItem(o){let u;for(u=this._movesHead;null!==u;u=u._nextMoved)o(u)}forEachRemovedItem(o){let u;for(u=this._removalsHead;null!==u;u=u._nextRemoved)o(u)}forEachIdentityChange(o){let u;for(u=this._identityChangesHead;null!==u;u=u._nextIdentityChange)o(u)}diff(o){if(null==o&&(o=[]),!Ic(o))throw new $e(900,"");return this.check(o)?this:null}onDestroy(){}check(o){this._reset();let d,f,y,u=this._itHead,l=!1;if(Array.isArray(o)){this.length=o.length;for(let w=0;w<this.length;w++)f=o[w],y=this._trackByFn(w,f),null!==u&&Object.is(u.trackById,y)?(l&&(u=this._verifyReinsertion(u,f,y,w)),Object.is(u.item,f)||this._addIdentityChange(u,f)):(u=this._mismatch(u,f,y,w),l=!0),u=u._next}else d=0,function dI(s,o){if(Array.isArray(s))for(let u=0;u<s.length;u++)o(s[u]);else{const u=s[iu()]();let l;for(;!(l=u.next()).done;)o(l.value)}}(o,w=>{y=this._trackByFn(d,w),null!==u&&Object.is(u.trackById,y)?(l&&(u=this._verifyReinsertion(u,w,y,d)),Object.is(u.item,w)||this._addIdentityChange(u,w)):(u=this._mismatch(u,w,y,d),l=!0),u=u._next,d++}),this.length=d;return this._truncate(u),this.collection=o,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let o;for(o=this._previousItHead=this._itHead;null!==o;o=o._next)o._nextPrevious=o._next;for(o=this._additionsHead;null!==o;o=o._nextAdded)o.previousIndex=o.currentIndex;for(this._additionsHead=this._additionsTail=null,o=this._movesHead;null!==o;o=o._nextMoved)o.previousIndex=o.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(o,u,l,d){let f;return null===o?f=this._itTail:(f=o._prev,this._remove(o)),null!==(o=null===this._unlinkedRecords?null:this._unlinkedRecords.get(l,null))?(Object.is(o.item,u)||this._addIdentityChange(o,u),this._reinsertAfter(o,f,d)):null!==(o=null===this._linkedRecords?null:this._linkedRecords.get(l,d))?(Object.is(o.item,u)||this._addIdentityChange(o,u),this._moveAfter(o,f,d)):o=this._addAfter(new wp(u,l),f,d),o}_verifyReinsertion(o,u,l,d){let f=null===this._unlinkedRecords?null:this._unlinkedRecords.get(l,null);return null!==f?o=this._reinsertAfter(f,o._prev,d):o.currentIndex!=d&&(o.currentIndex=d,this._addToMoves(o,d)),o}_truncate(o){for(;null!==o;){const u=o._next;this._addToRemovals(this._unlink(o)),o=u}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(o,u,l){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(o);const d=o._prevRemoved,f=o._nextRemoved;return null===d?this._removalsHead=f:d._nextRemoved=f,null===f?this._removalsTail=d:f._prevRemoved=d,this._insertAfter(o,u,l),this._addToMoves(o,l),o}_moveAfter(o,u,l){return this._unlink(o),this._insertAfter(o,u,l),this._addToMoves(o,l),o}_addAfter(o,u,l){return this._insertAfter(o,u,l),this._additionsTail=null===this._additionsTail?this._additionsHead=o:this._additionsTail._nextAdded=o,o}_insertAfter(o,u,l){const d=null===u?this._itHead:u._next;return o._next=d,o._prev=u,null===d?this._itTail=o:d._prev=o,null===u?this._itHead=o:u._next=o,null===this._linkedRecords&&(this._linkedRecords=new xE),this._linkedRecords.put(o),o.currentIndex=l,o}_remove(o){return this._addToRemovals(this._unlink(o))}_unlink(o){null!==this._linkedRecords&&this._linkedRecords.remove(o);const u=o._prev,l=o._next;return null===u?this._itHead=l:u._next=l,null===l?this._itTail=u:l._prev=u,o}_addToMoves(o,u){return o.previousIndex===u||(this._movesTail=null===this._movesTail?this._movesHead=o:this._movesTail._nextMoved=o),o}_addToRemovals(o){return null===this._unlinkedRecords&&(this._unlinkedRecords=new xE),this._unlinkedRecords.put(o),o.currentIndex=null,o._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=o,o._prevRemoved=null):(o._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=o),o}_addIdentityChange(o,u){return o.item=u,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=o:this._identityChangesTail._nextIdentityChange=o,o}}class wp{constructor(o,u){this.item=o,this.trackById=u,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class RE{constructor(){this._head=null,this._tail=null}add(o){null===this._head?(this._head=this._tail=o,o._nextDup=null,o._prevDup=null):(this._tail._nextDup=o,o._prevDup=this._tail,o._nextDup=null,this._tail=o)}get(o,u){let l;for(l=this._head;null!==l;l=l._nextDup)if((null===u||u<=l.currentIndex)&&Object.is(l.trackById,o))return l;return null}remove(o){const u=o._prevDup,l=o._nextDup;return null===u?this._head=l:u._nextDup=l,null===l?this._tail=u:l._prevDup=u,null===this._head}}class xE{constructor(){this.map=new Map}put(o){const u=o.trackById;let l=this.map.get(u);l||(l=new RE,this.map.set(u,l)),l.add(o)}get(o,u){const d=this.map.get(o);return d?d.get(o,u):null}remove(o){const u=o.trackById;return this.map.get(u).remove(o)&&this.map.delete(u),o}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function Xb(s,o,u){const l=s.previousIndex;if(null===l)return l;let d=0;return u&&l<u.length&&(d=u[l]),l+o+d}class eC{constructor(){}supports(o){return o instanceof Map||Yy(o)}create(){return new JS}}class JS{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(o){let u;for(u=this._mapHead;null!==u;u=u._next)o(u)}forEachPreviousItem(o){let u;for(u=this._previousMapHead;null!==u;u=u._nextPrevious)o(u)}forEachChangedItem(o){let u;for(u=this._changesHead;null!==u;u=u._nextChanged)o(u)}forEachAddedItem(o){let u;for(u=this._additionsHead;null!==u;u=u._nextAdded)o(u)}forEachRemovedItem(o){let u;for(u=this._removalsHead;null!==u;u=u._nextRemoved)o(u)}diff(o){if(o){if(!(o instanceof Map||Yy(o)))throw new $e(900,"")}else o=new Map;return this.check(o)?this:null}onDestroy(){}check(o){this._reset();let u=this._mapHead;if(this._appendAfter=null,this._forEach(o,(l,d)=>{if(u&&u.key===d)this._maybeAddToChanges(u,l),this._appendAfter=u,u=u._next;else{const f=this._getOrCreateRecordForKey(d,l);u=this._insertBeforeOrAppend(u,f)}}),u){u._prev&&(u._prev._next=null),this._removalsHead=u;for(let l=u;null!==l;l=l._nextRemoved)l===this._mapHead&&(this._mapHead=null),this._records.delete(l.key),l._nextRemoved=l._next,l.previousValue=l.currentValue,l.currentValue=null,l._prev=null,l._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(o,u){if(o){const l=o._prev;return u._next=o,u._prev=l,o._prev=u,l&&(l._next=u),o===this._mapHead&&(this._mapHead=u),this._appendAfter=o,o}return this._appendAfter?(this._appendAfter._next=u,u._prev=this._appendAfter):this._mapHead=u,this._appendAfter=u,null}_getOrCreateRecordForKey(o,u){if(this._records.has(o)){const d=this._records.get(o);this._maybeAddToChanges(d,u);const f=d._prev,y=d._next;return f&&(f._next=y),y&&(y._prev=f),d._next=null,d._prev=null,d}const l=new XS(o);return this._records.set(o,l),l.currentValue=u,this._addToAdditions(l),l}_reset(){if(this.isDirty){let o;for(this._previousMapHead=this._mapHead,o=this._previousMapHead;null!==o;o=o._next)o._nextPrevious=o._next;for(o=this._changesHead;null!==o;o=o._nextChanged)o.previousValue=o.currentValue;for(o=this._additionsHead;null!=o;o=o._nextAdded)o.previousValue=o.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(o,u){Object.is(u,o.currentValue)||(o.previousValue=o.currentValue,o.currentValue=u,this._addToChanges(o))}_addToAdditions(o){null===this._additionsHead?this._additionsHead=this._additionsTail=o:(this._additionsTail._nextAdded=o,this._additionsTail=o)}_addToChanges(o){null===this._changesHead?this._changesHead=this._changesTail=o:(this._changesTail._nextChanged=o,this._changesTail=o)}_forEach(o,u){o instanceof Map?o.forEach(u):Object.keys(o).forEach(l=>u(o[l],l))}}class XS{constructor(o){this.key=o,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function tC(){return new Kc([new Qb])}let Kc=(()=>{class s{constructor(u){this.factories=u}static create(u,l){if(null!=l){const d=l.factories.slice();u=u.concat(d)}return new s(u)}static extend(u){return{provide:s,useFactory:l=>s.create(u,l||tC()),deps:[[s,new Qs,new ls]]}}find(u){const l=this.factories.find(d=>d.supports(u));if(null!=l)return l;throw new $e(901,"")}}return s.\u0275prov=Gt({token:s,providedIn:"root",factory:tC}),s})();function Zc(){return new Ip([new eC])}let Ip=(()=>{class s{constructor(u){this.factories=u}static create(u,l){if(l){const d=l.factories.slice();u=u.concat(d)}return new s(u)}static extend(u){return{provide:s,useFactory:l=>s.create(u,l||Zc()),deps:[[s,new Qs,new ls]]}}find(u){const l=this.factories.find(f=>f.supports(u));if(l)return l;throw new $e(901,"")}}return s.\u0275prov=Gt({token:s,providedIn:"root",factory:Zc}),s})();const PE=EE(null,"core",[{provide:fE,useValue:"unknown"},{provide:zb,deps:[fs]},{provide:a_,deps:[]},{provide:pE,deps:[]}]),tA=[{provide:$o,useClass:$o,deps:[Ai,fs,Jh,zf,_a]},{provide:ub,deps:[Ai],useFactory:function NE(s){let o=[];return s.onStable.subscribe(()=>{for(;o.length;)o.pop()()}),function(u){o.push(u)}}},{provide:_a,useClass:_a,deps:[[new ls,Hd]]},{provide:hp,useClass:hp,deps:[]},jb,{provide:jo,useFactory:function vu(s){return s||function sC(){return"undefined"!=typeof $localize&&$localize.locale||Lf}()},deps:[[new Wa(jo),new ls,new Qs]]},{provide:$b,useValue:"USD"}];let nA=(()=>{class s{constructor(u){}}return s.\u0275fac=function(u){return new(u||s)(zr($o))},s.\u0275mod=J({type:s}),s.\u0275inj=Ge({providers:tA}),s})()},3942:(nt,Ie,P)=>{"use strict";P.d(Ie,{Z:()=>$e});var m=P(2090),F=P(4859),N=P(9681),oe=P(1877);class ye{constructor(q,se){this._delegate=q,this.firebase=se,(0,N._addComponent)(q,new F.wA("app-compat",()=>this,"PUBLIC")),this.container=q.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(q){this._delegate.automaticDataCollectionEnabled=q}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(q=>{this._delegate.checkDestroyed(),q()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),(0,N.deleteApp)(this._delegate)))}_getService(q,se=N._DEFAULT_ENTRY_NAME){var Le;this._delegate.checkDestroyed();const Ne=this._delegate.container.getProvider(q);return!Ne.isInitialized()&&"EXPLICIT"===(null===(Le=Ne.getComponent())||void 0===Le?void 0:Le.instantiationMode)&&Ne.initialize(),Ne.getImmediate({identifier:se})}_removeServiceInstance(q,se=N._DEFAULT_ENTRY_NAME){this._delegate.container.getProvider(q).clearInstance(se)}_addComponent(q){(0,N._addComponent)(this._delegate,q)}_addOrOverwriteComponent(q){(0,N._addOrOverwriteComponent)(this._delegate,q)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}const ae=new m.LL("app-compat","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."}),j=function _e(){const Ue=function de(Ue){const q={},se={__esModule:!0,initializeApp:function ce(X,ht={}){const Y=N.initializeApp(X,ht);if((0,m.r3)(q,Y.name))return q[Y.name];const me=new Ue(Y,se);return q[Y.name]=me,me},app:Ne,registerVersion:N.registerVersion,setLogLevel:N.setLogLevel,onLog:N.onLog,apps:null,SDK_VERSION:N.SDK_VERSION,INTERNAL:{registerComponent:function we(X){const ht=X.name,Y=ht.replace("-compat","");if(N._registerComponent(X)&&"PUBLIC"===X.type){const me=(ue=Ne())=>{if("function"!=typeof ue[Y])throw ae.create("invalid-app-argument",{appName:ht});return ue[Y]()};void 0!==X.serviceProps&&(0,m.ZB)(me,X.serviceProps),se[Y]=me,Ue.prototype[Y]=function(...ue){return this._getService.bind(this,ht).apply(this,X.multipleInstances?ue:[])}}return"PUBLIC"===X.type?se[Y]:null},removeApp:function Le(X){delete q[X]},useAsService:function Xe(X,ht){return"serverAuth"===ht?null:ht},modularAPIs:N}};function Ne(X){if(!(0,m.r3)(q,X=X||N._DEFAULT_ENTRY_NAME))throw ae.create("no-app",{appName:X});return q[X]}return se.default=se,Object.defineProperty(se,"apps",{get:function De(){return Object.keys(q).map(X=>q[X])}}),Ne.App=Ue,se}(ye);return Ue.INTERNAL=Object.assign(Object.assign({},Ue.INTERNAL),{createFirebaseNamespace:_e,extendNamespace:function q(se){(0,m.ZB)(Ue,se)},createSubscribe:m.ne,ErrorFactory:m.LL,deepExtend:m.ZB}),Ue}(),V=new oe.Yd("@firebase/app-compat");if((0,m.jU)()&&void 0!==self.firebase){V.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");const Ue=self.firebase.SDK_VERSION;Ue&&Ue.indexOf("LITE")>=0&&V.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}const $e=j;!function Me(Ue){(0,N.registerVersion)("@firebase/app-compat","0.1.18",Ue)}()},9681:(nt,Ie,P)=>{"use strict";P.r(Ie),P.d(Ie,{FirebaseError:()=>oe.ZR,SDK_VERSION:()=>en,_DEFAULT_ENTRY_NAME:()=>wn,_addComponent:()=>In,_addOrOverwriteComponent:()=>qn,_apps:()=>mt,_clearComponents:()=>_t,_components:()=>Xt,_getProvider:()=>Ut,_registerComponent:()=>Gt,_removeServiceInstance:()=>Ge,deleteApp:()=>Jn,getApp:()=>On,getApps:()=>An,initializeApp:()=>Sn,onLog:()=>ke,registerVersion:()=>fe,setLogLevel:()=>Ze});var m=P(5861),F=P(4859),N=P(1877),oe=P(2090);class ye{constructor(rt){this.container=rt}getPlatformInfoString(){return this.container.getProviders().map(Nt=>{if(function Ee(et){const rt=et.getComponent();return"VERSION"===(null==rt?void 0:rt.type)}(Nt)){const Bt=Nt.getImmediate();return`${Bt.library}/${Bt.version}`}return null}).filter(Nt=>Nt).join(" ")}}const ae="@firebase/app",_e=new N.Yd("@firebase/app"),wn="[DEFAULT]",ct={[ae]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},mt=new Map,Xt=new Map;function In(et,rt){try{et.container.addComponent(rt)}catch(Nt){_e.debug(`Component ${rt.name} failed to register with FirebaseApp ${et.name}`,Nt)}}function qn(et,rt){et.container.addOrOverwriteComponent(rt)}function Gt(et){const rt=et.name;if(Xt.has(rt))return _e.debug(`There were multiple attempts to register component ${rt}.`),!1;Xt.set(rt,et);for(const Nt of mt.values())In(Nt,et);return!0}function Ut(et,rt){return et.container.getProvider(rt)}function Ge(et,rt,Nt=wn){Ut(et,rt).clearInstance(Nt)}function _t(){Xt.clear()}const zt=new oe.LL("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function."});class nn{constructor(rt,Nt,Bt){this._isDeleted=!1,this._options=Object.assign({},rt),this._config=Object.assign({},Nt),this._name=Nt.name,this._automaticDataCollectionEnabled=Nt.automaticDataCollectionEnabled,this._container=Bt,this.container.addComponent(new F.wA("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(rt){this.checkDestroyed(),this._automaticDataCollectionEnabled=rt}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(rt){this._isDeleted=rt}checkDestroyed(){if(this.isDeleted)throw zt.create("app-deleted",{appName:this._name})}}const en="9.6.7";function Sn(et,rt={}){"object"!=typeof rt&&(rt={name:rt});const Nt=Object.assign({name:wn,automaticDataCollectionEnabled:!1},rt),Bt=Nt.name;if("string"!=typeof Bt||!Bt)throw zt.create("bad-app-name",{appName:String(Bt)});const Yt=mt.get(Bt);if(Yt){if((0,oe.vZ)(et,Yt.options)&&(0,oe.vZ)(Nt,Yt.config))return Yt;throw zt.create("duplicate-app",{appName:Bt})}const Et=new F.H0(Bt);for(const st of Xt.values())Et.addComponent(st);const ft=new nn(et,Nt,Et);return mt.set(Bt,ft),ft}function On(et=wn){const rt=mt.get(et);if(!rt)throw zt.create("no-app",{appName:et});return rt}function An(){return Array.from(mt.values())}function Jn(et){return Pe.apply(this,arguments)}function Pe(){return(Pe=(0,m.Z)(function*(et){const rt=et.name;mt.has(rt)&&(mt.delete(rt),yield Promise.all(et.container.getProviders().map(Nt=>Nt.delete())),et.isDeleted=!0)})).apply(this,arguments)}function fe(et,rt,Nt){var Bt;let Yt=null!==(Bt=ct[et])&&void 0!==Bt?Bt:et;Nt&&(Yt+=`-${Nt}`);const Et=Yt.match(/\s|\//),ft=rt.match(/\s|\//);if(Et||ft){const st=[`Unable to register library "${Yt}" with version "${rt}":`];return Et&&st.push(`library name "${Yt}" contains illegal characters (whitespace or "/")`),Et&&ft&&st.push("and"),ft&&st.push(`version name "${rt}" contains illegal characters (whitespace or "/")`),void _e.warn(st.join(" "))}Gt(new F.wA(`${Yt}-version`,()=>({library:Yt,version:rt}),"VERSION"))}function ke(et,rt){if(null!==et&&"function"!=typeof et)throw zt.create("invalid-log-argument");(0,N.Am)(et,rt)}function Ze(et){(0,N.Ub)(et)}!function Dt(et){Gt(new F.wA("platform-logger",rt=>new ye(rt),"PRIVATE")),fe(ae,"0.7.17",et),fe(ae,"0.7.17","esm2017"),fe("fire-js","")}("")},4859:(nt,Ie,P)=>{"use strict";P.d(Ie,{wA:()=>N,H0:()=>de});var m=P(5861),F=P(2090);class N{constructor(j,V,Q){this.name=j,this.instanceFactory=V,this.type=Q,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(j){return this.instantiationMode=j,this}setMultipleInstances(j){return this.multipleInstances=j,this}setServiceProps(j){return this.serviceProps=j,this}setInstanceCreatedCallback(j){return this.onInstanceCreated=j,this}}const oe="[DEFAULT]";class ye{constructor(j,V){this.name=j,this.container=V,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(j){const V=this.normalizeInstanceIdentifier(j);if(!this.instancesDeferred.has(V)){const Q=new F.BH;if(this.instancesDeferred.set(V,Q),this.isInitialized(V)||this.shouldAutoInitialize())try{const Ve=this.getOrInitializeService({instanceIdentifier:V});Ve&&Q.resolve(Ve)}catch(Ve){}}return this.instancesDeferred.get(V).promise}getImmediate(j){var V;const Q=this.normalizeInstanceIdentifier(null==j?void 0:j.identifier),Ve=null!==(V=null==j?void 0:j.optional)&&void 0!==V&&V;if(!this.isInitialized(Q)&&!this.shouldAutoInitialize()){if(Ve)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:Q})}catch(Me){if(Ve)return null;throw Me}}getComponent(){return this.component}setComponent(j){if(j.name!==this.name)throw Error(`Mismatching Component ${j.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=j,this.shouldAutoInitialize()){if(function ae(_e){return"EAGER"===_e.instantiationMode}(j))try{this.getOrInitializeService({instanceIdentifier:oe})}catch(V){}for(const[V,Q]of this.instancesDeferred.entries()){const Ve=this.normalizeInstanceIdentifier(V);try{const Me=this.getOrInitializeService({instanceIdentifier:Ve});Q.resolve(Me)}catch(Me){}}}}clearInstance(j=oe){this.instancesDeferred.delete(j),this.instancesOptions.delete(j),this.instances.delete(j)}delete(){var j=this;return(0,m.Z)(function*(){const V=Array.from(j.instances.values());yield Promise.all([...V.filter(Q=>"INTERNAL"in Q).map(Q=>Q.INTERNAL.delete()),...V.filter(Q=>"_delete"in Q).map(Q=>Q._delete())])})()}isComponentSet(){return null!=this.component}isInitialized(j=oe){return this.instances.has(j)}getOptions(j=oe){return this.instancesOptions.get(j)||{}}initialize(j={}){const{options:V={}}=j,Q=this.normalizeInstanceIdentifier(j.instanceIdentifier);if(this.isInitialized(Q))throw Error(`${this.name}(${Q}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const Ve=this.getOrInitializeService({instanceIdentifier:Q,options:V});for(const[Me,$e]of this.instancesDeferred.entries())Q===this.normalizeInstanceIdentifier(Me)&&$e.resolve(Ve);return Ve}onInit(j,V){var Q;const Ve=this.normalizeInstanceIdentifier(V),Me=null!==(Q=this.onInitCallbacks.get(Ve))&&void 0!==Q?Q:new Set;Me.add(j),this.onInitCallbacks.set(Ve,Me);const $e=this.instances.get(Ve);return $e&&j($e,Ve),()=>{Me.delete(j)}}invokeOnInitCallbacks(j,V){const Q=this.onInitCallbacks.get(V);if(Q)for(const Ve of Q)try{Ve(j,V)}catch(Me){}}getOrInitializeService({instanceIdentifier:j,options:V={}}){let Q=this.instances.get(j);if(!Q&&this.component&&(Q=this.component.instanceFactory(this.container,{instanceIdentifier:(_e=j,_e===oe?void 0:_e),options:V}),this.instances.set(j,Q),this.instancesOptions.set(j,V),this.invokeOnInitCallbacks(Q,j),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,j,Q)}catch(Ve){}var _e;return Q||null}normalizeInstanceIdentifier(j=oe){return this.component?this.component.multipleInstances?j:oe:j}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class de{constructor(j){this.name=j,this.providers=new Map}addComponent(j){const V=this.getProvider(j.name);if(V.isComponentSet())throw new Error(`Component ${j.name} has already been registered with ${this.name}`);V.setComponent(j)}addOrOverwriteComponent(j){this.getProvider(j.name).isComponentSet()&&this.providers.delete(j.name),this.addComponent(j)}getProvider(j){if(this.providers.has(j))return this.providers.get(j);const V=new ye(j,this);return this.providers.set(j,V),V}getProviders(){return Array.from(this.providers.values())}}},2833:(nt,Ie,P)=>{"use strict";var m=P(5861),F=P(9681),N=P(4859),oe=P(2090),ye=P(2940);const Ee="@firebase/installations",_e="w:0.5.5",j="FIS_v2",Ue=new oe.LL("installations","Installations",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."});function q(U){return U instanceof oe.ZR&&U.code.includes("request-failed")}function se({projectId:U}){return`https://firebaseinstallations.googleapis.com/v1/projects/${U}/installations`}function Le(U){return{token:U.token,requestStatus:2,expiresIn:ht(U.expiresIn),creationTime:Date.now()}}function Ne(U,ie){return ce.apply(this,arguments)}function ce(){return(ce=(0,m.Z)(function*(U,ie){const Qe=(yield ie.json()).error;return Ue.create("request-failed",{requestName:U,serverCode:Qe.code,serverMessage:Qe.message,serverStatus:Qe.status})})).apply(this,arguments)}function De({apiKey:U}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":U})}function we(U,{refreshToken:ie}){const je=De(U);return je.append("Authorization",function Y(U){return`${j} ${U}`}(ie)),je}function Xe(U){return X.apply(this,arguments)}function X(){return(X=(0,m.Z)(function*(U){const ie=yield U();return ie.status>=500&&ie.status<600?U():ie})).apply(this,arguments)}function ht(U){return Number(U.replace("s","000"))}function me(U,ie){return ue.apply(this,arguments)}function ue(){return(ue=(0,m.Z)(function*(U,{fid:ie}){const je=se(U),pn={method:"POST",headers:De(U),body:JSON.stringify({fid:ie,authVersion:j,appId:U.appId,sdkVersion:_e})},an=yield Xe(()=>fetch(je,pn));if(an.ok){const Kn=yield an.json();return{fid:Kn.fid||ie,registrationStatus:2,refreshToken:Kn.refreshToken,authToken:Le(Kn.authToken)}}throw yield Ne("Create Installation",an)})).apply(this,arguments)}function pe(U){return new Promise(ie=>{setTimeout(ie,U)})}const le=/^[cdef][\w-]{21}$/;function Ht(){try{const U=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(U),U[0]=112+U[0]%16;const je=function wn(U){return function He(U){return btoa(String.fromCharCode(...U)).replace(/\+/g,"-").replace(/\//g,"_")}(U).substr(0,22)}(U);return le.test(je)?je:""}catch(U){return""}}function ct(U){return`${U.appName}!${U.appId}`}const mt=new Map;function Xt(U,ie){const je=ct(U);Gt(je,ie),function Ut(U,ie){const je=function _t(){return!Ge&&"BroadcastChannel"in self&&(Ge=new BroadcastChannel("[Firebase] FID Change"),Ge.onmessage=U=>{Gt(U.data.key,U.data.fid)}),Ge}();je&&je.postMessage({key:U,fid:ie}),function yt(){0===mt.size&&Ge&&(Ge.close(),Ge=null)}()}(je,ie)}function Gt(U,ie){const je=mt.get(U);if(je)for(const Qe of je)Qe(ie)}let Ge=null;const en="firebase-installations-store";let Sn=null;function On(){return Sn||(Sn=(0,ye.openDb)("firebase-installations-database",1,U=>{0===U.oldVersion&&U.createObjectStore(en)})),Sn}function An(U,ie){return Jn.apply(this,arguments)}function Jn(){return(Jn=(0,m.Z)(function*(U,ie){const je=ct(U),dn=(yield On()).transaction(en,"readwrite"),pn=dn.objectStore(en),an=yield pn.get(je);return yield pn.put(ie,je),yield dn.complete,(!an||an.fid!==ie.fid)&&Xt(U,ie.fid),ie})).apply(this,arguments)}function Pe(U){return fe.apply(this,arguments)}function fe(){return(fe=(0,m.Z)(function*(U){const ie=ct(U),Qe=(yield On()).transaction(en,"readwrite");yield Qe.objectStore(en).delete(ie),yield Qe.complete})).apply(this,arguments)}function ke(U,ie){return Ze.apply(this,arguments)}function Ze(){return(Ze=(0,m.Z)(function*(U,ie){const je=ct(U),dn=(yield On()).transaction(en,"readwrite"),pn=dn.objectStore(en),an=yield pn.get(je),Kn=ie(an);return void 0===Kn?yield pn.delete(je):yield pn.put(Kn,je),yield dn.complete,Kn&&(!an||an.fid!==Kn.fid)&&Xt(U,Kn.fid),Kn})).apply(this,arguments)}function Dt(U){return et.apply(this,arguments)}function et(){return(et=(0,m.Z)(function*(U){let ie;const je=yield ke(U,Qe=>{const dn=rt(Qe),pn=Nt(U,dn);return ie=pn.registrationPromise,pn.installationEntry});return""===je.fid?{installationEntry:yield ie}:{installationEntry:je,registrationPromise:ie}})).apply(this,arguments)}function rt(U){return Hn(U||{fid:Ht(),registrationStatus:0})}function Nt(U,ie){if(0===ie.registrationStatus){if(!navigator.onLine)return{installationEntry:ie,registrationPromise:Promise.reject(Ue.create("app-offline"))};const je={fid:ie.fid,registrationStatus:1,registrationTime:Date.now()},Qe=function Bt(U,ie){return Yt.apply(this,arguments)}(U,je);return{installationEntry:je,registrationPromise:Qe}}return 1===ie.registrationStatus?{installationEntry:ie,registrationPromise:Et(U)}:{installationEntry:ie}}function Yt(){return(Yt=(0,m.Z)(function*(U,ie){try{return An(U,yield me(U,ie))}catch(je){throw q(je)&&409===je.customData.serverCode?yield Pe(U):yield An(U,{fid:ie.fid,registrationStatus:0}),je}})).apply(this,arguments)}function Et(U){return ft.apply(this,arguments)}function ft(){return(ft=(0,m.Z)(function*(U){let ie=yield st(U);for(;1===ie.registrationStatus;)yield pe(100),ie=yield st(U);if(0===ie.registrationStatus){const{installationEntry:je,registrationPromise:Qe}=yield Dt(U);return Qe||je}return ie})).apply(this,arguments)}function st(U){return ke(U,ie=>{if(!ie)throw Ue.create("installation-not-found");return Hn(ie)})}function Hn(U){return function Ur(U){return 1===U.registrationStatus&&U.registrationTime+1e4<Date.now()}(U)?{fid:U.fid,registrationStatus:0}:U}function qt(U,ie){return Xn.apply(this,arguments)}function Xn(){return(Xn=(0,m.Z)(function*({appConfig:U,platformLoggerProvider:ie},je){const Qe=Tn(U,je),dn=we(U,je),pn=ie.getImmediate({optional:!0});pn&&dn.append("x-firebase-client",pn.getPlatformInfoString());const Kn={method:"POST",headers:dn,body:JSON.stringify({installation:{sdkVersion:_e}})},ji=yield Xe(()=>fetch(Qe,Kn));if(ji.ok)return Le(yield ji.json());throw yield Ne("Generate Auth Token",ji)})).apply(this,arguments)}function Tn(U,{fid:ie}){return`${se(U)}/${ie}/authTokens:generate`}function rn(U){return L.apply(this,arguments)}function L(){return(L=(0,m.Z)(function*(U,ie=!1){let je;const Qe=yield ke(U.appConfig,pn=>{if(!ee(pn))throw Ue.create("not-registered");const an=pn.authToken;if(!ie&&be(an))return pn;if(1===an.requestStatus)return je=z(U,ie),pn;{if(!navigator.onLine)throw Ue.create("app-offline");const Kn=ut(pn);return je=re(U,Kn),Kn}});return je?yield je:Qe.authToken})).apply(this,arguments)}function z(U,ie){return G.apply(this,arguments)}function G(){return(G=(0,m.Z)(function*(U,ie){let je=yield Te(U.appConfig);for(;1===je.authToken.requestStatus;)yield pe(100),je=yield Te(U.appConfig);const Qe=je.authToken;return 0===Qe.requestStatus?rn(U,ie):Qe})).apply(this,arguments)}function Te(U){return ke(U,ie=>{if(!ee(ie))throw Ue.create("not-registered");return function ot(U){return 1===U.requestStatus&&U.requestTime+1e4<Date.now()}(ie.authToken)?Object.assign(Object.assign({},ie),{authToken:{requestStatus:0}}):ie})}function re(U,ie){return at.apply(this,arguments)}function at(){return(at=(0,m.Z)(function*(U,ie){try{const je=yield qt(U,ie),Qe=Object.assign(Object.assign({},ie),{authToken:je});return yield An(U.appConfig,Qe),je}catch(je){if(!q(je)||401!==je.customData.serverCode&&404!==je.customData.serverCode){const Qe=Object.assign(Object.assign({},ie),{authToken:{requestStatus:0}});yield An(U.appConfig,Qe)}else yield Pe(U.appConfig);throw je}})).apply(this,arguments)}function ee(U){return void 0!==U&&2===U.registrationStatus}function be(U){return 2===U.requestStatus&&!function Be(U){const ie=Date.now();return ie<U.creationTime||U.creationTime+U.expiresIn<ie+36e5}(U)}function ut(U){const ie={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},U),{authToken:ie})}function At(){return(At=(0,m.Z)(function*(U){const ie=U,{installationEntry:je,registrationPromise:Qe}=yield Dt(ie.appConfig);return Qe?Qe.catch(console.error):rn(ie).catch(console.error),je.fid})).apply(this,arguments)}function $(){return($=(0,m.Z)(function*(U,ie=!1){const je=U;return yield H(je.appConfig),(yield rn(je,ie)).token})).apply(this,arguments)}function H(U){return Re.apply(this,arguments)}function Re(){return(Re=(0,m.Z)(function*(U){const{registrationPromise:ie}=yield Dt(U);ie&&(yield ie)})).apply(this,arguments)}function mr(U){return Ue.create("missing-app-config-values",{valueName:U})}const K="installations",gt=U=>{const ie=U.getProvider("app").getImmediate(),je=function ln(U){if(!U||!U.options)throw mr("App Configuration");if(!U.name)throw mr("App Name");const ie=["projectId","apiKey","appId"];for(const je of ie)if(!U.options[je])throw mr(je);return{appName:U.name,projectId:U.options.projectId,apiKey:U.options.apiKey,appId:U.options.appId}}(ie);return{app:ie,appConfig:je,platformLoggerProvider:(0,F._getProvider)(ie,"platform-logger"),_delete:()=>Promise.resolve()}},Ye=U=>{const ie=U.getProvider("app").getImmediate(),je=(0,F._getProvider)(ie,K).getImmediate();return{getId:()=>function tt(U){return At.apply(this,arguments)}(je),getToken:dn=>function J(U){return $.apply(this,arguments)}(je,dn)}};(function Oe(){(0,F._registerComponent)(new N.wA(K,gt,"PUBLIC")),(0,F._registerComponent)(new N.wA("installations-internal",Ye,"PRIVATE"))})(),(0,F.registerVersion)(Ee,"0.5.5"),(0,F.registerVersion)(Ee,"0.5.5","esm2017")},1877:(nt,Ie,P)=>{"use strict";P.d(Ie,{in:()=>F,Yd:()=>ae,Ub:()=>de,Am:()=>_e});const m=[];var F=(()=>{return(j=F||(F={}))[j.DEBUG=0]="DEBUG",j[j.VERBOSE=1]="VERBOSE",j[j.INFO=2]="INFO",j[j.WARN=3]="WARN",j[j.ERROR=4]="ERROR",j[j.SILENT=5]="SILENT",F;var j})();const N={debug:F.DEBUG,verbose:F.VERBOSE,info:F.INFO,warn:F.WARN,error:F.ERROR,silent:F.SILENT},oe=F.INFO,ye={[F.DEBUG]:"log",[F.VERBOSE]:"log",[F.INFO]:"info",[F.WARN]:"warn",[F.ERROR]:"error"},Ee=(j,V,...Q)=>{if(V<j.logLevel)return;const Ve=(new Date).toISOString(),Me=ye[V];if(!Me)throw new Error(`Attempted to log a message with an invalid logType (value: ${V})`);console[Me](`[${Ve}]  ${j.name}:`,...Q)};class ae{constructor(V){this.name=V,this._logLevel=oe,this._logHandler=Ee,this._userLogHandler=null,m.push(this)}get logLevel(){return this._logLevel}set logLevel(V){if(!(V in F))throw new TypeError(`Invalid value "${V}" assigned to \`logLevel\``);this._logLevel=V}setLogLevel(V){this._logLevel="string"==typeof V?N[V]:V}get logHandler(){return this._logHandler}set logHandler(V){if("function"!=typeof V)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=V}get userLogHandler(){return this._userLogHandler}set userLogHandler(V){this._userLogHandler=V}debug(...V){this._userLogHandler&&this._userLogHandler(this,F.DEBUG,...V),this._logHandler(this,F.DEBUG,...V)}log(...V){this._userLogHandler&&this._userLogHandler(this,F.VERBOSE,...V),this._logHandler(this,F.VERBOSE,...V)}info(...V){this._userLogHandler&&this._userLogHandler(this,F.INFO,...V),this._logHandler(this,F.INFO,...V)}warn(...V){this._userLogHandler&&this._userLogHandler(this,F.WARN,...V),this._logHandler(this,F.WARN,...V)}error(...V){this._userLogHandler&&this._userLogHandler(this,F.ERROR,...V),this._logHandler(this,F.ERROR,...V)}}function de(j){m.forEach(V=>{V.setLogLevel(j)})}function _e(j,V){for(const Q of m){let Ve=null;V&&V.level&&(Ve=N[V.level]),Q.userLogHandler=null===j?null:(Me,$e,...Ue)=>{const q=Ue.map(se=>{if(null==se)return null;if("string"==typeof se)return se;if("number"==typeof se||"boolean"==typeof se)return se.toString();if(se instanceof Error)return se.message;try{return JSON.stringify(se)}catch(Le){return null}}).filter(se=>se).join(" ");$e>=(null!=Ve?Ve:Me.logLevel)&&j({level:F[$e].toLowerCase(),message:q,args:Ue,type:Me.name})}}}},5861:(nt,Ie,P)=>{"use strict";function m(N,oe,ye,Ee,ae,de,_e){try{var j=N[de](_e),V=j.value}catch(Q){return void ye(Q)}j.done?oe(V):Promise.resolve(V).then(Ee,ae)}function F(N){return function(){var oe=this,ye=arguments;return new Promise(function(Ee,ae){var de=N.apply(oe,ye);function _e(V){m(de,Ee,ae,_e,j,"next",V)}function j(V){m(de,Ee,ae,_e,j,"throw",V)}_e(void 0)})}}P.d(Ie,{Z:()=>F})}},nt=>{nt(nt.s=53)}]);